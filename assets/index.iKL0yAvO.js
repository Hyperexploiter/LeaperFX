var y_=Object.defineProperty;var x_=(t,e,r)=>e in t?y_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var te=(t,e,r)=>x_(t,typeof e!="symbol"?e+"":e,r);function v_(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const l=Object.getOwnPropertyDescriptor(n,i);l&&Object.defineProperty(t,i,l.get?l:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();function os(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Mh={exports:{}},yl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rw;function b_(){if(Rw)return yl;Rw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,i,l){var u=null;if(l!==void 0&&(u=""+l),i.key!==void 0&&(u=""+i.key),"key"in i){l={};for(var d in i)d!=="key"&&(l[d]=i[d])}else l=i;return i=l.ref,{$$typeof:t,type:n,key:u,ref:i!==void 0?i:null,props:l}}return yl.Fragment=e,yl.jsx=r,yl.jsxs=r,yl}var kw;function w_(){return kw||(kw=1,Mh.exports=b_()),Mh.exports}var s=w_(),Ih={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ow;function S_(){if(Ow)return ke;Ow=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),x=Symbol.iterator;function w(F){return F===null||typeof F!="object"?null:(F=x&&F[x]||F["@@iterator"],typeof F=="function"?F:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,N={};function A(F,L,X){this.props=F,this.context=L,this.refs=N,this.updater=X||S}A.prototype.isReactComponent={},A.prototype.setState=function(F,L){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,L,"setState")},A.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function j(){}j.prototype=A.prototype;function E(F,L,X){this.props=F,this.context=L,this.refs=N,this.updater=X||S}var _=E.prototype=new j;_.constructor=E,C(_,A.prototype),_.isPureReactComponent=!0;var R=Array.isArray;function k(){}var D={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function z(F,L,X){var O=X.ref;return{$$typeof:t,type:F,key:L,ref:O!==void 0?O:null,props:X}}function V(F,L){return z(F.type,L,F.props)}function P(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function $(F){var L={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(X){return L[X]})}var Q=/\/+/g;function re(F,L){return typeof F=="object"&&F!==null&&F.key!=null?$(""+F.key):L.toString(36)}function ee(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(k,k):(F.status="pending",F.then(function(L){F.status==="pending"&&(F.status="fulfilled",F.value=L)},function(L){F.status==="pending"&&(F.status="rejected",F.reason=L)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function U(F,L,X,O,q){var Y=typeof F;(Y==="undefined"||Y==="boolean")&&(F=null);var le=!1;if(F===null)le=!0;else switch(Y){case"bigint":case"string":case"number":le=!0;break;case"object":switch(F.$$typeof){case t:case e:le=!0;break;case p:return le=F._init,U(le(F._payload),L,X,O,q)}}if(le)return q=q(F),le=O===""?"."+re(F,0):O,R(q)?(X="",le!=null&&(X=le.replace(Q,"$&/")+"/"),U(q,L,X,"",function(ae){return ae})):q!=null&&(P(q)&&(q=V(q,X+(q.key==null||F&&F.key===q.key?"":(""+q.key).replace(Q,"$&/")+"/")+le)),L.push(q)),1;le=0;var ye=O===""?".":O+":";if(R(F))for(var B=0;B<F.length;B++)O=F[B],Y=ye+re(O,B),le+=U(O,L,X,Y,q);else if(B=w(F),typeof B=="function")for(F=B.call(F),B=0;!(O=F.next()).done;)O=O.value,Y=ye+re(O,B++),le+=U(O,L,X,Y,q);else if(Y==="object"){if(typeof F.then=="function")return U(ee(F),L,X,O,q);throw L=String(F),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return le}function J(F,L,X){if(F==null)return F;var O=[],q=0;return U(F,O,"","",function(Y){return L.call(X,Y,q++)}),O}function pe(F){if(F._status===-1){var L=F._result;L=L(),L.then(function(X){(F._status===0||F._status===-1)&&(F._status=1,F._result=X)},function(X){(F._status===0||F._status===-1)&&(F._status=2,F._result=X)}),F._status===-1&&(F._status=0,F._result=L)}if(F._status===1)return F._result.default;throw F._result}var ce=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},oe={map:J,forEach:function(F,L,X){J(F,function(){L.apply(this,arguments)},X)},count:function(F){var L=0;return J(F,function(){L++}),L},toArray:function(F){return J(F,function(L){return L})||[]},only:function(F){if(!P(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return ke.Activity=g,ke.Children=oe,ke.Component=A,ke.Fragment=r,ke.Profiler=i,ke.PureComponent=E,ke.StrictMode=n,ke.Suspense=f,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,ke.__COMPILER_RUNTIME={__proto__:null,c:function(F){return D.H.useMemoCache(F)}},ke.cache=function(F){return function(){return F.apply(null,arguments)}},ke.cacheSignal=function(){return null},ke.cloneElement=function(F,L,X){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var O=C({},F.props),q=F.key;if(L!=null)for(Y in L.key!==void 0&&(q=""+L.key),L)!I.call(L,Y)||Y==="key"||Y==="__self"||Y==="__source"||Y==="ref"&&L.ref===void 0||(O[Y]=L[Y]);var Y=arguments.length-2;if(Y===1)O.children=X;else if(1<Y){for(var le=Array(Y),ye=0;ye<Y;ye++)le[ye]=arguments[ye+2];O.children=le}return z(F.type,q,O)},ke.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:l,_context:F},F},ke.createElement=function(F,L,X){var O,q={},Y=null;if(L!=null)for(O in L.key!==void 0&&(Y=""+L.key),L)I.call(L,O)&&O!=="key"&&O!=="__self"&&O!=="__source"&&(q[O]=L[O]);var le=arguments.length-2;if(le===1)q.children=X;else if(1<le){for(var ye=Array(le),B=0;B<le;B++)ye[B]=arguments[B+2];q.children=ye}if(F&&F.defaultProps)for(O in le=F.defaultProps,le)q[O]===void 0&&(q[O]=le[O]);return z(F,Y,q)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(F){return{$$typeof:d,render:F}},ke.isValidElement=P,ke.lazy=function(F){return{$$typeof:p,_payload:{_status:-1,_result:F},_init:pe}},ke.memo=function(F,L){return{$$typeof:h,type:F,compare:L===void 0?null:L}},ke.startTransition=function(F){var L=D.T,X={};D.T=X;try{var O=F(),q=D.S;q!==null&&q(X,O),typeof O=="object"&&O!==null&&typeof O.then=="function"&&O.then(k,ce)}catch(Y){ce(Y)}finally{L!==null&&X.types!==null&&(L.types=X.types),D.T=L}},ke.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},ke.use=function(F){return D.H.use(F)},ke.useActionState=function(F,L,X){return D.H.useActionState(F,L,X)},ke.useCallback=function(F,L){return D.H.useCallback(F,L)},ke.useContext=function(F){return D.H.useContext(F)},ke.useDebugValue=function(){},ke.useDeferredValue=function(F,L){return D.H.useDeferredValue(F,L)},ke.useEffect=function(F,L){return D.H.useEffect(F,L)},ke.useEffectEvent=function(F){return D.H.useEffectEvent(F)},ke.useId=function(){return D.H.useId()},ke.useImperativeHandle=function(F,L,X){return D.H.useImperativeHandle(F,L,X)},ke.useInsertionEffect=function(F,L){return D.H.useInsertionEffect(F,L)},ke.useLayoutEffect=function(F,L){return D.H.useLayoutEffect(F,L)},ke.useMemo=function(F,L){return D.H.useMemo(F,L)},ke.useOptimistic=function(F,L){return D.H.useOptimistic(F,L)},ke.useReducer=function(F,L,X){return D.H.useReducer(F,L,X)},ke.useRef=function(F){return D.H.useRef(F)},ke.useState=function(F){return D.H.useState(F)},ke.useSyncExternalStore=function(F,L,X){return D.H.useSyncExternalStore(F,L,X)},ke.useTransition=function(){return D.H.useTransition()},ke.version="19.2.0",ke}var Mw;function ls(){return Mw||(Mw=1,Ih.exports=S_()),Ih.exports}var b=ls();const cs=os(b),N_=v_({__proto__:null,default:cs},[b]);var Ph={exports:{}},xl={},Lh={exports:{}},Fh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iw;function C_(){return Iw||(Iw=1,(function(t){function e(U,J){var pe=U.length;U.push(J);e:for(;0<pe;){var ce=pe-1>>>1,oe=U[ce];if(0<i(oe,J))U[ce]=J,U[pe]=oe,pe=ce;else break e}}function r(U){return U.length===0?null:U[0]}function n(U){if(U.length===0)return null;var J=U[0],pe=U.pop();if(pe!==J){U[0]=pe;e:for(var ce=0,oe=U.length,F=oe>>>1;ce<F;){var L=2*(ce+1)-1,X=U[L],O=L+1,q=U[O];if(0>i(X,pe))O<oe&&0>i(q,X)?(U[ce]=q,U[O]=pe,ce=O):(U[ce]=X,U[L]=pe,ce=L);else if(O<oe&&0>i(q,pe))U[ce]=q,U[O]=pe,ce=O;else break e}}return J}function i(U,J){var pe=U.sortIndex-J.sortIndex;return pe!==0?pe:U.id-J.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var f=[],h=[],p=1,g=null,x=3,w=!1,S=!1,C=!1,N=!1,A=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function _(U){for(var J=r(h);J!==null;){if(J.callback===null)n(h);else if(J.startTime<=U)n(h),J.sortIndex=J.expirationTime,e(f,J);else break;J=r(h)}}function R(U){if(C=!1,_(U),!S)if(r(f)!==null)S=!0,k||(k=!0,$());else{var J=r(h);J!==null&&ee(R,J.startTime-U)}}var k=!1,D=-1,I=5,z=-1;function V(){return N?!0:!(t.unstable_now()-z<I)}function P(){if(N=!1,k){var U=t.unstable_now();z=U;var J=!0;try{e:{S=!1,C&&(C=!1,j(D),D=-1),w=!0;var pe=x;try{t:{for(_(U),g=r(f);g!==null&&!(g.expirationTime>U&&V());){var ce=g.callback;if(typeof ce=="function"){g.callback=null,x=g.priorityLevel;var oe=ce(g.expirationTime<=U);if(U=t.unstable_now(),typeof oe=="function"){g.callback=oe,_(U),J=!0;break t}g===r(f)&&n(f),_(U)}else n(f);g=r(f)}if(g!==null)J=!0;else{var F=r(h);F!==null&&ee(R,F.startTime-U),J=!1}}break e}finally{g=null,x=pe,w=!1}J=void 0}}finally{J?$():k=!1}}}var $;if(typeof E=="function")$=function(){E(P)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,re=Q.port2;Q.port1.onmessage=P,$=function(){re.postMessage(null)}}else $=function(){A(P,0)};function ee(U,J){D=A(function(){U(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(U){switch(x){case 1:case 2:case 3:var J=3;break;default:J=x}var pe=x;x=J;try{return U()}finally{x=pe}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(U,J){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var pe=x;x=U;try{return J()}finally{x=pe}},t.unstable_scheduleCallback=function(U,J,pe){var ce=t.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?ce+pe:ce):pe=ce,U){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=pe+oe,U={id:p++,callback:J,priorityLevel:U,startTime:pe,expirationTime:oe,sortIndex:-1},pe>ce?(U.sortIndex=pe,e(h,U),r(f)===null&&U===r(h)&&(C?(j(D),D=-1):C=!0,ee(R,pe-ce))):(U.sortIndex=oe,e(f,U),S||w||(S=!0,k||(k=!0,$()))),U},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(U){var J=x;return function(){var pe=x;x=J;try{return U.apply(this,arguments)}finally{x=pe}}}})(Fh)),Fh}var Pw;function j_(){return Pw||(Pw=1,Lh.exports=C_()),Lh.exports}var Uh={exports:{}},Zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lw;function A_(){if(Lw)return Zt;Lw=1;var t=ls();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},i=Symbol.for("react.portal");function l(f,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:f,containerInfo:h,implementation:p}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Zt.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return l(f,h,null,p)},Zt.flushSync=function(f){var h=u.T,p=n.p;try{if(u.T=null,n.p=2,f)return f()}finally{u.T=h,n.p=p,n.d.f()}},Zt.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(f,h))},Zt.prefetchDNS=function(f){typeof f=="string"&&n.d.D(f)},Zt.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,g=d(p,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?n.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:x,fetchPriority:w}):p==="script"&&n.d.X(f,{crossOrigin:g,integrity:x,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Zt.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=d(h.as,h.crossOrigin);n.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(f)},Zt.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=d(p,h.crossOrigin);n.d.L(f,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Zt.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=d(h.as,h.crossOrigin);n.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(f)},Zt.requestFormReset=function(f){n.d.r(f)},Zt.unstable_batchedUpdates=function(f,h){return f(h)},Zt.useFormState=function(f,h,p){return u.H.useFormState(f,h,p)},Zt.useFormStatus=function(){return u.H.useHostTransitionStatus()},Zt.version="19.2.0",Zt}var Fw;function ey(){if(Fw)return Uh.exports;Fw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Uh.exports=A_(),Uh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uw;function D_(){if(Uw)return xl;Uw=1;var t=j_(),e=ls(),r=ey();function n(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function l(a){var o=a,c=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(c=o.return),a=o.return;while(a)}return o.tag===3?c:null}function u(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function d(a){if(a.tag===31){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function f(a){if(l(a)!==a)throw Error(n(188))}function h(a){var o=a.alternate;if(!o){if(o=l(a),o===null)throw Error(n(188));return o!==a?null:a}for(var c=a,m=o;;){var y=c.return;if(y===null)break;var v=y.alternate;if(v===null){if(m=y.return,m!==null){c=m;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===c)return f(y),a;if(v===m)return f(y),o;v=v.sibling}throw Error(n(188))}if(c.return!==m.return)c=y,m=v;else{for(var T=!1,M=y.child;M;){if(M===c){T=!0,c=y,m=v;break}if(M===m){T=!0,m=y,c=v;break}M=M.sibling}if(!T){for(M=v.child;M;){if(M===c){T=!0,c=v,m=y;break}if(M===m){T=!0,m=v,c=y;break}M=M.sibling}if(!T)throw Error(n(189))}}if(c.alternate!==m)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?a:o}function p(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=p(a),o!==null)return o;a=a.sibling}return null}var g=Object.assign,x=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),E=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function $(a){return a===null||typeof a!="object"?null:(a=P&&a[P]||a["@@iterator"],typeof a=="function"?a:null)}var Q=Symbol.for("react.client.reference");function re(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===Q?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case C:return"Fragment";case A:return"Profiler";case N:return"StrictMode";case R:return"Suspense";case k:return"SuspenseList";case z:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case S:return"Portal";case E:return a.displayName||"Context";case j:return(a._context.displayName||"Context")+".Consumer";case _:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case D:return o=a.displayName||null,o!==null?o:re(a.type)||"Memo";case I:o=a._payload,a=a._init;try{return re(a(o))}catch{}}return null}var ee=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},ce=[],oe=-1;function F(a){return{current:a}}function L(a){0>oe||(a.current=ce[oe],ce[oe]=null,oe--)}function X(a,o){oe++,ce[oe]=a.current,a.current=o}var O=F(null),q=F(null),Y=F(null),le=F(null);function ye(a,o){switch(X(Y,o),X(q,a),X(O,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?ew(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=ew(o),a=tw(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}L(O),X(O,a)}function B(){L(O),L(q),L(Y)}function ae(a){a.memoizedState!==null&&X(le,a);var o=O.current,c=tw(o,a.type);o!==c&&(X(q,a),X(O,c))}function de(a){q.current===a&&(L(O),L(q)),le.current===a&&(L(le),fl._currentValue=pe)}var Z,ve;function xe(a){if(Z===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);Z=o&&o[1]||"",ve=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Z+a+ve}var be=!1;function Ae(a,o){if(!a||be)return"";be=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(ue){var ie=ue}Reflect.construct(a,[],ge)}else{try{ge.call()}catch(ue){ie=ue}a.call(ge.prototype)}}else{try{throw Error()}catch(ue){ie=ue}(ge=a())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(ue){if(ue&&ie&&typeof ue.stack=="string")return[ue.stack,ie.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=m.DetermineComponentFrameRoot(),T=v[0],M=v[1];if(T&&M){var H=T.split(`
`),se=M.split(`
`);for(y=m=0;m<H.length&&!H[m].includes("DetermineComponentFrameRoot");)m++;for(;y<se.length&&!se[y].includes("DetermineComponentFrameRoot");)y++;if(m===H.length||y===se.length)for(m=H.length-1,y=se.length-1;1<=m&&0<=y&&H[m]!==se[y];)y--;for(;1<=m&&0<=y;m--,y--)if(H[m]!==se[y]){if(m!==1||y!==1)do if(m--,y--,0>y||H[m]!==se[y]){var fe=`
`+H[m].replace(" at new "," at ");return a.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",a.displayName)),fe}while(1<=m&&0<=y);break}}}finally{be=!1,Error.prepareStackTrace=c}return(c=a?a.displayName||a.name:"")?xe(c):""}function Ie(a,o){switch(a.tag){case 26:case 27:case 5:return xe(a.type);case 16:return xe("Lazy");case 13:return a.child!==o&&o!==null?xe("Suspense Fallback"):xe("Suspense");case 19:return xe("SuspenseList");case 0:case 15:return Ae(a.type,!1);case 11:return Ae(a.type.render,!1);case 1:return Ae(a.type,!0);case 31:return xe("Activity");default:return""}}function ct(a){try{var o="",c=null;do o+=Ie(a,c),c=a,a=a.return;while(a);return o}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var kt=Object.prototype.hasOwnProperty,ys=t.unstable_scheduleCallback,Ca=t.unstable_cancelCallback,ja=t.unstable_shouldYield,gm=t.unstable_requestPaint,Ct=t.unstable_now,ym=t.unstable_getCurrentPriorityLevel,mi=t.unstable_ImmediatePriority,mc=t.unstable_UserBlockingPriority,In=t.unstable_NormalPriority,xm=t.unstable_LowPriority,fc=t.unstable_IdlePriority,hc=t.log,vm=t.unstable_setDisableYieldValue,xs=null,nr=null;function wn(a){if(typeof hc=="function"&&vm(a),nr&&typeof nr.setStrictMode=="function")try{nr.setStrictMode(xs,a)}catch{}}var ar=Math.clz32?Math.clz32:Se,K=Math.log,we=Math.LN2;function Se(a){return a>>>=0,a===0?32:31-(K(a)/we|0)|0}var Ee=256,Le=262144,Ye=4194304;function jt(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function xt(a,o,c){var m=a.pendingLanes;if(m===0)return 0;var y=0,v=a.suspendedLanes,T=a.pingedLanes;a=a.warmLanes;var M=m&134217727;return M!==0?(m=M&~v,m!==0?y=jt(m):(T&=M,T!==0?y=jt(T):c||(c=M&~a,c!==0&&(y=jt(c))))):(M=m&~v,M!==0?y=jt(M):T!==0?y=jt(T):c||(c=m&~a,c!==0&&(y=jt(c)))),y===0?0:o!==0&&o!==y&&(o&v)===0&&(v=y&-y,c=o&-o,v>=c||v===32&&(c&4194048)!==0)?o:y}function on(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function bm(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function I0(){var a=Ye;return Ye<<=1,(Ye&62914560)===0&&(Ye=4194304),a}function wm(a){for(var o=[],c=0;31>c;c++)o.push(a);return o}function Do(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function sT(a,o,c,m,y,v){var T=a.pendingLanes;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=c,a.entangledLanes&=c,a.errorRecoveryDisabledLanes&=c,a.shellSuspendCounter=0;var M=a.entanglements,H=a.expirationTimes,se=a.hiddenUpdates;for(c=T&~c;0<c;){var fe=31-ar(c),ge=1<<fe;M[fe]=0,H[fe]=-1;var ie=se[fe];if(ie!==null)for(se[fe]=null,fe=0;fe<ie.length;fe++){var ue=ie[fe];ue!==null&&(ue.lane&=-536870913)}c&=~ge}m!==0&&P0(a,m,0),v!==0&&y===0&&a.tag!==0&&(a.suspendedLanes|=v&~(T&~o))}function P0(a,o,c){a.pendingLanes|=o,a.suspendedLanes&=~o;var m=31-ar(o);a.entangledLanes|=o,a.entanglements[m]=a.entanglements[m]|1073741824|c&261930}function L0(a,o){var c=a.entangledLanes|=o;for(a=a.entanglements;c;){var m=31-ar(c),y=1<<m;y&o|a[m]&o&&(a[m]|=o),c&=~y}}function F0(a,o){var c=o&-o;return c=(c&42)!==0?1:Sm(c),(c&(a.suspendedLanes|o))!==0?0:c}function Sm(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Nm(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function U0(){var a=J.p;return a!==0?a:(a=window.event,a===void 0?32:Cw(a.type))}function $0(a,o){var c=J.p;try{return J.p=a,o()}finally{J.p=c}}var Aa=Math.random().toString(36).slice(2),zt="__reactFiber$"+Aa,fr="__reactProps$"+Aa,fi="__reactContainer$"+Aa,Cm="__reactEvents$"+Aa,iT="__reactListeners$"+Aa,oT="__reactHandles$"+Aa,z0="__reactResources$"+Aa,To="__reactMarker$"+Aa;function jm(a){delete a[zt],delete a[fr],delete a[Cm],delete a[iT],delete a[oT]}function hi(a){var o=a[zt];if(o)return o;for(var c=a.parentNode;c;){if(o=c[fi]||c[zt]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(a=lw(a);a!==null;){if(c=a[zt])return c;a=lw(a)}return o}a=c,c=a.parentNode}return null}function pi(a){if(a=a[zt]||a[fi]){var o=a.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return a}return null}function Eo(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(n(33))}function gi(a){var o=a[z0];return o||(o=a[z0]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Lt(a){a[To]=!0}var B0=new Set,q0={};function vs(a,o){yi(a,o),yi(a+"Capture",o)}function yi(a,o){for(q0[a]=o,a=0;a<o.length;a++)B0.add(o[a])}var lT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),H0={},V0={};function cT(a){return kt.call(V0,a)?!0:kt.call(H0,a)?!1:lT.test(a)?V0[a]=!0:(H0[a]=!0,!1)}function pc(a,o,c){if(cT(o))if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+c)}}function gc(a,o,c){if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+c)}}function Pn(a,o,c,m){if(m===null)a.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttributeNS(o,c,""+m)}}function Br(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Y0(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function uT(a,o,c){var m=Object.getOwnPropertyDescriptor(a.constructor.prototype,o);if(!a.hasOwnProperty(o)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var y=m.get,v=m.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return y.call(this)},set:function(T){c=""+T,v.call(this,T)}}),Object.defineProperty(a,o,{enumerable:m.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function Am(a){if(!a._valueTracker){var o=Y0(a)?"checked":"value";a._valueTracker=uT(a,o,""+a[o])}}function G0(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var c=o.getValue(),m="";return a&&(m=Y0(a)?a.checked?"true":"false":a.value),a=m,a!==c?(o.setValue(a),!0):!1}function yc(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var dT=/[\n"\\]/g;function qr(a){return a.replace(dT,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Dm(a,o,c,m,y,v,T,M){a.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?a.type=T:a.removeAttribute("type"),o!=null?T==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+Br(o)):a.value!==""+Br(o)&&(a.value=""+Br(o)):T!=="submit"&&T!=="reset"||a.removeAttribute("value"),o!=null?Tm(a,T,Br(o)):c!=null?Tm(a,T,Br(c)):m!=null&&a.removeAttribute("value"),y==null&&v!=null&&(a.defaultChecked=!!v),y!=null&&(a.checked=y&&typeof y!="function"&&typeof y!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?a.name=""+Br(M):a.removeAttribute("name")}function X0(a,o,c,m,y,v,T,M){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(a.type=v),o!=null||c!=null){if(!(v!=="submit"&&v!=="reset"||o!=null)){Am(a);return}c=c!=null?""+Br(c):"",o=o!=null?""+Br(o):c,M||o===a.value||(a.value=o),a.defaultValue=o}m=m??y,m=typeof m!="function"&&typeof m!="symbol"&&!!m,a.checked=M?a.checked:!!m,a.defaultChecked=!!m,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(a.name=T),Am(a)}function Tm(a,o,c){o==="number"&&yc(a.ownerDocument)===a||a.defaultValue===""+c||(a.defaultValue=""+c)}function xi(a,o,c,m){if(a=a.options,o){o={};for(var y=0;y<c.length;y++)o["$"+c[y]]=!0;for(c=0;c<a.length;c++)y=o.hasOwnProperty("$"+a[c].value),a[c].selected!==y&&(a[c].selected=y),y&&m&&(a[c].defaultSelected=!0)}else{for(c=""+Br(c),o=null,y=0;y<a.length;y++){if(a[y].value===c){a[y].selected=!0,m&&(a[y].defaultSelected=!0);return}o!==null||a[y].disabled||(o=a[y])}o!==null&&(o.selected=!0)}}function K0(a,o,c){if(o!=null&&(o=""+Br(o),o!==a.value&&(a.value=o),c==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=c!=null?""+Br(c):""}function W0(a,o,c,m){if(o==null){if(m!=null){if(c!=null)throw Error(n(92));if(ee(m)){if(1<m.length)throw Error(n(93));m=m[0]}c=m}c==null&&(c=""),o=c}c=Br(o),a.defaultValue=c,m=a.textContent,m===c&&m!==""&&m!==null&&(a.value=m),Am(a)}function vi(a,o){if(o){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=o;return}}a.textContent=o}var mT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Q0(a,o,c){var m=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?m?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":m?a.setProperty(o,c):typeof c!="number"||c===0||mT.has(o)?o==="float"?a.cssFloat=c:a[o]=(""+c).trim():a[o]=c+"px"}function Z0(a,o,c){if(o!=null&&typeof o!="object")throw Error(n(62));if(a=a.style,c!=null){for(var m in c)!c.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?a.setProperty(m,""):m==="float"?a.cssFloat="":a[m]="");for(var y in o)m=o[y],o.hasOwnProperty(y)&&c[y]!==m&&Q0(a,y,m)}else for(var v in o)o.hasOwnProperty(v)&&Q0(a,v,o[v])}function Em(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xc(a){return hT.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function Ln(){}var _m=null;function Rm(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var bi=null,wi=null;function J0(a){var o=pi(a);if(o&&(a=o.stateNode)){var c=a[fr]||null;e:switch(a=o.stateNode,o.type){case"input":if(Dm(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+qr(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var m=c[o];if(m!==a&&m.form===a.form){var y=m[fr]||null;if(!y)throw Error(n(90));Dm(m,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<c.length;o++)m=c[o],m.form===a.form&&G0(m)}break e;case"textarea":K0(a,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&xi(a,!!c.multiple,o,!1)}}}var km=!1;function ex(a,o,c){if(km)return a(o,c);km=!0;try{var m=a(o);return m}finally{if(km=!1,(bi!==null||wi!==null)&&(su(),bi&&(o=bi,a=wi,wi=bi=null,J0(o),a)))for(o=0;o<a.length;o++)J0(a[o])}}function _o(a,o){var c=a.stateNode;if(c===null)return null;var m=c[fr]||null;if(m===null)return null;c=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(a=a.type,m=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(n(231,o,typeof c));return c}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Om=!1;if(Fn)try{var Ro={};Object.defineProperty(Ro,"passive",{get:function(){Om=!0}}),window.addEventListener("test",Ro,Ro),window.removeEventListener("test",Ro,Ro)}catch{Om=!1}var Da=null,Mm=null,vc=null;function tx(){if(vc)return vc;var a,o=Mm,c=o.length,m,y="value"in Da?Da.value:Da.textContent,v=y.length;for(a=0;a<c&&o[a]===y[a];a++);var T=c-a;for(m=1;m<=T&&o[c-m]===y[v-m];m++);return vc=y.slice(a,1<m?1-m:void 0)}function bc(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function wc(){return!0}function rx(){return!1}function hr(a){function o(c,m,y,v,T){this._reactName=c,this._targetInst=y,this.type=m,this.nativeEvent=v,this.target=T,this.currentTarget=null;for(var M in a)a.hasOwnProperty(M)&&(c=a[M],this[M]=c?c(v):v[M]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?wc:rx,this.isPropagationStopped=rx,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=wc)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=wc)},persist:function(){},isPersistent:wc}),o}var bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sc=hr(bs),ko=g({},bs,{view:0,detail:0}),pT=hr(ko),Im,Pm,Oo,Nc=g({},ko,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fm,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Oo&&(Oo&&a.type==="mousemove"?(Im=a.screenX-Oo.screenX,Pm=a.screenY-Oo.screenY):Pm=Im=0,Oo=a),Im)},movementY:function(a){return"movementY"in a?a.movementY:Pm}}),nx=hr(Nc),gT=g({},Nc,{dataTransfer:0}),yT=hr(gT),xT=g({},ko,{relatedTarget:0}),Lm=hr(xT),vT=g({},bs,{animationName:0,elapsedTime:0,pseudoElement:0}),bT=hr(vT),wT=g({},bs,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),ST=hr(wT),NT=g({},bs,{data:0}),ax=hr(NT),CT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DT(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=AT[a])?!!o[a]:!1}function Fm(){return DT}var TT=g({},ko,{key:function(a){if(a.key){var o=CT[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=bc(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?jT[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fm,charCode:function(a){return a.type==="keypress"?bc(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?bc(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),ET=hr(TT),_T=g({},Nc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sx=hr(_T),RT=g({},ko,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fm}),kT=hr(RT),OT=g({},bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),MT=hr(OT),IT=g({},Nc,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),PT=hr(IT),LT=g({},bs,{newState:0,oldState:0}),FT=hr(LT),UT=[9,13,27,32],Um=Fn&&"CompositionEvent"in window,Mo=null;Fn&&"documentMode"in document&&(Mo=document.documentMode);var $T=Fn&&"TextEvent"in window&&!Mo,ix=Fn&&(!Um||Mo&&8<Mo&&11>=Mo),ox=" ",lx=!1;function cx(a,o){switch(a){case"keyup":return UT.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ux(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Si=!1;function zT(a,o){switch(a){case"compositionend":return ux(o);case"keypress":return o.which!==32?null:(lx=!0,ox);case"textInput":return a=o.data,a===ox&&lx?null:a;default:return null}}function BT(a,o){if(Si)return a==="compositionend"||!Um&&cx(a,o)?(a=tx(),vc=Mm=Da=null,Si=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ix&&o.locale!=="ko"?null:o.data;default:return null}}var qT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dx(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!qT[a.type]:o==="textarea"}function mx(a,o,c,m){bi?wi?wi.push(m):wi=[m]:bi=m,o=mu(o,"onChange"),0<o.length&&(c=new Sc("onChange","change",null,c,m),a.push({event:c,listeners:o}))}var Io=null,Po=null;function HT(a){Xb(a,0)}function Cc(a){var o=Eo(a);if(G0(o))return a}function fx(a,o){if(a==="change")return o}var hx=!1;if(Fn){var $m;if(Fn){var zm="oninput"in document;if(!zm){var px=document.createElement("div");px.setAttribute("oninput","return;"),zm=typeof px.oninput=="function"}$m=zm}else $m=!1;hx=$m&&(!document.documentMode||9<document.documentMode)}function gx(){Io&&(Io.detachEvent("onpropertychange",yx),Po=Io=null)}function yx(a){if(a.propertyName==="value"&&Cc(Po)){var o=[];mx(o,Po,a,Rm(a)),ex(HT,o)}}function VT(a,o,c){a==="focusin"?(gx(),Io=o,Po=c,Io.attachEvent("onpropertychange",yx)):a==="focusout"&&gx()}function YT(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Cc(Po)}function GT(a,o){if(a==="click")return Cc(o)}function XT(a,o){if(a==="input"||a==="change")return Cc(o)}function KT(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var jr=typeof Object.is=="function"?Object.is:KT;function Lo(a,o){if(jr(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var c=Object.keys(a),m=Object.keys(o);if(c.length!==m.length)return!1;for(m=0;m<c.length;m++){var y=c[m];if(!kt.call(o,y)||!jr(a[y],o[y]))return!1}return!0}function xx(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function vx(a,o){var c=xx(a);a=0;for(var m;c;){if(c.nodeType===3){if(m=a+c.textContent.length,a<=o&&m>=o)return{node:c,offset:o-a};a=m}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=xx(c)}}function bx(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?bx(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function wx(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=yc(a.document);o instanceof a.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)a=o.contentWindow;else break;o=yc(a.document)}return o}function Bm(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var WT=Fn&&"documentMode"in document&&11>=document.documentMode,Ni=null,qm=null,Fo=null,Hm=!1;function Sx(a,o,c){var m=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Hm||Ni==null||Ni!==yc(m)||(m=Ni,"selectionStart"in m&&Bm(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Fo&&Lo(Fo,m)||(Fo=m,m=mu(qm,"onSelect"),0<m.length&&(o=new Sc("onSelect","select",null,o,c),a.push({event:o,listeners:m}),o.target=Ni)))}function ws(a,o){var c={};return c[a.toLowerCase()]=o.toLowerCase(),c["Webkit"+a]="webkit"+o,c["Moz"+a]="moz"+o,c}var Ci={animationend:ws("Animation","AnimationEnd"),animationiteration:ws("Animation","AnimationIteration"),animationstart:ws("Animation","AnimationStart"),transitionrun:ws("Transition","TransitionRun"),transitionstart:ws("Transition","TransitionStart"),transitioncancel:ws("Transition","TransitionCancel"),transitionend:ws("Transition","TransitionEnd")},Vm={},Nx={};Fn&&(Nx=document.createElement("div").style,"AnimationEvent"in window||(delete Ci.animationend.animation,delete Ci.animationiteration.animation,delete Ci.animationstart.animation),"TransitionEvent"in window||delete Ci.transitionend.transition);function Ss(a){if(Vm[a])return Vm[a];if(!Ci[a])return a;var o=Ci[a],c;for(c in o)if(o.hasOwnProperty(c)&&c in Nx)return Vm[a]=o[c];return a}var Cx=Ss("animationend"),jx=Ss("animationiteration"),Ax=Ss("animationstart"),QT=Ss("transitionrun"),ZT=Ss("transitionstart"),JT=Ss("transitioncancel"),Dx=Ss("transitionend"),Tx=new Map,Ym="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ym.push("scrollEnd");function ln(a,o){Tx.set(a,o),vs(o,[a])}var jc=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Hr=[],ji=0,Gm=0;function Ac(){for(var a=ji,o=Gm=ji=0;o<a;){var c=Hr[o];Hr[o++]=null;var m=Hr[o];Hr[o++]=null;var y=Hr[o];Hr[o++]=null;var v=Hr[o];if(Hr[o++]=null,m!==null&&y!==null){var T=m.pending;T===null?y.next=y:(y.next=T.next,T.next=y),m.pending=y}v!==0&&Ex(c,y,v)}}function Dc(a,o,c,m){Hr[ji++]=a,Hr[ji++]=o,Hr[ji++]=c,Hr[ji++]=m,Gm|=m,a.lanes|=m,a=a.alternate,a!==null&&(a.lanes|=m)}function Xm(a,o,c,m){return Dc(a,o,c,m),Tc(a)}function Ns(a,o){return Dc(a,null,null,o),Tc(a)}function Ex(a,o,c){a.lanes|=c;var m=a.alternate;m!==null&&(m.lanes|=c);for(var y=!1,v=a.return;v!==null;)v.childLanes|=c,m=v.alternate,m!==null&&(m.childLanes|=c),v.tag===22&&(a=v.stateNode,a===null||a._visibility&1||(y=!0)),a=v,v=v.return;return a.tag===3?(v=a.stateNode,y&&o!==null&&(y=31-ar(c),a=v.hiddenUpdates,m=a[y],m===null?a[y]=[o]:m.push(o),o.lane=c|536870912),v):null}function Tc(a){if(50<il)throw il=0,ah=null,Error(n(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var Ai={};function eE(a,o,c,m){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ar(a,o,c,m){return new eE(a,o,c,m)}function Km(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Un(a,o){var c=a.alternate;return c===null?(c=Ar(a.tag,o,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=o,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&65011712,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,o=a.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c.refCleanup=a.refCleanup,c}function _x(a,o){a.flags&=65011714;var c=a.alternate;return c===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,o=c.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Ec(a,o,c,m,y,v){var T=0;if(m=a,typeof a=="function")Km(a)&&(T=1);else if(typeof a=="string")T=s_(a,c,O.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case z:return a=Ar(31,c,o,y),a.elementType=z,a.lanes=v,a;case C:return Cs(c.children,y,v,o);case N:T=8,y|=24;break;case A:return a=Ar(12,c,o,y|2),a.elementType=A,a.lanes=v,a;case R:return a=Ar(13,c,o,y),a.elementType=R,a.lanes=v,a;case k:return a=Ar(19,c,o,y),a.elementType=k,a.lanes=v,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case E:T=10;break e;case j:T=9;break e;case _:T=11;break e;case D:T=14;break e;case I:T=16,m=null;break e}T=29,c=Error(n(130,a===null?"null":typeof a,"")),m=null}return o=Ar(T,c,o,y),o.elementType=a,o.type=m,o.lanes=v,o}function Cs(a,o,c,m){return a=Ar(7,a,m,o),a.lanes=c,a}function Wm(a,o,c){return a=Ar(6,a,null,o),a.lanes=c,a}function Rx(a){var o=Ar(18,null,null,0);return o.stateNode=a,o}function Qm(a,o,c){return o=Ar(4,a.children!==null?a.children:[],a.key,o),o.lanes=c,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var kx=new WeakMap;function Vr(a,o){if(typeof a=="object"&&a!==null){var c=kx.get(a);return c!==void 0?c:(o={value:a,source:o,stack:ct(o)},kx.set(a,o),o)}return{value:a,source:o,stack:ct(o)}}var Di=[],Ti=0,_c=null,Uo=0,Yr=[],Gr=0,Ta=null,Sn=1,Nn="";function $n(a,o){Di[Ti++]=Uo,Di[Ti++]=_c,_c=a,Uo=o}function Ox(a,o,c){Yr[Gr++]=Sn,Yr[Gr++]=Nn,Yr[Gr++]=Ta,Ta=a;var m=Sn;a=Nn;var y=32-ar(m)-1;m&=~(1<<y),c+=1;var v=32-ar(o)+y;if(30<v){var T=y-y%5;v=(m&(1<<T)-1).toString(32),m>>=T,y-=T,Sn=1<<32-ar(o)+y|c<<y|m,Nn=v+a}else Sn=1<<v|c<<y|m,Nn=a}function Zm(a){a.return!==null&&($n(a,1),Ox(a,1,0))}function Jm(a){for(;a===_c;)_c=Di[--Ti],Di[Ti]=null,Uo=Di[--Ti],Di[Ti]=null;for(;a===Ta;)Ta=Yr[--Gr],Yr[Gr]=null,Nn=Yr[--Gr],Yr[Gr]=null,Sn=Yr[--Gr],Yr[Gr]=null}function Mx(a,o){Yr[Gr++]=Sn,Yr[Gr++]=Nn,Yr[Gr++]=Ta,Sn=o.id,Nn=o.overflow,Ta=a}var Bt=null,it=null,qe=!1,Ea=null,Xr=!1,ef=Error(n(519));function _a(a){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $o(Vr(o,a)),ef}function Ix(a){var o=a.stateNode,c=a.type,m=a.memoizedProps;switch(o[zt]=a,o[fr]=m,c){case"dialog":$e("cancel",o),$e("close",o);break;case"iframe":case"object":case"embed":$e("load",o);break;case"video":case"audio":for(c=0;c<ll.length;c++)$e(ll[c],o);break;case"source":$e("error",o);break;case"img":case"image":case"link":$e("error",o),$e("load",o);break;case"details":$e("toggle",o);break;case"input":$e("invalid",o),X0(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":$e("invalid",o);break;case"textarea":$e("invalid",o),W0(o,m.value,m.defaultValue,m.children)}c=m.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||m.suppressHydrationWarning===!0||Zb(o.textContent,c)?(m.popover!=null&&($e("beforetoggle",o),$e("toggle",o)),m.onScroll!=null&&$e("scroll",o),m.onScrollEnd!=null&&$e("scrollend",o),m.onClick!=null&&(o.onclick=Ln),o=!0):o=!1,o||_a(a,!0)}function Px(a){for(Bt=a.return;Bt;)switch(Bt.tag){case 5:case 31:case 13:Xr=!1;return;case 27:case 3:Xr=!0;return;default:Bt=Bt.return}}function Ei(a){if(a!==Bt)return!1;if(!qe)return Px(a),qe=!0,!1;var o=a.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=a.type,c=!(c!=="form"&&c!=="button")||vh(a.type,a.memoizedProps)),c=!c),c&&it&&_a(a),Px(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));it=ow(a)}else if(o===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));it=ow(a)}else o===27?(o=it,Ha(a.type)?(a=Ch,Ch=null,it=a):it=o):it=Bt?Wr(a.stateNode.nextSibling):null;return!0}function js(){it=Bt=null,qe=!1}function tf(){var a=Ea;return a!==null&&(xr===null?xr=a:xr.push.apply(xr,a),Ea=null),a}function $o(a){Ea===null?Ea=[a]:Ea.push(a)}var rf=F(null),As=null,zn=null;function Ra(a,o,c){X(rf,o._currentValue),o._currentValue=c}function Bn(a){a._currentValue=rf.current,L(rf)}function nf(a,o,c){for(;a!==null;){var m=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),a===c)break;a=a.return}}function af(a,o,c,m){var y=a.child;for(y!==null&&(y.return=a);y!==null;){var v=y.dependencies;if(v!==null){var T=y.child;v=v.firstContext;e:for(;v!==null;){var M=v;v=y;for(var H=0;H<o.length;H++)if(M.context===o[H]){v.lanes|=c,M=v.alternate,M!==null&&(M.lanes|=c),nf(v.return,c,a),m||(T=null);break e}v=M.next}}else if(y.tag===18){if(T=y.return,T===null)throw Error(n(341));T.lanes|=c,v=T.alternate,v!==null&&(v.lanes|=c),nf(T,c,a),T=null}else T=y.child;if(T!==null)T.return=y;else for(T=y;T!==null;){if(T===a){T=null;break}if(y=T.sibling,y!==null){y.return=T.return,T=y;break}T=T.return}y=T}}function _i(a,o,c,m){a=null;for(var y=o,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var T=y.alternate;if(T===null)throw Error(n(387));if(T=T.memoizedProps,T!==null){var M=y.type;jr(y.pendingProps.value,T.value)||(a!==null?a.push(M):a=[M])}}else if(y===le.current){if(T=y.alternate,T===null)throw Error(n(387));T.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(a!==null?a.push(fl):a=[fl])}y=y.return}a!==null&&af(o,a,c,m),o.flags|=262144}function Rc(a){for(a=a.firstContext;a!==null;){if(!jr(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ds(a){As=a,zn=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function qt(a){return Lx(As,a)}function kc(a,o){return As===null&&Ds(a),Lx(a,o)}function Lx(a,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},zn===null){if(a===null)throw Error(n(308));zn=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else zn=zn.next=o;return c}var tE=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(c,m){a.push(m)}};this.abort=function(){o.aborted=!0,a.forEach(function(c){return c()})}},rE=t.unstable_scheduleCallback,nE=t.unstable_NormalPriority,At={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sf(){return{controller:new tE,data:new Map,refCount:0}}function zo(a){a.refCount--,a.refCount===0&&rE(nE,function(){a.controller.abort()})}var Bo=null,of=0,Ri=0,ki=null;function aE(a,o){if(Bo===null){var c=Bo=[];of=0,Ri=uh(),ki={status:"pending",value:void 0,then:function(m){c.push(m)}}}return of++,o.then(Fx,Fx),o}function Fx(){if(--of===0&&Bo!==null){ki!==null&&(ki.status="fulfilled");var a=Bo;Bo=null,Ri=0,ki=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function sE(a,o){var c=[],m={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return a.then(function(){m.status="fulfilled",m.value=o;for(var y=0;y<c.length;y++)(0,c[y])(o)},function(y){for(m.status="rejected",m.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),m}var Ux=U.S;U.S=function(a,o){Sb=Ct(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&aE(a,o),Ux!==null&&Ux(a,o)};var Ts=F(null);function lf(){var a=Ts.current;return a!==null?a:nt.pooledCache}function Oc(a,o){o===null?X(Ts,Ts.current):X(Ts,o.pool)}function $x(){var a=lf();return a===null?null:{parent:At._currentValue,pool:a}}var Oi=Error(n(460)),cf=Error(n(474)),Mc=Error(n(542)),Ic={then:function(){}};function zx(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Bx(a,o,c){switch(c=a[c],c===void 0?a.push(o):c!==o&&(o.then(Ln,Ln),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Hx(a),a;default:if(typeof o.status=="string")o.then(Ln,Ln);else{if(a=nt,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=o,a.status="pending",a.then(function(m){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=m}},function(m){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Hx(a),a}throw _s=o,Oi}}function Es(a){try{var o=a._init;return o(a._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(_s=c,Oi):c}}var _s=null;function qx(){if(_s===null)throw Error(n(459));var a=_s;return _s=null,a}function Hx(a){if(a===Oi||a===Mc)throw Error(n(483))}var Mi=null,qo=0;function Pc(a){var o=qo;return qo+=1,Mi===null&&(Mi=[]),Bx(Mi,a,o)}function Ho(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function Lc(a,o){throw o.$$typeof===x?Error(n(525)):(a=Object.prototype.toString.call(o),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function Vx(a){function o(W,G){if(a){var ne=W.deletions;ne===null?(W.deletions=[G],W.flags|=16):ne.push(G)}}function c(W,G){if(!a)return null;for(;G!==null;)o(W,G),G=G.sibling;return null}function m(W){for(var G=new Map;W!==null;)W.key!==null?G.set(W.key,W):G.set(W.index,W),W=W.sibling;return G}function y(W,G){return W=Un(W,G),W.index=0,W.sibling=null,W}function v(W,G,ne){return W.index=ne,a?(ne=W.alternate,ne!==null?(ne=ne.index,ne<G?(W.flags|=67108866,G):ne):(W.flags|=67108866,G)):(W.flags|=1048576,G)}function T(W){return a&&W.alternate===null&&(W.flags|=67108866),W}function M(W,G,ne,he){return G===null||G.tag!==6?(G=Wm(ne,W.mode,he),G.return=W,G):(G=y(G,ne),G.return=W,G)}function H(W,G,ne,he){var Te=ne.type;return Te===C?fe(W,G,ne.props.children,he,ne.key):G!==null&&(G.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===I&&Es(Te)===G.type)?(G=y(G,ne.props),Ho(G,ne),G.return=W,G):(G=Ec(ne.type,ne.key,ne.props,null,W.mode,he),Ho(G,ne),G.return=W,G)}function se(W,G,ne,he){return G===null||G.tag!==4||G.stateNode.containerInfo!==ne.containerInfo||G.stateNode.implementation!==ne.implementation?(G=Qm(ne,W.mode,he),G.return=W,G):(G=y(G,ne.children||[]),G.return=W,G)}function fe(W,G,ne,he,Te){return G===null||G.tag!==7?(G=Cs(ne,W.mode,he,Te),G.return=W,G):(G=y(G,ne),G.return=W,G)}function ge(W,G,ne){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Wm(""+G,W.mode,ne),G.return=W,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case w:return ne=Ec(G.type,G.key,G.props,null,W.mode,ne),Ho(ne,G),ne.return=W,ne;case S:return G=Qm(G,W.mode,ne),G.return=W,G;case I:return G=Es(G),ge(W,G,ne)}if(ee(G)||$(G))return G=Cs(G,W.mode,ne,null),G.return=W,G;if(typeof G.then=="function")return ge(W,Pc(G),ne);if(G.$$typeof===E)return ge(W,kc(W,G),ne);Lc(W,G)}return null}function ie(W,G,ne,he){var Te=G!==null?G.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Te!==null?null:M(W,G,""+ne,he);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case w:return ne.key===Te?H(W,G,ne,he):null;case S:return ne.key===Te?se(W,G,ne,he):null;case I:return ne=Es(ne),ie(W,G,ne,he)}if(ee(ne)||$(ne))return Te!==null?null:fe(W,G,ne,he,null);if(typeof ne.then=="function")return ie(W,G,Pc(ne),he);if(ne.$$typeof===E)return ie(W,G,kc(W,ne),he);Lc(W,ne)}return null}function ue(W,G,ne,he,Te){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return W=W.get(ne)||null,M(G,W,""+he,Te);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case w:return W=W.get(he.key===null?ne:he.key)||null,H(G,W,he,Te);case S:return W=W.get(he.key===null?ne:he.key)||null,se(G,W,he,Te);case I:return he=Es(he),ue(W,G,ne,he,Te)}if(ee(he)||$(he))return W=W.get(ne)||null,fe(G,W,he,Te,null);if(typeof he.then=="function")return ue(W,G,ne,Pc(he),Te);if(he.$$typeof===E)return ue(W,G,ne,kc(G,he),Te);Lc(G,he)}return null}function je(W,G,ne,he){for(var Te=null,Ge=null,De=G,Pe=G=0,Be=null;De!==null&&Pe<ne.length;Pe++){De.index>Pe?(Be=De,De=null):Be=De.sibling;var Xe=ie(W,De,ne[Pe],he);if(Xe===null){De===null&&(De=Be);break}a&&De&&Xe.alternate===null&&o(W,De),G=v(Xe,G,Pe),Ge===null?Te=Xe:Ge.sibling=Xe,Ge=Xe,De=Be}if(Pe===ne.length)return c(W,De),qe&&$n(W,Pe),Te;if(De===null){for(;Pe<ne.length;Pe++)De=ge(W,ne[Pe],he),De!==null&&(G=v(De,G,Pe),Ge===null?Te=De:Ge.sibling=De,Ge=De);return qe&&$n(W,Pe),Te}for(De=m(De);Pe<ne.length;Pe++)Be=ue(De,W,Pe,ne[Pe],he),Be!==null&&(a&&Be.alternate!==null&&De.delete(Be.key===null?Pe:Be.key),G=v(Be,G,Pe),Ge===null?Te=Be:Ge.sibling=Be,Ge=Be);return a&&De.forEach(function(Ka){return o(W,Ka)}),qe&&$n(W,Pe),Te}function Re(W,G,ne,he){if(ne==null)throw Error(n(151));for(var Te=null,Ge=null,De=G,Pe=G=0,Be=null,Xe=ne.next();De!==null&&!Xe.done;Pe++,Xe=ne.next()){De.index>Pe?(Be=De,De=null):Be=De.sibling;var Ka=ie(W,De,Xe.value,he);if(Ka===null){De===null&&(De=Be);break}a&&De&&Ka.alternate===null&&o(W,De),G=v(Ka,G,Pe),Ge===null?Te=Ka:Ge.sibling=Ka,Ge=Ka,De=Be}if(Xe.done)return c(W,De),qe&&$n(W,Pe),Te;if(De===null){for(;!Xe.done;Pe++,Xe=ne.next())Xe=ge(W,Xe.value,he),Xe!==null&&(G=v(Xe,G,Pe),Ge===null?Te=Xe:Ge.sibling=Xe,Ge=Xe);return qe&&$n(W,Pe),Te}for(De=m(De);!Xe.done;Pe++,Xe=ne.next())Xe=ue(De,W,Pe,Xe.value,he),Xe!==null&&(a&&Xe.alternate!==null&&De.delete(Xe.key===null?Pe:Xe.key),G=v(Xe,G,Pe),Ge===null?Te=Xe:Ge.sibling=Xe,Ge=Xe);return a&&De.forEach(function(g_){return o(W,g_)}),qe&&$n(W,Pe),Te}function rt(W,G,ne,he){if(typeof ne=="object"&&ne!==null&&ne.type===C&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case w:e:{for(var Te=ne.key;G!==null;){if(G.key===Te){if(Te=ne.type,Te===C){if(G.tag===7){c(W,G.sibling),he=y(G,ne.props.children),he.return=W,W=he;break e}}else if(G.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===I&&Es(Te)===G.type){c(W,G.sibling),he=y(G,ne.props),Ho(he,ne),he.return=W,W=he;break e}c(W,G);break}else o(W,G);G=G.sibling}ne.type===C?(he=Cs(ne.props.children,W.mode,he,ne.key),he.return=W,W=he):(he=Ec(ne.type,ne.key,ne.props,null,W.mode,he),Ho(he,ne),he.return=W,W=he)}return T(W);case S:e:{for(Te=ne.key;G!==null;){if(G.key===Te)if(G.tag===4&&G.stateNode.containerInfo===ne.containerInfo&&G.stateNode.implementation===ne.implementation){c(W,G.sibling),he=y(G,ne.children||[]),he.return=W,W=he;break e}else{c(W,G);break}else o(W,G);G=G.sibling}he=Qm(ne,W.mode,he),he.return=W,W=he}return T(W);case I:return ne=Es(ne),rt(W,G,ne,he)}if(ee(ne))return je(W,G,ne,he);if($(ne)){if(Te=$(ne),typeof Te!="function")throw Error(n(150));return ne=Te.call(ne),Re(W,G,ne,he)}if(typeof ne.then=="function")return rt(W,G,Pc(ne),he);if(ne.$$typeof===E)return rt(W,G,kc(W,ne),he);Lc(W,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,G!==null&&G.tag===6?(c(W,G.sibling),he=y(G,ne),he.return=W,W=he):(c(W,G),he=Wm(ne,W.mode,he),he.return=W,W=he),T(W)):c(W,G)}return function(W,G,ne,he){try{qo=0;var Te=rt(W,G,ne,he);return Mi=null,Te}catch(De){if(De===Oi||De===Mc)throw De;var Ge=Ar(29,De,null,W.mode);return Ge.lanes=he,Ge.return=W,Ge}finally{}}}var Rs=Vx(!0),Yx=Vx(!1),ka=!1;function uf(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function df(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Oa(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Ma(a,o,c){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(We&2)!==0){var y=m.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),m.pending=o,o=Tc(a),Ex(a,null,c),o}return Dc(a,m,o,c),Tc(a)}function Vo(a,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var m=o.lanes;m&=a.pendingLanes,c|=m,o.lanes=c,L0(a,c)}}function mf(a,o){var c=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,c===m)){var y=null,v=null;if(c=c.firstBaseUpdate,c!==null){do{var T={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};v===null?y=v=T:v=v.next=T,c=c.next}while(c!==null);v===null?y=v=o:v=v.next=o}else y=v=o;c={baseState:m.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:m.shared,callbacks:m.callbacks},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=o:a.next=o,c.lastBaseUpdate=o}var ff=!1;function Yo(){if(ff){var a=ki;if(a!==null)throw a}}function Go(a,o,c,m){ff=!1;var y=a.updateQueue;ka=!1;var v=y.firstBaseUpdate,T=y.lastBaseUpdate,M=y.shared.pending;if(M!==null){y.shared.pending=null;var H=M,se=H.next;H.next=null,T===null?v=se:T.next=se,T=H;var fe=a.alternate;fe!==null&&(fe=fe.updateQueue,M=fe.lastBaseUpdate,M!==T&&(M===null?fe.firstBaseUpdate=se:M.next=se,fe.lastBaseUpdate=H))}if(v!==null){var ge=y.baseState;T=0,fe=se=H=null,M=v;do{var ie=M.lane&-536870913,ue=ie!==M.lane;if(ue?(ze&ie)===ie:(m&ie)===ie){ie!==0&&ie===Ri&&(ff=!0),fe!==null&&(fe=fe.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var je=a,Re=M;ie=o;var rt=c;switch(Re.tag){case 1:if(je=Re.payload,typeof je=="function"){ge=je.call(rt,ge,ie);break e}ge=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Re.payload,ie=typeof je=="function"?je.call(rt,ge,ie):je,ie==null)break e;ge=g({},ge,ie);break e;case 2:ka=!0}}ie=M.callback,ie!==null&&(a.flags|=64,ue&&(a.flags|=8192),ue=y.callbacks,ue===null?y.callbacks=[ie]:ue.push(ie))}else ue={lane:ie,tag:M.tag,payload:M.payload,callback:M.callback,next:null},fe===null?(se=fe=ue,H=ge):fe=fe.next=ue,T|=ie;if(M=M.next,M===null){if(M=y.shared.pending,M===null)break;ue=M,M=ue.next,ue.next=null,y.lastBaseUpdate=ue,y.shared.pending=null}}while(!0);fe===null&&(H=ge),y.baseState=H,y.firstBaseUpdate=se,y.lastBaseUpdate=fe,v===null&&(y.shared.lanes=0),Ua|=T,a.lanes=T,a.memoizedState=ge}}function Gx(a,o){if(typeof a!="function")throw Error(n(191,a));a.call(o)}function Xx(a,o){var c=a.callbacks;if(c!==null)for(a.callbacks=null,a=0;a<c.length;a++)Gx(c[a],o)}var Ii=F(null),Fc=F(0);function Kx(a,o){a=Qn,X(Fc,a),X(Ii,o),Qn=a|o.baseLanes}function hf(){X(Fc,Qn),X(Ii,Ii.current)}function pf(){Qn=Fc.current,L(Ii),L(Fc)}var Dr=F(null),Kr=null;function Ia(a){var o=a.alternate;X(vt,vt.current&1),X(Dr,a),Kr===null&&(o===null||Ii.current!==null||o.memoizedState!==null)&&(Kr=a)}function gf(a){X(vt,vt.current),X(Dr,a),Kr===null&&(Kr=a)}function Wx(a){a.tag===22?(X(vt,vt.current),X(Dr,a),Kr===null&&(Kr=a)):Pa()}function Pa(){X(vt,vt.current),X(Dr,Dr.current)}function Tr(a){L(Dr),Kr===a&&(Kr=null),L(vt)}var vt=F(0);function Uc(a){for(var o=a;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Sh(c)||Nh(c)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var qn=0,Oe=null,et=null,Dt=null,$c=!1,Pi=!1,ks=!1,zc=0,Xo=0,Li=null,iE=0;function ht(){throw Error(n(321))}function yf(a,o){if(o===null)return!1;for(var c=0;c<o.length&&c<a.length;c++)if(!jr(a[c],o[c]))return!1;return!0}function xf(a,o,c,m,y,v){return qn=v,Oe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,U.H=a===null||a.memoizedState===null?Ov:Of,ks=!1,v=c(m,y),ks=!1,Pi&&(v=Zx(o,c,m,y)),Qx(a),v}function Qx(a){U.H=Qo;var o=et!==null&&et.next!==null;if(qn=0,Dt=et=Oe=null,$c=!1,Xo=0,Li=null,o)throw Error(n(300));a===null||Tt||(a=a.dependencies,a!==null&&Rc(a)&&(Tt=!0))}function Zx(a,o,c,m){Oe=a;var y=0;do{if(Pi&&(Li=null),Xo=0,Pi=!1,25<=y)throw Error(n(301));if(y+=1,Dt=et=null,a.updateQueue!=null){var v=a.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}U.H=Mv,v=o(c,m)}while(Pi);return v}function oE(){var a=U.H,o=a.useState()[0];return o=typeof o.then=="function"?Ko(o):o,a=a.useState()[0],(et!==null?et.memoizedState:null)!==a&&(Oe.flags|=1024),o}function vf(){var a=zc!==0;return zc=0,a}function bf(a,o,c){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~c}function wf(a){if($c){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}$c=!1}qn=0,Dt=et=Oe=null,Pi=!1,Xo=zc=0,Li=null}function sr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?Oe.memoizedState=Dt=a:Dt=Dt.next=a,Dt}function bt(){if(et===null){var a=Oe.alternate;a=a!==null?a.memoizedState:null}else a=et.next;var o=Dt===null?Oe.memoizedState:Dt.next;if(o!==null)Dt=o,et=a;else{if(a===null)throw Oe.alternate===null?Error(n(467)):Error(n(310));et=a,a={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Dt===null?Oe.memoizedState=Dt=a:Dt=Dt.next=a}return Dt}function Bc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ko(a){var o=Xo;return Xo+=1,Li===null&&(Li=[]),a=Bx(Li,a,o),o=Oe,(Dt===null?o.memoizedState:Dt.next)===null&&(o=o.alternate,U.H=o===null||o.memoizedState===null?Ov:Of),a}function qc(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Ko(a);if(a.$$typeof===E)return qt(a)}throw Error(n(438,String(a)))}function Sf(a){var o=null,c=Oe.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var m=Oe.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=Bc(),Oe.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(a),m=0;m<a;m++)c[m]=V;return o.index++,c}function Hn(a,o){return typeof o=="function"?o(a):o}function Hc(a){var o=bt();return Nf(o,et,a)}function Nf(a,o,c){var m=a.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=c;var y=a.baseQueue,v=m.pending;if(v!==null){if(y!==null){var T=y.next;y.next=v.next,v.next=T}o.baseQueue=y=v,m.pending=null}if(v=a.baseState,y===null)a.memoizedState=v;else{o=y.next;var M=T=null,H=null,se=o,fe=!1;do{var ge=se.lane&-536870913;if(ge!==se.lane?(ze&ge)===ge:(qn&ge)===ge){var ie=se.revertLane;if(ie===0)H!==null&&(H=H.next={lane:0,revertLane:0,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),ge===Ri&&(fe=!0);else if((qn&ie)===ie){se=se.next,ie===Ri&&(fe=!0);continue}else ge={lane:0,revertLane:se.revertLane,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},H===null?(M=H=ge,T=v):H=H.next=ge,Oe.lanes|=ie,Ua|=ie;ge=se.action,ks&&c(v,ge),v=se.hasEagerState?se.eagerState:c(v,ge)}else ie={lane:ge,revertLane:se.revertLane,gesture:se.gesture,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},H===null?(M=H=ie,T=v):H=H.next=ie,Oe.lanes|=ge,Ua|=ge;se=se.next}while(se!==null&&se!==o);if(H===null?T=v:H.next=M,!jr(v,a.memoizedState)&&(Tt=!0,fe&&(c=ki,c!==null)))throw c;a.memoizedState=v,a.baseState=T,a.baseQueue=H,m.lastRenderedState=v}return y===null&&(m.lanes=0),[a.memoizedState,m.dispatch]}function Cf(a){var o=bt(),c=o.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=a;var m=c.dispatch,y=c.pending,v=o.memoizedState;if(y!==null){c.pending=null;var T=y=y.next;do v=a(v,T.action),T=T.next;while(T!==y);jr(v,o.memoizedState)||(Tt=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),c.lastRenderedState=v}return[v,m]}function Jx(a,o,c){var m=Oe,y=bt(),v=qe;if(v){if(c===void 0)throw Error(n(407));c=c()}else c=o();var T=!jr((et||y).memoizedState,c);if(T&&(y.memoizedState=c,Tt=!0),y=y.queue,Df(rv.bind(null,m,y,a),[a]),y.getSnapshot!==o||T||Dt!==null&&Dt.memoizedState.tag&1){if(m.flags|=2048,Fi(9,{destroy:void 0},tv.bind(null,m,y,c,o),null),nt===null)throw Error(n(349));v||(qn&127)!==0||ev(m,o,c)}return c}function ev(a,o,c){a.flags|=16384,a={getSnapshot:o,value:c},o=Oe.updateQueue,o===null?(o=Bc(),Oe.updateQueue=o,o.stores=[a]):(c=o.stores,c===null?o.stores=[a]:c.push(a))}function tv(a,o,c,m){o.value=c,o.getSnapshot=m,nv(o)&&av(a)}function rv(a,o,c){return c(function(){nv(o)&&av(a)})}function nv(a){var o=a.getSnapshot;a=a.value;try{var c=o();return!jr(a,c)}catch{return!0}}function av(a){var o=Ns(a,2);o!==null&&vr(o,a,2)}function jf(a){var o=sr();if(typeof a=="function"){var c=a;if(a=c(),ks){wn(!0);try{c()}finally{wn(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:a},o}function sv(a,o,c,m){return a.baseState=c,Nf(a,et,typeof m=="function"?m:Hn)}function lE(a,o,c,m,y){if(Gc(a))throw Error(n(485));if(a=o.action,a!==null){var v={payload:y,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){v.listeners.push(T)}};U.T!==null?c(!0):v.isTransition=!1,m(v),c=o.pending,c===null?(v.next=o.pending=v,iv(o,v)):(v.next=c.next,o.pending=c.next=v)}}function iv(a,o){var c=o.action,m=o.payload,y=a.state;if(o.isTransition){var v=U.T,T={};U.T=T;try{var M=c(y,m),H=U.S;H!==null&&H(T,M),ov(a,o,M)}catch(se){Af(a,o,se)}finally{v!==null&&T.types!==null&&(v.types=T.types),U.T=v}}else try{v=c(y,m),ov(a,o,v)}catch(se){Af(a,o,se)}}function ov(a,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(m){lv(a,o,m)},function(m){return Af(a,o,m)}):lv(a,o,c)}function lv(a,o,c){o.status="fulfilled",o.value=c,cv(o),a.state=c,o=a.pending,o!==null&&(c=o.next,c===o?a.pending=null:(c=c.next,o.next=c,iv(a,c)))}function Af(a,o,c){var m=a.pending;if(a.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=c,cv(o),o=o.next;while(o!==m)}a.action=null}function cv(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function uv(a,o){return o}function dv(a,o){if(qe){var c=nt.formState;if(c!==null){e:{var m=Oe;if(qe){if(it){t:{for(var y=it,v=Xr;y.nodeType!==8;){if(!v){y=null;break t}if(y=Wr(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){it=Wr(y.nextSibling),m=y.data==="F!";break e}}_a(m)}m=!1}m&&(o=c[0])}}return c=sr(),c.memoizedState=c.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uv,lastRenderedState:o},c.queue=m,c=_v.bind(null,Oe,m),m.dispatch=c,m=jf(!1),v=kf.bind(null,Oe,!1,m.queue),m=sr(),y={state:o,dispatch:null,action:a,pending:null},m.queue=y,c=lE.bind(null,Oe,y,v,c),y.dispatch=c,m.memoizedState=a,[o,c,!1]}function mv(a){var o=bt();return fv(o,et,a)}function fv(a,o,c){if(o=Nf(a,o,uv)[0],a=Hc(Hn)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=Ko(o)}catch(T){throw T===Oi?Mc:T}else m=o;o=bt();var y=o.queue,v=y.dispatch;return c!==o.memoizedState&&(Oe.flags|=2048,Fi(9,{destroy:void 0},cE.bind(null,y,c),null)),[m,v,a]}function cE(a,o){a.action=o}function hv(a){var o=bt(),c=et;if(c!==null)return fv(o,c,a);bt(),o=o.memoizedState,c=bt();var m=c.queue.dispatch;return c.memoizedState=a,[o,m,!1]}function Fi(a,o,c,m){return a={tag:a,create:c,deps:m,inst:o,next:null},o=Oe.updateQueue,o===null&&(o=Bc(),Oe.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=a.next=a:(m=c.next,c.next=a,a.next=m,o.lastEffect=a),a}function pv(){return bt().memoizedState}function Vc(a,o,c,m){var y=sr();Oe.flags|=a,y.memoizedState=Fi(1|o,{destroy:void 0},c,m===void 0?null:m)}function Yc(a,o,c,m){var y=bt();m=m===void 0?null:m;var v=y.memoizedState.inst;et!==null&&m!==null&&yf(m,et.memoizedState.deps)?y.memoizedState=Fi(o,v,c,m):(Oe.flags|=a,y.memoizedState=Fi(1|o,v,c,m))}function gv(a,o){Vc(8390656,8,a,o)}function Df(a,o){Yc(2048,8,a,o)}function uE(a){Oe.flags|=4;var o=Oe.updateQueue;if(o===null)o=Bc(),Oe.updateQueue=o,o.events=[a];else{var c=o.events;c===null?o.events=[a]:c.push(a)}}function yv(a){var o=bt().memoizedState;return uE({ref:o,nextImpl:a}),function(){if((We&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function xv(a,o){return Yc(4,2,a,o)}function vv(a,o){return Yc(4,4,a,o)}function bv(a,o){if(typeof o=="function"){a=a();var c=o(a);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function wv(a,o,c){c=c!=null?c.concat([a]):null,Yc(4,4,bv.bind(null,o,a),c)}function Tf(){}function Sv(a,o){var c=bt();o=o===void 0?null:o;var m=c.memoizedState;return o!==null&&yf(o,m[1])?m[0]:(c.memoizedState=[a,o],a)}function Nv(a,o){var c=bt();o=o===void 0?null:o;var m=c.memoizedState;if(o!==null&&yf(o,m[1]))return m[0];if(m=a(),ks){wn(!0);try{a()}finally{wn(!1)}}return c.memoizedState=[m,o],m}function Ef(a,o,c){return c===void 0||(qn&1073741824)!==0&&(ze&261930)===0?a.memoizedState=o:(a.memoizedState=c,a=Cb(),Oe.lanes|=a,Ua|=a,c)}function Cv(a,o,c,m){return jr(c,o)?c:Ii.current!==null?(a=Ef(a,c,m),jr(a,o)||(Tt=!0),a):(qn&42)===0||(qn&1073741824)!==0&&(ze&261930)===0?(Tt=!0,a.memoizedState=c):(a=Cb(),Oe.lanes|=a,Ua|=a,o)}function jv(a,o,c,m,y){var v=J.p;J.p=v!==0&&8>v?v:8;var T=U.T,M={};U.T=M,kf(a,!1,o,c);try{var H=y(),se=U.S;if(se!==null&&se(M,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var fe=sE(H,m);Wo(a,o,fe,Rr(a))}else Wo(a,o,m,Rr(a))}catch(ge){Wo(a,o,{then:function(){},status:"rejected",reason:ge},Rr())}finally{J.p=v,T!==null&&M.types!==null&&(T.types=M.types),U.T=T}}function dE(){}function _f(a,o,c,m){if(a.tag!==5)throw Error(n(476));var y=Av(a).queue;jv(a,y,o,pe,c===null?dE:function(){return Dv(a),c(m)})}function Av(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:pe},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:c},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function Dv(a){var o=Av(a);o.next===null&&(o=a.alternate.memoizedState),Wo(a,o.next.queue,{},Rr())}function Rf(){return qt(fl)}function Tv(){return bt().memoizedState}function Ev(){return bt().memoizedState}function mE(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var c=Rr();a=Oa(c);var m=Ma(o,a,c);m!==null&&(vr(m,o,c),Vo(m,o,c)),o={cache:sf()},a.payload=o;return}o=o.return}}function fE(a,o,c){var m=Rr();c={lane:m,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Gc(a)?Rv(o,c):(c=Xm(a,o,c,m),c!==null&&(vr(c,a,m),kv(c,o,m)))}function _v(a,o,c){var m=Rr();Wo(a,o,c,m)}function Wo(a,o,c,m){var y={lane:m,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Gc(a))Rv(o,y);else{var v=a.alternate;if(a.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var T=o.lastRenderedState,M=v(T,c);if(y.hasEagerState=!0,y.eagerState=M,jr(M,T))return Dc(a,o,y,0),nt===null&&Ac(),!1}catch{}finally{}if(c=Xm(a,o,y,m),c!==null)return vr(c,a,m),kv(c,o,m),!0}return!1}function kf(a,o,c,m){if(m={lane:2,revertLane:uh(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Gc(a)){if(o)throw Error(n(479))}else o=Xm(a,c,m,2),o!==null&&vr(o,a,2)}function Gc(a){var o=a.alternate;return a===Oe||o!==null&&o===Oe}function Rv(a,o){Pi=$c=!0;var c=a.pending;c===null?o.next=o:(o.next=c.next,c.next=o),a.pending=o}function kv(a,o,c){if((c&4194048)!==0){var m=o.lanes;m&=a.pendingLanes,c|=m,o.lanes=c,L0(a,c)}}var Qo={readContext:qt,use:qc,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useLayoutEffect:ht,useInsertionEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useSyncExternalStore:ht,useId:ht,useHostTransitionStatus:ht,useFormState:ht,useActionState:ht,useOptimistic:ht,useMemoCache:ht,useCacheRefresh:ht};Qo.useEffectEvent=ht;var Ov={readContext:qt,use:qc,useCallback:function(a,o){return sr().memoizedState=[a,o===void 0?null:o],a},useContext:qt,useEffect:gv,useImperativeHandle:function(a,o,c){c=c!=null?c.concat([a]):null,Vc(4194308,4,bv.bind(null,o,a),c)},useLayoutEffect:function(a,o){return Vc(4194308,4,a,o)},useInsertionEffect:function(a,o){Vc(4,2,a,o)},useMemo:function(a,o){var c=sr();o=o===void 0?null:o;var m=a();if(ks){wn(!0);try{a()}finally{wn(!1)}}return c.memoizedState=[m,o],m},useReducer:function(a,o,c){var m=sr();if(c!==void 0){var y=c(o);if(ks){wn(!0);try{c(o)}finally{wn(!1)}}}else y=o;return m.memoizedState=m.baseState=y,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:y},m.queue=a,a=a.dispatch=fE.bind(null,Oe,a),[m.memoizedState,a]},useRef:function(a){var o=sr();return a={current:a},o.memoizedState=a},useState:function(a){a=jf(a);var o=a.queue,c=_v.bind(null,Oe,o);return o.dispatch=c,[a.memoizedState,c]},useDebugValue:Tf,useDeferredValue:function(a,o){var c=sr();return Ef(c,a,o)},useTransition:function(){var a=jf(!1);return a=jv.bind(null,Oe,a.queue,!0,!1),sr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,c){var m=Oe,y=sr();if(qe){if(c===void 0)throw Error(n(407));c=c()}else{if(c=o(),nt===null)throw Error(n(349));(ze&127)!==0||ev(m,o,c)}y.memoizedState=c;var v={value:c,getSnapshot:o};return y.queue=v,gv(rv.bind(null,m,v,a),[a]),m.flags|=2048,Fi(9,{destroy:void 0},tv.bind(null,m,v,c,o),null),c},useId:function(){var a=sr(),o=nt.identifierPrefix;if(qe){var c=Nn,m=Sn;c=(m&~(1<<32-ar(m)-1)).toString(32)+c,o="_"+o+"R_"+c,c=zc++,0<c&&(o+="H"+c.toString(32)),o+="_"}else c=iE++,o="_"+o+"r_"+c.toString(32)+"_";return a.memoizedState=o},useHostTransitionStatus:Rf,useFormState:dv,useActionState:dv,useOptimistic:function(a){var o=sr();o.memoizedState=o.baseState=a;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=kf.bind(null,Oe,!0,c),c.dispatch=o,[a,o]},useMemoCache:Sf,useCacheRefresh:function(){return sr().memoizedState=mE.bind(null,Oe)},useEffectEvent:function(a){var o=sr(),c={impl:a};return o.memoizedState=c,function(){if((We&2)!==0)throw Error(n(440));return c.impl.apply(void 0,arguments)}}},Of={readContext:qt,use:qc,useCallback:Sv,useContext:qt,useEffect:Df,useImperativeHandle:wv,useInsertionEffect:xv,useLayoutEffect:vv,useMemo:Nv,useReducer:Hc,useRef:pv,useState:function(){return Hc(Hn)},useDebugValue:Tf,useDeferredValue:function(a,o){var c=bt();return Cv(c,et.memoizedState,a,o)},useTransition:function(){var a=Hc(Hn)[0],o=bt().memoizedState;return[typeof a=="boolean"?a:Ko(a),o]},useSyncExternalStore:Jx,useId:Tv,useHostTransitionStatus:Rf,useFormState:mv,useActionState:mv,useOptimistic:function(a,o){var c=bt();return sv(c,et,a,o)},useMemoCache:Sf,useCacheRefresh:Ev};Of.useEffectEvent=yv;var Mv={readContext:qt,use:qc,useCallback:Sv,useContext:qt,useEffect:Df,useImperativeHandle:wv,useInsertionEffect:xv,useLayoutEffect:vv,useMemo:Nv,useReducer:Cf,useRef:pv,useState:function(){return Cf(Hn)},useDebugValue:Tf,useDeferredValue:function(a,o){var c=bt();return et===null?Ef(c,a,o):Cv(c,et.memoizedState,a,o)},useTransition:function(){var a=Cf(Hn)[0],o=bt().memoizedState;return[typeof a=="boolean"?a:Ko(a),o]},useSyncExternalStore:Jx,useId:Tv,useHostTransitionStatus:Rf,useFormState:hv,useActionState:hv,useOptimistic:function(a,o){var c=bt();return et!==null?sv(c,et,a,o):(c.baseState=a,[a,c.queue.dispatch])},useMemoCache:Sf,useCacheRefresh:Ev};Mv.useEffectEvent=yv;function Mf(a,o,c,m){o=a.memoizedState,c=c(m,o),c=c==null?o:g({},o,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var If={enqueueSetState:function(a,o,c){a=a._reactInternals;var m=Rr(),y=Oa(m);y.payload=o,c!=null&&(y.callback=c),o=Ma(a,y,m),o!==null&&(vr(o,a,m),Vo(o,a,m))},enqueueReplaceState:function(a,o,c){a=a._reactInternals;var m=Rr(),y=Oa(m);y.tag=1,y.payload=o,c!=null&&(y.callback=c),o=Ma(a,y,m),o!==null&&(vr(o,a,m),Vo(o,a,m))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var c=Rr(),m=Oa(c);m.tag=2,o!=null&&(m.callback=o),o=Ma(a,m,c),o!==null&&(vr(o,a,c),Vo(o,a,c))}};function Iv(a,o,c,m,y,v,T){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,v,T):o.prototype&&o.prototype.isPureReactComponent?!Lo(c,m)||!Lo(y,v):!0}function Pv(a,o,c,m){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,m),o.state!==a&&If.enqueueReplaceState(o,o.state,null)}function Os(a,o){var c=o;if("ref"in o){c={};for(var m in o)m!=="ref"&&(c[m]=o[m])}if(a=a.defaultProps){c===o&&(c=g({},c));for(var y in a)c[y]===void 0&&(c[y]=a[y])}return c}function Lv(a){jc(a)}function Fv(a){console.error(a)}function Uv(a){jc(a)}function Xc(a,o){try{var c=a.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function $v(a,o,c){try{var m=a.onCaughtError;m(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Pf(a,o,c){return c=Oa(c),c.tag=3,c.payload={element:null},c.callback=function(){Xc(a,o)},c}function zv(a){return a=Oa(a),a.tag=3,a}function Bv(a,o,c,m){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var v=m.value;a.payload=function(){return y(v)},a.callback=function(){$v(o,c,m)}}var T=c.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(a.callback=function(){$v(o,c,m),typeof y!="function"&&($a===null?$a=new Set([this]):$a.add(this));var M=m.stack;this.componentDidCatch(m.value,{componentStack:M!==null?M:""})})}function hE(a,o,c,m,y){if(c.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=c.alternate,o!==null&&_i(o,c,y,!0),c=Dr.current,c!==null){switch(c.tag){case 31:case 13:return Kr===null?iu():c.alternate===null&&pt===0&&(pt=3),c.flags&=-257,c.flags|=65536,c.lanes=y,m===Ic?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([m]):o.add(m),oh(a,m,y)),!1;case 22:return c.flags|=65536,m===Ic?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([m]):c.add(m)),oh(a,m,y)),!1}throw Error(n(435,c.tag))}return oh(a,m,y),iu(),!1}if(qe)return o=Dr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,m!==ef&&(a=Error(n(422),{cause:m}),$o(Vr(a,c)))):(m!==ef&&(o=Error(n(423),{cause:m}),$o(Vr(o,c))),a=a.current.alternate,a.flags|=65536,y&=-y,a.lanes|=y,m=Vr(m,c),y=Pf(a.stateNode,m,y),mf(a,y),pt!==4&&(pt=2)),!1;var v=Error(n(520),{cause:m});if(v=Vr(v,c),sl===null?sl=[v]:sl.push(v),pt!==4&&(pt=2),o===null)return!0;m=Vr(m,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,a=y&-y,c.lanes|=a,a=Pf(c.stateNode,m,a),mf(c,a),!1;case 1:if(o=c.type,v=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&($a===null||!$a.has(v))))return c.flags|=65536,y&=-y,c.lanes|=y,y=zv(y),Bv(y,a,c,m),mf(c,y),!1}c=c.return}while(c!==null);return!1}var Lf=Error(n(461)),Tt=!1;function Ht(a,o,c,m){o.child=a===null?Yx(o,null,c,m):Rs(o,a.child,c,m)}function qv(a,o,c,m,y){c=c.render;var v=o.ref;if("ref"in m){var T={};for(var M in m)M!=="ref"&&(T[M]=m[M])}else T=m;return Ds(o),m=xf(a,o,c,T,v,y),M=vf(),a!==null&&!Tt?(bf(a,o,y),Vn(a,o,y)):(qe&&M&&Zm(o),o.flags|=1,Ht(a,o,m,y),o.child)}function Hv(a,o,c,m,y){if(a===null){var v=c.type;return typeof v=="function"&&!Km(v)&&v.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=v,Vv(a,o,v,m,y)):(a=Ec(c.type,null,m,o,o.mode,y),a.ref=o.ref,a.return=o,o.child=a)}if(v=a.child,!Vf(a,y)){var T=v.memoizedProps;if(c=c.compare,c=c!==null?c:Lo,c(T,m)&&a.ref===o.ref)return Vn(a,o,y)}return o.flags|=1,a=Un(v,m),a.ref=o.ref,a.return=o,o.child=a}function Vv(a,o,c,m,y){if(a!==null){var v=a.memoizedProps;if(Lo(v,m)&&a.ref===o.ref)if(Tt=!1,o.pendingProps=m=v,Vf(a,y))(a.flags&131072)!==0&&(Tt=!0);else return o.lanes=a.lanes,Vn(a,o,y)}return Ff(a,o,c,m,y)}function Yv(a,o,c,m){var y=m.children,v=a!==null?a.memoizedState:null;if(a===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((o.flags&128)!==0){if(v=v!==null?v.baseLanes|c:c,a!==null){for(m=o.child=a.child,y=0;m!==null;)y=y|m.lanes|m.childLanes,m=m.sibling;m=y&~v}else m=0,o.child=null;return Gv(a,o,v,c,m)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&Oc(o,v!==null?v.cachePool:null),v!==null?Kx(o,v):hf(),Wx(o);else return m=o.lanes=536870912,Gv(a,o,v!==null?v.baseLanes|c:c,c,m)}else v!==null?(Oc(o,v.cachePool),Kx(o,v),Pa(),o.memoizedState=null):(a!==null&&Oc(o,null),hf(),Pa());return Ht(a,o,y,c),o.child}function Zo(a,o){return a!==null&&a.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Gv(a,o,c,m,y){var v=lf();return v=v===null?null:{parent:At._currentValue,pool:v},o.memoizedState={baseLanes:c,cachePool:v},a!==null&&Oc(o,null),hf(),Wx(o),a!==null&&_i(a,o,m,!0),o.childLanes=y,null}function Kc(a,o){return o=Qc({mode:o.mode,children:o.children},a.mode),o.ref=a.ref,a.child=o,o.return=a,o}function Xv(a,o,c){return Rs(o,a.child,null,c),a=Kc(o,o.pendingProps),a.flags|=2,Tr(o),o.memoizedState=null,a}function pE(a,o,c){var m=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,a===null){if(qe){if(m.mode==="hidden")return a=Kc(o,m),o.lanes=536870912,Zo(null,a);if(gf(o),(a=it)?(a=iw(a,Xr),a=a!==null&&a.data==="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:Ta!==null?{id:Sn,overflow:Nn}:null,retryLane:536870912,hydrationErrors:null},c=Rx(a),c.return=o,o.child=c,Bt=o,it=null)):a=null,a===null)throw _a(o);return o.lanes=536870912,null}return Kc(o,m)}var v=a.memoizedState;if(v!==null){var T=v.dehydrated;if(gf(o),y)if(o.flags&256)o.flags&=-257,o=Xv(a,o,c);else if(o.memoizedState!==null)o.child=a.child,o.flags|=128,o=null;else throw Error(n(558));else if(Tt||_i(a,o,c,!1),y=(c&a.childLanes)!==0,Tt||y){if(m=nt,m!==null&&(T=F0(m,c),T!==0&&T!==v.retryLane))throw v.retryLane=T,Ns(a,T),vr(m,a,T),Lf;iu(),o=Xv(a,o,c)}else a=v.treeContext,it=Wr(T.nextSibling),Bt=o,qe=!0,Ea=null,Xr=!1,a!==null&&Mx(o,a),o=Kc(o,m),o.flags|=4096;return o}return a=Un(a.child,{mode:m.mode,children:m.children}),a.ref=o.ref,o.child=a,a.return=o,a}function Wc(a,o){var c=o.ref;if(c===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(n(284));(a===null||a.ref!==c)&&(o.flags|=4194816)}}function Ff(a,o,c,m,y){return Ds(o),c=xf(a,o,c,m,void 0,y),m=vf(),a!==null&&!Tt?(bf(a,o,y),Vn(a,o,y)):(qe&&m&&Zm(o),o.flags|=1,Ht(a,o,c,y),o.child)}function Kv(a,o,c,m,y,v){return Ds(o),o.updateQueue=null,c=Zx(o,m,c,y),Qx(a),m=vf(),a!==null&&!Tt?(bf(a,o,v),Vn(a,o,v)):(qe&&m&&Zm(o),o.flags|=1,Ht(a,o,c,v),o.child)}function Wv(a,o,c,m,y){if(Ds(o),o.stateNode===null){var v=Ai,T=c.contextType;typeof T=="object"&&T!==null&&(v=qt(T)),v=new c(m,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=If,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=m,v.state=o.memoizedState,v.refs={},uf(o),T=c.contextType,v.context=typeof T=="object"&&T!==null?qt(T):Ai,v.state=o.memoizedState,T=c.getDerivedStateFromProps,typeof T=="function"&&(Mf(o,c,T,m),v.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(T=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),T!==v.state&&If.enqueueReplaceState(v,v.state,null),Go(o,m,v,y),Yo(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(a===null){v=o.stateNode;var M=o.memoizedProps,H=Os(c,M);v.props=H;var se=v.context,fe=c.contextType;T=Ai,typeof fe=="object"&&fe!==null&&(T=qt(fe));var ge=c.getDerivedStateFromProps;fe=typeof ge=="function"||typeof v.getSnapshotBeforeUpdate=="function",M=o.pendingProps!==M,fe||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(M||se!==T)&&Pv(o,v,m,T),ka=!1;var ie=o.memoizedState;v.state=ie,Go(o,m,v,y),Yo(),se=o.memoizedState,M||ie!==se||ka?(typeof ge=="function"&&(Mf(o,c,ge,m),se=o.memoizedState),(H=ka||Iv(o,c,H,m,ie,se,T))?(fe||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=se),v.props=m,v.state=se,v.context=T,m=H):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{v=o.stateNode,df(a,o),T=o.memoizedProps,fe=Os(c,T),v.props=fe,ge=o.pendingProps,ie=v.context,se=c.contextType,H=Ai,typeof se=="object"&&se!==null&&(H=qt(se)),M=c.getDerivedStateFromProps,(se=typeof M=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(T!==ge||ie!==H)&&Pv(o,v,m,H),ka=!1,ie=o.memoizedState,v.state=ie,Go(o,m,v,y),Yo();var ue=o.memoizedState;T!==ge||ie!==ue||ka||a!==null&&a.dependencies!==null&&Rc(a.dependencies)?(typeof M=="function"&&(Mf(o,c,M,m),ue=o.memoizedState),(fe=ka||Iv(o,c,fe,m,ie,ue,H)||a!==null&&a.dependencies!==null&&Rc(a.dependencies))?(se||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(m,ue,H),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(m,ue,H)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||T===a.memoizedProps&&ie===a.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===a.memoizedProps&&ie===a.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=ue),v.props=m,v.state=ue,v.context=H,m=fe):(typeof v.componentDidUpdate!="function"||T===a.memoizedProps&&ie===a.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===a.memoizedProps&&ie===a.memoizedState||(o.flags|=1024),m=!1)}return v=m,Wc(a,o),m=(o.flags&128)!==0,v||m?(v=o.stateNode,c=m&&typeof c.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,a!==null&&m?(o.child=Rs(o,a.child,null,y),o.child=Rs(o,null,c,y)):Ht(a,o,c,y),o.memoizedState=v.state,a=o.child):a=Vn(a,o,y),a}function Qv(a,o,c,m){return js(),o.flags|=256,Ht(a,o,c,m),o.child}var Uf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $f(a){return{baseLanes:a,cachePool:$x()}}function zf(a,o,c){return a=a!==null?a.childLanes&~c:0,o&&(a|=_r),a}function Zv(a,o,c){var m=o.pendingProps,y=!1,v=(o.flags&128)!==0,T;if((T=v)||(T=a!==null&&a.memoizedState===null?!1:(vt.current&2)!==0),T&&(y=!0,o.flags&=-129),T=(o.flags&32)!==0,o.flags&=-33,a===null){if(qe){if(y?Ia(o):Pa(),(a=it)?(a=iw(a,Xr),a=a!==null&&a.data!=="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:Ta!==null?{id:Sn,overflow:Nn}:null,retryLane:536870912,hydrationErrors:null},c=Rx(a),c.return=o,o.child=c,Bt=o,it=null)):a=null,a===null)throw _a(o);return Nh(a)?o.lanes=32:o.lanes=536870912,null}var M=m.children;return m=m.fallback,y?(Pa(),y=o.mode,M=Qc({mode:"hidden",children:M},y),m=Cs(m,y,c,null),M.return=o,m.return=o,M.sibling=m,o.child=M,m=o.child,m.memoizedState=$f(c),m.childLanes=zf(a,T,c),o.memoizedState=Uf,Zo(null,m)):(Ia(o),Bf(o,M))}var H=a.memoizedState;if(H!==null&&(M=H.dehydrated,M!==null)){if(v)o.flags&256?(Ia(o),o.flags&=-257,o=qf(a,o,c)):o.memoizedState!==null?(Pa(),o.child=a.child,o.flags|=128,o=null):(Pa(),M=m.fallback,y=o.mode,m=Qc({mode:"visible",children:m.children},y),M=Cs(M,y,c,null),M.flags|=2,m.return=o,M.return=o,m.sibling=M,o.child=m,Rs(o,a.child,null,c),m=o.child,m.memoizedState=$f(c),m.childLanes=zf(a,T,c),o.memoizedState=Uf,o=Zo(null,m));else if(Ia(o),Nh(M)){if(T=M.nextSibling&&M.nextSibling.dataset,T)var se=T.dgst;T=se,m=Error(n(419)),m.stack="",m.digest=T,$o({value:m,source:null,stack:null}),o=qf(a,o,c)}else if(Tt||_i(a,o,c,!1),T=(c&a.childLanes)!==0,Tt||T){if(T=nt,T!==null&&(m=F0(T,c),m!==0&&m!==H.retryLane))throw H.retryLane=m,Ns(a,m),vr(T,a,m),Lf;Sh(M)||iu(),o=qf(a,o,c)}else Sh(M)?(o.flags|=192,o.child=a.child,o=null):(a=H.treeContext,it=Wr(M.nextSibling),Bt=o,qe=!0,Ea=null,Xr=!1,a!==null&&Mx(o,a),o=Bf(o,m.children),o.flags|=4096);return o}return y?(Pa(),M=m.fallback,y=o.mode,H=a.child,se=H.sibling,m=Un(H,{mode:"hidden",children:m.children}),m.subtreeFlags=H.subtreeFlags&65011712,se!==null?M=Un(se,M):(M=Cs(M,y,c,null),M.flags|=2),M.return=o,m.return=o,m.sibling=M,o.child=m,Zo(null,m),m=o.child,M=a.child.memoizedState,M===null?M=$f(c):(y=M.cachePool,y!==null?(H=At._currentValue,y=y.parent!==H?{parent:H,pool:H}:y):y=$x(),M={baseLanes:M.baseLanes|c,cachePool:y}),m.memoizedState=M,m.childLanes=zf(a,T,c),o.memoizedState=Uf,Zo(a.child,m)):(Ia(o),c=a.child,a=c.sibling,c=Un(c,{mode:"visible",children:m.children}),c.return=o,c.sibling=null,a!==null&&(T=o.deletions,T===null?(o.deletions=[a],o.flags|=16):T.push(a)),o.child=c,o.memoizedState=null,c)}function Bf(a,o){return o=Qc({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function Qc(a,o){return a=Ar(22,a,null,o),a.lanes=0,a}function qf(a,o,c){return Rs(o,a.child,null,c),a=Bf(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function Jv(a,o,c){a.lanes|=o;var m=a.alternate;m!==null&&(m.lanes|=o),nf(a.return,o,c)}function Hf(a,o,c,m,y,v){var T=a.memoizedState;T===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:c,tailMode:y,treeForkCount:v}:(T.isBackwards=o,T.rendering=null,T.renderingStartTime=0,T.last=m,T.tail=c,T.tailMode=y,T.treeForkCount=v)}function eb(a,o,c){var m=o.pendingProps,y=m.revealOrder,v=m.tail;m=m.children;var T=vt.current,M=(T&2)!==0;if(M?(T=T&1|2,o.flags|=128):T&=1,X(vt,T),Ht(a,o,m,c),m=qe?Uo:0,!M&&a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Jv(a,c,o);else if(a.tag===19)Jv(a,c,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(y){case"forwards":for(c=o.child,y=null;c!==null;)a=c.alternate,a!==null&&Uc(a)===null&&(y=c),c=c.sibling;c=y,c===null?(y=o.child,o.child=null):(y=c.sibling,c.sibling=null),Hf(o,!1,y,c,v,m);break;case"backwards":case"unstable_legacy-backwards":for(c=null,y=o.child,o.child=null;y!==null;){if(a=y.alternate,a!==null&&Uc(a)===null){o.child=y;break}a=y.sibling,y.sibling=c,c=y,y=a}Hf(o,!0,c,null,v,m);break;case"together":Hf(o,!1,null,null,void 0,m);break;default:o.memoizedState=null}return o.child}function Vn(a,o,c){if(a!==null&&(o.dependencies=a.dependencies),Ua|=o.lanes,(c&o.childLanes)===0)if(a!==null){if(_i(a,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(n(153));if(o.child!==null){for(a=o.child,c=Un(a,a.pendingProps),o.child=c,c.return=o;a.sibling!==null;)a=a.sibling,c=c.sibling=Un(a,a.pendingProps),c.return=o;c.sibling=null}return o.child}function Vf(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&Rc(a)))}function gE(a,o,c){switch(o.tag){case 3:ye(o,o.stateNode.containerInfo),Ra(o,At,a.memoizedState.cache),js();break;case 27:case 5:ae(o);break;case 4:ye(o,o.stateNode.containerInfo);break;case 10:Ra(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,gf(o),null;break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(Ia(o),o.flags|=128,null):(c&o.child.childLanes)!==0?Zv(a,o,c):(Ia(o),a=Vn(a,o,c),a!==null?a.sibling:null);Ia(o);break;case 19:var y=(a.flags&128)!==0;if(m=(c&o.childLanes)!==0,m||(_i(a,o,c,!1),m=(c&o.childLanes)!==0),y){if(m)return eb(a,o,c);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),X(vt,vt.current),m)break;return null;case 22:return o.lanes=0,Yv(a,o,c,o.pendingProps);case 24:Ra(o,At,a.memoizedState.cache)}return Vn(a,o,c)}function tb(a,o,c){if(a!==null)if(a.memoizedProps!==o.pendingProps)Tt=!0;else{if(!Vf(a,c)&&(o.flags&128)===0)return Tt=!1,gE(a,o,c);Tt=(a.flags&131072)!==0}else Tt=!1,qe&&(o.flags&1048576)!==0&&Ox(o,Uo,o.index);switch(o.lanes=0,o.tag){case 16:e:{var m=o.pendingProps;if(a=Es(o.elementType),o.type=a,typeof a=="function")Km(a)?(m=Os(a,m),o.tag=1,o=Wv(null,o,a,m,c)):(o.tag=0,o=Ff(null,o,a,m,c));else{if(a!=null){var y=a.$$typeof;if(y===_){o.tag=11,o=qv(null,o,a,m,c);break e}else if(y===D){o.tag=14,o=Hv(null,o,a,m,c);break e}}throw o=re(a)||a,Error(n(306,o,""))}}return o;case 0:return Ff(a,o,o.type,o.pendingProps,c);case 1:return m=o.type,y=Os(m,o.pendingProps),Wv(a,o,m,y,c);case 3:e:{if(ye(o,o.stateNode.containerInfo),a===null)throw Error(n(387));m=o.pendingProps;var v=o.memoizedState;y=v.element,df(a,o),Go(o,m,null,c);var T=o.memoizedState;if(m=T.cache,Ra(o,At,m),m!==v.cache&&af(o,[At],c,!0),Yo(),m=T.element,v.isDehydrated)if(v={element:m,isDehydrated:!1,cache:T.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=Qv(a,o,m,c);break e}else if(m!==y){y=Vr(Error(n(424)),o),$o(y),o=Qv(a,o,m,c);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(it=Wr(a.firstChild),Bt=o,qe=!0,Ea=null,Xr=!0,c=Yx(o,null,m,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(js(),m===y){o=Vn(a,o,c);break e}Ht(a,o,m,c)}o=o.child}return o;case 26:return Wc(a,o),a===null?(c=mw(o.type,null,o.pendingProps,null))?o.memoizedState=c:qe||(c=o.type,a=o.pendingProps,m=fu(Y.current).createElement(c),m[zt]=o,m[fr]=a,Vt(m,c,a),Lt(m),o.stateNode=m):o.memoizedState=mw(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return ae(o),a===null&&qe&&(m=o.stateNode=cw(o.type,o.pendingProps,Y.current),Bt=o,Xr=!0,y=it,Ha(o.type)?(Ch=y,it=Wr(m.firstChild)):it=y),Ht(a,o,o.pendingProps.children,c),Wc(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&qe&&((y=m=it)&&(m=YE(m,o.type,o.pendingProps,Xr),m!==null?(o.stateNode=m,Bt=o,it=Wr(m.firstChild),Xr=!1,y=!0):y=!1),y||_a(o)),ae(o),y=o.type,v=o.pendingProps,T=a!==null?a.memoizedProps:null,m=v.children,vh(y,v)?m=null:T!==null&&vh(y,T)&&(o.flags|=32),o.memoizedState!==null&&(y=xf(a,o,oE,null,null,c),fl._currentValue=y),Wc(a,o),Ht(a,o,m,c),o.child;case 6:return a===null&&qe&&((a=c=it)&&(c=GE(c,o.pendingProps,Xr),c!==null?(o.stateNode=c,Bt=o,it=null,a=!0):a=!1),a||_a(o)),null;case 13:return Zv(a,o,c);case 4:return ye(o,o.stateNode.containerInfo),m=o.pendingProps,a===null?o.child=Rs(o,null,m,c):Ht(a,o,m,c),o.child;case 11:return qv(a,o,o.type,o.pendingProps,c);case 7:return Ht(a,o,o.pendingProps,c),o.child;case 8:return Ht(a,o,o.pendingProps.children,c),o.child;case 12:return Ht(a,o,o.pendingProps.children,c),o.child;case 10:return m=o.pendingProps,Ra(o,o.type,m.value),Ht(a,o,m.children,c),o.child;case 9:return y=o.type._context,m=o.pendingProps.children,Ds(o),y=qt(y),m=m(y),o.flags|=1,Ht(a,o,m,c),o.child;case 14:return Hv(a,o,o.type,o.pendingProps,c);case 15:return Vv(a,o,o.type,o.pendingProps,c);case 19:return eb(a,o,c);case 31:return pE(a,o,c);case 22:return Yv(a,o,c,o.pendingProps);case 24:return Ds(o),m=qt(At),a===null?(y=lf(),y===null&&(y=nt,v=sf(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=c),y=v),o.memoizedState={parent:m,cache:y},uf(o),Ra(o,At,y)):((a.lanes&c)!==0&&(df(a,o),Go(o,null,null,c),Yo()),y=a.memoizedState,v=o.memoizedState,y.parent!==m?(y={parent:m,cache:m},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),Ra(o,At,m)):(m=v.cache,Ra(o,At,m),m!==y.cache&&af(o,[At],c,!0))),Ht(a,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function Yn(a){a.flags|=4}function Yf(a,o,c,m,y){if((o=(a.mode&32)!==0)&&(o=!1),o){if(a.flags|=16777216,(y&335544128)===y)if(a.stateNode.complete)a.flags|=8192;else if(Tb())a.flags|=8192;else throw _s=Ic,cf}else a.flags&=-16777217}function rb(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!yw(o))if(Tb())a.flags|=8192;else throw _s=Ic,cf}function Zc(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?I0():536870912,a.lanes|=o,Bi|=o)}function Jo(a,o){if(!qe)switch(a.tailMode){case"hidden":o=a.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function ot(a){var o=a.alternate!==null&&a.alternate.child===a.child,c=0,m=0;if(o)for(var y=a.child;y!==null;)c|=y.lanes|y.childLanes,m|=y.subtreeFlags&65011712,m|=y.flags&65011712,y.return=a,y=y.sibling;else for(y=a.child;y!==null;)c|=y.lanes|y.childLanes,m|=y.subtreeFlags,m|=y.flags,y.return=a,y=y.sibling;return a.subtreeFlags|=m,a.childLanes=c,o}function yE(a,o,c){var m=o.pendingProps;switch(Jm(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(o),null;case 1:return ot(o),null;case 3:return c=o.stateNode,m=null,a!==null&&(m=a.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),Bn(At),B(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(Ei(o)?Yn(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,tf())),ot(o),null;case 26:var y=o.type,v=o.memoizedState;return a===null?(Yn(o),v!==null?(ot(o),rb(o,v)):(ot(o),Yf(o,y,null,m,c))):v?v!==a.memoizedState?(Yn(o),ot(o),rb(o,v)):(ot(o),o.flags&=-16777217):(a=a.memoizedProps,a!==m&&Yn(o),ot(o),Yf(o,y,a,m,c)),null;case 27:if(de(o),c=Y.current,y=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==m&&Yn(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return ot(o),null}a=O.current,Ei(o)?Ix(o):(a=cw(y,m,c),o.stateNode=a,Yn(o))}return ot(o),null;case 5:if(de(o),y=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==m&&Yn(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return ot(o),null}if(v=O.current,Ei(o))Ix(o);else{var T=fu(Y.current);switch(v){case 1:v=T.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=T.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=T.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=T.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=T.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof m.is=="string"?T.createElement("select",{is:m.is}):T.createElement("select"),m.multiple?v.multiple=!0:m.size&&(v.size=m.size);break;default:v=typeof m.is=="string"?T.createElement(y,{is:m.is}):T.createElement(y)}}v[zt]=o,v[fr]=m;e:for(T=o.child;T!==null;){if(T.tag===5||T.tag===6)v.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===o)break e;for(;T.sibling===null;){if(T.return===null||T.return===o)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}o.stateNode=v;e:switch(Vt(v,y,m),y){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Yn(o)}}return ot(o),Yf(o,o.type,a===null?null:a.memoizedProps,o.pendingProps,c),null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==m&&Yn(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(n(166));if(a=Y.current,Ei(o)){if(a=o.stateNode,c=o.memoizedProps,m=null,y=Bt,y!==null)switch(y.tag){case 27:case 5:m=y.memoizedProps}a[zt]=o,a=!!(a.nodeValue===c||m!==null&&m.suppressHydrationWarning===!0||Zb(a.nodeValue,c)),a||_a(o,!0)}else a=fu(a).createTextNode(m),a[zt]=o,o.stateNode=a}return ot(o),null;case 31:if(c=o.memoizedState,a===null||a.memoizedState!==null){if(m=Ei(o),c!==null){if(a===null){if(!m)throw Error(n(318));if(a=o.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(557));a[zt]=o}else js(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ot(o),a=!1}else c=tf(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=c),a=!0;if(!a)return o.flags&256?(Tr(o),o):(Tr(o),null);if((o.flags&128)!==0)throw Error(n(558))}return ot(o),null;case 13:if(m=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(y=Ei(o),m!==null&&m.dehydrated!==null){if(a===null){if(!y)throw Error(n(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));y[zt]=o}else js(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ot(o),y=!1}else y=tf(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(Tr(o),o):(Tr(o),null)}return Tr(o),(o.flags&128)!==0?(o.lanes=c,o):(c=m!==null,a=a!==null&&a.memoizedState!==null,c&&(m=o.child,y=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(y=m.alternate.memoizedState.cachePool.pool),v=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(v=m.memoizedState.cachePool.pool),v!==y&&(m.flags|=2048)),c!==a&&c&&(o.child.flags|=8192),Zc(o,o.updateQueue),ot(o),null);case 4:return B(),a===null&&hh(o.stateNode.containerInfo),ot(o),null;case 10:return Bn(o.type),ot(o),null;case 19:if(L(vt),m=o.memoizedState,m===null)return ot(o),null;if(y=(o.flags&128)!==0,v=m.rendering,v===null)if(y)Jo(m,!1);else{if(pt!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(v=Uc(a),v!==null){for(o.flags|=128,Jo(m,!1),a=v.updateQueue,o.updateQueue=a,Zc(o,a),o.subtreeFlags=0,a=c,c=o.child;c!==null;)_x(c,a),c=c.sibling;return X(vt,vt.current&1|2),qe&&$n(o,m.treeForkCount),o.child}a=a.sibling}m.tail!==null&&Ct()>nu&&(o.flags|=128,y=!0,Jo(m,!1),o.lanes=4194304)}else{if(!y)if(a=Uc(v),a!==null){if(o.flags|=128,y=!0,a=a.updateQueue,o.updateQueue=a,Zc(o,a),Jo(m,!0),m.tail===null&&m.tailMode==="hidden"&&!v.alternate&&!qe)return ot(o),null}else 2*Ct()-m.renderingStartTime>nu&&c!==536870912&&(o.flags|=128,y=!0,Jo(m,!1),o.lanes=4194304);m.isBackwards?(v.sibling=o.child,o.child=v):(a=m.last,a!==null?a.sibling=v:o.child=v,m.last=v)}return m.tail!==null?(a=m.tail,m.rendering=a,m.tail=a.sibling,m.renderingStartTime=Ct(),a.sibling=null,c=vt.current,X(vt,y?c&1|2:c&1),qe&&$n(o,m.treeForkCount),a):(ot(o),null);case 22:case 23:return Tr(o),pf(),m=o.memoizedState!==null,a!==null?a.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(c&536870912)!==0&&(o.flags&128)===0&&(ot(o),o.subtreeFlags&6&&(o.flags|=8192)):ot(o),c=o.updateQueue,c!==null&&Zc(o,c.retryQueue),c=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==c&&(o.flags|=2048),a!==null&&L(Ts),null;case 24:return c=null,a!==null&&(c=a.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Bn(At),ot(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function xE(a,o){switch(Jm(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return Bn(At),B(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return de(o),null;case 31:if(o.memoizedState!==null){if(Tr(o),o.alternate===null)throw Error(n(340));js()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 13:if(Tr(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(n(340));js()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return L(vt),null;case 4:return B(),null;case 10:return Bn(o.type),null;case 22:case 23:return Tr(o),pf(),a!==null&&L(Ts),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return Bn(At),null;case 25:return null;default:return null}}function nb(a,o){switch(Jm(o),o.tag){case 3:Bn(At),B();break;case 26:case 27:case 5:de(o);break;case 4:B();break;case 31:o.memoizedState!==null&&Tr(o);break;case 13:Tr(o);break;case 19:L(vt);break;case 10:Bn(o.type);break;case 22:case 23:Tr(o),pf(),a!==null&&L(Ts);break;case 24:Bn(At)}}function el(a,o){try{var c=o.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var y=m.next;c=y;do{if((c.tag&a)===a){m=void 0;var v=c.create,T=c.inst;m=v(),T.destroy=m}c=c.next}while(c!==y)}}catch(M){Ze(o,o.return,M)}}function La(a,o,c){try{var m=o.updateQueue,y=m!==null?m.lastEffect:null;if(y!==null){var v=y.next;m=v;do{if((m.tag&a)===a){var T=m.inst,M=T.destroy;if(M!==void 0){T.destroy=void 0,y=o;var H=c,se=M;try{se()}catch(fe){Ze(y,H,fe)}}}m=m.next}while(m!==v)}}catch(fe){Ze(o,o.return,fe)}}function ab(a){var o=a.updateQueue;if(o!==null){var c=a.stateNode;try{Xx(o,c)}catch(m){Ze(a,a.return,m)}}}function sb(a,o,c){c.props=Os(a.type,a.memoizedProps),c.state=a.memoizedState;try{c.componentWillUnmount()}catch(m){Ze(a,o,m)}}function tl(a,o){try{var c=a.ref;if(c!==null){switch(a.tag){case 26:case 27:case 5:var m=a.stateNode;break;case 30:m=a.stateNode;break;default:m=a.stateNode}typeof c=="function"?a.refCleanup=c(m):c.current=m}}catch(y){Ze(a,o,y)}}function Cn(a,o){var c=a.ref,m=a.refCleanup;if(c!==null)if(typeof m=="function")try{m()}catch(y){Ze(a,o,y)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){Ze(a,o,y)}else c.current=null}function ib(a){var o=a.type,c=a.memoizedProps,m=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&m.focus();break e;case"img":c.src?m.src=c.src:c.srcSet&&(m.srcset=c.srcSet)}}catch(y){Ze(a,a.return,y)}}function Gf(a,o,c){try{var m=a.stateNode;$E(m,a.type,c,o),m[fr]=o}catch(y){Ze(a,a.return,y)}}function ob(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Ha(a.type)||a.tag===4}function Xf(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||ob(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Ha(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Kf(a,o,c){var m=a.tag;if(m===5||m===6)a=a.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(a,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(a),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Ln));else if(m!==4&&(m===27&&Ha(a.type)&&(c=a.stateNode,o=null),a=a.child,a!==null))for(Kf(a,o,c),a=a.sibling;a!==null;)Kf(a,o,c),a=a.sibling}function Jc(a,o,c){var m=a.tag;if(m===5||m===6)a=a.stateNode,o?c.insertBefore(a,o):c.appendChild(a);else if(m!==4&&(m===27&&Ha(a.type)&&(c=a.stateNode),a=a.child,a!==null))for(Jc(a,o,c),a=a.sibling;a!==null;)Jc(a,o,c),a=a.sibling}function lb(a){var o=a.stateNode,c=a.memoizedProps;try{for(var m=a.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);Vt(o,m,c),o[zt]=a,o[fr]=c}catch(v){Ze(a,a.return,v)}}var Gn=!1,Et=!1,Wf=!1,cb=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function vE(a,o){if(a=a.containerInfo,yh=bu,a=wx(a),Bm(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var m=c.getSelection&&c.getSelection();if(m&&m.rangeCount!==0){c=m.anchorNode;var y=m.anchorOffset,v=m.focusNode;m=m.focusOffset;try{c.nodeType,v.nodeType}catch{c=null;break e}var T=0,M=-1,H=-1,se=0,fe=0,ge=a,ie=null;t:for(;;){for(var ue;ge!==c||y!==0&&ge.nodeType!==3||(M=T+y),ge!==v||m!==0&&ge.nodeType!==3||(H=T+m),ge.nodeType===3&&(T+=ge.nodeValue.length),(ue=ge.firstChild)!==null;)ie=ge,ge=ue;for(;;){if(ge===a)break t;if(ie===c&&++se===y&&(M=T),ie===v&&++fe===m&&(H=T),(ue=ge.nextSibling)!==null)break;ge=ie,ie=ge.parentNode}ge=ue}c=M===-1||H===-1?null:{start:M,end:H}}else c=null}c=c||{start:0,end:0}}else c=null;for(xh={focusedElem:a,selectionRange:c},bu=!1,Ft=o;Ft!==null;)if(o=Ft,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,Ft=a;else for(;Ft!==null;){switch(o=Ft,v=o.alternate,a=o.flags,o.tag){case 0:if((a&4)!==0&&(a=o.updateQueue,a=a!==null?a.events:null,a!==null))for(c=0;c<a.length;c++)y=a[c],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&v!==null){a=void 0,c=o,y=v.memoizedProps,v=v.memoizedState,m=c.stateNode;try{var je=Os(c.type,y);a=m.getSnapshotBeforeUpdate(je,v),m.__reactInternalSnapshotBeforeUpdate=a}catch(Re){Ze(c,c.return,Re)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,c=a.nodeType,c===9)wh(a);else if(c===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":wh(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=o.sibling,a!==null){a.return=o.return,Ft=a;break}Ft=o.return}}function ub(a,o,c){var m=c.flags;switch(c.tag){case 0:case 11:case 15:Kn(a,c),m&4&&el(5,c);break;case 1:if(Kn(a,c),m&4)if(a=c.stateNode,o===null)try{a.componentDidMount()}catch(T){Ze(c,c.return,T)}else{var y=Os(c.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(y,o,a.__reactInternalSnapshotBeforeUpdate)}catch(T){Ze(c,c.return,T)}}m&64&&ab(c),m&512&&tl(c,c.return);break;case 3:if(Kn(a,c),m&64&&(a=c.updateQueue,a!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{Xx(a,o)}catch(T){Ze(c,c.return,T)}}break;case 27:o===null&&m&4&&lb(c);case 26:case 5:Kn(a,c),o===null&&m&4&&ib(c),m&512&&tl(c,c.return);break;case 12:Kn(a,c);break;case 31:Kn(a,c),m&4&&fb(a,c);break;case 13:Kn(a,c),m&4&&hb(a,c),m&64&&(a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(c=TE.bind(null,c),XE(a,c))));break;case 22:if(m=c.memoizedState!==null||Gn,!m){o=o!==null&&o.memoizedState!==null||Et,y=Gn;var v=Et;Gn=m,(Et=o)&&!v?Wn(a,c,(c.subtreeFlags&8772)!==0):Kn(a,c),Gn=y,Et=v}break;case 30:break;default:Kn(a,c)}}function db(a){var o=a.alternate;o!==null&&(a.alternate=null,db(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&jm(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var ut=null,pr=!1;function Xn(a,o,c){for(c=c.child;c!==null;)mb(a,o,c),c=c.sibling}function mb(a,o,c){if(nr&&typeof nr.onCommitFiberUnmount=="function")try{nr.onCommitFiberUnmount(xs,c)}catch{}switch(c.tag){case 26:Et||Cn(c,o),Xn(a,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Et||Cn(c,o);var m=ut,y=pr;Ha(c.type)&&(ut=c.stateNode,pr=!1),Xn(a,o,c),ul(c.stateNode),ut=m,pr=y;break;case 5:Et||Cn(c,o);case 6:if(m=ut,y=pr,ut=null,Xn(a,o,c),ut=m,pr=y,ut!==null)if(pr)try{(ut.nodeType===9?ut.body:ut.nodeName==="HTML"?ut.ownerDocument.body:ut).removeChild(c.stateNode)}catch(v){Ze(c,o,v)}else try{ut.removeChild(c.stateNode)}catch(v){Ze(c,o,v)}break;case 18:ut!==null&&(pr?(a=ut,aw(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,c.stateNode),Wi(a)):aw(ut,c.stateNode));break;case 4:m=ut,y=pr,ut=c.stateNode.containerInfo,pr=!0,Xn(a,o,c),ut=m,pr=y;break;case 0:case 11:case 14:case 15:La(2,c,o),Et||La(4,c,o),Xn(a,o,c);break;case 1:Et||(Cn(c,o),m=c.stateNode,typeof m.componentWillUnmount=="function"&&sb(c,o,m)),Xn(a,o,c);break;case 21:Xn(a,o,c);break;case 22:Et=(m=Et)||c.memoizedState!==null,Xn(a,o,c),Et=m;break;default:Xn(a,o,c)}}function fb(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Wi(a)}catch(c){Ze(o,o.return,c)}}}function hb(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Wi(a)}catch(c){Ze(o,o.return,c)}}function bE(a){switch(a.tag){case 31:case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new cb),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new cb),o;default:throw Error(n(435,a.tag))}}function eu(a,o){var c=bE(a);o.forEach(function(m){if(!c.has(m)){c.add(m);var y=EE.bind(null,a,m);m.then(y,y)}})}function gr(a,o){var c=o.deletions;if(c!==null)for(var m=0;m<c.length;m++){var y=c[m],v=a,T=o,M=T;e:for(;M!==null;){switch(M.tag){case 27:if(Ha(M.type)){ut=M.stateNode,pr=!1;break e}break;case 5:ut=M.stateNode,pr=!1;break e;case 3:case 4:ut=M.stateNode.containerInfo,pr=!0;break e}M=M.return}if(ut===null)throw Error(n(160));mb(v,T,y),ut=null,pr=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)pb(o,a),o=o.sibling}var cn=null;function pb(a,o){var c=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:gr(o,a),yr(a),m&4&&(La(3,a,a.return),el(3,a),La(5,a,a.return));break;case 1:gr(o,a),yr(a),m&512&&(Et||c===null||Cn(c,c.return)),m&64&&Gn&&(a=a.updateQueue,a!==null&&(m=a.callbacks,m!==null&&(c=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=c===null?m:c.concat(m))));break;case 26:var y=cn;if(gr(o,a),yr(a),m&512&&(Et||c===null||Cn(c,c.return)),m&4){var v=c!==null?c.memoizedState:null;if(m=a.memoizedState,c===null)if(m===null)if(a.stateNode===null){e:{m=a.type,c=a.memoizedProps,y=y.ownerDocument||y;t:switch(m){case"title":v=y.getElementsByTagName("title")[0],(!v||v[To]||v[zt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(m),y.head.insertBefore(v,y.querySelector("head > title"))),Vt(v,m,c),v[zt]=a,Lt(v),m=v;break e;case"link":var T=pw("link","href",y).get(m+(c.href||""));if(T){for(var M=0;M<T.length;M++)if(v=T[M],v.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&v.getAttribute("rel")===(c.rel==null?null:c.rel)&&v.getAttribute("title")===(c.title==null?null:c.title)&&v.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){T.splice(M,1);break t}}v=y.createElement(m),Vt(v,m,c),y.head.appendChild(v);break;case"meta":if(T=pw("meta","content",y).get(m+(c.content||""))){for(M=0;M<T.length;M++)if(v=T[M],v.getAttribute("content")===(c.content==null?null:""+c.content)&&v.getAttribute("name")===(c.name==null?null:c.name)&&v.getAttribute("property")===(c.property==null?null:c.property)&&v.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&v.getAttribute("charset")===(c.charSet==null?null:c.charSet)){T.splice(M,1);break t}}v=y.createElement(m),Vt(v,m,c),y.head.appendChild(v);break;default:throw Error(n(468,m))}v[zt]=a,Lt(v),m=v}a.stateNode=m}else gw(y,a.type,a.stateNode);else a.stateNode=hw(y,m,a.memoizedProps);else v!==m?(v===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):v.count--,m===null?gw(y,a.type,a.stateNode):hw(y,m,a.memoizedProps)):m===null&&a.stateNode!==null&&Gf(a,a.memoizedProps,c.memoizedProps)}break;case 27:gr(o,a),yr(a),m&512&&(Et||c===null||Cn(c,c.return)),c!==null&&m&4&&Gf(a,a.memoizedProps,c.memoizedProps);break;case 5:if(gr(o,a),yr(a),m&512&&(Et||c===null||Cn(c,c.return)),a.flags&32){y=a.stateNode;try{vi(y,"")}catch(je){Ze(a,a.return,je)}}m&4&&a.stateNode!=null&&(y=a.memoizedProps,Gf(a,y,c!==null?c.memoizedProps:y)),m&1024&&(Wf=!0);break;case 6:if(gr(o,a),yr(a),m&4){if(a.stateNode===null)throw Error(n(162));m=a.memoizedProps,c=a.stateNode;try{c.nodeValue=m}catch(je){Ze(a,a.return,je)}}break;case 3:if(gu=null,y=cn,cn=hu(o.containerInfo),gr(o,a),cn=y,yr(a),m&4&&c!==null&&c.memoizedState.isDehydrated)try{Wi(o.containerInfo)}catch(je){Ze(a,a.return,je)}Wf&&(Wf=!1,gb(a));break;case 4:m=cn,cn=hu(a.stateNode.containerInfo),gr(o,a),yr(a),cn=m;break;case 12:gr(o,a),yr(a);break;case 31:gr(o,a),yr(a),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,eu(a,m)));break;case 13:gr(o,a),yr(a),a.child.flags&8192&&a.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(ru=Ct()),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,eu(a,m)));break;case 22:y=a.memoizedState!==null;var H=c!==null&&c.memoizedState!==null,se=Gn,fe=Et;if(Gn=se||y,Et=fe||H,gr(o,a),Et=fe,Gn=se,yr(a),m&8192)e:for(o=a.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(c===null||H||Gn||Et||Ms(a)),c=null,o=a;;){if(o.tag===5||o.tag===26){if(c===null){H=c=o;try{if(v=H.stateNode,y)T=v.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{M=H.stateNode;var ge=H.memoizedProps.style,ie=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;M.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(je){Ze(H,H.return,je)}}}else if(o.tag===6){if(c===null){H=o;try{H.stateNode.nodeValue=y?"":H.memoizedProps}catch(je){Ze(H,H.return,je)}}}else if(o.tag===18){if(c===null){H=o;try{var ue=H.stateNode;y?sw(ue,!0):sw(H.stateNode,!1)}catch(je){Ze(H,H.return,je)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=a.updateQueue,m!==null&&(c=m.retryQueue,c!==null&&(m.retryQueue=null,eu(a,c))));break;case 19:gr(o,a),yr(a),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,eu(a,m)));break;case 30:break;case 21:break;default:gr(o,a),yr(a)}}function yr(a){var o=a.flags;if(o&2){try{for(var c,m=a.return;m!==null;){if(ob(m)){c=m;break}m=m.return}if(c==null)throw Error(n(160));switch(c.tag){case 27:var y=c.stateNode,v=Xf(a);Jc(a,v,y);break;case 5:var T=c.stateNode;c.flags&32&&(vi(T,""),c.flags&=-33);var M=Xf(a);Jc(a,M,T);break;case 3:case 4:var H=c.stateNode.containerInfo,se=Xf(a);Kf(a,se,H);break;default:throw Error(n(161))}}catch(fe){Ze(a,a.return,fe)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function gb(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;gb(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function Kn(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)ub(a,o.alternate,o),o=o.sibling}function Ms(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:La(4,o,o.return),Ms(o);break;case 1:Cn(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&sb(o,o.return,c),Ms(o);break;case 27:ul(o.stateNode);case 26:case 5:Cn(o,o.return),Ms(o);break;case 22:o.memoizedState===null&&Ms(o);break;case 30:Ms(o);break;default:Ms(o)}a=a.sibling}}function Wn(a,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,y=a,v=o,T=v.flags;switch(v.tag){case 0:case 11:case 15:Wn(y,v,c),el(4,v);break;case 1:if(Wn(y,v,c),m=v,y=m.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(se){Ze(m,m.return,se)}if(m=v,y=m.updateQueue,y!==null){var M=m.stateNode;try{var H=y.shared.hiddenCallbacks;if(H!==null)for(y.shared.hiddenCallbacks=null,y=0;y<H.length;y++)Gx(H[y],M)}catch(se){Ze(m,m.return,se)}}c&&T&64&&ab(v),tl(v,v.return);break;case 27:lb(v);case 26:case 5:Wn(y,v,c),c&&m===null&&T&4&&ib(v),tl(v,v.return);break;case 12:Wn(y,v,c);break;case 31:Wn(y,v,c),c&&T&4&&fb(y,v);break;case 13:Wn(y,v,c),c&&T&4&&hb(y,v);break;case 22:v.memoizedState===null&&Wn(y,v,c),tl(v,v.return);break;case 30:break;default:Wn(y,v,c)}o=o.sibling}}function Qf(a,o){var c=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==c&&(a!=null&&a.refCount++,c!=null&&zo(c))}function Zf(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&zo(a))}function un(a,o,c,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)yb(a,o,c,m),o=o.sibling}function yb(a,o,c,m){var y=o.flags;switch(o.tag){case 0:case 11:case 15:un(a,o,c,m),y&2048&&el(9,o);break;case 1:un(a,o,c,m);break;case 3:un(a,o,c,m),y&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&zo(a)));break;case 12:if(y&2048){un(a,o,c,m),a=o.stateNode;try{var v=o.memoizedProps,T=v.id,M=v.onPostCommit;typeof M=="function"&&M(T,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(H){Ze(o,o.return,H)}}else un(a,o,c,m);break;case 31:un(a,o,c,m);break;case 13:un(a,o,c,m);break;case 23:break;case 22:v=o.stateNode,T=o.alternate,o.memoizedState!==null?v._visibility&2?un(a,o,c,m):rl(a,o):v._visibility&2?un(a,o,c,m):(v._visibility|=2,Ui(a,o,c,m,(o.subtreeFlags&10256)!==0||!1)),y&2048&&Qf(T,o);break;case 24:un(a,o,c,m),y&2048&&Zf(o.alternate,o);break;default:un(a,o,c,m)}}function Ui(a,o,c,m,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var v=a,T=o,M=c,H=m,se=T.flags;switch(T.tag){case 0:case 11:case 15:Ui(v,T,M,H,y),el(8,T);break;case 23:break;case 22:var fe=T.stateNode;T.memoizedState!==null?fe._visibility&2?Ui(v,T,M,H,y):rl(v,T):(fe._visibility|=2,Ui(v,T,M,H,y)),y&&se&2048&&Qf(T.alternate,T);break;case 24:Ui(v,T,M,H,y),y&&se&2048&&Zf(T.alternate,T);break;default:Ui(v,T,M,H,y)}o=o.sibling}}function rl(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=a,m=o,y=m.flags;switch(m.tag){case 22:rl(c,m),y&2048&&Qf(m.alternate,m);break;case 24:rl(c,m),y&2048&&Zf(m.alternate,m);break;default:rl(c,m)}o=o.sibling}}var nl=8192;function $i(a,o,c){if(a.subtreeFlags&nl)for(a=a.child;a!==null;)xb(a,o,c),a=a.sibling}function xb(a,o,c){switch(a.tag){case 26:$i(a,o,c),a.flags&nl&&a.memoizedState!==null&&i_(c,cn,a.memoizedState,a.memoizedProps);break;case 5:$i(a,o,c);break;case 3:case 4:var m=cn;cn=hu(a.stateNode.containerInfo),$i(a,o,c),cn=m;break;case 22:a.memoizedState===null&&(m=a.alternate,m!==null&&m.memoizedState!==null?(m=nl,nl=16777216,$i(a,o,c),nl=m):$i(a,o,c));break;default:$i(a,o,c)}}function vb(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function al(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var m=o[c];Ft=m,wb(m,a)}vb(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)bb(a),a=a.sibling}function bb(a){switch(a.tag){case 0:case 11:case 15:al(a),a.flags&2048&&La(9,a,a.return);break;case 3:al(a);break;case 12:al(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,tu(a)):al(a);break;default:al(a)}}function tu(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var m=o[c];Ft=m,wb(m,a)}vb(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:La(8,o,o.return),tu(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,tu(o));break;default:tu(o)}a=a.sibling}}function wb(a,o){for(;Ft!==null;){var c=Ft;switch(c.tag){case 0:case 11:case 15:La(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var m=c.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:zo(c.memoizedState.cache)}if(m=c.child,m!==null)m.return=c,Ft=m;else e:for(c=a;Ft!==null;){m=Ft;var y=m.sibling,v=m.return;if(db(m),m===c){Ft=null;break e}if(y!==null){y.return=v,Ft=y;break e}Ft=v}}}var wE={getCacheForType:function(a){var o=qt(At),c=o.data.get(a);return c===void 0&&(c=a(),o.data.set(a,c)),c},cacheSignal:function(){return qt(At).controller.signal}},SE=typeof WeakMap=="function"?WeakMap:Map,We=0,nt=null,Ue=null,ze=0,Qe=0,Er=null,Fa=!1,zi=!1,Jf=!1,Qn=0,pt=0,Ua=0,Is=0,eh=0,_r=0,Bi=0,sl=null,xr=null,th=!1,ru=0,Sb=0,nu=1/0,au=null,$a=null,Ot=0,za=null,qi=null,Zn=0,rh=0,nh=null,Nb=null,il=0,ah=null;function Rr(){return(We&2)!==0&&ze!==0?ze&-ze:U.T!==null?uh():U0()}function Cb(){if(_r===0)if((ze&536870912)===0||qe){var a=Le;Le<<=1,(Le&3932160)===0&&(Le=262144),_r=a}else _r=536870912;return a=Dr.current,a!==null&&(a.flags|=32),_r}function vr(a,o,c){(a===nt&&(Qe===2||Qe===9)||a.cancelPendingCommit!==null)&&(Hi(a,0),Ba(a,ze,_r,!1)),Do(a,c),((We&2)===0||a!==nt)&&(a===nt&&((We&2)===0&&(Is|=c),pt===4&&Ba(a,ze,_r,!1)),jn(a))}function jb(a,o,c){if((We&6)!==0)throw Error(n(327));var m=!c&&(o&127)===0&&(o&a.expiredLanes)===0||on(a,o),y=m?jE(a,o):ih(a,o,!0),v=m;do{if(y===0){zi&&!m&&Ba(a,o,0,!1);break}else{if(c=a.current.alternate,v&&!NE(c)){y=ih(a,o,!1),v=!1;continue}if(y===2){if(v=o,a.errorRecoveryDisabledLanes&v)var T=0;else T=a.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){o=T;e:{var M=a;y=sl;var H=M.current.memoizedState.isDehydrated;if(H&&(Hi(M,T).flags|=256),T=ih(M,T,!1),T!==2){if(Jf&&!H){M.errorRecoveryDisabledLanes|=v,Is|=v,y=4;break e}v=xr,xr=y,v!==null&&(xr===null?xr=v:xr.push.apply(xr,v))}y=T}if(v=!1,y!==2)continue}}if(y===1){Hi(a,0),Ba(a,o,0,!0);break}e:{switch(m=a,v=y,v){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:Ba(m,o,_r,!Fa);break e;case 2:xr=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(y=ru+300-Ct(),10<y)){if(Ba(m,o,_r,!Fa),xt(m,0,!0)!==0)break e;Zn=o,m.timeoutHandle=rw(Ab.bind(null,m,c,xr,au,th,o,_r,Is,Bi,Fa,v,"Throttled",-0,0),y);break e}Ab(m,c,xr,au,th,o,_r,Is,Bi,Fa,v,null,-0,0)}}break}while(!0);jn(a)}function Ab(a,o,c,m,y,v,T,M,H,se,fe,ge,ie,ue){if(a.timeoutHandle=-1,ge=o.subtreeFlags,ge&8192||(ge&16785408)===16785408){ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ln},xb(o,v,ge);var je=(v&62914560)===v?ru-Ct():(v&4194048)===v?Sb-Ct():0;if(je=o_(ge,je),je!==null){Zn=v,a.cancelPendingCommit=je(Mb.bind(null,a,o,v,c,m,y,T,M,H,fe,ge,null,ie,ue)),Ba(a,v,T,!se);return}}Mb(a,o,v,c,m,y,T,M,H)}function NE(a){for(var o=a;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var m=0;m<c.length;m++){var y=c[m],v=y.getSnapshot;y=y.value;try{if(!jr(v(),y))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ba(a,o,c,m){o&=~eh,o&=~Is,a.suspendedLanes|=o,a.pingedLanes&=~o,m&&(a.warmLanes|=o),m=a.expirationTimes;for(var y=o;0<y;){var v=31-ar(y),T=1<<v;m[v]=-1,y&=~T}c!==0&&P0(a,c,o)}function su(){return(We&6)===0?(ol(0),!1):!0}function sh(){if(Ue!==null){if(Qe===0)var a=Ue.return;else a=Ue,zn=As=null,wf(a),Mi=null,qo=0,a=Ue;for(;a!==null;)nb(a.alternate,a),a=a.return;Ue=null}}function Hi(a,o){var c=a.timeoutHandle;c!==-1&&(a.timeoutHandle=-1,qE(c)),c=a.cancelPendingCommit,c!==null&&(a.cancelPendingCommit=null,c()),Zn=0,sh(),nt=a,Ue=c=Un(a.current,null),ze=o,Qe=0,Er=null,Fa=!1,zi=on(a,o),Jf=!1,Bi=_r=eh=Is=Ua=pt=0,xr=sl=null,th=!1,(o&8)!==0&&(o|=o&32);var m=a.entangledLanes;if(m!==0)for(a=a.entanglements,m&=o;0<m;){var y=31-ar(m),v=1<<y;o|=a[y],m&=~v}return Qn=o,Ac(),c}function Db(a,o){Oe=null,U.H=Qo,o===Oi||o===Mc?(o=qx(),Qe=3):o===cf?(o=qx(),Qe=4):Qe=o===Lf?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Er=o,Ue===null&&(pt=1,Xc(a,Vr(o,a.current)))}function Tb(){var a=Dr.current;return a===null?!0:(ze&4194048)===ze?Kr===null:(ze&62914560)===ze||(ze&536870912)!==0?a===Kr:!1}function Eb(){var a=U.H;return U.H=Qo,a===null?Qo:a}function _b(){var a=U.A;return U.A=wE,a}function iu(){pt=4,Fa||(ze&4194048)!==ze&&Dr.current!==null||(zi=!0),(Ua&134217727)===0&&(Is&134217727)===0||nt===null||Ba(nt,ze,_r,!1)}function ih(a,o,c){var m=We;We|=2;var y=Eb(),v=_b();(nt!==a||ze!==o)&&(au=null,Hi(a,o)),o=!1;var T=pt;e:do try{if(Qe!==0&&Ue!==null){var M=Ue,H=Er;switch(Qe){case 8:sh(),T=6;break e;case 3:case 2:case 9:case 6:Dr.current===null&&(o=!0);var se=Qe;if(Qe=0,Er=null,Vi(a,M,H,se),c&&zi){T=0;break e}break;default:se=Qe,Qe=0,Er=null,Vi(a,M,H,se)}}CE(),T=pt;break}catch(fe){Db(a,fe)}while(!0);return o&&a.shellSuspendCounter++,zn=As=null,We=m,U.H=y,U.A=v,Ue===null&&(nt=null,ze=0,Ac()),T}function CE(){for(;Ue!==null;)Rb(Ue)}function jE(a,o){var c=We;We|=2;var m=Eb(),y=_b();nt!==a||ze!==o?(au=null,nu=Ct()+500,Hi(a,o)):zi=on(a,o);e:do try{if(Qe!==0&&Ue!==null){o=Ue;var v=Er;t:switch(Qe){case 1:Qe=0,Er=null,Vi(a,o,v,1);break;case 2:case 9:if(zx(v)){Qe=0,Er=null,kb(o);break}o=function(){Qe!==2&&Qe!==9||nt!==a||(Qe=7),jn(a)},v.then(o,o);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:zx(v)?(Qe=0,Er=null,kb(o)):(Qe=0,Er=null,Vi(a,o,v,7));break;case 5:var T=null;switch(Ue.tag){case 26:T=Ue.memoizedState;case 5:case 27:var M=Ue;if(T?yw(T):M.stateNode.complete){Qe=0,Er=null;var H=M.sibling;if(H!==null)Ue=H;else{var se=M.return;se!==null?(Ue=se,ou(se)):Ue=null}break t}}Qe=0,Er=null,Vi(a,o,v,5);break;case 6:Qe=0,Er=null,Vi(a,o,v,6);break;case 8:sh(),pt=6;break e;default:throw Error(n(462))}}AE();break}catch(fe){Db(a,fe)}while(!0);return zn=As=null,U.H=m,U.A=y,We=c,Ue!==null?0:(nt=null,ze=0,Ac(),pt)}function AE(){for(;Ue!==null&&!ja();)Rb(Ue)}function Rb(a){var o=tb(a.alternate,a,Qn);a.memoizedProps=a.pendingProps,o===null?ou(a):Ue=o}function kb(a){var o=a,c=o.alternate;switch(o.tag){case 15:case 0:o=Kv(c,o,o.pendingProps,o.type,void 0,ze);break;case 11:o=Kv(c,o,o.pendingProps,o.type.render,o.ref,ze);break;case 5:wf(o);default:nb(c,o),o=Ue=_x(o,Qn),o=tb(c,o,Qn)}a.memoizedProps=a.pendingProps,o===null?ou(a):Ue=o}function Vi(a,o,c,m){zn=As=null,wf(o),Mi=null,qo=0;var y=o.return;try{if(hE(a,y,o,c,ze)){pt=1,Xc(a,Vr(c,a.current)),Ue=null;return}}catch(v){if(y!==null)throw Ue=y,v;pt=1,Xc(a,Vr(c,a.current)),Ue=null;return}o.flags&32768?(qe||m===1?a=!0:zi||(ze&536870912)!==0?a=!1:(Fa=a=!0,(m===2||m===9||m===3||m===6)&&(m=Dr.current,m!==null&&m.tag===13&&(m.flags|=16384))),Ob(o,a)):ou(o)}function ou(a){var o=a;do{if((o.flags&32768)!==0){Ob(o,Fa);return}a=o.return;var c=yE(o.alternate,o,Qn);if(c!==null){Ue=c;return}if(o=o.sibling,o!==null){Ue=o;return}Ue=o=a}while(o!==null);pt===0&&(pt=5)}function Ob(a,o){do{var c=xE(a.alternate,a);if(c!==null){c.flags&=32767,Ue=c;return}if(c=a.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(a=a.sibling,a!==null)){Ue=a;return}Ue=a=c}while(a!==null);pt=6,Ue=null}function Mb(a,o,c,m,y,v,T,M,H){a.cancelPendingCommit=null;do lu();while(Ot!==0);if((We&6)!==0)throw Error(n(327));if(o!==null){if(o===a.current)throw Error(n(177));if(v=o.lanes|o.childLanes,v|=Gm,sT(a,c,v,T,M,H),a===nt&&(Ue=nt=null,ze=0),qi=o,za=a,Zn=c,rh=v,nh=y,Nb=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,_E(In,function(){return Ub(),null})):(a.callbackNode=null,a.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=U.T,U.T=null,y=J.p,J.p=2,T=We,We|=4;try{vE(a,o,c)}finally{We=T,J.p=y,U.T=m}}Ot=1,Ib(),Pb(),Lb()}}function Ib(){if(Ot===1){Ot=0;var a=za,o=qi,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=U.T,U.T=null;var m=J.p;J.p=2;var y=We;We|=4;try{pb(o,a);var v=xh,T=wx(a.containerInfo),M=v.focusedElem,H=v.selectionRange;if(T!==M&&M&&M.ownerDocument&&bx(M.ownerDocument.documentElement,M)){if(H!==null&&Bm(M)){var se=H.start,fe=H.end;if(fe===void 0&&(fe=se),"selectionStart"in M)M.selectionStart=se,M.selectionEnd=Math.min(fe,M.value.length);else{var ge=M.ownerDocument||document,ie=ge&&ge.defaultView||window;if(ie.getSelection){var ue=ie.getSelection(),je=M.textContent.length,Re=Math.min(H.start,je),rt=H.end===void 0?Re:Math.min(H.end,je);!ue.extend&&Re>rt&&(T=rt,rt=Re,Re=T);var W=vx(M,Re),G=vx(M,rt);if(W&&G&&(ue.rangeCount!==1||ue.anchorNode!==W.node||ue.anchorOffset!==W.offset||ue.focusNode!==G.node||ue.focusOffset!==G.offset)){var ne=ge.createRange();ne.setStart(W.node,W.offset),ue.removeAllRanges(),Re>rt?(ue.addRange(ne),ue.extend(G.node,G.offset)):(ne.setEnd(G.node,G.offset),ue.addRange(ne))}}}}for(ge=[],ue=M;ue=ue.parentNode;)ue.nodeType===1&&ge.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<ge.length;M++){var he=ge[M];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}bu=!!yh,xh=yh=null}finally{We=y,J.p=m,U.T=c}}a.current=o,Ot=2}}function Pb(){if(Ot===2){Ot=0;var a=za,o=qi,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=U.T,U.T=null;var m=J.p;J.p=2;var y=We;We|=4;try{ub(a,o.alternate,o)}finally{We=y,J.p=m,U.T=c}}Ot=3}}function Lb(){if(Ot===4||Ot===3){Ot=0,gm();var a=za,o=qi,c=Zn,m=Nb;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Ot=5:(Ot=0,qi=za=null,Fb(a,a.pendingLanes));var y=a.pendingLanes;if(y===0&&($a=null),Nm(c),o=o.stateNode,nr&&typeof nr.onCommitFiberRoot=="function")try{nr.onCommitFiberRoot(xs,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=U.T,y=J.p,J.p=2,U.T=null;try{for(var v=a.onRecoverableError,T=0;T<m.length;T++){var M=m[T];v(M.value,{componentStack:M.stack})}}finally{U.T=o,J.p=y}}(Zn&3)!==0&&lu(),jn(a),y=a.pendingLanes,(c&261930)!==0&&(y&42)!==0?a===ah?il++:(il=0,ah=a):il=0,ol(0)}}function Fb(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,zo(o)))}function lu(){return Ib(),Pb(),Lb(),Ub()}function Ub(){if(Ot!==5)return!1;var a=za,o=rh;rh=0;var c=Nm(Zn),m=U.T,y=J.p;try{J.p=32>c?32:c,U.T=null,c=nh,nh=null;var v=za,T=Zn;if(Ot=0,qi=za=null,Zn=0,(We&6)!==0)throw Error(n(331));var M=We;if(We|=4,bb(v.current),yb(v,v.current,T,c),We=M,ol(0,!1),nr&&typeof nr.onPostCommitFiberRoot=="function")try{nr.onPostCommitFiberRoot(xs,v)}catch{}return!0}finally{J.p=y,U.T=m,Fb(a,o)}}function $b(a,o,c){o=Vr(c,o),o=Pf(a.stateNode,o,2),a=Ma(a,o,2),a!==null&&(Do(a,2),jn(a))}function Ze(a,o,c){if(a.tag===3)$b(a,a,c);else for(;o!==null;){if(o.tag===3){$b(o,a,c);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&($a===null||!$a.has(m))){a=Vr(c,a),c=zv(2),m=Ma(o,c,2),m!==null&&(Bv(c,m,o,a),Do(m,2),jn(m));break}}o=o.return}}function oh(a,o,c){var m=a.pingCache;if(m===null){m=a.pingCache=new SE;var y=new Set;m.set(o,y)}else y=m.get(o),y===void 0&&(y=new Set,m.set(o,y));y.has(c)||(Jf=!0,y.add(c),a=DE.bind(null,a,o,c),o.then(a,a))}function DE(a,o,c){var m=a.pingCache;m!==null&&m.delete(o),a.pingedLanes|=a.suspendedLanes&c,a.warmLanes&=~c,nt===a&&(ze&c)===c&&(pt===4||pt===3&&(ze&62914560)===ze&&300>Ct()-ru?(We&2)===0&&Hi(a,0):eh|=c,Bi===ze&&(Bi=0)),jn(a)}function zb(a,o){o===0&&(o=I0()),a=Ns(a,o),a!==null&&(Do(a,o),jn(a))}function TE(a){var o=a.memoizedState,c=0;o!==null&&(c=o.retryLane),zb(a,c)}function EE(a,o){var c=0;switch(a.tag){case 31:case 13:var m=a.stateNode,y=a.memoizedState;y!==null&&(c=y.retryLane);break;case 19:m=a.stateNode;break;case 22:m=a.stateNode._retryCache;break;default:throw Error(n(314))}m!==null&&m.delete(o),zb(a,c)}function _E(a,o){return ys(a,o)}var cu=null,Yi=null,lh=!1,uu=!1,ch=!1,qa=0;function jn(a){a!==Yi&&a.next===null&&(Yi===null?cu=Yi=a:Yi=Yi.next=a),uu=!0,lh||(lh=!0,kE())}function ol(a,o){if(!ch&&uu){ch=!0;do for(var c=!1,m=cu;m!==null;){if(a!==0){var y=m.pendingLanes;if(y===0)var v=0;else{var T=m.suspendedLanes,M=m.pingedLanes;v=(1<<31-ar(42|a)+1)-1,v&=y&~(T&~M),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(c=!0,Vb(m,v))}else v=ze,v=xt(m,m===nt?v:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(v&3)===0||on(m,v)||(c=!0,Vb(m,v));m=m.next}while(c);ch=!1}}function RE(){Bb()}function Bb(){uu=lh=!1;var a=0;qa!==0&&BE()&&(a=qa);for(var o=Ct(),c=null,m=cu;m!==null;){var y=m.next,v=qb(m,o);v===0?(m.next=null,c===null?cu=y:c.next=y,y===null&&(Yi=c)):(c=m,(a!==0||(v&3)!==0)&&(uu=!0)),m=y}Ot!==0&&Ot!==5||ol(a),qa!==0&&(qa=0)}function qb(a,o){for(var c=a.suspendedLanes,m=a.pingedLanes,y=a.expirationTimes,v=a.pendingLanes&-62914561;0<v;){var T=31-ar(v),M=1<<T,H=y[T];H===-1?((M&c)===0||(M&m)!==0)&&(y[T]=bm(M,o)):H<=o&&(a.expiredLanes|=M),v&=~M}if(o=nt,c=ze,c=xt(a,a===o?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m=a.callbackNode,c===0||a===o&&(Qe===2||Qe===9)||a.cancelPendingCommit!==null)return m!==null&&m!==null&&Ca(m),a.callbackNode=null,a.callbackPriority=0;if((c&3)===0||on(a,c)){if(o=c&-c,o===a.callbackPriority)return o;switch(m!==null&&Ca(m),Nm(c)){case 2:case 8:c=mc;break;case 32:c=In;break;case 268435456:c=fc;break;default:c=In}return m=Hb.bind(null,a),c=ys(c,m),a.callbackPriority=o,a.callbackNode=c,o}return m!==null&&m!==null&&Ca(m),a.callbackPriority=2,a.callbackNode=null,2}function Hb(a,o){if(Ot!==0&&Ot!==5)return a.callbackNode=null,a.callbackPriority=0,null;var c=a.callbackNode;if(lu()&&a.callbackNode!==c)return null;var m=ze;return m=xt(a,a===nt?m:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m===0?null:(jb(a,m,o),qb(a,Ct()),a.callbackNode!=null&&a.callbackNode===c?Hb.bind(null,a):null)}function Vb(a,o){if(lu())return null;jb(a,o,!0)}function kE(){HE(function(){(We&6)!==0?ys(mi,RE):Bb()})}function uh(){if(qa===0){var a=Ri;a===0&&(a=Ee,Ee<<=1,(Ee&261888)===0&&(Ee=256)),qa=a}return qa}function Yb(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:xc(""+a)}function Gb(a,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,a.id&&c.setAttribute("form",a.id),o.parentNode.insertBefore(c,o),a=new FormData(a),c.parentNode.removeChild(c),a}function OE(a,o,c,m,y){if(o==="submit"&&c&&c.stateNode===y){var v=Yb((y[fr]||null).action),T=m.submitter;T&&(o=(o=T[fr]||null)?Yb(o.formAction):T.getAttribute("formAction"),o!==null&&(v=o,T=null));var M=new Sc("action","action",null,m,y);a.push({event:M,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(qa!==0){var H=T?Gb(y,T):new FormData(y);_f(c,{pending:!0,data:H,method:y.method,action:v},null,H)}}else typeof v=="function"&&(M.preventDefault(),H=T?Gb(y,T):new FormData(y),_f(c,{pending:!0,data:H,method:y.method,action:v},v,H))},currentTarget:y}]})}}for(var dh=0;dh<Ym.length;dh++){var mh=Ym[dh],ME=mh.toLowerCase(),IE=mh[0].toUpperCase()+mh.slice(1);ln(ME,"on"+IE)}ln(Cx,"onAnimationEnd"),ln(jx,"onAnimationIteration"),ln(Ax,"onAnimationStart"),ln("dblclick","onDoubleClick"),ln("focusin","onFocus"),ln("focusout","onBlur"),ln(QT,"onTransitionRun"),ln(ZT,"onTransitionStart"),ln(JT,"onTransitionCancel"),ln(Dx,"onTransitionEnd"),yi("onMouseEnter",["mouseout","mouseover"]),yi("onMouseLeave",["mouseout","mouseover"]),yi("onPointerEnter",["pointerout","pointerover"]),yi("onPointerLeave",["pointerout","pointerover"]),vs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vs("onBeforeInput",["compositionend","keypress","textInput","paste"]),vs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ll));function Xb(a,o){o=(o&4)!==0;for(var c=0;c<a.length;c++){var m=a[c],y=m.event;m=m.listeners;e:{var v=void 0;if(o)for(var T=m.length-1;0<=T;T--){var M=m[T],H=M.instance,se=M.currentTarget;if(M=M.listener,H!==v&&y.isPropagationStopped())break e;v=M,y.currentTarget=se;try{v(y)}catch(fe){jc(fe)}y.currentTarget=null,v=H}else for(T=0;T<m.length;T++){if(M=m[T],H=M.instance,se=M.currentTarget,M=M.listener,H!==v&&y.isPropagationStopped())break e;v=M,y.currentTarget=se;try{v(y)}catch(fe){jc(fe)}y.currentTarget=null,v=H}}}}function $e(a,o){var c=o[Cm];c===void 0&&(c=o[Cm]=new Set);var m=a+"__bubble";c.has(m)||(Kb(o,a,2,!1),c.add(m))}function fh(a,o,c){var m=0;o&&(m|=4),Kb(c,a,m,o)}var du="_reactListening"+Math.random().toString(36).slice(2);function hh(a){if(!a[du]){a[du]=!0,B0.forEach(function(c){c!=="selectionchange"&&(PE.has(c)||fh(c,!1,a),fh(c,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[du]||(o[du]=!0,fh("selectionchange",!1,o))}}function Kb(a,o,c,m){switch(Cw(o)){case 2:var y=u_;break;case 8:y=d_;break;default:y=Eh}c=y.bind(null,o,c,a),y=void 0,!Om||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),m?y!==void 0?a.addEventListener(o,c,{capture:!0,passive:y}):a.addEventListener(o,c,!0):y!==void 0?a.addEventListener(o,c,{passive:y}):a.addEventListener(o,c,!1)}function ph(a,o,c,m,y){var v=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var T=m.tag;if(T===3||T===4){var M=m.stateNode.containerInfo;if(M===y)break;if(T===4)for(T=m.return;T!==null;){var H=T.tag;if((H===3||H===4)&&T.stateNode.containerInfo===y)return;T=T.return}for(;M!==null;){if(T=hi(M),T===null)return;if(H=T.tag,H===5||H===6||H===26||H===27){m=v=T;continue e}M=M.parentNode}}m=m.return}ex(function(){var se=v,fe=Rm(c),ge=[];e:{var ie=Tx.get(a);if(ie!==void 0){var ue=Sc,je=a;switch(a){case"keypress":if(bc(c)===0)break e;case"keydown":case"keyup":ue=ET;break;case"focusin":je="focus",ue=Lm;break;case"focusout":je="blur",ue=Lm;break;case"beforeblur":case"afterblur":ue=Lm;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=nx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=yT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=kT;break;case Cx:case jx:case Ax:ue=bT;break;case Dx:ue=MT;break;case"scroll":case"scrollend":ue=pT;break;case"wheel":ue=PT;break;case"copy":case"cut":case"paste":ue=ST;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=sx;break;case"toggle":case"beforetoggle":ue=FT}var Re=(o&4)!==0,rt=!Re&&(a==="scroll"||a==="scrollend"),W=Re?ie!==null?ie+"Capture":null:ie;Re=[];for(var G=se,ne;G!==null;){var he=G;if(ne=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||ne===null||W===null||(he=_o(G,W),he!=null&&Re.push(cl(G,he,ne))),rt)break;G=G.return}0<Re.length&&(ie=new ue(ie,je,null,c,fe),ge.push({event:ie,listeners:Re}))}}if((o&7)===0){e:{if(ie=a==="mouseover"||a==="pointerover",ue=a==="mouseout"||a==="pointerout",ie&&c!==_m&&(je=c.relatedTarget||c.fromElement)&&(hi(je)||je[fi]))break e;if((ue||ie)&&(ie=fe.window===fe?fe:(ie=fe.ownerDocument)?ie.defaultView||ie.parentWindow:window,ue?(je=c.relatedTarget||c.toElement,ue=se,je=je?hi(je):null,je!==null&&(rt=l(je),Re=je.tag,je!==rt||Re!==5&&Re!==27&&Re!==6)&&(je=null)):(ue=null,je=se),ue!==je)){if(Re=nx,he="onMouseLeave",W="onMouseEnter",G="mouse",(a==="pointerout"||a==="pointerover")&&(Re=sx,he="onPointerLeave",W="onPointerEnter",G="pointer"),rt=ue==null?ie:Eo(ue),ne=je==null?ie:Eo(je),ie=new Re(he,G+"leave",ue,c,fe),ie.target=rt,ie.relatedTarget=ne,he=null,hi(fe)===se&&(Re=new Re(W,G+"enter",je,c,fe),Re.target=ne,Re.relatedTarget=rt,he=Re),rt=he,ue&&je)t:{for(Re=LE,W=ue,G=je,ne=0,he=W;he;he=Re(he))ne++;he=0;for(var Te=G;Te;Te=Re(Te))he++;for(;0<ne-he;)W=Re(W),ne--;for(;0<he-ne;)G=Re(G),he--;for(;ne--;){if(W===G||G!==null&&W===G.alternate){Re=W;break t}W=Re(W),G=Re(G)}Re=null}else Re=null;ue!==null&&Wb(ge,ie,ue,Re,!1),je!==null&&rt!==null&&Wb(ge,rt,je,Re,!0)}}e:{if(ie=se?Eo(se):window,ue=ie.nodeName&&ie.nodeName.toLowerCase(),ue==="select"||ue==="input"&&ie.type==="file")var Ge=fx;else if(dx(ie))if(hx)Ge=XT;else{Ge=YT;var De=VT}else ue=ie.nodeName,!ue||ue.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?se&&Em(se.elementType)&&(Ge=fx):Ge=GT;if(Ge&&(Ge=Ge(a,se))){mx(ge,Ge,c,fe);break e}De&&De(a,ie,se),a==="focusout"&&se&&ie.type==="number"&&se.memoizedProps.value!=null&&Tm(ie,"number",ie.value)}switch(De=se?Eo(se):window,a){case"focusin":(dx(De)||De.contentEditable==="true")&&(Ni=De,qm=se,Fo=null);break;case"focusout":Fo=qm=Ni=null;break;case"mousedown":Hm=!0;break;case"contextmenu":case"mouseup":case"dragend":Hm=!1,Sx(ge,c,fe);break;case"selectionchange":if(WT)break;case"keydown":case"keyup":Sx(ge,c,fe)}var Pe;if(Um)e:{switch(a){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else Si?cx(a,c)&&(Be="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(Be="onCompositionStart");Be&&(ix&&c.locale!=="ko"&&(Si||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&Si&&(Pe=tx()):(Da=fe,Mm="value"in Da?Da.value:Da.textContent,Si=!0)),De=mu(se,Be),0<De.length&&(Be=new ax(Be,a,null,c,fe),ge.push({event:Be,listeners:De}),Pe?Be.data=Pe:(Pe=ux(c),Pe!==null&&(Be.data=Pe)))),(Pe=$T?zT(a,c):BT(a,c))&&(Be=mu(se,"onBeforeInput"),0<Be.length&&(De=new ax("onBeforeInput","beforeinput",null,c,fe),ge.push({event:De,listeners:Be}),De.data=Pe)),OE(ge,a,se,c,fe)}Xb(ge,o)})}function cl(a,o,c){return{instance:a,listener:o,currentTarget:c}}function mu(a,o){for(var c=o+"Capture",m=[];a!==null;){var y=a,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=_o(a,c),y!=null&&m.unshift(cl(a,y,v)),y=_o(a,o),y!=null&&m.push(cl(a,y,v))),a.tag===3)return m;a=a.return}return[]}function LE(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Wb(a,o,c,m,y){for(var v=o._reactName,T=[];c!==null&&c!==m;){var M=c,H=M.alternate,se=M.stateNode;if(M=M.tag,H!==null&&H===m)break;M!==5&&M!==26&&M!==27||se===null||(H=se,y?(se=_o(c,v),se!=null&&T.unshift(cl(c,se,H))):y||(se=_o(c,v),se!=null&&T.push(cl(c,se,H)))),c=c.return}T.length!==0&&a.push({event:o,listeners:T})}var FE=/\r\n?/g,UE=/\u0000|\uFFFD/g;function Qb(a){return(typeof a=="string"?a:""+a).replace(FE,`
`).replace(UE,"")}function Zb(a,o){return o=Qb(o),Qb(a)===o}function tt(a,o,c,m,y,v){switch(c){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||vi(a,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&vi(a,""+m);break;case"className":gc(a,"class",m);break;case"tabIndex":gc(a,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":gc(a,c,m);break;case"style":Z0(a,m,v);break;case"data":if(o!=="object"){gc(a,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||c!=="href")){a.removeAttribute(c);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(c);break}m=xc(""+m),a.setAttribute(c,m);break;case"action":case"formAction":if(typeof m=="function"){a.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(c==="formAction"?(o!=="input"&&tt(a,o,"name",y.name,y,null),tt(a,o,"formEncType",y.formEncType,y,null),tt(a,o,"formMethod",y.formMethod,y,null),tt(a,o,"formTarget",y.formTarget,y,null)):(tt(a,o,"encType",y.encType,y,null),tt(a,o,"method",y.method,y,null),tt(a,o,"target",y.target,y,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(c);break}m=xc(""+m),a.setAttribute(c,m);break;case"onClick":m!=null&&(a.onclick=Ln);break;case"onScroll":m!=null&&$e("scroll",a);break;case"onScrollEnd":m!=null&&$e("scrollend",a);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(c=m.__html,c!=null){if(y.children!=null)throw Error(n(60));a.innerHTML=c}}break;case"multiple":a.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":a.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){a.removeAttribute("xlink:href");break}c=xc(""+m),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(c,""+m):a.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(c,""):a.removeAttribute(c);break;case"capture":case"download":m===!0?a.setAttribute(c,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(c,m):a.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?a.setAttribute(c,m):a.removeAttribute(c);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?a.removeAttribute(c):a.setAttribute(c,m);break;case"popover":$e("beforetoggle",a),$e("toggle",a),pc(a,"popover",m);break;case"xlinkActuate":Pn(a,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Pn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Pn(a,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Pn(a,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Pn(a,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Pn(a,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Pn(a,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Pn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Pn(a,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":pc(a,"is",m);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=fT.get(c)||c,pc(a,c,m))}}function gh(a,o,c,m,y,v){switch(c){case"style":Z0(a,m,v);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(c=m.__html,c!=null){if(y.children!=null)throw Error(n(60));a.innerHTML=c}}break;case"children":typeof m=="string"?vi(a,m):(typeof m=="number"||typeof m=="bigint")&&vi(a,""+m);break;case"onScroll":m!=null&&$e("scroll",a);break;case"onScrollEnd":m!=null&&$e("scrollend",a);break;case"onClick":m!=null&&(a.onclick=Ln);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!q0.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),o=c.slice(2,y?c.length-7:void 0),v=a[fr]||null,v=v!=null?v[c]:null,typeof v=="function"&&a.removeEventListener(o,v,y),typeof m=="function")){typeof v!="function"&&v!==null&&(c in a?a[c]=null:a.hasAttribute(c)&&a.removeAttribute(c)),a.addEventListener(o,m,y);break e}c in a?a[c]=m:m===!0?a.setAttribute(c,""):pc(a,c,m)}}}function Vt(a,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",a),$e("load",a);var m=!1,y=!1,v;for(v in c)if(c.hasOwnProperty(v)){var T=c[v];if(T!=null)switch(v){case"src":m=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:tt(a,o,v,T,c,null)}}y&&tt(a,o,"srcSet",c.srcSet,c,null),m&&tt(a,o,"src",c.src,c,null);return;case"input":$e("invalid",a);var M=v=T=y=null,H=null,se=null;for(m in c)if(c.hasOwnProperty(m)){var fe=c[m];if(fe!=null)switch(m){case"name":y=fe;break;case"type":T=fe;break;case"checked":H=fe;break;case"defaultChecked":se=fe;break;case"value":v=fe;break;case"defaultValue":M=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(n(137,o));break;default:tt(a,o,m,fe,c,null)}}X0(a,v,M,H,se,T,y,!1);return;case"select":$e("invalid",a),m=T=v=null;for(y in c)if(c.hasOwnProperty(y)&&(M=c[y],M!=null))switch(y){case"value":v=M;break;case"defaultValue":T=M;break;case"multiple":m=M;default:tt(a,o,y,M,c,null)}o=v,c=T,a.multiple=!!m,o!=null?xi(a,!!m,o,!1):c!=null&&xi(a,!!m,c,!0);return;case"textarea":$e("invalid",a),v=y=m=null;for(T in c)if(c.hasOwnProperty(T)&&(M=c[T],M!=null))switch(T){case"value":m=M;break;case"defaultValue":y=M;break;case"children":v=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(n(91));break;default:tt(a,o,T,M,c,null)}W0(a,m,y,v);return;case"option":for(H in c)if(c.hasOwnProperty(H)&&(m=c[H],m!=null))switch(H){case"selected":a.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:tt(a,o,H,m,c,null)}return;case"dialog":$e("beforetoggle",a),$e("toggle",a),$e("cancel",a),$e("close",a);break;case"iframe":case"object":$e("load",a);break;case"video":case"audio":for(m=0;m<ll.length;m++)$e(ll[m],a);break;case"image":$e("error",a),$e("load",a);break;case"details":$e("toggle",a);break;case"embed":case"source":case"link":$e("error",a),$e("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in c)if(c.hasOwnProperty(se)&&(m=c[se],m!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:tt(a,o,se,m,c,null)}return;default:if(Em(o)){for(fe in c)c.hasOwnProperty(fe)&&(m=c[fe],m!==void 0&&gh(a,o,fe,m,c,void 0));return}}for(M in c)c.hasOwnProperty(M)&&(m=c[M],m!=null&&tt(a,o,M,m,c,null))}function $E(a,o,c,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,T=null,M=null,H=null,se=null,fe=null;for(ue in c){var ge=c[ue];if(c.hasOwnProperty(ue)&&ge!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":H=ge;default:m.hasOwnProperty(ue)||tt(a,o,ue,null,m,ge)}}for(var ie in m){var ue=m[ie];if(ge=c[ie],m.hasOwnProperty(ie)&&(ue!=null||ge!=null))switch(ie){case"type":v=ue;break;case"name":y=ue;break;case"checked":se=ue;break;case"defaultChecked":fe=ue;break;case"value":T=ue;break;case"defaultValue":M=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(n(137,o));break;default:ue!==ge&&tt(a,o,ie,ue,m,ge)}}Dm(a,T,M,H,se,fe,v,y);return;case"select":ue=T=M=ie=null;for(v in c)if(H=c[v],c.hasOwnProperty(v)&&H!=null)switch(v){case"value":break;case"multiple":ue=H;default:m.hasOwnProperty(v)||tt(a,o,v,null,m,H)}for(y in m)if(v=m[y],H=c[y],m.hasOwnProperty(y)&&(v!=null||H!=null))switch(y){case"value":ie=v;break;case"defaultValue":M=v;break;case"multiple":T=v;default:v!==H&&tt(a,o,y,v,m,H)}o=M,c=T,m=ue,ie!=null?xi(a,!!c,ie,!1):!!m!=!!c&&(o!=null?xi(a,!!c,o,!0):xi(a,!!c,c?[]:"",!1));return;case"textarea":ue=ie=null;for(M in c)if(y=c[M],c.hasOwnProperty(M)&&y!=null&&!m.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:tt(a,o,M,null,m,y)}for(T in m)if(y=m[T],v=c[T],m.hasOwnProperty(T)&&(y!=null||v!=null))switch(T){case"value":ie=y;break;case"defaultValue":ue=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(n(91));break;default:y!==v&&tt(a,o,T,y,m,v)}K0(a,ie,ue);return;case"option":for(var je in c)if(ie=c[je],c.hasOwnProperty(je)&&ie!=null&&!m.hasOwnProperty(je))switch(je){case"selected":a.selected=!1;break;default:tt(a,o,je,null,m,ie)}for(H in m)if(ie=m[H],ue=c[H],m.hasOwnProperty(H)&&ie!==ue&&(ie!=null||ue!=null))switch(H){case"selected":a.selected=ie&&typeof ie!="function"&&typeof ie!="symbol";break;default:tt(a,o,H,ie,m,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in c)ie=c[Re],c.hasOwnProperty(Re)&&ie!=null&&!m.hasOwnProperty(Re)&&tt(a,o,Re,null,m,ie);for(se in m)if(ie=m[se],ue=c[se],m.hasOwnProperty(se)&&ie!==ue&&(ie!=null||ue!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(n(137,o));break;default:tt(a,o,se,ie,m,ue)}return;default:if(Em(o)){for(var rt in c)ie=c[rt],c.hasOwnProperty(rt)&&ie!==void 0&&!m.hasOwnProperty(rt)&&gh(a,o,rt,void 0,m,ie);for(fe in m)ie=m[fe],ue=c[fe],!m.hasOwnProperty(fe)||ie===ue||ie===void 0&&ue===void 0||gh(a,o,fe,ie,m,ue);return}}for(var W in c)ie=c[W],c.hasOwnProperty(W)&&ie!=null&&!m.hasOwnProperty(W)&&tt(a,o,W,null,m,ie);for(ge in m)ie=m[ge],ue=c[ge],!m.hasOwnProperty(ge)||ie===ue||ie==null&&ue==null||tt(a,o,ge,ie,m,ue)}function Jb(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function zE(){if(typeof performance.getEntriesByType=="function"){for(var a=0,o=0,c=performance.getEntriesByType("resource"),m=0;m<c.length;m++){var y=c[m],v=y.transferSize,T=y.initiatorType,M=y.duration;if(v&&M&&Jb(T)){for(T=0,M=y.responseEnd,m+=1;m<c.length;m++){var H=c[m],se=H.startTime;if(se>M)break;var fe=H.transferSize,ge=H.initiatorType;fe&&Jb(ge)&&(H=H.responseEnd,T+=fe*(H<M?1:(M-se)/(H-se)))}if(--m,o+=8*(v+T)/(y.duration/1e3),a++,10<a)break}}if(0<a)return o/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var yh=null,xh=null;function fu(a){return a.nodeType===9?a:a.ownerDocument}function ew(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tw(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function vh(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var bh=null;function BE(){var a=window.event;return a&&a.type==="popstate"?a===bh?!1:(bh=a,!0):(bh=null,!1)}var rw=typeof setTimeout=="function"?setTimeout:void 0,qE=typeof clearTimeout=="function"?clearTimeout:void 0,nw=typeof Promise=="function"?Promise:void 0,HE=typeof queueMicrotask=="function"?queueMicrotask:typeof nw<"u"?function(a){return nw.resolve(null).then(a).catch(VE)}:rw;function VE(a){setTimeout(function(){throw a})}function Ha(a){return a==="head"}function aw(a,o){var c=o,m=0;do{var y=c.nextSibling;if(a.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"||c==="/&"){if(m===0){a.removeChild(y),Wi(o);return}m--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")m++;else if(c==="html")ul(a.ownerDocument.documentElement);else if(c==="head"){c=a.ownerDocument.head,ul(c);for(var v=c.firstChild;v;){var T=v.nextSibling,M=v.nodeName;v[To]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&v.rel.toLowerCase()==="stylesheet"||c.removeChild(v),v=T}}else c==="body"&&ul(a.ownerDocument.body);c=y}while(c);Wi(o)}function sw(a,o){var c=a;a=0;do{var m=c.nextSibling;if(c.nodeType===1?o?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(o?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),m&&m.nodeType===8)if(c=m.data,c==="/$"){if(a===0)break;a--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||a++;c=m}while(c)}function wh(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":wh(c),jm(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}a.removeChild(c)}}function YE(a,o,c,m){for(;a.nodeType===1;){var y=c;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(m){if(!a[To])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(v=a.getAttribute("rel"),v==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(v!==y.rel||a.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||a.getAttribute("title")!==(y.title==null?null:y.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(v=a.getAttribute("src"),(v!==(y.src==null?null:y.src)||a.getAttribute("type")!==(y.type==null?null:y.type)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&a.getAttribute("name")===v)return a}else return a;if(a=Wr(a.nextSibling),a===null)break}return null}function GE(a,o,c){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=Wr(a.nextSibling),a===null))return null;return a}function iw(a,o){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=Wr(a.nextSibling),a===null))return null;return a}function Sh(a){return a.data==="$?"||a.data==="$~"}function Nh(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function XE(a,o){var c=a.ownerDocument;if(a.data==="$~")a._reactRetry=o;else if(a.data!=="$?"||c.readyState!=="loading")o();else{var m=function(){o(),c.removeEventListener("DOMContentLoaded",m)};c.addEventListener("DOMContentLoaded",m),a._reactRetry=m}}function Wr(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return a}var Ch=null;function ow(a){a=a.nextSibling;for(var o=0;a;){if(a.nodeType===8){var c=a.data;if(c==="/$"||c==="/&"){if(o===0)return Wr(a.nextSibling);o--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||o++}a=a.nextSibling}return null}function lw(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(o===0)return a;o--}else c!=="/$"&&c!=="/&"||o++}a=a.previousSibling}return null}function cw(a,o,c){switch(o=fu(c),a){case"html":if(a=o.documentElement,!a)throw Error(n(452));return a;case"head":if(a=o.head,!a)throw Error(n(453));return a;case"body":if(a=o.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function ul(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);jm(a)}var Qr=new Map,uw=new Set;function hu(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Jn=J.d;J.d={f:KE,r:WE,D:QE,C:ZE,L:JE,m:e_,X:r_,S:t_,M:n_};function KE(){var a=Jn.f(),o=su();return a||o}function WE(a){var o=pi(a);o!==null&&o.tag===5&&o.type==="form"?Dv(o):Jn.r(a)}var Gi=typeof document>"u"?null:document;function dw(a,o,c){var m=Gi;if(m&&typeof o=="string"&&o){var y=qr(o);y='link[rel="'+a+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),uw.has(y)||(uw.add(y),a={rel:a,crossOrigin:c,href:o},m.querySelector(y)===null&&(o=m.createElement("link"),Vt(o,"link",a),Lt(o),m.head.appendChild(o)))}}function QE(a){Jn.D(a),dw("dns-prefetch",a,null)}function ZE(a,o){Jn.C(a,o),dw("preconnect",a,o)}function JE(a,o,c){Jn.L(a,o,c);var m=Gi;if(m&&a&&o){var y='link[rel="preload"][as="'+qr(o)+'"]';o==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+qr(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+qr(c.imageSizes)+'"]')):y+='[href="'+qr(a)+'"]';var v=y;switch(o){case"style":v=Xi(a);break;case"script":v=Ki(a)}Qr.has(v)||(a=g({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:a,as:o},c),Qr.set(v,a),m.querySelector(y)!==null||o==="style"&&m.querySelector(dl(v))||o==="script"&&m.querySelector(ml(v))||(o=m.createElement("link"),Vt(o,"link",a),Lt(o),m.head.appendChild(o)))}}function e_(a,o){Jn.m(a,o);var c=Gi;if(c&&a){var m=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+qr(m)+'"][href="'+qr(a)+'"]',v=y;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Ki(a)}if(!Qr.has(v)&&(a=g({rel:"modulepreload",href:a},o),Qr.set(v,a),c.querySelector(y)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(ml(v)))return}m=c.createElement("link"),Vt(m,"link",a),Lt(m),c.head.appendChild(m)}}}function t_(a,o,c){Jn.S(a,o,c);var m=Gi;if(m&&a){var y=gi(m).hoistableStyles,v=Xi(a);o=o||"default";var T=y.get(v);if(!T){var M={loading:0,preload:null};if(T=m.querySelector(dl(v)))M.loading=5;else{a=g({rel:"stylesheet",href:a,"data-precedence":o},c),(c=Qr.get(v))&&jh(a,c);var H=T=m.createElement("link");Lt(H),Vt(H,"link",a),H._p=new Promise(function(se,fe){H.onload=se,H.onerror=fe}),H.addEventListener("load",function(){M.loading|=1}),H.addEventListener("error",function(){M.loading|=2}),M.loading|=4,pu(T,o,m)}T={type:"stylesheet",instance:T,count:1,state:M},y.set(v,T)}}}function r_(a,o){Jn.X(a,o);var c=Gi;if(c&&a){var m=gi(c).hoistableScripts,y=Ki(a),v=m.get(y);v||(v=c.querySelector(ml(y)),v||(a=g({src:a,async:!0},o),(o=Qr.get(y))&&Ah(a,o),v=c.createElement("script"),Lt(v),Vt(v,"link",a),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},m.set(y,v))}}function n_(a,o){Jn.M(a,o);var c=Gi;if(c&&a){var m=gi(c).hoistableScripts,y=Ki(a),v=m.get(y);v||(v=c.querySelector(ml(y)),v||(a=g({src:a,async:!0,type:"module"},o),(o=Qr.get(y))&&Ah(a,o),v=c.createElement("script"),Lt(v),Vt(v,"link",a),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},m.set(y,v))}}function mw(a,o,c,m){var y=(y=Y.current)?hu(y):null;if(!y)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=Xi(c.href),c=gi(y).hoistableStyles,m=c.get(o),m||(m={type:"style",instance:null,count:0,state:null},c.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){a=Xi(c.href);var v=gi(y).hoistableStyles,T=v.get(a);if(T||(y=y.ownerDocument||y,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(a,T),(v=y.querySelector(dl(a)))&&!v._p&&(T.instance=v,T.state.loading=5),Qr.has(a)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Qr.set(a,c),v||a_(y,a,c,T.state))),o&&m===null)throw Error(n(528,""));return T}if(o&&m!==null)throw Error(n(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ki(c),c=gi(y).hoistableScripts,m=c.get(o),m||(m={type:"script",instance:null,count:0,state:null},c.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function Xi(a){return'href="'+qr(a)+'"'}function dl(a){return'link[rel="stylesheet"]['+a+"]"}function fw(a){return g({},a,{"data-precedence":a.precedence,precedence:null})}function a_(a,o,c,m){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=a.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),Vt(o,"link",c),Lt(o),a.head.appendChild(o))}function Ki(a){return'[src="'+qr(a)+'"]'}function ml(a){return"script[async]"+a}function hw(a,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var m=a.querySelector('style[data-href~="'+qr(c.href)+'"]');if(m)return o.instance=m,Lt(m),m;var y=g({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return m=(a.ownerDocument||a).createElement("style"),Lt(m),Vt(m,"style",y),pu(m,c.precedence,a),o.instance=m;case"stylesheet":y=Xi(c.href);var v=a.querySelector(dl(y));if(v)return o.state.loading|=4,o.instance=v,Lt(v),v;m=fw(c),(y=Qr.get(y))&&jh(m,y),v=(a.ownerDocument||a).createElement("link"),Lt(v);var T=v;return T._p=new Promise(function(M,H){T.onload=M,T.onerror=H}),Vt(v,"link",m),o.state.loading|=4,pu(v,c.precedence,a),o.instance=v;case"script":return v=Ki(c.src),(y=a.querySelector(ml(v)))?(o.instance=y,Lt(y),y):(m=c,(y=Qr.get(v))&&(m=g({},c),Ah(m,y)),a=a.ownerDocument||a,y=a.createElement("script"),Lt(y),Vt(y,"link",m),a.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,pu(m,c.precedence,a));return o.instance}function pu(a,o,c){for(var m=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=m.length?m[m.length-1]:null,v=y,T=0;T<m.length;T++){var M=m[T];if(M.dataset.precedence===o)v=M;else if(v!==y)break}v?v.parentNode.insertBefore(a,v.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(a,o.firstChild))}function jh(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function Ah(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var gu=null;function pw(a,o,c){if(gu===null){var m=new Map,y=gu=new Map;y.set(c,m)}else y=gu,m=y.get(c),m||(m=new Map,y.set(c,m));if(m.has(a))return m;for(m.set(a,null),c=c.getElementsByTagName(a),y=0;y<c.length;y++){var v=c[y];if(!(v[To]||v[zt]||a==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var T=v.getAttribute(o)||"";T=a+T;var M=m.get(T);M?M.push(v):m.set(T,[v])}}return m}function gw(a,o,c){a=a.ownerDocument||a,a.head.insertBefore(c,o==="title"?a.querySelector("head > title"):null)}function s_(a,o,c){if(c===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function yw(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function i_(a,o,c,m){if(c.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var y=Xi(m.href),v=o.querySelector(dl(y));if(v){o=v._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(a.count++,a=yu.bind(a),o.then(a,a)),c.state.loading|=4,c.instance=v,Lt(v);return}v=o.ownerDocument||o,m=fw(m),(y=Qr.get(y))&&jh(m,y),v=v.createElement("link"),Lt(v);var T=v;T._p=new Promise(function(M,H){T.onload=M,T.onerror=H}),Vt(v,"link",m),c.instance=v}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(a.count++,c=yu.bind(a),o.addEventListener("load",c),o.addEventListener("error",c))}}var Dh=0;function o_(a,o){return a.stylesheets&&a.count===0&&vu(a,a.stylesheets),0<a.count||0<a.imgCount?function(c){var m=setTimeout(function(){if(a.stylesheets&&vu(a,a.stylesheets),a.unsuspend){var v=a.unsuspend;a.unsuspend=null,v()}},6e4+o);0<a.imgBytes&&Dh===0&&(Dh=62500*zE());var y=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&vu(a,a.stylesheets),a.unsuspend)){var v=a.unsuspend;a.unsuspend=null,v()}},(a.imgBytes>Dh?50:800)+o);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(m),clearTimeout(y)}}:null}function yu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vu(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var xu=null;function vu(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,xu=new Map,o.forEach(l_,a),xu=null,yu.call(a))}function l_(a,o){if(!(o.state.loading&4)){var c=xu.get(a);if(c)var m=c.get(null);else{c=new Map,xu.set(a,c);for(var y=a.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var T=y[v];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(c.set(T.dataset.precedence,T),m=T)}m&&c.set(null,m)}y=o.instance,T=y.getAttribute("data-precedence"),v=c.get(T)||m,v===m&&c.set(null,y),c.set(T,y),this.count++,m=yu.bind(this),y.addEventListener("load",m),y.addEventListener("error",m),v?v.parentNode.insertBefore(y,v.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(y,a.firstChild)),o.state.loading|=4}}var fl={$$typeof:E,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function c_(a,o,c,m,y,v,T,M,H){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wm(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wm(0),this.hiddenUpdates=wm(null),this.identifierPrefix=m,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function xw(a,o,c,m,y,v,T,M,H,se,fe,ge){return a=new c_(a,o,c,T,H,se,fe,ge,M),o=1,v===!0&&(o|=24),v=Ar(3,null,null,o),a.current=v,v.stateNode=a,o=sf(),o.refCount++,a.pooledCache=o,o.refCount++,v.memoizedState={element:m,isDehydrated:c,cache:o},uf(v),a}function vw(a){return a?(a=Ai,a):Ai}function bw(a,o,c,m,y,v){y=vw(y),m.context===null?m.context=y:m.pendingContext=y,m=Oa(o),m.payload={element:c},v=v===void 0?null:v,v!==null&&(m.callback=v),c=Ma(a,m,o),c!==null&&(vr(c,a,o),Vo(c,a,o))}function ww(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<o?c:o}}function Th(a,o){ww(a,o),(a=a.alternate)&&ww(a,o)}function Sw(a){if(a.tag===13||a.tag===31){var o=Ns(a,67108864);o!==null&&vr(o,a,67108864),Th(a,67108864)}}function Nw(a){if(a.tag===13||a.tag===31){var o=Rr();o=Sm(o);var c=Ns(a,o);c!==null&&vr(c,a,o),Th(a,o)}}var bu=!0;function u_(a,o,c,m){var y=U.T;U.T=null;var v=J.p;try{J.p=2,Eh(a,o,c,m)}finally{J.p=v,U.T=y}}function d_(a,o,c,m){var y=U.T;U.T=null;var v=J.p;try{J.p=8,Eh(a,o,c,m)}finally{J.p=v,U.T=y}}function Eh(a,o,c,m){if(bu){var y=_h(m);if(y===null)ph(a,o,m,wu,c),jw(a,m);else if(f_(y,a,o,c,m))m.stopPropagation();else if(jw(a,m),o&4&&-1<m_.indexOf(a)){for(;y!==null;){var v=pi(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var T=jt(v.pendingLanes);if(T!==0){var M=v;for(M.pendingLanes|=2,M.entangledLanes|=2;T;){var H=1<<31-ar(T);M.entanglements[1]|=H,T&=~H}jn(v),(We&6)===0&&(nu=Ct()+500,ol(0))}}break;case 31:case 13:M=Ns(v,2),M!==null&&vr(M,v,2),su(),Th(v,2)}if(v=_h(m),v===null&&ph(a,o,m,wu,c),v===y)break;y=v}y!==null&&m.stopPropagation()}else ph(a,o,m,null,c)}}function _h(a){return a=Rm(a),Rh(a)}var wu=null;function Rh(a){if(wu=null,a=hi(a),a!==null){var o=l(a);if(o===null)a=null;else{var c=o.tag;if(c===13){if(a=u(o),a!==null)return a;a=null}else if(c===31){if(a=d(o),a!==null)return a;a=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return wu=a,null}function Cw(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ym()){case mi:return 2;case mc:return 8;case In:case xm:return 32;case fc:return 268435456;default:return 32}default:return 32}}var kh=!1,Va=null,Ya=null,Ga=null,hl=new Map,pl=new Map,Xa=[],m_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jw(a,o){switch(a){case"focusin":case"focusout":Va=null;break;case"dragenter":case"dragleave":Ya=null;break;case"mouseover":case"mouseout":Ga=null;break;case"pointerover":case"pointerout":hl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":pl.delete(o.pointerId)}}function gl(a,o,c,m,y,v){return a===null||a.nativeEvent!==v?(a={blockedOn:o,domEventName:c,eventSystemFlags:m,nativeEvent:v,targetContainers:[y]},o!==null&&(o=pi(o),o!==null&&Sw(o)),a):(a.eventSystemFlags|=m,o=a.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),a)}function f_(a,o,c,m,y){switch(o){case"focusin":return Va=gl(Va,a,o,c,m,y),!0;case"dragenter":return Ya=gl(Ya,a,o,c,m,y),!0;case"mouseover":return Ga=gl(Ga,a,o,c,m,y),!0;case"pointerover":var v=y.pointerId;return hl.set(v,gl(hl.get(v)||null,a,o,c,m,y)),!0;case"gotpointercapture":return v=y.pointerId,pl.set(v,gl(pl.get(v)||null,a,o,c,m,y)),!0}return!1}function Aw(a){var o=hi(a.target);if(o!==null){var c=l(o);if(c!==null){if(o=c.tag,o===13){if(o=u(c),o!==null){a.blockedOn=o,$0(a.priority,function(){Nw(c)});return}}else if(o===31){if(o=d(c),o!==null){a.blockedOn=o,$0(a.priority,function(){Nw(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Su(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var c=_h(a.nativeEvent);if(c===null){c=a.nativeEvent;var m=new c.constructor(c.type,c);_m=m,c.target.dispatchEvent(m),_m=null}else return o=pi(c),o!==null&&Sw(o),a.blockedOn=c,!1;o.shift()}return!0}function Dw(a,o,c){Su(a)&&c.delete(o)}function h_(){kh=!1,Va!==null&&Su(Va)&&(Va=null),Ya!==null&&Su(Ya)&&(Ya=null),Ga!==null&&Su(Ga)&&(Ga=null),hl.forEach(Dw),pl.forEach(Dw)}function Nu(a,o){a.blockedOn===o&&(a.blockedOn=null,kh||(kh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,h_)))}var Cu=null;function Tw(a){Cu!==a&&(Cu=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Cu===a&&(Cu=null);for(var o=0;o<a.length;o+=3){var c=a[o],m=a[o+1],y=a[o+2];if(typeof m!="function"){if(Rh(m||c)===null)continue;break}var v=pi(c);v!==null&&(a.splice(o,3),o-=3,_f(v,{pending:!0,data:y,method:c.method,action:m},m,y))}}))}function Wi(a){function o(H){return Nu(H,a)}Va!==null&&Nu(Va,a),Ya!==null&&Nu(Ya,a),Ga!==null&&Nu(Ga,a),hl.forEach(o),pl.forEach(o);for(var c=0;c<Xa.length;c++){var m=Xa[c];m.blockedOn===a&&(m.blockedOn=null)}for(;0<Xa.length&&(c=Xa[0],c.blockedOn===null);)Aw(c),c.blockedOn===null&&Xa.shift();if(c=(a.ownerDocument||a).$$reactFormReplay,c!=null)for(m=0;m<c.length;m+=3){var y=c[m],v=c[m+1],T=y[fr]||null;if(typeof v=="function")T||Tw(c);else if(T){var M=null;if(v&&v.hasAttribute("formAction")){if(y=v,T=v[fr]||null)M=T.formAction;else if(Rh(y)!==null)continue}else M=T.action;typeof M=="function"?c[m+1]=M:(c.splice(m,3),m-=3),Tw(c)}}}function Ew(){function a(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(T){return y=T})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),m||setTimeout(c,20)}function c(){if(!m&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,y=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(c,100),function(){m=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function Oh(a){this._internalRoot=a}ju.prototype.render=Oh.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(n(409));var c=o.current,m=Rr();bw(c,m,a,o,null,null)},ju.prototype.unmount=Oh.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;bw(a.current,2,null,a,null,null),su(),o[fi]=null}};function ju(a){this._internalRoot=a}ju.prototype.unstable_scheduleHydration=function(a){if(a){var o=U0();a={blockedOn:null,target:a,priority:o};for(var c=0;c<Xa.length&&o!==0&&o<Xa[c].priority;c++);Xa.splice(c,0,a),c===0&&Aw(a)}};var _w=e.version;if(_w!=="19.2.0")throw Error(n(527,_w,"19.2.0"));J.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=h(o),a=a!==null?p(a):null,a=a===null?null:a.stateNode,a};var p_={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Au.isDisabled&&Au.supportsFiber)try{xs=Au.inject(p_),nr=Au}catch{}}return xl.createRoot=function(a,o){if(!i(a))throw Error(n(299));var c=!1,m="",y=Lv,v=Fv,T=Uv;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError)),o=xw(a,1,!1,null,null,c,m,null,y,v,T,Ew),a[fi]=o.current,hh(a),new Oh(o)},xl.hydrateRoot=function(a,o,c){if(!i(a))throw Error(n(299));var m=!1,y="",v=Lv,T=Fv,M=Uv,H=null;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(v=c.onUncaughtError),c.onCaughtError!==void 0&&(T=c.onCaughtError),c.onRecoverableError!==void 0&&(M=c.onRecoverableError),c.formState!==void 0&&(H=c.formState)),o=xw(a,1,!0,o,c??null,m,y,H,v,T,M,Ew),o.context=vw(null),c=o.current,m=Rr(),m=Sm(m),y=Oa(m),y.callback=null,Ma(c,y,m),c=m,o.current.lanes=c,Do(o,c),jn(o),a[fi]=o.current,hh(a),new ju(o)},xl.version="19.2.0",xl}var $w;function T_(){if($w)return Ph.exports;$w=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ph.exports=D_(),Ph.exports}var E_=T_();/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var zw="popstate";function __(t={}){function e(i,l){let{pathname:u="/",search:d="",hash:f=""}=oi(i.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),dg("",{pathname:u,search:d,hash:f},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(i,l){let u=i.document.querySelector("base"),d="";if(u&&u.getAttribute("href")){let f=i.location.href,h=f.indexOf("#");d=h===-1?f:f.slice(0,h)}return d+"#"+(typeof l=="string"?l:Ml(l))}function n(i,l){Lr(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return k_(e,r,n,t)}function mt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Lr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function R_(){return Math.random().toString(36).substring(2,10)}function Bw(t,e){return{usr:t.state,key:t.key,idx:e}}function dg(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?oi(e):e,state:r,key:e&&e.key||n||R_()}}function Ml({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function oi(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function k_(t,e,r,n={}){let{window:i=document.defaultView,v5Compat:l=!1}=n,u=i.history,d="POP",f=null,h=p();h==null&&(h=0,u.replaceState({...u.state,idx:h},""));function p(){return(u.state||{idx:null}).idx}function g(){d="POP";let N=p(),A=N==null?null:N-h;h=N,f&&f({action:d,location:C.location,delta:A})}function x(N,A){d="PUSH";let j=dg(C.location,N,A);r&&r(j,N),h=p()+1;let E=Bw(j,h),_=C.createHref(j);try{u.pushState(E,"",_)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(_)}l&&f&&f({action:d,location:C.location,delta:1})}function w(N,A){d="REPLACE";let j=dg(C.location,N,A);r&&r(j,N),h=p();let E=Bw(j,h),_=C.createHref(j);u.replaceState(E,"",_),l&&f&&f({action:d,location:C.location,delta:0})}function S(N){return O_(N)}let C={get action(){return d},get location(){return t(i,u)},listen(N){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(zw,g),f=N,()=>{i.removeEventListener(zw,g),f=null}},createHref(N){return e(i,N)},createURL:S,encodeLocation(N){let A=S(N);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:x,replace:w,go(N){return u.go(N)}};return C}function O_(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),mt(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:Ml(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function mC(t,e,r="/"){return M_(t,e,r,!1)}function M_(t,e,r,n){let i=typeof e=="string"?oi(e):e,l=ma(i.pathname||"/",r);if(l==null)return null;let u=fC(t);I_(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let h=Y_(l);d=H_(u[f],h,n)}return d}function fC(t,e=[],r=[],n="",i=!1){let l=(u,d,f=i,h)=>{let p={relativePath:h===void 0?u.path||"":h,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&f)return;mt(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let g=sa([n,p.relativePath]),x=r.concat(p);u.children&&u.children.length>0&&(mt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),fC(u.children,e,x,g,f)),!(u.path==null&&!u.index)&&e.push({path:g,score:B_(g,u.index),routesMeta:x})};return t.forEach((u,d)=>{var f;if(u.path===""||!((f=u.path)!=null&&f.includes("?")))l(u,d);else for(let h of hC(u.path))l(u,d,!0,h)}),e}function hC(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),l=r.replace(/\?$/,"");if(n.length===0)return i?[l,""]:[l];let u=hC(n.join("/")),d=[];return d.push(...u.map(f=>f===""?l:[l,f].join("/"))),i&&d.push(...u),d.map(f=>t.startsWith("/")&&f===""?"/":f)}function I_(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:q_(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var P_=/^:[\w-]+$/,L_=3,F_=2,U_=1,$_=10,z_=-2,qw=t=>t==="*";function B_(t,e){let r=t.split("/"),n=r.length;return r.some(qw)&&(n+=z_),e&&(n+=F_),r.filter(i=>!qw(i)).reduce((i,l)=>i+(P_.test(l)?L_:l===""?U_:$_),n)}function q_(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function H_(t,e,r=!1){let{routesMeta:n}=t,i={},l="/",u=[];for(let d=0;d<n.length;++d){let f=n[d],h=d===n.length-1,p=l==="/"?e:e.slice(l.length)||"/",g=Gu({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},p),x=f.route;if(!g&&h&&r&&!n[n.length-1].route.index&&(g=Gu({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},p)),!g)return null;Object.assign(i,g.params),u.push({params:i,pathname:sa([l,g.pathname]),pathnameBase:W_(sa([l,g.pathnameBase])),route:x}),g.pathnameBase!=="/"&&(l=sa([l,g.pathnameBase]))}return u}function Gu(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=V_(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let l=i[0],u=l.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:n.reduce((h,{paramName:p,isOptional:g},x)=>{if(p==="*"){let S=d[x]||"";u=l.slice(0,l.length-S.length).replace(/(.)\/+$/,"$1")}const w=d[x];return g&&!w?h[p]=void 0:h[p]=(w||"").replace(/%2F/g,"/"),h},{}),pathname:l,pathnameBase:u,pattern:t}}function V_(t,e=!1,r=!0){Lr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,f)=>(n.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Y_(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Lr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ma(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function G_(t,e="/"){let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?oi(t):t;return{pathname:r?r.startsWith("/")?r:X_(r,e):e,search:Q_(n),hash:Z_(i)}}function X_(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function $h(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function K_(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function ty(t){let e=K_(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function ry(t,e,r,n=!1){let i;typeof t=="string"?i=oi(t):(i={...t},mt(!i.pathname||!i.pathname.includes("?"),$h("?","pathname","search",i)),mt(!i.pathname||!i.pathname.includes("#"),$h("#","pathname","hash",i)),mt(!i.search||!i.search.includes("#"),$h("#","search","hash",i)));let l=t===""||i.pathname==="",u=l?"/":i.pathname,d;if(u==null)d=r;else{let g=e.length-1;if(!n&&u.startsWith("..")){let x=u.split("/");for(;x[0]==="..";)x.shift(),g-=1;i.pathname=x.join("/")}d=g>=0?e[g]:"/"}let f=G_(i,d),h=u&&u!=="/"&&u.endsWith("/"),p=(l||u===".")&&r.endsWith("/");return!f.pathname.endsWith("/")&&(h||p)&&(f.pathname+="/"),f}var sa=t=>t.join("/").replace(/\/\/+/g,"/"),W_=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Q_=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Z_=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function J_(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var pC=["POST","PUT","PATCH","DELETE"];new Set(pC);var eR=["GET",...pC];new Set(eR);var xo=b.createContext(null);xo.displayName="DataRouter";var kd=b.createContext(null);kd.displayName="DataRouterState";b.createContext(!1);var gC=b.createContext({isTransitioning:!1});gC.displayName="ViewTransition";var tR=b.createContext(new Map);tR.displayName="Fetchers";var rR=b.createContext(null);rR.displayName="Await";var yn=b.createContext(null);yn.displayName="Navigation";var Yl=b.createContext(null);Yl.displayName="Location";var xn=b.createContext({outlet:null,matches:[],isDataRoute:!1});xn.displayName="Route";var ny=b.createContext(null);ny.displayName="RouteError";function nR(t,{relative:e}={}){mt(vo(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=b.useContext(yn),{hash:i,pathname:l,search:u}=Gl(t,{relative:e}),d=l;return r!=="/"&&(d=l==="/"?r:sa([r,l])),n.createHref({pathname:d,search:u,hash:i})}function vo(){return b.useContext(Yl)!=null}function vn(){return mt(vo(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(Yl).location}var yC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xC(t){b.useContext(yn).static||b.useLayoutEffect(t)}function li(){let{isDataRoute:t}=b.useContext(xn);return t?gR():aR()}function aR(){mt(vo(),"useNavigate() may be used only in the context of a <Router> component.");let t=b.useContext(xo),{basename:e,navigator:r}=b.useContext(yn),{matches:n}=b.useContext(xn),{pathname:i}=vn(),l=JSON.stringify(ty(n)),u=b.useRef(!1);return xC(()=>{u.current=!0}),b.useCallback((f,h={})=>{if(Lr(u.current,yC),!u.current)return;if(typeof f=="number"){r.go(f);return}let p=ry(f,JSON.parse(l),i,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:sa([e,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[e,r,l,i,t])}b.createContext(null);function vC(){let{matches:t}=b.useContext(xn),e=t[t.length-1];return e?e.params:{}}function Gl(t,{relative:e}={}){let{matches:r}=b.useContext(xn),{pathname:n}=vn(),i=JSON.stringify(ty(r));return b.useMemo(()=>ry(t,JSON.parse(i),n,e==="path"),[t,i,n,e])}function sR(t,e){return bC(t,e)}function bC(t,e,r,n,i){var j;mt(vo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=b.useContext(yn),{matches:u}=b.useContext(xn),d=u[u.length-1],f=d?d.params:{},h=d?d.pathname:"/",p=d?d.pathnameBase:"/",g=d&&d.route;{let E=g&&g.path||"";wC(h,!g||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let x=vn(),w;if(e){let E=typeof e=="string"?oi(e):e;mt(p==="/"||((j=E.pathname)==null?void 0:j.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${E.pathname}" was given in the \`location\` prop.`),w=E}else w=x;let S=w.pathname||"/",C=S;if(p!=="/"){let E=p.replace(/^\//,"").split("/");C="/"+S.replace(/^\//,"").split("/").slice(E.length).join("/")}let N=mC(t,{pathname:C});Lr(g||N!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Lr(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=uR(N&&N.map(E=>Object.assign({},E,{params:Object.assign({},f,E.params),pathname:sa([p,l.encodeLocation?l.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?p:sa([p,l.encodeLocation?l.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),u,r,n,i);return e&&A?b.createElement(Yl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},A):A}function iR(){let t=pR(),e=J_(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},l={padding:"2px 4px",backgroundColor:n},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=b.createElement(b.Fragment,null,b.createElement("p",null,"💿 Hey developer 👋"),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:l},"ErrorBoundary")," or"," ",b.createElement("code",{style:l},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),r?b.createElement("pre",{style:i},r):null,u)}var oR=b.createElement(iR,null),lR=class extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?b.createElement(xn.Provider,{value:this.props.routeContext},b.createElement(ny.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function cR({routeContext:t,match:e,children:r}){let n=b.useContext(xo);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),b.createElement(xn.Provider,{value:t},r)}function uR(t,e=[],r=null,n=null,i=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let l=t,u=r==null?void 0:r.errors;if(u!=null){let h=l.findIndex(p=>p.route.id&&(u==null?void 0:u[p.route.id])!==void 0);mt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),l=l.slice(0,Math.min(l.length,h+1))}let d=!1,f=-1;if(r)for(let h=0;h<l.length;h++){let p=l[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=h),p.route.id){let{loaderData:g,errors:x}=r,w=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!x||x[p.route.id]===void 0);if(p.route.lazy||w){d=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((h,p,g)=>{let x,w=!1,S=null,C=null;r&&(x=u&&p.route.id?u[p.route.id]:void 0,S=p.route.errorElement||oR,d&&(f<0&&g===0?(wC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,C=null):f===g&&(w=!0,C=p.route.hydrateFallbackElement||null)));let N=e.concat(l.slice(0,g+1)),A=()=>{let j;return x?j=S:w?j=C:p.route.Component?j=b.createElement(p.route.Component,null):p.route.element?j=p.route.element:j=h,b.createElement(cR,{match:p,routeContext:{outlet:h,matches:N,isDataRoute:r!=null},children:j})};return r&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?b.createElement(lR,{location:r.location,revalidation:r.revalidation,component:S,error:x,children:A(),routeContext:{outlet:null,matches:N,isDataRoute:!0},unstable_onError:n}):A()},null)}function ay(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dR(t){let e=b.useContext(xo);return mt(e,ay(t)),e}function mR(t){let e=b.useContext(kd);return mt(e,ay(t)),e}function fR(t){let e=b.useContext(xn);return mt(e,ay(t)),e}function sy(t){let e=fR(t),r=e.matches[e.matches.length-1];return mt(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function hR(){return sy("useRouteId")}function pR(){var n;let t=b.useContext(ny),e=mR("useRouteError"),r=sy("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function gR(){let{router:t}=dR("useNavigate"),e=sy("useNavigate"),r=b.useRef(!1);return xC(()=>{r.current=!0}),b.useCallback(async(i,l={})=>{Lr(r.current,yC),r.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...l}))},[t,e])}var Hw={};function wC(t,e,r){!e&&!Hw[t]&&(Hw[t]=!0,Lr(!1,r))}b.memo(yR);function yR({routes:t,future:e,state:r,unstable_onError:n}){return bC(t,void 0,r,n,e)}function SC({to:t,replace:e,state:r,relative:n}){mt(vo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=b.useContext(yn);Lr(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=b.useContext(xn),{pathname:u}=vn(),d=li(),f=ry(t,ty(l),u,n==="path"),h=JSON.stringify(f);return b.useEffect(()=>{d(JSON.parse(h),{replace:e,state:r,relative:n})},[d,h,n,e,r]),null}function Tn(t){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xR({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:i,static:l=!1}){mt(!vo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),d=b.useMemo(()=>({basename:u,navigator:i,static:l,future:{}}),[u,i,l]);typeof r=="string"&&(r=oi(r));let{pathname:f="/",search:h="",hash:p="",state:g=null,key:x="default"}=r,w=b.useMemo(()=>{let S=ma(f,u);return S==null?null:{location:{pathname:S,search:h,hash:p,state:g,key:x},navigationType:n}},[u,f,h,p,g,x,n]);return Lr(w!=null,`<Router basename="${u}"> is not able to match the URL "${f}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:b.createElement(yn.Provider,{value:d},b.createElement(Yl.Provider,{children:e,value:w}))}function vR({children:t,location:e}){return sR(mg(t),e)}function mg(t,e=[]){let r=[];return b.Children.forEach(t,(n,i)=>{if(!b.isValidElement(n))return;let l=[...e,i];if(n.type===b.Fragment){r.push.apply(r,mg(n.props.children,l));return}mt(n.type===Tn,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let u={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(u.children=mg(n.props.children,l)),r.push(u)}),r}var zu="get",Bu="application/x-www-form-urlencoded";function Od(t){return t!=null&&typeof t.tagName=="string"}function bR(t){return Od(t)&&t.tagName.toLowerCase()==="button"}function wR(t){return Od(t)&&t.tagName.toLowerCase()==="form"}function SR(t){return Od(t)&&t.tagName.toLowerCase()==="input"}function NR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function CR(t,e){return t.button===0&&(!e||e==="_self")&&!NR(t)}function fg(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function jR(t,e){let r=fg(t);return e&&e.forEach((n,i)=>{r.has(i)||e.getAll(i).forEach(l=>{r.append(i,l)})}),r}var Du=null;function AR(){if(Du===null)try{new FormData(document.createElement("form"),0),Du=!1}catch{Du=!0}return Du}var DR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function zh(t){return t!=null&&!DR.has(t)?(Lr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bu}"`),null):t}function TR(t,e){let r,n,i,l,u;if(wR(t)){let d=t.getAttribute("action");n=d?ma(d,e):null,r=t.getAttribute("method")||zu,i=zh(t.getAttribute("enctype"))||Bu,l=new FormData(t)}else if(bR(t)||SR(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||d.getAttribute("action");if(n=f?ma(f,e):null,r=t.getAttribute("formmethod")||d.getAttribute("method")||zu,i=zh(t.getAttribute("formenctype"))||zh(d.getAttribute("enctype"))||Bu,l=new FormData(d,t),!AR()){let{name:h,type:p,value:g}=t;if(p==="image"){let x=h?`${h}.`:"";l.append(`${x}x`,"0"),l.append(`${x}y`,"0")}else h&&l.append(h,g)}}else{if(Od(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=zu,n=null,i=Bu,u=t}return l&&i==="text/plain"&&(u=l,l=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:l,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function iy(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ER(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&ma(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function _R(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function RR(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function kR(t,e,r){let n=await Promise.all(t.map(async i=>{let l=e.routes[i.route.id];if(l){let u=await _R(l,r);return u.links?u.links():[]}return[]}));return PR(n.flat(1).filter(RR).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Vw(t,e,r,n,i,l){let u=(f,h)=>r[h]?f.route.id!==r[h].route.id:!0,d=(f,h)=>{var p;return r[h].pathname!==f.pathname||((p=r[h].route.path)==null?void 0:p.endsWith("*"))&&r[h].params["*"]!==f.params["*"]};return l==="assets"?e.filter((f,h)=>u(f,h)||d(f,h)):l==="data"?e.filter((f,h)=>{var g;let p=n.routes[f.route.id];if(!p||!p.hasLoader)return!1;if(u(f,h)||d(f,h))return!0;if(f.route.shouldRevalidate){let x=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=r[0])==null?void 0:g.params)||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function OR(t,e,{includeHydrateFallback:r}={}){return MR(t.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let l=[i.module];return i.clientActionModule&&(l=l.concat(i.clientActionModule)),i.clientLoaderModule&&(l=l.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(l=l.concat(i.hydrateFallbackModule)),i.imports&&(l=l.concat(i.imports)),l}).flat(1))}function MR(t){return[...new Set(t)]}function IR(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function PR(t,e){let r=new Set;return new Set(e),t.reduce((n,i)=>{let l=JSON.stringify(IR(i));return r.has(l)||(r.add(l),n.push({key:l,link:i})),n},[])}function NC(){let t=b.useContext(xo);return iy(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function LR(){let t=b.useContext(kd);return iy(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var oy=b.createContext(void 0);oy.displayName="FrameworkContext";function CC(){let t=b.useContext(oy);return iy(t,"You must render this element inside a <HydratedRouter> element"),t}function FR(t,e){let r=b.useContext(oy),[n,i]=b.useState(!1),[l,u]=b.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:h,onMouseLeave:p,onTouchStart:g}=e,x=b.useRef(null);b.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let C=A=>{A.forEach(j=>{u(j.isIntersecting)})},N=new IntersectionObserver(C,{threshold:.5});return x.current&&N.observe(x.current),()=>{N.disconnect()}}},[t]),b.useEffect(()=>{if(n){let C=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(C)}}},[n]);let w=()=>{i(!0)},S=()=>{i(!1),u(!1)};return r?t!=="intent"?[l,x,{}]:[l,x,{onFocus:vl(d,w),onBlur:vl(f,S),onMouseEnter:vl(h,w),onMouseLeave:vl(p,S),onTouchStart:vl(g,w)}]:[!1,x,{}]}function vl(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function UR({page:t,...e}){let{router:r}=NC(),n=b.useMemo(()=>mC(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?b.createElement(zR,{page:t,matches:n,...e}):null}function $R(t){let{manifest:e,routeModules:r}=CC(),[n,i]=b.useState([]);return b.useEffect(()=>{let l=!1;return kR(t,e,r).then(u=>{l||i(u)}),()=>{l=!0}},[t,e,r]),n}function zR({page:t,matches:e,...r}){let n=vn(),{manifest:i,routeModules:l}=CC(),{basename:u}=NC(),{loaderData:d,matches:f}=LR(),h=b.useMemo(()=>Vw(t,e,f,i,n,"data"),[t,e,f,i,n]),p=b.useMemo(()=>Vw(t,e,f,i,n,"assets"),[t,e,f,i,n]),g=b.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let S=new Set,C=!1;if(e.forEach(A=>{var E;let j=i.routes[A.route.id];!j||!j.hasLoader||(!h.some(_=>_.route.id===A.route.id)&&A.route.id in d&&((E=l[A.route.id])!=null&&E.shouldRevalidate)||j.hasClientLoader?C=!0:S.add(A.route.id))}),S.size===0)return[];let N=ER(t,u,"data");return C&&S.size>0&&N.searchParams.set("_routes",e.filter(A=>S.has(A.route.id)).map(A=>A.route.id).join(",")),[N.pathname+N.search]},[u,d,n,i,h,e,t,l]),x=b.useMemo(()=>OR(p,i),[p,i]),w=$R(p);return b.createElement(b.Fragment,null,g.map(S=>b.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...r})),x.map(S=>b.createElement("link",{key:S,rel:"modulepreload",href:S,...r})),w.map(({key:S,link:C})=>b.createElement("link",{key:S,nonce:r.nonce,...C})))}function BR(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var jC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{jC&&(window.__reactRouterVersion="7.9.3")}catch{}function qR({basename:t,children:e,window:r}){let n=b.useRef();n.current==null&&(n.current=__({window:r,v5Compat:!0}));let i=n.current,[l,u]=b.useState({action:i.action,location:i.location}),d=b.useCallback(f=>{b.startTransition(()=>u(f))},[u]);return b.useLayoutEffect(()=>i.listen(d),[i,d]),b.createElement(xR,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:i})}var AC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ly=b.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:i,reloadDocument:l,replace:u,state:d,target:f,to:h,preventScrollReset:p,viewTransition:g,...x},w){let{basename:S}=b.useContext(yn),C=typeof h=="string"&&AC.test(h),N,A=!1;if(typeof h=="string"&&C&&(N=h,jC))try{let z=new URL(window.location.href),V=h.startsWith("//")?new URL(z.protocol+h):new URL(h),P=ma(V.pathname,S);V.origin===z.origin&&P!=null?h=P+V.search+V.hash:A=!0}catch{Lr(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let j=nR(h,{relative:i}),[E,_,R]=FR(n,x),k=GR(h,{replace:u,state:d,target:f,preventScrollReset:p,relative:i,viewTransition:g});function D(z){e&&e(z),z.defaultPrevented||k(z)}let I=b.createElement("a",{...x,...R,href:N||j,onClick:A||l?e:D,ref:BR(w,_),target:f,"data-discover":!C&&r==="render"?"true":void 0});return E&&!C?b.createElement(b.Fragment,null,I,b.createElement(UR,{page:j})):I});ly.displayName="Link";var HR=b.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:i=!1,style:l,to:u,viewTransition:d,children:f,...h},p){let g=Gl(u,{relative:h.relative}),x=vn(),w=b.useContext(kd),{navigator:S,basename:C}=b.useContext(yn),N=w!=null&&JR(g)&&d===!0,A=S.encodeLocation?S.encodeLocation(g).pathname:g.pathname,j=x.pathname,E=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;r||(j=j.toLowerCase(),E=E?E.toLowerCase():null,A=A.toLowerCase()),E&&C&&(E=ma(E,C)||E);const _=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let R=j===A||!i&&j.startsWith(A)&&j.charAt(_)==="/",k=E!=null&&(E===A||!i&&E.startsWith(A)&&E.charAt(A.length)==="/"),D={isActive:R,isPending:k,isTransitioning:N},I=R?e:void 0,z;typeof n=="function"?z=n(D):z=[n,R?"active":null,k?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let V=typeof l=="function"?l(D):l;return b.createElement(ly,{...h,"aria-current":I,className:z,ref:p,style:V,to:u,viewTransition:d},typeof f=="function"?f(D):f)});HR.displayName="NavLink";var VR=b.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:i,state:l,method:u=zu,action:d,onSubmit:f,relative:h,preventScrollReset:p,viewTransition:g,...x},w)=>{let S=QR(),C=ZR(d,{relative:h}),N=u.toLowerCase()==="get"?"get":"post",A=typeof d=="string"&&AC.test(d),j=E=>{if(f&&f(E),E.defaultPrevented)return;E.preventDefault();let _=E.nativeEvent.submitter,R=(_==null?void 0:_.getAttribute("formmethod"))||u;S(_||E.currentTarget,{fetcherKey:e,method:R,navigate:r,replace:i,state:l,relative:h,preventScrollReset:p,viewTransition:g})};return b.createElement("form",{ref:w,method:N,action:C,onSubmit:n?f:j,...x,"data-discover":!A&&t==="render"?"true":void 0})});VR.displayName="Form";function YR(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DC(t){let e=b.useContext(xo);return mt(e,YR(t)),e}function GR(t,{target:e,replace:r,state:n,preventScrollReset:i,relative:l,viewTransition:u}={}){let d=li(),f=vn(),h=Gl(t,{relative:l});return b.useCallback(p=>{if(CR(p,e)){p.preventDefault();let g=r!==void 0?r:Ml(f)===Ml(h);d(t,{replace:g,state:n,preventScrollReset:i,relative:l,viewTransition:u})}},[f,d,h,r,n,e,t,i,l,u])}function XR(t){Lr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=b.useRef(fg(t)),r=b.useRef(!1),n=vn(),i=b.useMemo(()=>jR(n.search,r.current?null:e.current),[n.search]),l=li(),u=b.useCallback((d,f)=>{const h=fg(typeof d=="function"?d(new URLSearchParams(i)):d);r.current=!0,l("?"+h,f)},[l,i]);return[i,u]}var KR=0,WR=()=>`__${String(++KR)}__`;function QR(){let{router:t}=DC("useSubmit"),{basename:e}=b.useContext(yn),r=hR();return b.useCallback(async(n,i={})=>{let{action:l,method:u,encType:d,formData:f,body:h}=TR(n,e);if(i.navigate===!1){let p=i.fetcherKey||WR();await t.fetch(p,r,i.action||l,{preventScrollReset:i.preventScrollReset,formData:f,body:h,formMethod:i.method||u,formEncType:i.encType||d,flushSync:i.flushSync})}else await t.navigate(i.action||l,{preventScrollReset:i.preventScrollReset,formData:f,body:h,formMethod:i.method||u,formEncType:i.encType||d,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,r])}function ZR(t,{relative:e}={}){let{basename:r}=b.useContext(yn),n=b.useContext(xn);mt(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),l={...Gl(t||".",{relative:e})},u=vn();if(t==null){l.search=u.search;let d=new URLSearchParams(l.search),f=d.getAll("index");if(f.some(p=>p==="")){d.delete("index"),f.filter(g=>g).forEach(g=>d.append("index",g));let p=d.toString();l.search=p?`?${p}`:""}}return(!t||t===".")&&i.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(l.pathname=l.pathname==="/"?r:sa([r,l.pathname])),Ml(l)}function JR(t,{relative:e}={}){let r=b.useContext(gC);mt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=DC("useViewTransitionState"),i=Gl(t,{relative:e});if(!r.isTransitioning)return!1;let l=ma(r.currentLocation.pathname,n)||r.currentLocation.pathname,u=ma(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Gu(i.pathname,u)!=null||Gu(i.pathname,l)!=null}/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),t5=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,n)=>n?n.toUpperCase():r.toLowerCase()),Yw=t=>{const e=t5(t);return e.charAt(0).toUpperCase()+e.slice(1)},TC=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim(),r5=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var n5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:l,iconNode:u,...d},f)=>b.createElement("svg",{ref:f,...n5,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:TC("lucide",i),...!l&&!r5(d)&&{"aria-hidden":"true"},...d},[...u.map(([h,p])=>b.createElement(h,p)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=(t,e)=>{const r=b.forwardRef(({className:n,...i},l)=>b.createElement(a5,{ref:l,iconNode:e,className:TC(`lucide-${e5(Yw(t))}`,`lucide-${t}`,n),...i}));return r.displayName=Yw(t),r};/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],EC=Ne("activity",s5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]],o5=Ne("arrow-down-wide-narrow",i5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],_C=Ne("arrow-left",l5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],u5=Ne("arrow-right",c5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]],m5=Ne("arrow-up-narrow-wide",d5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Xs=Ne("bell",f5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=[["path",{d:"m7 7 10 10-5 5V2l5 5L7 17",key:"1q5490"}]],p5=Ne("bluetooth",h5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],y5=Ne("calculator",g5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],RC=Ne("calendar",x5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Gw=Ne("camera",v5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],hg=Ne("chart-no-axes-column",b5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],kC=Ne("check",w5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],rr=Ne("circle-alert",S5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ft=Ne("circle-check-big",N5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],us=Ne("circle-x",C5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],is=Ne("clock",j5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],D5=Ne("copy",A5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],pn=Ne("credit-card",T5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Xw=Ne("database",E5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ia=Ne("dollar-sign",_5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],OC=Ne("download",R5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],O5=Ne("ellipsis-vertical",k5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],pg=Ne("external-link",M5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],MC=Ne("eye-off",I5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Md=Ne("eye",P5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ks=Ne("file-text",L5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],cy=Ne("funnel",F5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],gg=Ne("globe",U5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Id=Ne("info",$5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Xu=Ne("loader",z5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],q5=Ne("lock-open",B5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],io=Ne("lock",H5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],IC=Ne("log-out",V5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Xl=Ne("mail",Y5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],PC=Ne("map-pin",G5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],K5=Ne("maximize",X5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Q5=Ne("menu",W5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],J5=Ne("minimize",Z5);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],LC=Ne("package",e4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],FC=Ne("pen",t4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],uy=Ne("phone",r4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],dy=Ne("plus",n4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],s4=Ne("printer",a4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],yg=Ne("qr-code",i4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],oo=Ne("refresh-cw",o4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],c4=Ne("rotate-cw",l4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Pd=Ne("save",u4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],m4=Ne("scan",d4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],my=Ne("search",f4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],p4=Ne("send",h4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],UC=Ne("settings",g4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],rn=Ne("shield",y4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],$C=Ne("smartphone",x4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],b4=Ne("target",v4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],S4=Ne("toggle-left",w4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],C4=Ne("toggle-right",N4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],A4=Ne("trending-down",j4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],zC=Ne("trending-up",D4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],cr=Ne("triangle-alert",T4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Il=Ne("upload",E4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Kw=Ne("user-plus",_4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ku=Ne("user",R4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],BC=Ne("users",k4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],fy=Ne("wifi-off",O4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],Wu=Ne("wifi",M4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ir=Ne("x",I4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],lo=Ne("zap",P4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],F4=Ne("zoom-in",L4);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],$4=Ne("zoom-out",U4);function qC(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=qC(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Kt(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=qC(t))&&(n&&(n+=" "),n+=e);return n}var Bh={},qh={},Ww;function z4(){return Ww||(Ww=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==="__proto__"}t.isUnsafeProperty=e})(qh)),qh}var Hh={},Qw;function B4(){return Qw||(Qw=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=e})(Hh)),Hh}var Vh={},Zw;function q4(){return Zw||(Zw=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}t.toKey=e})(Vh)),Vh}var Yh={},Jw;function HC(){return Jw||(Jw=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){const n=[],i=r.length;if(i===0)return n;let l=0,u="",d="",f=!1;for(r.charCodeAt(0)===46&&(n.push(""),l++);l<i;){const h=r[l];d?h==="\\"&&l+1<i?(l++,u+=r[l]):h===d?d="":u+=h:f?h==='"'||h==="'"?d=h:h==="]"?(f=!1,n.push(u),u=""):u+=h:h==="["?(f=!0,u&&(n.push(u),u="")):h==="."?u&&(n.push(u),u=""):u+=h,l++}return u&&n.push(u),n}t.toPath=e})(Yh)),Yh}var e1;function H4(){return e1||(e1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=z4(),r=B4(),n=q4(),i=HC();function l(d,f,h){if(d==null)return h;switch(typeof f){case"string":{if(e.isUnsafeProperty(f))return h;const p=d[f];return p===void 0?r.isDeepKey(f)?l(d,i.toPath(f),h):h:p}case"number":case"symbol":{typeof f=="number"&&(f=n.toKey(f));const p=d[f];return p===void 0?h:p}default:{if(Array.isArray(f))return u(d,f,h);if(Object.is(f==null?void 0:f.valueOf(),-0)?f="-0":f=String(f),e.isUnsafeProperty(f))return h;const p=d[f];return p===void 0?h:p}}}function u(d,f,h){if(f.length===0)return h;let p=d;for(let g=0;g<f.length;g++){if(p==null||e.isUnsafeProperty(f[g]))return h;p=p[f[g]]}return p===void 0?h:p}t.get=l})(Bh)),Bh}var Gh,t1;function V4(){return t1||(t1=1,Gh=H4().get),Gh}var Y4=V4();const Ld=os(Y4);var Rn=t=>t===0?0:t>0?1:-1,Fr=t=>typeof t=="number"&&t!=+t,Hs=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Fe=t=>(typeof t=="number"||t instanceof Number)&&!Fr(t),co=t=>Fe(t)||typeof t=="string",G4=0,Pl=t=>{var e=++G4;return"".concat(t||"").concat(e)},ti=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Fe(e)&&typeof e!="string")return n;var l;if(Hs(e)){if(r==null)return n;var u=e.indexOf("%");l=r*parseFloat(e.slice(0,u))/100}else l=+e;return Fr(l)&&(l=n),i&&r!=null&&l>r&&(l=r),l},VC=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,r={},n=0;n<e;n++)if(!r[t[n]])r[t[n]]=!0;else return!0;return!1};function Qi(t,e,r){return Fe(t)&&Fe(e)?t+r*(e-t):e}function YC(t,e,r){if(!(!t||!t.length))return t.find(n=>n&&(typeof e=="function"?e(n):Ld(n,e))===r)}var tr=t=>t===null||typeof t>"u",hy=t=>tr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),X4=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function py(t){if(typeof t!="string")return!1;var e=X4;return e.includes(t)}var K4=["viewBox","children"],r1=["points","pathLength"],Xh={svg:K4,polygon:r1,polyline:r1},gy=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(b.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{py(i)&&(n[i]=(l=>r[i](r,l)))}),n},W4=(t,e,r)=>n=>(t(e,r,n),null),Q4=(t,e,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var n=null;return Object.keys(t).forEach(i=>{var l=t[i];py(i)&&typeof l=="function"&&(n||(n={}),n[i]=W4(l,e,r))}),n},Z4=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function GC(t){if(typeof t!="string")return!1;var e=Z4;return e.includes(t)}function ds(t){var e=Object.entries(t).filter(r=>{var[n]=r;return GC(n)});return Object.fromEntries(e)}var XC=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,J4=(t,e,r,n)=>{var i;if(typeof e=="symbol"||typeof e=="number")return!0;var l=(i=n&&(Xh==null?void 0:Xh[n]))!==null&&i!==void 0?i:[],u=e.startsWith("data-"),d=typeof t!="function"&&(!!n&&l.includes(e)||GC(e)),f=!!r&&py(e);return u||d||f},gn=(t,e,r)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(b.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var i={};return Object.keys(n).forEach(l=>{var u;J4((u=n)===null||u===void 0?void 0:u[l],l,e,r)&&(i[l]=n[l])}),i},ek=["children","width","height","viewBox","className","style","title","desc"];function xg(){return xg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xg.apply(null,arguments)}function tk(t,e){if(t==null)return{};var r,n,i=rk(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)r=l[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function rk(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var KC=b.forwardRef((t,e)=>{var{children:r,width:n,height:i,viewBox:l,className:u,style:d,title:f,desc:h}=t,p=tk(t,ek),g=l||{width:n,height:i,x:0,y:0},x=Kt("recharts-surface",u);return b.createElement("svg",xg({},gn(p,!0,"svg"),{className:x,width:n,height:i,style:d,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:e}),b.createElement("title",null,f),b.createElement("desc",null,h),r)}),nk=["children","className"];function vg(){return vg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vg.apply(null,arguments)}function ak(t,e){if(t==null)return{};var r,n,i=sk(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)r=l[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function sk(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var fa=b.forwardRef((t,e)=>{var{children:r,className:n}=t,i=ak(t,nk),l=Kt("recharts-layer",n);return b.createElement("g",vg({className:l},gn(i,!0),{ref:e}),r)}),ik=b.createContext(null);function gt(t){return function(){return t}}const bg=Math.PI,wg=2*bg,$s=1e-6,ok=wg-$s;function WC(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function lk(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return WC;const r=10**e;return function(n){this._+=n[0];for(let i=1,l=n.length;i<l;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class ck{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?WC:lk(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,l,u){this._append`C${+e},${+r},${+n},${+i},${this._x1=+l},${this._y1=+u}`}arcTo(e,r,n,i,l){if(e=+e,r=+r,n=+n,i=+i,l=+l,l<0)throw new Error(`negative radius: ${l}`);let u=this._x1,d=this._y1,f=n-e,h=i-r,p=u-e,g=d-r,x=p*p+g*g;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(x>$s)if(!(Math.abs(g*f-h*p)>$s)||!l)this._append`L${this._x1=e},${this._y1=r}`;else{let w=n-u,S=i-d,C=f*f+h*h,N=w*w+S*S,A=Math.sqrt(C),j=Math.sqrt(x),E=l*Math.tan((bg-Math.acos((C+x-N)/(2*A*j)))/2),_=E/j,R=E/A;Math.abs(_-1)>$s&&this._append`L${e+_*p},${r+_*g}`,this._append`A${l},${l},0,0,${+(g*w>p*S)},${this._x1=e+R*f},${this._y1=r+R*h}`}}arc(e,r,n,i,l,u){if(e=+e,r=+r,n=+n,u=!!u,n<0)throw new Error(`negative radius: ${n}`);let d=n*Math.cos(i),f=n*Math.sin(i),h=e+d,p=r+f,g=1^u,x=u?i-l:l-i;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>$s||Math.abs(this._y1-p)>$s)&&this._append`L${h},${p}`,n&&(x<0&&(x=x%wg+wg),x>ok?this._append`A${n},${n},0,1,${g},${e-d},${r-f}A${n},${n},0,1,${g},${this._x1=h},${this._y1=p}`:x>$s&&this._append`A${n},${n},0,${+(x>=bg)},${g},${this._x1=e+n*Math.cos(l)},${this._y1=r+n*Math.sin(l)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function QC(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new ck(e)}function yy(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ZC(t){this._context=t}ZC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Fd(t){return new ZC(t)}function JC(t){return t[0]}function ej(t){return t[1]}function tj(t,e){var r=gt(!0),n=null,i=Fd,l=null,u=QC(d);t=typeof t=="function"?t:t===void 0?JC:gt(t),e=typeof e=="function"?e:e===void 0?ej:gt(e);function d(f){var h,p=(f=yy(f)).length,g,x=!1,w;for(n==null&&(l=i(w=u())),h=0;h<=p;++h)!(h<p&&r(g=f[h],h,f))===x&&((x=!x)?l.lineStart():l.lineEnd()),x&&l.point(+t(g,h,f),+e(g,h,f));if(w)return l=null,w+""||null}return d.x=function(f){return arguments.length?(t=typeof f=="function"?f:gt(+f),d):t},d.y=function(f){return arguments.length?(e=typeof f=="function"?f:gt(+f),d):e},d.defined=function(f){return arguments.length?(r=typeof f=="function"?f:gt(!!f),d):r},d.curve=function(f){return arguments.length?(i=f,n!=null&&(l=i(n)),d):i},d.context=function(f){return arguments.length?(f==null?n=l=null:l=i(n=f),d):n},d}function Tu(t,e,r){var n=null,i=gt(!0),l=null,u=Fd,d=null,f=QC(h);t=typeof t=="function"?t:t===void 0?JC:gt(+t),e=typeof e=="function"?e:gt(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?ej:gt(+r);function h(g){var x,w,S,C=(g=yy(g)).length,N,A=!1,j,E=new Array(C),_=new Array(C);for(l==null&&(d=u(j=f())),x=0;x<=C;++x){if(!(x<C&&i(N=g[x],x,g))===A)if(A=!A)w=x,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),S=x-1;S>=w;--S)d.point(E[S],_[S]);d.lineEnd(),d.areaEnd()}A&&(E[x]=+t(N,x,g),_[x]=+e(N,x,g),d.point(n?+n(N,x,g):E[x],r?+r(N,x,g):_[x]))}if(j)return d=null,j+""||null}function p(){return tj().defined(i).curve(u).context(l)}return h.x=function(g){return arguments.length?(t=typeof g=="function"?g:gt(+g),n=null,h):t},h.x0=function(g){return arguments.length?(t=typeof g=="function"?g:gt(+g),h):t},h.x1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:gt(+g),h):n},h.y=function(g){return arguments.length?(e=typeof g=="function"?g:gt(+g),r=null,h):e},h.y0=function(g){return arguments.length?(e=typeof g=="function"?g:gt(+g),h):e},h.y1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:gt(+g),h):r},h.lineX0=h.lineY0=function(){return p().x(t).y(e)},h.lineY1=function(){return p().x(t).y(r)},h.lineX1=function(){return p().x(n).y(e)},h.defined=function(g){return arguments.length?(i=typeof g=="function"?g:gt(!!g),h):i},h.curve=function(g){return arguments.length?(u=g,l!=null&&(d=u(l)),h):u},h.context=function(g){return arguments.length?(g==null?l=d=null:d=u(l=g),h):l},h}class rj{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function uk(t){return new rj(t,!0)}function dk(t){return new rj(t,!1)}function Qu(){}function Zu(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function nj(t){this._context=t}nj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Zu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Zu(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function mk(t){return new nj(t)}function aj(t){this._context=t}aj.prototype={areaStart:Qu,areaEnd:Qu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Zu(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function fk(t){return new aj(t)}function sj(t){this._context=t}sj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Zu(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function hk(t){return new sj(t)}function ij(t){this._context=t}ij.prototype={areaStart:Qu,areaEnd:Qu,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function pk(t){return new ij(t)}function n1(t){return t<0?-1:1}function a1(t,e,r){var n=t._x1-t._x0,i=e-t._x1,l=(t._y1-t._y0)/(n||i<0&&-0),u=(r-t._y1)/(i||n<0&&-0),d=(l*i+u*n)/(n+i);return(n1(l)+n1(u))*Math.min(Math.abs(l),Math.abs(u),.5*Math.abs(d))||0}function s1(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function Kh(t,e,r){var n=t._x0,i=t._y0,l=t._x1,u=t._y1,d=(l-n)/3;t._context.bezierCurveTo(n+d,i+d*e,l-d,u-d*r,l,u)}function Ju(t){this._context=t}Ju.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Kh(this,this._t0,s1(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Kh(this,s1(this,r=a1(this,t,e)),r);break;default:Kh(this,this._t0,r=a1(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function oj(t){this._context=new lj(t)}(oj.prototype=Object.create(Ju.prototype)).point=function(t,e){Ju.prototype.point.call(this,e,t)};function lj(t){this._context=t}lj.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,l){this._context.bezierCurveTo(e,t,n,r,l,i)}};function gk(t){return new Ju(t)}function yk(t){return new oj(t)}function cj(t){this._context=t}cj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=i1(t),i=i1(e),l=0,u=1;u<r;++l,++u)this._context.bezierCurveTo(n[0][l],i[0][l],n[1][l],i[1][l],t[u],e[u]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function i1(t){var e,r=t.length-1,n,i=new Array(r),l=new Array(r),u=new Array(r);for(i[0]=0,l[0]=2,u[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,l[e]=4,u[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,l[r-1]=7,u[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/l[e-1],l[e]-=n,u[e]-=n*u[e-1];for(i[r-1]=u[r-1]/l[r-1],e=r-2;e>=0;--e)i[e]=(u[e]-i[e+1])/l[e];for(l[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)l[e]=2*t[e+1]-i[e+1];return[i,l]}function xk(t){return new cj(t)}function Ud(t,e){this._context=t,this._t=e}Ud.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function vk(t){return new Ud(t,.5)}function bk(t){return new Ud(t,0)}function wk(t){return new Ud(t,1)}function uo(t,e){if((u=t.length)>1)for(var r=1,n,i,l=t[e[0]],u,d=l.length;r<u;++r)for(i=l,l=t[e[r]],n=0;n<d;++n)l[n][1]+=l[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function Sg(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function Sk(t,e){return t[e]}function Nk(t){const e=[];return e.key=t,e}function Ck(){var t=gt([]),e=Sg,r=uo,n=Sk;function i(l){var u=Array.from(t.apply(this,arguments),Nk),d,f=u.length,h=-1,p;for(const g of l)for(d=0,++h;d<f;++d)(u[d][h]=[0,+n(g,u[d].key,h,l)]).data=g;for(d=0,p=yy(e(u));d<f;++d)u[p[d]].index=d;return r(u,p),u}return i.keys=function(l){return arguments.length?(t=typeof l=="function"?l:gt(Array.from(l)),i):t},i.value=function(l){return arguments.length?(n=typeof l=="function"?l:gt(+l),i):n},i.order=function(l){return arguments.length?(e=l==null?Sg:typeof l=="function"?l:gt(Array.from(l)),i):e},i.offset=function(l){return arguments.length?(r=l??uo,i):r},i}function jk(t,e){if((n=t.length)>0){for(var r,n,i=0,l=t[0].length,u;i<l;++i){for(u=r=0;r<n;++r)u+=t[r][i][1]||0;if(u)for(r=0;r<n;++r)t[r][i][1]/=u}uo(t,e)}}function Ak(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,l=n.length;r<l;++r){for(var u=0,d=0;u<i;++u)d+=t[u][r][1]||0;n[r][1]+=n[r][0]=-d/2}uo(t,e)}}function Dk(t,e){if(!(!((u=t.length)>0)||!((l=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,l,u;n<l;++n){for(var d=0,f=0,h=0;d<u;++d){for(var p=t[e[d]],g=p[n][1]||0,x=p[n-1][1]||0,w=(g-x)/2,S=0;S<d;++S){var C=t[e[S]],N=C[n][1]||0,A=C[n-1][1]||0;w+=N-A}f+=g,h+=w*g}i[n-1][1]+=i[n-1][0]=r,f&&(r-=h/f)}i[n-1][1]+=i[n-1][0]=r,uo(t,e)}}var Wh={},Qh={},o1;function Tk(){return o1||(o1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=e})(Qh)),Qh}var l1;function uj(){return l1||(l1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Tk();function r(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}t.isArrayLike=r})(Wh)),Wh}var Zh={},c1;function Ek(){return c1||(c1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=e})(Zh)),Zh}var Jh={},u1;function _k(){return u1||(u1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}t.eq=e})(Jh)),Jh}var ep={},d1;function Rk(){return d1||(d1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return e.test(n)}}t.isIndex=r})(ep)),ep}var tp={exports:{}},rp={},np={exports:{}},ap={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m1;function kk(){if(m1)return ap;m1=1;var t=ls();function e(g,x){return g===x&&(g!==0||1/g===1/x)||g!==g&&x!==x}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,i=t.useEffect,l=t.useLayoutEffect,u=t.useDebugValue;function d(g,x){var w=x(),S=n({inst:{value:w,getSnapshot:x}}),C=S[0].inst,N=S[1];return l(function(){C.value=w,C.getSnapshot=x,f(C)&&N({inst:C})},[g,w,x]),i(function(){return f(C)&&N({inst:C}),g(function(){f(C)&&N({inst:C})})},[g]),u(w),w}function f(g){var x=g.getSnapshot;g=g.value;try{var w=x();return!r(g,w)}catch{return!0}}function h(g,x){return x()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:d;return ap.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,ap}var f1;function Ok(){return f1||(f1=1,np.exports=kk()),np.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h1;function Mk(){if(h1)return rp;h1=1;var t=ls(),e=Ok();function r(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,l=t.useRef,u=t.useEffect,d=t.useMemo,f=t.useDebugValue;return rp.useSyncExternalStoreWithSelector=function(h,p,g,x,w){var S=l(null);if(S.current===null){var C={hasValue:!1,value:null};S.current=C}else C=S.current;S=d(function(){function A(k){if(!j){if(j=!0,E=k,k=x(k),w!==void 0&&C.hasValue){var D=C.value;if(w(D,k))return _=D}return _=k}if(D=_,n(E,k))return D;var I=x(k);return w!==void 0&&w(D,I)?(E=k,D):(E=k,_=I)}var j=!1,E,_,R=g===void 0?null:g;return[function(){return A(p())},R===null?void 0:function(){return A(R())}]},[p,g,x,w]);var N=i(h,S[0],S[1]);return u(function(){C.hasValue=!0,C.value=N},[N]),f(N),N},rp}var p1;function Ik(){return p1||(p1=1,tp.exports=Mk()),tp.exports}var Pk=Ik(),xy=b.createContext(null),Lk=t=>t,$r=()=>{var t=b.useContext(xy);return t?t.store.dispatch:Lk},qu=()=>{},Fk=()=>qu,Uk=(t,e)=>t===e;function Ve(t){var e=b.useContext(xy);return Pk.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:Fk,e?e.store.getState:qu,e?e.store.getState:qu,e?t:qu,Uk)}function $k(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function zk(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function Bk(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var g1=t=>Array.isArray(t)?t:[t];function qk(t){const e=Array.isArray(t[0])?t[0]:t;return Bk(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function Hk(t,e){const r=[],{length:n}=t;for(let i=0;i<n;i++)r.push(t[i].apply(null,e));return r}var Vk=class{constructor(t){this.value=t}deref(){return this.value}},Yk=typeof WeakRef<"u"?WeakRef:Vk,Gk=0,y1=1;function Eu(){return{s:Gk,v:void 0,o:null,p:null}}function dj(t,e={}){let r=Eu();const{resultEqualityCheck:n}=e;let i,l=0;function u(){var g;let d=r;const{length:f}=arguments;for(let x=0,w=f;x<w;x++){const S=arguments[x];if(typeof S=="function"||typeof S=="object"&&S!==null){let C=d.o;C===null&&(d.o=C=new WeakMap);const N=C.get(S);N===void 0?(d=Eu(),C.set(S,d)):d=N}else{let C=d.p;C===null&&(d.p=C=new Map);const N=C.get(S);N===void 0?(d=Eu(),C.set(S,d)):d=N}}const h=d;let p;if(d.s===y1)p=d.v;else if(p=t.apply(null,arguments),l++,n){const x=((g=i==null?void 0:i.deref)==null?void 0:g.call(i))??i;x!=null&&n(x,p)&&(p=x,l!==0&&l--),i=typeof p=="object"&&p!==null||typeof p=="function"?new Yk(p):p}return h.s=y1,h.v=p,p}return u.clearCache=()=>{r=Eu(),u.resetResultsCount()},u.resultsCount=()=>l,u.resetResultsCount=()=>{l=0},u}function Xk(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...i)=>{let l=0,u=0,d,f={},h=i.pop();typeof h=="object"&&(f=h,h=i.pop()),$k(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const p={...r,...f},{memoize:g,memoizeOptions:x=[],argsMemoize:w=dj,argsMemoizeOptions:S=[]}=p,C=g1(x),N=g1(S),A=qk(i),j=g(function(){return l++,h.apply(null,arguments)},...C),E=w(function(){u++;const R=Hk(A,arguments);return d=j.apply(null,R),d},...N);return Object.assign(E,{resultFunc:h,memoizedResultFunc:j,dependencies:A,dependencyRecomputations:()=>u,resetDependencyRecomputations:()=>{u=0},lastResult:()=>d,recomputations:()=>l,resetRecomputations:()=>{l=0},memoize:g,argsMemoize:w})};return Object.assign(n,{withTypes:()=>n}),n}var me=Xk(dj),Kk=Object.assign((t,e=me)=>{zk(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(l=>t[l]);return e(n,(...l)=>l.reduce((u,d,f)=>(u[r[f]]=d,u),{}))},{withTypes:()=>Kk}),sp={},ip={},op={},x1;function Wk(){return x1||(x1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,l)=>{if(n!==i){const u=e(n),d=e(i);if(u===d&&u===0){if(n<i)return l==="desc"?1:-1;if(n>i)return l==="desc"?-1:1}return l==="desc"?d-u:u-d}return 0};t.compareValues=r})(op)),op}var lp={},cp={},v1;function mj(){return v1||(v1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=e})(cp)),cp}var b1;function Qk(){return b1||(b1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=mj(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(l,u){return Array.isArray(l)?!1:typeof l=="number"||typeof l=="boolean"||l==null||e.isSymbol(l)?!0:typeof l=="string"&&(n.test(l)||!r.test(l))||u!=null&&Object.hasOwn(u,l)}t.isKey=i})(lp)),lp}var w1;function Zk(){return w1||(w1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Wk(),r=Qk(),n=HC();function i(l,u,d,f){if(l==null)return[];d=f?void 0:d,Array.isArray(l)||(l=Object.values(l)),Array.isArray(u)||(u=u==null?[null]:[u]),u.length===0&&(u=[null]),Array.isArray(d)||(d=d==null?[]:[d]),d=d.map(w=>String(w));const h=(w,S)=>{let C=w;for(let N=0;N<S.length&&C!=null;++N)C=C[S[N]];return C},p=(w,S)=>S==null||w==null?S:typeof w=="object"&&"key"in w?Object.hasOwn(S,w.key)?S[w.key]:h(S,w.path):typeof w=="function"?w(S):Array.isArray(w)?h(S,w):typeof S=="object"?S[w]:S,g=u.map(w=>(Array.isArray(w)&&w.length===1&&(w=w[0]),w==null||typeof w=="function"||Array.isArray(w)||r.isKey(w)?w:{key:w,path:n.toPath(w)}));return l.map(w=>({original:w,criteria:g.map(S=>p(S,w))})).slice().sort((w,S)=>{for(let C=0;C<g.length;C++){const N=e.compareValues(w.criteria[C],S.criteria[C],d[C]);if(N!==0)return N}return 0}).map(w=>w.original)}t.orderBy=i})(ip)),ip}var up={},S1;function Jk(){return S1||(S1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n=1){const i=[],l=Math.floor(n),u=(d,f)=>{for(let h=0;h<d.length;h++){const p=d[h];Array.isArray(p)&&f<l?u(p,f+1):i.push(p)}};return u(r,0),i}t.flatten=e})(up)),up}var dp={},N1;function fj(){return N1||(N1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Rk(),r=uj(),n=Ek(),i=_k();function l(u,d,f){return n.isObject(f)&&(typeof d=="number"&&r.isArrayLike(f)&&e.isIndex(d)&&d<f.length||typeof d=="string"&&d in f)?i.eq(f[d],u):!1}t.isIterateeCall=l})(dp)),dp}var C1;function e3(){return C1||(C1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Zk(),r=Jk(),n=fj();function i(l,...u){const d=u.length;return d>1&&n.isIterateeCall(l,u[0],u[1])?u=[]:d>2&&n.isIterateeCall(u[0],u[1],u[2])&&(u=[u[0]]),e.orderBy(l,r.flatten(u),["asc"])}t.sortBy=i})(sp)),sp}var mp,j1;function t3(){return j1||(j1=1,mp=e3().sortBy),mp}var r3=t3();const vy=os(r3);var hj=t=>t.legend.settings,n3=t=>t.legend.size,a3=t=>t.legend.payload;me([a3,hj],(t,e)=>{var{itemSorter:r}=e,n=t.flat(1);return r?vy(n,r):n});function Yt(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var s3=typeof Symbol=="function"&&Symbol.observable||"@@observable",A1=s3,fp=()=>Math.random().toString(36).substring(7).split("").join("."),i3={INIT:`@@redux/INIT${fp()}`,REPLACE:`@@redux/REPLACE${fp()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${fp()}`},ed=i3;function by(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function pj(t,e,r){if(typeof t!="function")throw new Error(Yt(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Yt(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Yt(1));return r(pj)(t,e)}let n=t,i=e,l=new Map,u=l,d=0,f=!1;function h(){u===l&&(u=new Map,l.forEach((N,A)=>{u.set(A,N)}))}function p(){if(f)throw new Error(Yt(3));return i}function g(N){if(typeof N!="function")throw new Error(Yt(4));if(f)throw new Error(Yt(5));let A=!0;h();const j=d++;return u.set(j,N),function(){if(A){if(f)throw new Error(Yt(6));A=!1,h(),u.delete(j),l=null}}}function x(N){if(!by(N))throw new Error(Yt(7));if(typeof N.type>"u")throw new Error(Yt(8));if(typeof N.type!="string")throw new Error(Yt(17));if(f)throw new Error(Yt(9));try{f=!0,i=n(i,N)}finally{f=!1}return(l=u).forEach(j=>{j()}),N}function w(N){if(typeof N!="function")throw new Error(Yt(10));n=N,x({type:ed.REPLACE})}function S(){const N=g;return{subscribe(A){if(typeof A!="object"||A===null)throw new Error(Yt(11));function j(){const _=A;_.next&&_.next(p())}return j(),{unsubscribe:N(j)}},[A1](){return this}}}return x({type:ed.INIT}),{dispatch:x,subscribe:g,getState:p,replaceReducer:w,[A1]:S}}function o3(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:ed.INIT})>"u")throw new Error(Yt(12));if(typeof r(void 0,{type:ed.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Yt(13))})}function gj(t){const e=Object.keys(t),r={};for(let l=0;l<e.length;l++){const u=e[l];typeof t[u]=="function"&&(r[u]=t[u])}const n=Object.keys(r);let i;try{o3(r)}catch(l){i=l}return function(u={},d){if(i)throw i;let f=!1;const h={};for(let p=0;p<n.length;p++){const g=n[p],x=r[g],w=u[g],S=x(w,d);if(typeof S>"u")throw d&&d.type,new Error(Yt(14));h[g]=S,f=f||S!==w}return f=f||n.length!==Object.keys(u).length,f?h:u}}function td(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function l3(...t){return e=>(r,n)=>{const i=e(r,n);let l=()=>{throw new Error(Yt(15))};const u={getState:i.getState,dispatch:(f,...h)=>l(f,...h)},d=t.map(f=>f(u));return l=td(...d)(i.dispatch),{...i,dispatch:l}}}function yj(t){return by(t)&&"type"in t&&typeof t.type=="string"}var xj=Symbol.for("immer-nothing"),D1=Symbol.for("immer-draftable"),Ur=Symbol.for("immer-state");function mn(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var mo=Object.getPrototypeOf;function ri(t){return!!t&&!!t[Ur]}function ha(t){var e;return t?vj(t)||Array.isArray(t)||!!t[D1]||!!((e=t.constructor)!=null&&e[D1])||Kl(t)||zd(t):!1}var c3=Object.prototype.constructor.toString();function vj(t){if(!t||typeof t!="object")return!1;const e=mo(t);if(e===null)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===c3}function rd(t,e){$d(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function $d(t){const e=t[Ur];return e?e.type_:Array.isArray(t)?1:Kl(t)?2:zd(t)?3:0}function Ng(t,e){return $d(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function bj(t,e,r){const n=$d(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function u3(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Kl(t){return t instanceof Map}function zd(t){return t instanceof Set}function zs(t){return t.copy_||t.base_}function Cg(t,e){if(Kl(t))return new Map(t);if(zd(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=vj(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[Ur];let i=Reflect.ownKeys(n);for(let l=0;l<i.length;l++){const u=i[l],d=n[u];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(n[u]={configurable:!0,writable:!0,enumerable:d.enumerable,value:t[u]})}return Object.create(mo(t),n)}else{const n=mo(t);if(n!==null&&r)return{...t};const i=Object.create(n);return Object.assign(i,t)}}function wy(t,e=!1){return Bd(t)||ri(t)||!ha(t)||($d(t)>1&&Object.defineProperties(t,{set:{value:_u},add:{value:_u},clear:{value:_u},delete:{value:_u}}),Object.freeze(t),e&&Object.values(t).forEach(r=>wy(r,!0))),t}function _u(){mn(2)}function Bd(t){return Object.isFrozen(t)}var d3={};function ni(t){const e=d3[t];return e||mn(0,t),e}var Ll;function wj(){return Ll}function m3(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function T1(t,e){e&&(ni("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function jg(t){Ag(t),t.drafts_.forEach(f3),t.drafts_=null}function Ag(t){t===Ll&&(Ll=t.parent_)}function E1(t){return Ll=m3(Ll,t)}function f3(t){const e=t[Ur];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function _1(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[Ur].modified_&&(jg(e),mn(4)),ha(t)&&(t=nd(e,t),e.parent_||ad(e,t)),e.patches_&&ni("Patches").generateReplacementPatches_(r[Ur].base_,t,e.patches_,e.inversePatches_)):t=nd(e,r,[]),jg(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==xj?t:void 0}function nd(t,e,r){if(Bd(e))return e;const n=e[Ur];if(!n)return rd(e,(i,l)=>R1(t,n,e,i,l,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return ad(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let l=i,u=!1;n.type_===3&&(l=new Set(i),i.clear(),u=!0),rd(l,(d,f)=>R1(t,n,i,d,f,r,u)),ad(t,i,!1),r&&t.patches_&&ni("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function R1(t,e,r,n,i,l,u){if(ri(i)){const d=l&&e&&e.type_!==3&&!Ng(e.assigned_,n)?l.concat(n):void 0,f=nd(t,i,d);if(bj(r,n,f),ri(f))t.canAutoFreeze_=!1;else return}else u&&r.add(i);if(ha(i)&&!Bd(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;nd(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(Kl(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&ad(t,i)}}function ad(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&wy(e,r)}function h3(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:wj(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,l=Sy;r&&(i=[n],l=Fl);const{revoke:u,proxy:d}=Proxy.revocable(i,l);return n.draft_=d,n.revoke_=u,d}var Sy={get(t,e){if(e===Ur)return t;const r=zs(t);if(!Ng(r,e))return p3(t,r,e);const n=r[e];return t.finalized_||!ha(n)?n:n===hp(t.base_,e)?(pp(t),t.copy_[e]=Tg(n,t)):n},has(t,e){return e in zs(t)},ownKeys(t){return Reflect.ownKeys(zs(t))},set(t,e,r){const n=Sj(zs(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const i=hp(zs(t),e),l=i==null?void 0:i[Ur];if(l&&l.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(u3(r,i)&&(r!==void 0||Ng(t.base_,e)))return!0;pp(t),Dg(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return hp(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,pp(t),Dg(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=zs(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){mn(11)},getPrototypeOf(t){return mo(t.base_)},setPrototypeOf(){mn(12)}},Fl={};rd(Sy,(t,e)=>{Fl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Fl.deleteProperty=function(t,e){return Fl.set.call(this,t,e,void 0)};Fl.set=function(t,e,r){return Sy.set.call(this,t[0],e,r,t[0])};function hp(t,e){const r=t[Ur];return(r?zs(r):t)[e]}function p3(t,e,r){var i;const n=Sj(e,r);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(t.draft_):void 0}function Sj(t,e){if(!(e in t))return;let r=mo(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=mo(r)}}function Dg(t){t.modified_||(t.modified_=!0,t.parent_&&Dg(t.parent_))}function pp(t){t.copy_||(t.copy_=Cg(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var g3=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const l=r;r=e;const u=this;return function(f=l,...h){return u.produce(f,p=>r.call(this,p,...h))}}typeof r!="function"&&mn(6),n!==void 0&&typeof n!="function"&&mn(7);let i;if(ha(e)){const l=E1(this),u=Tg(e,void 0);let d=!0;try{i=r(u),d=!1}finally{d?jg(l):Ag(l)}return T1(l,n),_1(i,l)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===xj&&(i=void 0),this.autoFreeze_&&wy(i,!0),n){const l=[],u=[];ni("Patches").generateReplacementPatches_(e,i,l,u),n(l,u)}return i}else mn(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(u,...d)=>this.produceWithPatches(u,f=>e(f,...d));let n,i;return[this.produce(e,r,(u,d)=>{n=u,i=d}),n,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){ha(t)||mn(8),ri(t)&&(t=oa(t));const e=E1(this),r=Tg(t,void 0);return r[Ur].isManual_=!0,Ag(e),r}finishDraft(t,e){const r=t&&t[Ur];(!r||!r.isManual_)&&mn(9);const{scope_:n}=r;return T1(n,e),_1(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));const n=ni("Patches").applyPatches_;return ri(t)?n(t,e):this.produce(t,i=>n(i,e))}};function Tg(t,e){const r=Kl(t)?ni("MapSet").proxyMap_(t,e):zd(t)?ni("MapSet").proxySet_(t,e):h3(t,e);return(e?e.scope_:wj()).drafts_.push(r),r}function oa(t){return ri(t)||mn(10,t),Nj(t)}function Nj(t){if(!ha(t)||Bd(t))return t;const e=t[Ur];let r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=Cg(t,e.scope_.immer_.useStrictShallowCopy_)}else r=Cg(t,!0);return rd(r,(n,i)=>{bj(r,n,Nj(i))}),e&&(e.finalized_=!1),r}var y3=new g3,Cj=y3.produce;function jj(t){return({dispatch:r,getState:n})=>i=>l=>typeof l=="function"?l(r,n,t):i(l)}var x3=jj(),v3=jj,b3=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?td:td.apply(null,arguments)};function nn(t,e){function r(...n){if(e){let i=e(...n);if(!i)throw new Error(Pr(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>yj(n)&&n.type===t,r}var Aj=class El extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,El.prototype)}static get[Symbol.species](){return El}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new El(...e[0].concat(this)):new El(...e.concat(this))}};function k1(t){return ha(t)?Cj(t,()=>{}):t}function Ru(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function w3(t){return typeof t=="boolean"}var S3=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:l=!0}=e??{};let u=new Aj;return r&&(w3(r)?u.push(x3):u.push(v3(r.extraArgument))),u},N3="RTK_autoBatch",O1=t=>e=>{setTimeout(e,t)},C3=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let i=!0,l=!1,u=!1;const d=new Set,f=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:O1(10):t.type==="callback"?t.queueNotification:O1(t.timeout),h=()=>{u=!1,l&&(l=!1,d.forEach(p=>p()))};return Object.assign({},n,{subscribe(p){const g=()=>i&&p(),x=n.subscribe(g);return d.add(p),()=>{x(),d.delete(p)}},dispatch(p){var g;try{return i=!((g=p==null?void 0:p.meta)!=null&&g[N3]),l=!i,l&&(u||(u=!0,f(h))),n.dispatch(p)}finally{i=!0}}})},j3=t=>function(r){const{autoBatch:n=!0}=r??{};let i=new Aj(t);return n&&i.push(C3(typeof n=="object"?n:void 0)),i};function A3(t){const e=S3(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:l=void 0,enhancers:u=void 0}=t||{};let d;if(typeof r=="function")d=r;else if(by(r))d=gj(r);else throw new Error(Pr(1));let f;typeof n=="function"?f=n(e):f=e();let h=td;i&&(h=b3({trace:!1,...typeof i=="object"&&i}));const p=l3(...f),g=j3(p);let x=typeof u=="function"?u(g):g();const w=h(...x);return pj(d,l,w)}function Dj(t){const e={},r=[];let n;const i={addCase(l,u){const d=typeof l=="string"?l:l.type;if(!d)throw new Error(Pr(28));if(d in e)throw new Error(Pr(29));return e[d]=u,i},addAsyncThunk(l,u){return u.pending&&(e[l.pending.type]=u.pending),u.rejected&&(e[l.rejected.type]=u.rejected),u.fulfilled&&(e[l.fulfilled.type]=u.fulfilled),u.settled&&r.push({matcher:l.settled,reducer:u.settled}),i},addMatcher(l,u){return r.push({matcher:l,reducer:u}),i},addDefaultCase(l){return n=l,i}};return t(i),[e,r,n]}function D3(t){return typeof t=="function"}function T3(t,e){let[r,n,i]=Dj(e),l;if(D3(t))l=()=>k1(t());else{const d=k1(t);l=()=>d}function u(d=l(),f){let h=[r[f.type],...n.filter(({matcher:p})=>p(f)).map(({reducer:p})=>p)];return h.filter(p=>!!p).length===0&&(h=[i]),h.reduce((p,g)=>{if(g)if(ri(p)){const w=g(p,f);return w===void 0?p:w}else{if(ha(p))return Cj(p,x=>g(x,f));{const x=g(p,f);if(x===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}}return p},d)}return u.getInitialState=l,u}var E3="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",_3=(t=21)=>{let e="",r=t;for(;r--;)e+=E3[Math.random()*64|0];return e},R3=Symbol.for("rtk-slice-createasyncthunk");function k3(t,e){return`${t}/${e}`}function O3({creators:t}={}){var r;const e=(r=t==null?void 0:t.asyncThunk)==null?void 0:r[R3];return function(i){const{name:l,reducerPath:u=l}=i;if(!l)throw new Error(Pr(11));const d=(typeof i.reducers=="function"?i.reducers(I3()):i.reducers)||{},f=Object.keys(d),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(_,R){const k=typeof _=="string"?_:_.type;if(!k)throw new Error(Pr(12));if(k in h.sliceCaseReducersByType)throw new Error(Pr(13));return h.sliceCaseReducersByType[k]=R,p},addMatcher(_,R){return h.sliceMatchers.push({matcher:_,reducer:R}),p},exposeAction(_,R){return h.actionCreators[_]=R,p},exposeCaseReducer(_,R){return h.sliceCaseReducersByName[_]=R,p}};f.forEach(_=>{const R=d[_],k={reducerName:_,type:k3(l,_),createNotation:typeof i.reducers=="function"};L3(R)?U3(k,R,p,e):P3(k,R,p)});function g(){const[_={},R=[],k=void 0]=typeof i.extraReducers=="function"?Dj(i.extraReducers):[i.extraReducers],D={..._,...h.sliceCaseReducersByType};return T3(i.initialState,I=>{for(let z in D)I.addCase(z,D[z]);for(let z of h.sliceMatchers)I.addMatcher(z.matcher,z.reducer);for(let z of R)I.addMatcher(z.matcher,z.reducer);k&&I.addDefaultCase(k)})}const x=_=>_,w=new Map,S=new WeakMap;let C;function N(_,R){return C||(C=g()),C(_,R)}function A(){return C||(C=g()),C.getInitialState()}function j(_,R=!1){function k(I){let z=I[_];return typeof z>"u"&&R&&(z=Ru(S,k,A)),z}function D(I=x){const z=Ru(w,R,()=>new WeakMap);return Ru(z,I,()=>{const V={};for(const[P,$]of Object.entries(i.selectors??{}))V[P]=M3($,I,()=>Ru(S,I,A),R);return V})}return{reducerPath:_,getSelectors:D,get selectors(){return D(k)},selectSlice:k}}const E={name:l,reducer:N,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:A,...j(u),injectInto(_,{reducerPath:R,...k}={}){const D=R??u;return _.inject({reducerPath:D,reducer:N},k),{...E,...j(D,!0)}}};return E}}function M3(t,e,r,n){function i(l,...u){let d=e(l);return typeof d>"u"&&n&&(d=r()),t(d,...u)}return i.unwrapped=t,i}var zr=O3();function I3(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function P3({type:t,reducerName:e,createNotation:r},n,i){let l,u;if("reducer"in n){if(r&&!F3(n))throw new Error(Pr(17));l=n.reducer,u=n.prepare}else l=n;i.addCase(t,l).exposeCaseReducer(e,l).exposeAction(e,u?nn(t,u):nn(t))}function L3(t){return t._reducerDefinitionType==="asyncThunk"}function F3(t){return t._reducerDefinitionType==="reducerWithPrepare"}function U3({type:t,reducerName:e},r,n,i){if(!i)throw new Error(Pr(18));const{payloadCreator:l,fulfilled:u,pending:d,rejected:f,settled:h,options:p}=r,g=i(t,l,p);n.exposeAction(e,g),u&&n.addCase(g.fulfilled,u),d&&n.addCase(g.pending,d),f&&n.addCase(g.rejected,f),h&&n.addMatcher(g.settled,h),n.exposeCaseReducer(e,{fulfilled:u||ku,pending:d||ku,rejected:f||ku,settled:h||ku})}function ku(){}var $3="task",Tj="listener",Ej="completed",Ny="cancelled",z3=`task-${Ny}`,B3=`task-${Ej}`,Eg=`${Tj}-${Ny}`,q3=`${Tj}-${Ej}`,qd=class{constructor(t){te(this,"name","TaskAbortError");te(this,"message");this.code=t,this.message=`${$3} ${Ny} (reason: ${t})`}},Cy=(t,e)=>{if(typeof t!="function")throw new TypeError(Pr(32))},sd=()=>{},_j=(t,e=sd)=>(t.catch(e),t),Rj=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Ws=(t,e)=>{const r=t.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},Qs=t=>{if(t.aborted){const{reason:e}=t;throw new qd(e)}};function kj(t,e){let r=sd;return new Promise((n,i)=>{const l=()=>i(new qd(t.reason));if(t.aborted){l();return}r=Rj(t,l),e.finally(()=>r()).then(n,i)}).finally(()=>{r=sd})}var H3=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof qd?"cancelled":"rejected",error:r}}finally{e==null||e()}},id=t=>e=>_j(kj(t,e).then(r=>(Qs(t),r))),Oj=t=>{const e=id(t);return r=>e(new Promise(n=>setTimeout(n,r)))},{assign:ao}=Object,M1={},Hd="listenerMiddleware",V3=(t,e)=>{const r=n=>Rj(t,()=>Ws(n,t.reason));return(n,i)=>{Cy(n);const l=new AbortController;r(l);const u=H3(async()=>{Qs(t),Qs(l.signal);const d=await n({pause:id(l.signal),delay:Oj(l.signal),signal:l.signal});return Qs(l.signal),d},()=>Ws(l,B3));return i!=null&&i.autoJoin&&e.push(u.catch(sd)),{result:id(t)(u),cancel(){Ws(l,z3)}}}},Y3=(t,e)=>{const r=async(n,i)=>{Qs(e);let l=()=>{};const d=[new Promise((f,h)=>{let p=t({predicate:n,effect:(g,x)=>{x.unsubscribe(),f([g,x.getState(),x.getOriginalState()])}});l=()=>{p(),h()}})];i!=null&&d.push(new Promise(f=>setTimeout(f,i,null)));try{const f=await kj(e,Promise.race(d));return Qs(e),f}finally{l()}};return(n,i)=>_j(r(n,i))},Mj=t=>{let{type:e,actionCreator:r,matcher:n,predicate:i,effect:l}=t;if(e)i=nn(e).match;else if(r)e=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(Pr(21));return Cy(l),{predicate:i,type:e,effect:l}},Ij=ao(t=>{const{type:e,predicate:r,effect:n}=Mj(t);return{id:_3(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Pr(22))}}},{withTypes:()=>Ij}),I1=(t,e)=>{const{type:r,effect:n,predicate:i}=Mj(e);return Array.from(t.values()).find(l=>(typeof r=="string"?l.type===r:l.predicate===i)&&l.effect===n)},_g=t=>{t.pending.forEach(e=>{Ws(e,Eg)})},G3=t=>()=>{t.forEach(_g),t.clear()},P1=(t,e,r)=>{try{t(e,r)}catch(n){setTimeout(()=>{throw n},0)}},Pj=ao(nn(`${Hd}/add`),{withTypes:()=>Pj}),X3=nn(`${Hd}/removeAll`),Lj=ao(nn(`${Hd}/remove`),{withTypes:()=>Lj}),K3=(...t)=>{console.error(`${Hd}/error`,...t)},Wl=(t={})=>{const e=new Map,{extra:r,onError:n=K3}=t;Cy(n);const i=p=>(p.unsubscribe=()=>e.delete(p.id),e.set(p.id,p),g=>{p.unsubscribe(),g!=null&&g.cancelActive&&_g(p)}),l=p=>{const g=I1(e,p)??Ij(p);return i(g)};ao(l,{withTypes:()=>l});const u=p=>{const g=I1(e,p);return g&&(g.unsubscribe(),p.cancelActive&&_g(g)),!!g};ao(u,{withTypes:()=>u});const d=async(p,g,x,w)=>{const S=new AbortController,C=Y3(l,S.signal),N=[];try{p.pending.add(S),await Promise.resolve(p.effect(g,ao({},x,{getOriginalState:w,condition:(A,j)=>C(A,j).then(Boolean),take:C,delay:Oj(S.signal),pause:id(S.signal),extra:r,signal:S.signal,fork:V3(S.signal,N),unsubscribe:p.unsubscribe,subscribe:()=>{e.set(p.id,p)},cancelActiveListeners:()=>{p.pending.forEach((A,j,E)=>{A!==S&&(Ws(A,Eg),E.delete(A))})},cancel:()=>{Ws(S,Eg),p.pending.delete(S)},throwIfCancelled:()=>{Qs(S.signal)}})))}catch(A){A instanceof qd||P1(n,A,{raisedBy:"effect"})}finally{await Promise.all(N),Ws(S,q3),p.pending.delete(S)}},f=G3(e);return{middleware:p=>g=>x=>{if(!yj(x))return g(x);if(Pj.match(x))return l(x.payload);if(X3.match(x)){f();return}if(Lj.match(x))return u(x.payload);let w=p.getState();const S=()=>{if(w===M1)throw new Error(Pr(23));return w};let C;try{if(C=g(x),e.size>0){const N=p.getState(),A=Array.from(e.values());for(const j of A){let E=!1;try{E=j.predicate(x,N,w)}catch(_){E=!1,P1(n,_,{raisedBy:"predicate"})}E&&d(j,x,p,S)}}}finally{w=M1}return C},startListening:l,stopListening:u,clearListeners:f}};function Pr(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var W3={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Fj=zr({name:"chartLayout",initialState:W3,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var r,n,i,l;t.margin.top=(r=e.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(l=e.payload.left)!==null&&l!==void 0?l:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:Q3,setLayout:Z3,setChartSize:J3,setScale:eO}=Fj.actions,tO=Fj.reducer;function L1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function F1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?L1(Object(r),!0).forEach(function(n){rO(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L1(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rO(t,e,r){return(e=nO(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nO(t){var e=aO(t,"string");return typeof e=="symbol"?e:e+""}function aO(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var U1=Math.PI/180,sO=t=>t*180/Math.PI,fo=(t,e,r,n)=>({x:t+Math.cos(-U1*n)*r,y:e+Math.sin(-U1*n)*r}),iO=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},oO=(t,e)=>{var{x:r,y:n}=t,{x:i,y:l}=e;return Math.sqrt((r-i)**2+(n-l)**2)},lO=(t,e)=>{var{x:r,y:n}=t,{cx:i,cy:l}=e,u=oO({x:r,y:n},{x:i,y:l});if(u<=0)return{radius:u,angle:0};var d=(r-i)/u,f=Math.acos(d);return n>l&&(f=2*Math.PI-f),{radius:u,angle:sO(f),angleInRadian:f}},cO=t=>{var{startAngle:e,endAngle:r}=t,n=Math.floor(e/360),i=Math.floor(r/360),l=Math.min(n,i);return{startAngle:e-l*360,endAngle:r-l*360}},uO=(t,e)=>{var{startAngle:r,endAngle:n}=e,i=Math.floor(r/360),l=Math.floor(n/360),u=Math.min(i,l);return t+u*360},dO=(t,e)=>{var{x:r,y:n}=t,{radius:i,angle:l}=lO({x:r,y:n},e),{innerRadius:u,outerRadius:d}=e;if(i<u||i>d||i===0)return null;var{startAngle:f,endAngle:h}=cO(e),p=l,g;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;g=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;g=p>=h&&p<=f}return g?F1(F1({},e),{},{radius:i,angle:uO(p,e)}):null};function Uj(t,e,r){return Array.isArray(t)&&t&&e+r!==0?t.slice(e,r+1):t}function $1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function en(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$1(Object(r),!0).forEach(function(n){mO(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$1(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mO(t,e,r){return(e=fO(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fO(t){var e=hO(t,"string");return typeof e=="symbol"?e:e+""}function hO(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dr(t,e,r){return tr(t)||tr(e)?r:co(e)?Ld(t,e,r):typeof e=="function"?e(t):r}var pO=(t,e,r,n,i)=>{var l,u=-1,d=(l=e==null?void 0:e.length)!==null&&l!==void 0?l:0;if(d<=1||t==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var f=0;f<d;f++){var h=f>0?r[f-1].coordinate:r[d-1].coordinate,p=r[f].coordinate,g=f>=d-1?r[0].coordinate:r[f+1].coordinate,x=void 0;if(Rn(p-h)!==Rn(g-p)){var w=[];if(Rn(g-p)===Rn(i[1]-i[0])){x=g;var S=p+i[1]-i[0];w[0]=Math.min(S,(S+h)/2),w[1]=Math.max(S,(S+h)/2)}else{x=h;var C=g+i[1]-i[0];w[0]=Math.min(p,(C+p)/2),w[1]=Math.max(p,(C+p)/2)}var N=[Math.min(p,(x+p)/2),Math.max(p,(x+p)/2)];if(t>N[0]&&t<=N[1]||t>=w[0]&&t<=w[1]){({index:u}=r[f]);break}}else{var A=Math.min(h,g),j=Math.max(h,g);if(t>(A+p)/2&&t<=(j+p)/2){({index:u}=r[f]);break}}}else if(e){for(var E=0;E<d;E++)if(E===0&&t<=(e[E].coordinate+e[E+1].coordinate)/2||E>0&&E<d-1&&t>(e[E].coordinate+e[E-1].coordinate)/2&&t<=(e[E].coordinate+e[E+1].coordinate)/2||E===d-1&&t>(e[E].coordinate+e[E-1].coordinate)/2){({index:u}=e[E]);break}}return u},gO=(t,e,r)=>{if(e&&r){var{width:n,height:i}=r,{align:l,verticalAlign:u,layout:d}=e;if((d==="vertical"||d==="horizontal"&&u==="middle")&&l!=="center"&&Fe(t[l]))return en(en({},t),{},{[l]:t[l]+(n||0)});if((d==="horizontal"||d==="vertical"&&l==="center")&&u!=="middle"&&Fe(t[u]))return en(en({},t),{},{[u]:t[u]+(i||0)})}return t},xa=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",$j=(t,e,r,n)=>{if(n)return t.map(d=>d.coordinate);var i,l,u=t.map(d=>(d.coordinate===e&&(i=!0),d.coordinate===r&&(l=!0),d.coordinate));return i||u.push(e),l||u.push(r),u},zj=(t,e,r)=>{if(!t)return null;var{duplicateDomain:n,type:i,range:l,scale:u,realScaleType:d,isCategorical:f,categoricalDomain:h,tickCount:p,ticks:g,niceTicks:x,axisType:w}=t;if(!u)return null;var S=d==="scaleBand"&&u.bandwidth?u.bandwidth()/2:2,C=i==="category"&&u.bandwidth?u.bandwidth()/S:0;if(C=w==="angleAxis"&&l&&l.length>=2?Rn(l[0]-l[1])*2*C:C,g||x){var N=(g||x||[]).map((A,j)=>{var E=n?n.indexOf(A):A;return{coordinate:u(E)+C,value:A,offset:C,index:j}});return N.filter(A=>!Fr(A.coordinate))}return f&&h?h.map((A,j)=>({coordinate:u(A)+C,value:A,index:j,offset:C})):u.ticks&&p!=null?u.ticks(p).map((A,j)=>({coordinate:u(A)+C,value:A,offset:C,index:j})):u.domain().map((A,j)=>({coordinate:u(A)+C,value:n?n[A]:A,index:j,offset:C}))},z1=1e-4,yO=t=>{var e=t.domain();if(!(!e||e.length<=2)){var r=e.length,n=t.range(),i=Math.min(n[0],n[1])-z1,l=Math.max(n[0],n[1])+z1,u=t(e[0]),d=t(e[r-1]);(u<i||u>l||d<i||d>l)&&t.domain([e[0],e[r-1]])}},xO=t=>{var e=t.length;if(!(e<=0))for(var r=0,n=t[0].length;r<n;++r)for(var i=0,l=0,u=0;u<e;++u){var d=Fr(t[u][r][1])?t[u][r][0]:t[u][r][1];d>=0?(t[u][r][0]=i,t[u][r][1]=i+d,i=t[u][r][1]):(t[u][r][0]=l,t[u][r][1]=l+d,l=t[u][r][1])}},vO=t=>{var e=t.length;if(!(e<=0))for(var r=0,n=t[0].length;r<n;++r)for(var i=0,l=0;l<e;++l){var u=Fr(t[l][r][1])?t[l][r][0]:t[l][r][1];u>=0?(t[l][r][0]=i,t[l][r][1]=i+u,i=t[l][r][1]):(t[l][r][0]=0,t[l][r][1]=0)}},bO={sign:xO,expand:jk,none:uo,silhouette:Ak,wiggle:Dk,positive:vO},wO=(t,e,r)=>{var n=bO[r],i=Ck().keys(e).value((l,u)=>+dr(l,u,0)).order(Sg).offset(n);return i(t)};function SO(t){return t==null?void 0:String(t)}function B1(t){var{axis:e,ticks:r,bandSize:n,entry:i,index:l,dataKey:u}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!tr(i[e.dataKey])){var d=YC(r,"value",i[e.dataKey]);if(d)return d.coordinate+n/2}return r[l]?r[l].coordinate+n/2:null}var f=dr(i,tr(u)?e.dataKey:u);return tr(f)?null:e.scale(f)}var NO=t=>{var e=t.flat(2).filter(Fe);return[Math.min(...e),Math.max(...e)]},CO=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],jO=(t,e,r)=>{if(t!=null)return CO(Object.keys(t).reduce((n,i)=>{var l=t[i],{stackedData:u}=l,d=u.reduce((f,h)=>{var p=Uj(h,e,r),g=NO(p);return[Math.min(f[0],g[0]),Math.max(f[1],g[1])]},[1/0,-1/0]);return[Math.min(d[0],n[0]),Math.max(d[1],n[1])]},[1/0,-1/0]))},q1=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,H1=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,V1=(t,e,r)=>{if(t&&t.scale&&t.scale.bandwidth){var n=t.scale.bandwidth();return n}if(t&&e&&e.length>=2){for(var i=vy(e,p=>p.coordinate),l=1/0,u=1,d=i.length;u<d;u++){var f=i[u],h=i[u-1];l=Math.min((f.coordinate||0)-(h.coordinate||0),l)}return l===1/0?0:l}return r?void 0:0};function Y1(t){var{tooltipEntrySettings:e,dataKey:r,payload:n,value:i,name:l}=t;return en(en({},e),{},{dataKey:r,payload:n,value:i,name:l})}function Bj(t,e){if(t)return String(t);if(typeof e=="string")return e}function AO(t,e,r,n,i){if(r==="horizontal"||r==="vertical"){var l=t>=i.left&&t<=i.left+i.width&&e>=i.top&&e<=i.top+i.height;return l?{x:t,y:e}:null}return n?dO({x:t,y:e},n):null}var DO=(t,e,r,n)=>{var i=e.find(h=>h&&h.index===r);if(i){if(t==="horizontal")return{x:i.coordinate,y:n.y};if(t==="vertical")return{x:n.x,y:i.coordinate};if(t==="centric"){var l=i.coordinate,{radius:u}=n;return en(en(en({},n),fo(n.cx,n.cy,u,l)),{},{angle:l,radius:u})}var d=i.coordinate,{angle:f}=n;return en(en(en({},n),fo(n.cx,n.cy,d,f)),{},{angle:f,radius:d})}return{x:0,y:0}},TO=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,va=t=>t.layout.width,ba=t=>t.layout.height,EO=t=>t.layout.scale,qj=t=>t.layout.margin,Vd=me(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),Yd=me(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),_O="data-recharts-item-index",RO="data-recharts-item-data-key",Ql=60;function G1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ou(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?G1(Object(r),!0).forEach(function(n){kO(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G1(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kO(t,e,r){return(e=OO(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OO(t){var e=MO(t,"string");return typeof e=="symbol"?e:e+""}function MO(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var IO=t=>t.brush.height;function PO(t){var e=Yd(t);return e.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Ql;return r+i}return r},0)}function LO(t){var e=Yd(t);return e.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Ql;return r+i}return r},0)}function FO(t){var e=Vd(t);return e.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function UO(t){var e=Vd(t);return e.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Wt=me([va,ba,qj,IO,PO,LO,FO,UO,hj,n3],(t,e,r,n,i,l,u,d,f,h)=>{var p={left:(r.left||0)+i,right:(r.right||0)+l},g={top:(r.top||0)+u,bottom:(r.bottom||0)+d},x=Ou(Ou({},g),p),w=x.bottom;x.bottom+=n,x=gO(x,f,h);var S=t-x.left-x.right,C=e-x.top-x.bottom;return Ou(Ou({brushBottom:w},x),{},{width:Math.max(S,0),height:Math.max(C,0)})}),$O=me(Wt,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),zO=me(va,ba,(t,e)=>({x:0,y:0,width:t,height:e})),BO=b.createContext(null),bn=()=>b.useContext(BO)!=null,Gd=t=>t.brush,Xd=me([Gd,Wt,qj],(t,e,r)=>({height:t.height,x:Fe(t.x)?t.x:e.left,y:Fe(t.y)?t.y:e.top+e.height+e.brushBottom-((r==null?void 0:r.bottom)||0),width:Fe(t.width)?t.width:e.width})),Hj=()=>{var t,e=bn(),r=Ve($O),n=Ve(Xd),i=(t=Ve(Gd))===null||t===void 0?void 0:t.padding;return!e||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},qO={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},HO=()=>{var t;return(t=Ve(Wt))!==null&&t!==void 0?t:qO},Vj=()=>Ve(va),Yj=()=>Ve(ba),st=t=>t.layout.layoutType,Gj=()=>Ve(st),VO={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Xj=zr({name:"legend",initialState:VO,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload(t,e){t.payload.push(e.payload)},removeLegendPayload(t,e){var r=oa(t).payload.indexOf(e.payload);r>-1&&t.payload.splice(r,1)}}}),{setLegendSize:MB,setLegendSettings:IB,addLegendPayload:YO,removeLegendPayload:GO}=Xj.actions,XO=Xj.reducer,KO=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Zl={devToolsEnabled:!1,isSsr:KO()},WO=()=>Ve(t=>t.rootProps.accessibilityLayer);function mr(t){return Number.isFinite(t)}function od(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function Rg(){return Rg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rg.apply(null,arguments)}function X1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function K1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?X1(Object(r),!0).forEach(function(n){QO(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X1(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function QO(t,e,r){return(e=ZO(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZO(t){var e=JO(t,"string");return typeof e=="symbol"?e:e+""}function JO(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var W1={curveBasisClosed:fk,curveBasisOpen:hk,curveBasis:mk,curveBumpX:uk,curveBumpY:dk,curveLinearClosed:pk,curveLinear:Fd,curveMonotoneX:gk,curveMonotoneY:yk,curveNatural:xk,curveStep:vk,curveStepAfter:wk,curveStepBefore:bk},Mu=t=>mr(t.x)&&mr(t.y),bl=t=>t.x,wl=t=>t.y,eM=(t,e)=>{if(typeof t=="function")return t;var r="curve".concat(hy(t));return(r==="curveMonotone"||r==="curveBump")&&e?W1["".concat(r).concat(e==="vertical"?"Y":"X")]:W1[r]||Fd},tM=t=>{var{type:e="linear",points:r=[],baseLine:n,layout:i,connectNulls:l=!1}=t,u=eM(e,i),d=l?r.filter(Mu):r,f;if(Array.isArray(n)){var h=l?n.filter(g=>Mu(g)):n,p=d.map((g,x)=>K1(K1({},g),{},{base:h[x]}));return i==="vertical"?f=Tu().y(wl).x1(bl).x0(g=>g.base.x):f=Tu().x(bl).y1(wl).y0(g=>g.base.y),f.defined(Mu).curve(u),f(p)}return i==="vertical"&&Fe(n)?f=Tu().y(wl).x1(bl).x0(n):Fe(n)?f=Tu().x(bl).y1(wl).y0(n):f=tj().x(bl).y(wl),f.defined(Mu).curve(u),f(d)},gp=t=>{var{className:e,points:r,path:n,pathRef:i}=t;if((!r||!r.length)&&!n)return null;var l=r&&r.length?tM(t):n;return b.createElement("path",Rg({},ds(t),gy(t),{className:Kt("recharts-curve",e),d:l===null?void 0:l,ref:i}))};function Q1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function rM(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Q1(Object(r),!0).forEach(function(n){nM(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Q1(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nM(t,e,r){return(e=aM(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aM(t){var e=sM(t,"string");return typeof e=="symbol"?e:e+""}function sM(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ms(t,e){var r=rM({},t),n=e,i=Object.keys(e),l=i.reduce((u,d)=>(u[d]===void 0&&n[d]!==void 0&&(u[d]=n[d]),u),r);return l}function iM(){}function Z1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function J1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Z1(Object(r),!0).forEach(function(n){oM(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z1(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oM(t,e,r){return(e=lM(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lM(t){var e=cM(t,"string");return typeof e=="symbol"?e:e+""}function cM(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uM=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((r,n)=>r.filter(i=>n.includes(i))),Ul=(t,e)=>Object.keys(e).reduce((r,n)=>J1(J1({},r),{},{[n]:t(n,e[n])}),{});function eS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Gt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eS(Object(r),!0).forEach(function(n){dM(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dM(t,e,r){return(e=mM(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mM(t){var e=fM(t,"string");return typeof e=="symbol"?e:e+""}function fM(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ld=(t,e,r)=>t+(e-t)*r,kg=t=>{var{from:e,to:r}=t;return e!==r},Kj=(t,e,r)=>{var n=Ul((i,l)=>{if(kg(l)){var[u,d]=t(l.from,l.to,l.velocity);return Gt(Gt({},l),{},{from:u,velocity:d})}return l},e);return r<1?Ul((i,l)=>kg(l)?Gt(Gt({},l),{},{velocity:ld(l.velocity,n[i].velocity,r),from:ld(l.from,n[i].from,r)}):l,e):Kj(t,n,r-1)};function hM(t,e,r,n,i,l){var u,d=n.reduce((x,w)=>Gt(Gt({},x),{},{[w]:{from:t[w],velocity:0,to:e[w]}}),{}),f=()=>Ul((x,w)=>w.from,d),h=()=>!Object.values(d).filter(kg).length,p=null,g=x=>{u||(u=x);var w=x-u,S=w/r.dt;d=Kj(r,d,S),i(Gt(Gt(Gt({},t),e),f())),u=x,h()||(p=l.setTimeout(g))};return()=>(p=l.setTimeout(g),()=>{p()})}function pM(t,e,r,n,i,l,u){var d=null,f=i.reduce((g,x)=>Gt(Gt({},g),{},{[x]:[t[x],e[x]]}),{}),h,p=g=>{h||(h=g);var x=(g-h)/n,w=Ul((C,N)=>ld(...N,r(x)),f);if(l(Gt(Gt(Gt({},t),e),w)),x<1)d=u.setTimeout(p);else{var S=Ul((C,N)=>ld(...N,r(1)),f);l(Gt(Gt(Gt({},t),e),S))}};return()=>(d=u.setTimeout(p),()=>{d()})}const gM=(t,e,r,n,i,l)=>{var u=uM(t,e);return r.isStepper===!0?hM(t,e,r,u,i,l):pM(t,e,r,n,u,i,l)};var cd=1e-4,Wj=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],Qj=(t,e)=>t.map((r,n)=>r*e**n).reduce((r,n)=>r+n),tS=(t,e)=>r=>{var n=Wj(t,e);return Qj(n,r)},yM=(t,e)=>r=>{var n=Wj(t,e),i=[...n.map((l,u)=>l*u).slice(1),0];return Qj(i,r)},rS=function(){for(var e,r,n,i,l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];if(u.length===1)switch(u[0]){case"linear":[e,n,r,i]=[0,0,1,1];break;case"ease":[e,n,r,i]=[.25,.1,.25,1];break;case"ease-in":[e,n,r,i]=[.42,0,1,1];break;case"ease-out":[e,n,r,i]=[.42,0,.58,1];break;case"ease-in-out":[e,n,r,i]=[0,0,.58,1];break;default:{var f=u[0].split("(");f[0]==="cubic-bezier"&&f[1].split(")")[0].split(",").length===4&&([e,n,r,i]=f[1].split(")")[0].split(",").map(S=>parseFloat(S)))}}else u.length===4&&([e,n,r,i]=u);var h=tS(e,r),p=tS(n,i),g=yM(e,r),x=S=>S>1?1:S<0?0:S,w=S=>{for(var C=S>1?1:S,N=C,A=0;A<8;++A){var j=h(N)-C,E=g(N);if(Math.abs(j-C)<cd||E<cd)return p(N);N=x(N-j/E)}return p(N)};return w.isStepper=!1,w},xM=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=e,l=(u,d,f)=>{var h=-(u-d)*r,p=f*n,g=f+(h-p)*i/1e3,x=f*i/1e3+u;return Math.abs(x-d)<cd&&Math.abs(g)<cd?[d,0]:[x,g]};return l.isStepper=!0,l.dt=i,l},vM=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return rS(t);case"spring":return xM();default:if(t.split("(")[0]==="cubic-bezier")return rS(t)}return typeof t=="function"?t:null};function bM(t){var e,r=()=>null,n=!1,i=null,l=u=>{if(!n){if(Array.isArray(u)){if(!u.length)return;var d=u,[f,...h]=d;if(typeof f=="number"){i=t.setTimeout(l.bind(null,h),f);return}l(f),i=t.setTimeout(l.bind(null,h));return}typeof u=="string"&&(e=u,r(e)),typeof u=="object"&&(e=u,r(e)),typeof u=="function"&&u()}};return{stop:()=>{n=!0},start:u=>{n=!1,i&&(i(),i=null),l(u)},subscribe:u=>(r=u,()=>{r=()=>null}),getTimeoutController:()=>t}}class wM{setTimeout(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,l=u=>{u-n>=r?e(u):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(l))};return i=requestAnimationFrame(l),()=>{cancelAnimationFrame(i)}}}function SM(){return bM(new wM)}var NM=b.createContext(SM);function CM(t,e){var r=b.useContext(NM);return b.useMemo(()=>e??r(t),[t,e,r])}var jM={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},nS={t:0},yp={t:1};function AM(t){var e=ms(t,jM),{isActive:r,canBegin:n,duration:i,easing:l,begin:u,onAnimationEnd:d,onAnimationStart:f,children:h}=e,p=CM(e.animationId,e.animationManager),[g,x]=b.useState(r?nS:yp),w=b.useRef(null);return b.useEffect(()=>{r||x(yp)},[r]),b.useEffect(()=>{if(!r||!n)return iM;var S=gM(nS,yp,vM(l),i,x,p.getTimeoutController()),C=()=>{w.current=S()};return p.start([f,u,C,i,d]),()=>{p.stop(),w.current&&w.current(),d()}},[r,n,i,l,u,f,d,p]),h(g.t)}function DM(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=b.useRef(Pl(e)),n=b.useRef(t);return n.current!==t&&(r.current=Pl(e),n.current=t),r.current}var xp={},vp={},bp={},aS;function TM(){return aS||(aS=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=mj();function r(n){return e.isSymbol(n)?NaN:Number(n)}t.toNumber=r})(bp)),bp}var sS;function EM(){return sS||(sS=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=TM();function r(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}t.toFinite=r})(vp)),vp}var iS;function _M(){return iS||(iS=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=fj(),r=EM();function n(i,l,u){u&&typeof u!="number"&&e.isIterateeCall(i,l,u)&&(l=u=void 0),i=r.toFinite(i),l===void 0?(l=i,i=0):l=r.toFinite(l),u=u===void 0?i<l?1:-1:r.toFinite(u);const d=Math.max(Math.ceil((l-i)/(u||1)),0),f=new Array(d);for(let h=0;h<d;h++)f[h]=i,i+=u;return f}t.range=n})(xp)),xp}var wp,oS;function RM(){return oS||(oS=1,wp=_M().range),wp}var kM=RM();const Zj=os(kM);function ss(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function OM(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function jy(t){let e,r,n;t.length!==2?(e=ss,r=(d,f)=>ss(t(d),f),n=(d,f)=>t(d)-f):(e=t===ss||t===OM?t:MM,r=t,n=t);function i(d,f,h=0,p=d.length){if(h<p){if(e(f,f)!==0)return p;do{const g=h+p>>>1;r(d[g],f)<0?h=g+1:p=g}while(h<p)}return h}function l(d,f,h=0,p=d.length){if(h<p){if(e(f,f)!==0)return p;do{const g=h+p>>>1;r(d[g],f)<=0?h=g+1:p=g}while(h<p)}return h}function u(d,f,h=0,p=d.length){const g=i(d,f,h,p-1);return g>h&&n(d[g-1],f)>-n(d[g],f)?g-1:g}return{left:i,center:u,right:l}}function MM(){return 0}function Jj(t){return t===null?NaN:+t}function*IM(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const PM=jy(ss),Jl=PM.right;jy(Jj).center;class lS extends Map{constructor(e,r=UM){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(cS(this,e))}has(e){return super.has(cS(this,e))}set(e,r){return super.set(LM(this,e),r)}delete(e){return super.delete(FM(this,e))}}function cS({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function LM({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function FM({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function UM(t){return t!==null&&typeof t=="object"?t.valueOf():t}function $M(t=ss){if(t===ss)return e2;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function e2(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const zM=Math.sqrt(50),BM=Math.sqrt(10),qM=Math.sqrt(2);function ud(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),l=n/Math.pow(10,i),u=l>=zM?10:l>=BM?5:l>=qM?2:1;let d,f,h;return i<0?(h=Math.pow(10,-i)/u,d=Math.round(t*h),f=Math.round(e*h),d/h<t&&++d,f/h>e&&--f,h=-h):(h=Math.pow(10,i)*u,d=Math.round(t/h),f=Math.round(e/h),d*h<t&&++d,f*h>e&&--f),f<d&&.5<=r&&r<2?ud(t,e,r*2):[d,f,h]}function Og(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,l,u]=n?ud(e,t,r):ud(t,e,r);if(!(l>=i))return[];const d=l-i+1,f=new Array(d);if(n)if(u<0)for(let h=0;h<d;++h)f[h]=(l-h)/-u;else for(let h=0;h<d;++h)f[h]=(l-h)*u;else if(u<0)for(let h=0;h<d;++h)f[h]=(i+h)/-u;else for(let h=0;h<d;++h)f[h]=(i+h)*u;return f}function Mg(t,e,r){return e=+e,t=+t,r=+r,ud(t,e,r)[2]}function Ig(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?Mg(e,t,r):Mg(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function uS(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function dS(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function t2(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?e2:$M(i);n>r;){if(n-r>600){const f=n-r+1,h=e-r+1,p=Math.log(f),g=.5*Math.exp(2*p/3),x=.5*Math.sqrt(p*g*(f-g)/f)*(h-f/2<0?-1:1),w=Math.max(r,Math.floor(e-h*g/f+x)),S=Math.min(n,Math.floor(e+(f-h)*g/f+x));t2(t,e,w,S,i)}const l=t[e];let u=r,d=n;for(Sl(t,r,e),i(t[n],l)>0&&Sl(t,r,n);u<d;){for(Sl(t,u,d),++u,--d;i(t[u],l)<0;)++u;for(;i(t[d],l)>0;)--d}i(t[r],l)===0?Sl(t,r,d):(++d,Sl(t,d,n)),d<=e&&(r=d+1),e<=d&&(n=d-1)}return t}function Sl(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function HM(t,e,r){if(t=Float64Array.from(IM(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return dS(t);if(e>=1)return uS(t);var n,i=(n-1)*e,l=Math.floor(i),u=uS(t2(t,l).subarray(0,l+1)),d=dS(t.subarray(l+1));return u+(d-u)*(i-l)}}function VM(t,e,r=Jj){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,l=Math.floor(i),u=+r(t[l],l,t),d=+r(t[l+1],l+1,t);return u+(d-u)*(i-l)}}function YM(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,l=new Array(i);++n<i;)l[n]=t+n*r;return l}function sn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function wa(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Pg=Symbol("implicit");function Ay(){var t=new lS,e=[],r=[],n=Pg;function i(l){let u=t.get(l);if(u===void 0){if(n!==Pg)return n;t.set(l,u=e.push(l)-1)}return r[u%r.length]}return i.domain=function(l){if(!arguments.length)return e.slice();e=[],t=new lS;for(const u of l)t.has(u)||t.set(u,e.push(u)-1);return i},i.range=function(l){return arguments.length?(r=Array.from(l),i):r.slice()},i.unknown=function(l){return arguments.length?(n=l,i):n},i.copy=function(){return Ay(e,r).unknown(n)},sn.apply(i,arguments),i}function Dy(){var t=Ay().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,l,u,d=!1,f=0,h=0,p=.5;delete t.unknown;function g(){var x=e().length,w=i<n,S=w?i:n,C=w?n:i;l=(C-S)/Math.max(1,x-f+h*2),d&&(l=Math.floor(l)),S+=(C-S-l*(x-f))*p,u=l*(1-f),d&&(S=Math.round(S),u=Math.round(u));var N=YM(x).map(function(A){return S+l*A});return r(w?N.reverse():N)}return t.domain=function(x){return arguments.length?(e(x),g()):e()},t.range=function(x){return arguments.length?([n,i]=x,n=+n,i=+i,g()):[n,i]},t.rangeRound=function(x){return[n,i]=x,n=+n,i=+i,d=!0,g()},t.bandwidth=function(){return u},t.step=function(){return l},t.round=function(x){return arguments.length?(d=!!x,g()):d},t.padding=function(x){return arguments.length?(f=Math.min(1,h=+x),g()):f},t.paddingInner=function(x){return arguments.length?(f=Math.min(1,x),g()):f},t.paddingOuter=function(x){return arguments.length?(h=+x,g()):h},t.align=function(x){return arguments.length?(p=Math.max(0,Math.min(1,x)),g()):p},t.copy=function(){return Dy(e(),[n,i]).round(d).paddingInner(f).paddingOuter(h).align(p)},sn.apply(g(),arguments)}function r2(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return r2(e())},t}function GM(){return r2(Dy.apply(null,arguments).paddingInner(1))}function Ty(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function n2(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function ec(){}var $l=.7,dd=1/$l,so="\\s*([+-]?\\d+)\\s*",zl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",On="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",XM=/^#([0-9a-f]{3,8})$/,KM=new RegExp(`^rgb\\(${so},${so},${so}\\)$`),WM=new RegExp(`^rgb\\(${On},${On},${On}\\)$`),QM=new RegExp(`^rgba\\(${so},${so},${so},${zl}\\)$`),ZM=new RegExp(`^rgba\\(${On},${On},${On},${zl}\\)$`),JM=new RegExp(`^hsl\\(${zl},${On},${On}\\)$`),e6=new RegExp(`^hsla\\(${zl},${On},${On},${zl}\\)$`),mS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ty(ec,Bl,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:fS,formatHex:fS,formatHex8:t6,formatHsl:r6,formatRgb:hS,toString:hS});function fS(){return this.rgb().formatHex()}function t6(){return this.rgb().formatHex8()}function r6(){return a2(this).formatHsl()}function hS(){return this.rgb().formatRgb()}function Bl(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=XM.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?pS(e):r===3?new Nr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Iu(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Iu(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=KM.exec(t))?new Nr(e[1],e[2],e[3],1):(e=WM.exec(t))?new Nr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=QM.exec(t))?Iu(e[1],e[2],e[3],e[4]):(e=ZM.exec(t))?Iu(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=JM.exec(t))?xS(e[1],e[2]/100,e[3]/100,1):(e=e6.exec(t))?xS(e[1],e[2]/100,e[3]/100,e[4]):mS.hasOwnProperty(t)?pS(mS[t]):t==="transparent"?new Nr(NaN,NaN,NaN,0):null}function pS(t){return new Nr(t>>16&255,t>>8&255,t&255,1)}function Iu(t,e,r,n){return n<=0&&(t=e=r=NaN),new Nr(t,e,r,n)}function n6(t){return t instanceof ec||(t=Bl(t)),t?(t=t.rgb(),new Nr(t.r,t.g,t.b,t.opacity)):new Nr}function Lg(t,e,r,n){return arguments.length===1?n6(t):new Nr(t,e,r,n??1)}function Nr(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}Ty(Nr,Lg,n2(ec,{brighter(t){return t=t==null?dd:Math.pow(dd,t),new Nr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?$l:Math.pow($l,t),new Nr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Nr(Zs(this.r),Zs(this.g),Zs(this.b),md(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gS,formatHex:gS,formatHex8:a6,formatRgb:yS,toString:yS}));function gS(){return`#${Vs(this.r)}${Vs(this.g)}${Vs(this.b)}`}function a6(){return`#${Vs(this.r)}${Vs(this.g)}${Vs(this.b)}${Vs((isNaN(this.opacity)?1:this.opacity)*255)}`}function yS(){const t=md(this.opacity);return`${t===1?"rgb(":"rgba("}${Zs(this.r)}, ${Zs(this.g)}, ${Zs(this.b)}${t===1?")":`, ${t})`}`}function md(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Zs(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Vs(t){return t=Zs(t),(t<16?"0":"")+t.toString(16)}function xS(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new fn(t,e,r,n)}function a2(t){if(t instanceof fn)return new fn(t.h,t.s,t.l,t.opacity);if(t instanceof ec||(t=Bl(t)),!t)return new fn;if(t instanceof fn)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),l=Math.max(e,r,n),u=NaN,d=l-i,f=(l+i)/2;return d?(e===l?u=(r-n)/d+(r<n)*6:r===l?u=(n-e)/d+2:u=(e-r)/d+4,d/=f<.5?l+i:2-l-i,u*=60):d=f>0&&f<1?0:u,new fn(u,d,f,t.opacity)}function s6(t,e,r,n){return arguments.length===1?a2(t):new fn(t,e,r,n??1)}function fn(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}Ty(fn,s6,n2(ec,{brighter(t){return t=t==null?dd:Math.pow(dd,t),new fn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?$l:Math.pow($l,t),new fn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new Nr(Sp(t>=240?t-240:t+120,i,n),Sp(t,i,n),Sp(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new fn(vS(this.h),Pu(this.s),Pu(this.l),md(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=md(this.opacity);return`${t===1?"hsl(":"hsla("}${vS(this.h)}, ${Pu(this.s)*100}%, ${Pu(this.l)*100}%${t===1?")":`, ${t})`}`}}));function vS(t){return t=(t||0)%360,t<0?t+360:t}function Pu(t){return Math.max(0,Math.min(1,t||0))}function Sp(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const Ey=t=>()=>t;function i6(t,e){return function(r){return t+r*e}}function o6(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function l6(t){return(t=+t)==1?s2:function(e,r){return r-e?o6(e,r,t):Ey(isNaN(e)?r:e)}}function s2(t,e){var r=e-t;return r?i6(t,r):Ey(isNaN(t)?e:t)}const bS=(function t(e){var r=l6(e);function n(i,l){var u=r((i=Lg(i)).r,(l=Lg(l)).r),d=r(i.g,l.g),f=r(i.b,l.b),h=s2(i.opacity,l.opacity);return function(p){return i.r=u(p),i.g=d(p),i.b=f(p),i.opacity=h(p),i+""}}return n.gamma=t,n})(1);function c6(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(l){for(i=0;i<r;++i)n[i]=t[i]*(1-l)+e[i]*l;return n}}function u6(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function d6(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),l=new Array(r),u;for(u=0;u<n;++u)i[u]=bo(t[u],e[u]);for(;u<r;++u)l[u]=e[u];return function(d){for(u=0;u<n;++u)l[u]=i[u](d);return l}}function m6(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function fd(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function f6(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=bo(t[i],e[i]):n[i]=e[i];return function(l){for(i in r)n[i]=r[i](l);return n}}var Fg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Np=new RegExp(Fg.source,"g");function h6(t){return function(){return t}}function p6(t){return function(e){return t(e)+""}}function g6(t,e){var r=Fg.lastIndex=Np.lastIndex=0,n,i,l,u=-1,d=[],f=[];for(t=t+"",e=e+"";(n=Fg.exec(t))&&(i=Np.exec(e));)(l=i.index)>r&&(l=e.slice(r,l),d[u]?d[u]+=l:d[++u]=l),(n=n[0])===(i=i[0])?d[u]?d[u]+=i:d[++u]=i:(d[++u]=null,f.push({i:u,x:fd(n,i)})),r=Np.lastIndex;return r<e.length&&(l=e.slice(r),d[u]?d[u]+=l:d[++u]=l),d.length<2?f[0]?p6(f[0].x):h6(e):(e=f.length,function(h){for(var p=0,g;p<e;++p)d[(g=f[p]).i]=g.x(h);return d.join("")})}function bo(t,e){var r=typeof e,n;return e==null||r==="boolean"?Ey(e):(r==="number"?fd:r==="string"?(n=Bl(e))?(e=n,bS):g6:e instanceof Bl?bS:e instanceof Date?m6:u6(e)?c6:Array.isArray(e)?d6:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?f6:fd)(t,e)}function _y(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function y6(t,e){e===void 0&&(e=t,t=bo);for(var r=0,n=e.length-1,i=e[0],l=new Array(n<0?0:n);r<n;)l[r]=t(i,i=e[++r]);return function(u){var d=Math.max(0,Math.min(n-1,Math.floor(u*=n)));return l[d](u-d)}}function x6(t){return function(){return t}}function hd(t){return+t}var wS=[0,1];function ur(t){return t}function Ug(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:x6(isNaN(e)?NaN:.5)}function v6(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function b6(t,e,r){var n=t[0],i=t[1],l=e[0],u=e[1];return i<n?(n=Ug(i,n),l=r(u,l)):(n=Ug(n,i),l=r(l,u)),function(d){return l(n(d))}}function w6(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),l=new Array(n),u=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++u<n;)i[u]=Ug(t[u],t[u+1]),l[u]=r(e[u],e[u+1]);return function(d){var f=Jl(t,d,1,n)-1;return l[f](i[f](d))}}function tc(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Kd(){var t=wS,e=wS,r=bo,n,i,l,u=ur,d,f,h;function p(){var x=Math.min(t.length,e.length);return u!==ur&&(u=v6(t[0],t[x-1])),d=x>2?w6:b6,f=h=null,g}function g(x){return x==null||isNaN(x=+x)?l:(f||(f=d(t.map(n),e,r)))(n(u(x)))}return g.invert=function(x){return u(i((h||(h=d(e,t.map(n),fd)))(x)))},g.domain=function(x){return arguments.length?(t=Array.from(x,hd),p()):t.slice()},g.range=function(x){return arguments.length?(e=Array.from(x),p()):e.slice()},g.rangeRound=function(x){return e=Array.from(x),r=_y,p()},g.clamp=function(x){return arguments.length?(u=x?!0:ur,p()):u!==ur},g.interpolate=function(x){return arguments.length?(r=x,p()):r},g.unknown=function(x){return arguments.length?(l=x,g):l},function(x,w){return n=x,i=w,p()}}function Ry(){return Kd()(ur,ur)}function S6(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function pd(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function ho(t){return t=pd(Math.abs(t)),t?t[1]:NaN}function N6(t,e){return function(r,n){for(var i=r.length,l=[],u=0,d=t[0],f=0;i>0&&d>0&&(f+d+1>n&&(d=Math.max(1,n-f)),l.push(r.substring(i-=d,i+d)),!((f+=d+1)>n));)d=t[u=(u+1)%t.length];return l.reverse().join(e)}}function C6(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var j6=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ql(t){if(!(e=j6.exec(t)))throw new Error("invalid format: "+t);var e;return new ky({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ql.prototype=ky.prototype;function ky(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ky.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function A6(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var i2;function D6(t,e){var r=pd(t,e);if(!r)return t+"";var n=r[0],i=r[1],l=i-(i2=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,u=n.length;return l===u?n:l>u?n+new Array(l-u+1).join("0"):l>0?n.slice(0,l)+"."+n.slice(l):"0."+new Array(1-l).join("0")+pd(t,Math.max(0,e+l-1))[0]}function SS(t,e){var r=pd(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const NS={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:S6,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>SS(t*100,e),r:SS,s:D6,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function CS(t){return t}var jS=Array.prototype.map,AS=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function T6(t){var e=t.grouping===void 0||t.thousands===void 0?CS:N6(jS.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",l=t.numerals===void 0?CS:C6(jS.call(t.numerals,String)),u=t.percent===void 0?"%":t.percent+"",d=t.minus===void 0?"−":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function h(g){g=ql(g);var x=g.fill,w=g.align,S=g.sign,C=g.symbol,N=g.zero,A=g.width,j=g.comma,E=g.precision,_=g.trim,R=g.type;R==="n"?(j=!0,R="g"):NS[R]||(E===void 0&&(E=12),_=!0,R="g"),(N||x==="0"&&w==="=")&&(N=!0,x="0",w="=");var k=C==="$"?r:C==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",D=C==="$"?n:/[%p]/.test(R)?u:"",I=NS[R],z=/[defgprs%]/.test(R);E=E===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function V(P){var $=k,Q=D,re,ee,U;if(R==="c")Q=I(P)+Q,P="";else{P=+P;var J=P<0||1/P<0;if(P=isNaN(P)?f:I(Math.abs(P),E),_&&(P=A6(P)),J&&+P==0&&S!=="+"&&(J=!1),$=(J?S==="("?S:d:S==="-"||S==="("?"":S)+$,Q=(R==="s"?AS[8+i2/3]:"")+Q+(J&&S==="("?")":""),z){for(re=-1,ee=P.length;++re<ee;)if(U=P.charCodeAt(re),48>U||U>57){Q=(U===46?i+P.slice(re+1):P.slice(re))+Q,P=P.slice(0,re);break}}}j&&!N&&(P=e(P,1/0));var pe=$.length+P.length+Q.length,ce=pe<A?new Array(A-pe+1).join(x):"";switch(j&&N&&(P=e(ce+P,ce.length?A-Q.length:1/0),ce=""),w){case"<":P=$+P+Q+ce;break;case"=":P=$+ce+P+Q;break;case"^":P=ce.slice(0,pe=ce.length>>1)+$+P+Q+ce.slice(pe);break;default:P=ce+$+P+Q;break}return l(P)}return V.toString=function(){return g+""},V}function p(g,x){var w=h((g=ql(g),g.type="f",g)),S=Math.max(-8,Math.min(8,Math.floor(ho(x)/3)))*3,C=Math.pow(10,-S),N=AS[8+S/3];return function(A){return w(C*A)+N}}return{format:h,formatPrefix:p}}var Lu,Oy,o2;E6({thousands:",",grouping:[3],currency:["$",""]});function E6(t){return Lu=T6(t),Oy=Lu.format,o2=Lu.formatPrefix,Lu}function _6(t){return Math.max(0,-ho(Math.abs(t)))}function R6(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ho(e)/3)))*3-ho(Math.abs(t)))}function k6(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ho(e)-ho(t))+1}function l2(t,e,r,n){var i=Ig(t,e,r),l;switch(n=ql(n??",f"),n.type){case"s":{var u=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(l=R6(i,u))&&(n.precision=l),o2(n,u)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(l=k6(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=l-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(l=_6(i))&&(n.precision=l-(n.type==="%")*2);break}}return Oy(n)}function fs(t){var e=t.domain;return t.ticks=function(r){var n=e();return Og(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return l2(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,l=n.length-1,u=n[i],d=n[l],f,h,p=10;for(d<u&&(h=u,u=d,d=h,h=i,i=l,l=h);p-- >0;){if(h=Mg(u,d,r),h===f)return n[i]=u,n[l]=d,e(n);if(h>0)u=Math.floor(u/h)*h,d=Math.ceil(d/h)*h;else if(h<0)u=Math.ceil(u*h)/h,d=Math.floor(d*h)/h;else break;f=h}return t},t}function c2(){var t=Ry();return t.copy=function(){return tc(t,c2())},sn.apply(t,arguments),fs(t)}function u2(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,hd),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return u2(t).unknown(e)},t=arguments.length?Array.from(t,hd):[0,1],fs(r)}function d2(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],l=t[n],u;return l<i&&(u=r,r=n,n=u,u=i,i=l,l=u),t[r]=e.floor(i),t[n]=e.ceil(l),t}function DS(t){return Math.log(t)}function TS(t){return Math.exp(t)}function O6(t){return-Math.log(-t)}function M6(t){return-Math.exp(-t)}function I6(t){return isFinite(t)?+("1e"+t):t<0?0:t}function P6(t){return t===10?I6:t===Math.E?Math.exp:e=>Math.pow(t,e)}function L6(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function ES(t){return(e,r)=>-t(-e,r)}function My(t){const e=t(DS,TS),r=e.domain;let n=10,i,l;function u(){return i=L6(n),l=P6(n),r()[0]<0?(i=ES(i),l=ES(l),t(O6,M6)):t(DS,TS),e}return e.base=function(d){return arguments.length?(n=+d,u()):n},e.domain=function(d){return arguments.length?(r(d),u()):r()},e.ticks=d=>{const f=r();let h=f[0],p=f[f.length-1];const g=p<h;g&&([h,p]=[p,h]);let x=i(h),w=i(p),S,C;const N=d==null?10:+d;let A=[];if(!(n%1)&&w-x<N){if(x=Math.floor(x),w=Math.ceil(w),h>0){for(;x<=w;++x)for(S=1;S<n;++S)if(C=x<0?S/l(-x):S*l(x),!(C<h)){if(C>p)break;A.push(C)}}else for(;x<=w;++x)for(S=n-1;S>=1;--S)if(C=x>0?S/l(-x):S*l(x),!(C<h)){if(C>p)break;A.push(C)}A.length*2<N&&(A=Og(h,p,N))}else A=Og(x,w,Math.min(w-x,N)).map(l);return g?A.reverse():A},e.tickFormat=(d,f)=>{if(d==null&&(d=10),f==null&&(f=n===10?"s":","),typeof f!="function"&&(!(n%1)&&(f=ql(f)).precision==null&&(f.trim=!0),f=Oy(f)),d===1/0)return f;const h=Math.max(1,n*d/e.ticks().length);return p=>{let g=p/l(Math.round(i(p)));return g*n<n-.5&&(g*=n),g<=h?f(p):""}},e.nice=()=>r(d2(r(),{floor:d=>l(Math.floor(i(d))),ceil:d=>l(Math.ceil(i(d)))})),e}function m2(){const t=My(Kd()).domain([1,10]);return t.copy=()=>tc(t,m2()).base(t.base()),sn.apply(t,arguments),t}function _S(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function RS(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Iy(t){var e=1,r=t(_S(e),RS(e));return r.constant=function(n){return arguments.length?t(_S(e=+n),RS(e)):e},fs(r)}function f2(){var t=Iy(Kd());return t.copy=function(){return tc(t,f2()).constant(t.constant())},sn.apply(t,arguments)}function kS(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function F6(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function U6(t){return t<0?-t*t:t*t}function Py(t){var e=t(ur,ur),r=1;function n(){return r===1?t(ur,ur):r===.5?t(F6,U6):t(kS(r),kS(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},fs(e)}function Ly(){var t=Py(Kd());return t.copy=function(){return tc(t,Ly()).exponent(t.exponent())},sn.apply(t,arguments),t}function $6(){return Ly.apply(null,arguments).exponent(.5)}function OS(t){return Math.sign(t)*t*t}function z6(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function h2(){var t=Ry(),e=[0,1],r=!1,n;function i(l){var u=z6(t(l));return isNaN(u)?n:r?Math.round(u):u}return i.invert=function(l){return t.invert(OS(l))},i.domain=function(l){return arguments.length?(t.domain(l),i):t.domain()},i.range=function(l){return arguments.length?(t.range((e=Array.from(l,hd)).map(OS)),i):e.slice()},i.rangeRound=function(l){return i.range(l).round(!0)},i.round=function(l){return arguments.length?(r=!!l,i):r},i.clamp=function(l){return arguments.length?(t.clamp(l),i):t.clamp()},i.unknown=function(l){return arguments.length?(n=l,i):n},i.copy=function(){return h2(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},sn.apply(i,arguments),fs(i)}function p2(){var t=[],e=[],r=[],n;function i(){var u=0,d=Math.max(1,e.length);for(r=new Array(d-1);++u<d;)r[u-1]=VM(t,u/d);return l}function l(u){return u==null||isNaN(u=+u)?n:e[Jl(r,u)]}return l.invertExtent=function(u){var d=e.indexOf(u);return d<0?[NaN,NaN]:[d>0?r[d-1]:t[0],d<r.length?r[d]:t[t.length-1]]},l.domain=function(u){if(!arguments.length)return t.slice();t=[];for(let d of u)d!=null&&!isNaN(d=+d)&&t.push(d);return t.sort(ss),i()},l.range=function(u){return arguments.length?(e=Array.from(u),i()):e.slice()},l.unknown=function(u){return arguments.length?(n=u,l):n},l.quantiles=function(){return r.slice()},l.copy=function(){return p2().domain(t).range(e).unknown(n)},sn.apply(l,arguments)}function g2(){var t=0,e=1,r=1,n=[.5],i=[0,1],l;function u(f){return f!=null&&f<=f?i[Jl(n,f,0,r)]:l}function d(){var f=-1;for(n=new Array(r);++f<r;)n[f]=((f+1)*e-(f-r)*t)/(r+1);return u}return u.domain=function(f){return arguments.length?([t,e]=f,t=+t,e=+e,d()):[t,e]},u.range=function(f){return arguments.length?(r=(i=Array.from(f)).length-1,d()):i.slice()},u.invertExtent=function(f){var h=i.indexOf(f);return h<0?[NaN,NaN]:h<1?[t,n[0]]:h>=r?[n[r-1],e]:[n[h-1],n[h]]},u.unknown=function(f){return arguments.length&&(l=f),u},u.thresholds=function(){return n.slice()},u.copy=function(){return g2().domain([t,e]).range(i).unknown(l)},sn.apply(fs(u),arguments)}function y2(){var t=[.5],e=[0,1],r,n=1;function i(l){return l!=null&&l<=l?e[Jl(t,l,0,n)]:r}return i.domain=function(l){return arguments.length?(t=Array.from(l),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(l){return arguments.length?(e=Array.from(l),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(l){var u=e.indexOf(l);return[t[u-1],t[u]]},i.unknown=function(l){return arguments.length?(r=l,i):r},i.copy=function(){return y2().domain(t).range(e).unknown(r)},sn.apply(i,arguments)}const Cp=new Date,jp=new Date;function It(t,e,r,n){function i(l){return t(l=arguments.length===0?new Date:new Date(+l)),l}return i.floor=l=>(t(l=new Date(+l)),l),i.ceil=l=>(t(l=new Date(l-1)),e(l,1),t(l),l),i.round=l=>{const u=i(l),d=i.ceil(l);return l-u<d-l?u:d},i.offset=(l,u)=>(e(l=new Date(+l),u==null?1:Math.floor(u)),l),i.range=(l,u,d)=>{const f=[];if(l=i.ceil(l),d=d==null?1:Math.floor(d),!(l<u)||!(d>0))return f;let h;do f.push(h=new Date(+l)),e(l,d),t(l);while(h<l&&l<u);return f},i.filter=l=>It(u=>{if(u>=u)for(;t(u),!l(u);)u.setTime(u-1)},(u,d)=>{if(u>=u)if(d<0)for(;++d<=0;)for(;e(u,-1),!l(u););else for(;--d>=0;)for(;e(u,1),!l(u););}),r&&(i.count=(l,u)=>(Cp.setTime(+l),jp.setTime(+u),t(Cp),t(jp),Math.floor(r(Cp,jp))),i.every=l=>(l=Math.floor(l),!isFinite(l)||!(l>0)?null:l>1?i.filter(n?u=>n(u)%l===0:u=>i.count(0,u)%l===0):i)),i}const gd=It(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);gd.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?It(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):gd);gd.range;const ra=1e3,tn=ra*60,na=tn*60,pa=na*24,Fy=pa*7,MS=pa*30,Ap=pa*365,Ys=It(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ra)},(t,e)=>(e-t)/ra,t=>t.getUTCSeconds());Ys.range;const Uy=It(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ra)},(t,e)=>{t.setTime(+t+e*tn)},(t,e)=>(e-t)/tn,t=>t.getMinutes());Uy.range;const $y=It(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*tn)},(t,e)=>(e-t)/tn,t=>t.getUTCMinutes());$y.range;const zy=It(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ra-t.getMinutes()*tn)},(t,e)=>{t.setTime(+t+e*na)},(t,e)=>(e-t)/na,t=>t.getHours());zy.range;const By=It(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*na)},(t,e)=>(e-t)/na,t=>t.getUTCHours());By.range;const rc=It(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*tn)/pa,t=>t.getDate()-1);rc.range;const Wd=It(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/pa,t=>t.getUTCDate()-1);Wd.range;const x2=It(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/pa,t=>Math.floor(t/pa));x2.range;function ci(t){return It(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*tn)/Fy)}const Qd=ci(0),yd=ci(1),B6=ci(2),q6=ci(3),po=ci(4),H6=ci(5),V6=ci(6);Qd.range;yd.range;B6.range;q6.range;po.range;H6.range;V6.range;function ui(t){return It(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/Fy)}const Zd=ui(0),xd=ui(1),Y6=ui(2),G6=ui(3),go=ui(4),X6=ui(5),K6=ui(6);Zd.range;xd.range;Y6.range;G6.range;go.range;X6.range;K6.range;const qy=It(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());qy.range;const Hy=It(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Hy.range;const ga=It(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ga.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:It(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});ga.range;const ya=It(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ya.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:It(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});ya.range;function v2(t,e,r,n,i,l){const u=[[Ys,1,ra],[Ys,5,5*ra],[Ys,15,15*ra],[Ys,30,30*ra],[l,1,tn],[l,5,5*tn],[l,15,15*tn],[l,30,30*tn],[i,1,na],[i,3,3*na],[i,6,6*na],[i,12,12*na],[n,1,pa],[n,2,2*pa],[r,1,Fy],[e,1,MS],[e,3,3*MS],[t,1,Ap]];function d(h,p,g){const x=p<h;x&&([h,p]=[p,h]);const w=g&&typeof g.range=="function"?g:f(h,p,g),S=w?w.range(h,+p+1):[];return x?S.reverse():S}function f(h,p,g){const x=Math.abs(p-h)/g,w=jy(([,,N])=>N).right(u,x);if(w===u.length)return t.every(Ig(h/Ap,p/Ap,g));if(w===0)return gd.every(Math.max(Ig(h,p,g),1));const[S,C]=u[x/u[w-1][2]<u[w][2]/x?w-1:w];return S.every(C)}return[d,f]}const[W6,Q6]=v2(ya,Hy,Zd,x2,By,$y),[Z6,J6]=v2(ga,qy,Qd,rc,zy,Uy);function Dp(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Tp(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Nl(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function eI(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,l=t.days,u=t.shortDays,d=t.months,f=t.shortMonths,h=Cl(i),p=jl(i),g=Cl(l),x=jl(l),w=Cl(u),S=jl(u),C=Cl(d),N=jl(d),A=Cl(f),j=jl(f),E={a:J,A:pe,b:ce,B:oe,c:null,d:$S,e:$S,f:NI,g:OI,G:II,H:bI,I:wI,j:SI,L:b2,m:CI,M:jI,p:F,q:L,Q:qS,s:HS,S:AI,u:DI,U:TI,V:EI,w:_I,W:RI,x:null,X:null,y:kI,Y:MI,Z:PI,"%":BS},_={a:X,A:O,b:q,B:Y,c:null,d:zS,e:zS,f:$I,g:WI,G:ZI,H:LI,I:FI,j:UI,L:S2,m:zI,M:BI,p:le,q:ye,Q:qS,s:HS,S:qI,u:HI,U:VI,V:YI,w:GI,W:XI,x:null,X:null,y:KI,Y:QI,Z:JI,"%":BS},R={a:V,A:P,b:$,B:Q,c:re,d:FS,e:FS,f:gI,g:LS,G:PS,H:US,I:US,j:mI,L:pI,m:dI,M:fI,p:z,q:uI,Q:xI,s:vI,S:hI,u:sI,U:iI,V:oI,w:aI,W:lI,x:ee,X:U,y:LS,Y:PS,Z:cI,"%":yI};E.x=k(r,E),E.X=k(n,E),E.c=k(e,E),_.x=k(r,_),_.X=k(n,_),_.c=k(e,_);function k(B,ae){return function(de){var Z=[],ve=-1,xe=0,be=B.length,Ae,Ie,ct;for(de instanceof Date||(de=new Date(+de));++ve<be;)B.charCodeAt(ve)===37&&(Z.push(B.slice(xe,ve)),(Ie=IS[Ae=B.charAt(++ve)])!=null?Ae=B.charAt(++ve):Ie=Ae==="e"?" ":"0",(ct=ae[Ae])&&(Ae=ct(de,Ie)),Z.push(Ae),xe=ve+1);return Z.push(B.slice(xe,ve)),Z.join("")}}function D(B,ae){return function(de){var Z=Nl(1900,void 0,1),ve=I(Z,B,de+="",0),xe,be;if(ve!=de.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if(ae&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(xe=Tp(Nl(Z.y,0,1)),be=xe.getUTCDay(),xe=be>4||be===0?xd.ceil(xe):xd(xe),xe=Wd.offset(xe,(Z.V-1)*7),Z.y=xe.getUTCFullYear(),Z.m=xe.getUTCMonth(),Z.d=xe.getUTCDate()+(Z.w+6)%7):(xe=Dp(Nl(Z.y,0,1)),be=xe.getDay(),xe=be>4||be===0?yd.ceil(xe):yd(xe),xe=rc.offset(xe,(Z.V-1)*7),Z.y=xe.getFullYear(),Z.m=xe.getMonth(),Z.d=xe.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),be="Z"in Z?Tp(Nl(Z.y,0,1)).getUTCDay():Dp(Nl(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-(be+5)%7:Z.w+Z.U*7-(be+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,Tp(Z)):Dp(Z)}}function I(B,ae,de,Z){for(var ve=0,xe=ae.length,be=de.length,Ae,Ie;ve<xe;){if(Z>=be)return-1;if(Ae=ae.charCodeAt(ve++),Ae===37){if(Ae=ae.charAt(ve++),Ie=R[Ae in IS?ae.charAt(ve++):Ae],!Ie||(Z=Ie(B,de,Z))<0)return-1}else if(Ae!=de.charCodeAt(Z++))return-1}return Z}function z(B,ae,de){var Z=h.exec(ae.slice(de));return Z?(B.p=p.get(Z[0].toLowerCase()),de+Z[0].length):-1}function V(B,ae,de){var Z=w.exec(ae.slice(de));return Z?(B.w=S.get(Z[0].toLowerCase()),de+Z[0].length):-1}function P(B,ae,de){var Z=g.exec(ae.slice(de));return Z?(B.w=x.get(Z[0].toLowerCase()),de+Z[0].length):-1}function $(B,ae,de){var Z=A.exec(ae.slice(de));return Z?(B.m=j.get(Z[0].toLowerCase()),de+Z[0].length):-1}function Q(B,ae,de){var Z=C.exec(ae.slice(de));return Z?(B.m=N.get(Z[0].toLowerCase()),de+Z[0].length):-1}function re(B,ae,de){return I(B,e,ae,de)}function ee(B,ae,de){return I(B,r,ae,de)}function U(B,ae,de){return I(B,n,ae,de)}function J(B){return u[B.getDay()]}function pe(B){return l[B.getDay()]}function ce(B){return f[B.getMonth()]}function oe(B){return d[B.getMonth()]}function F(B){return i[+(B.getHours()>=12)]}function L(B){return 1+~~(B.getMonth()/3)}function X(B){return u[B.getUTCDay()]}function O(B){return l[B.getUTCDay()]}function q(B){return f[B.getUTCMonth()]}function Y(B){return d[B.getUTCMonth()]}function le(B){return i[+(B.getUTCHours()>=12)]}function ye(B){return 1+~~(B.getUTCMonth()/3)}return{format:function(B){var ae=k(B+="",E);return ae.toString=function(){return B},ae},parse:function(B){var ae=D(B+="",!1);return ae.toString=function(){return B},ae},utcFormat:function(B){var ae=k(B+="",_);return ae.toString=function(){return B},ae},utcParse:function(B){var ae=D(B+="",!0);return ae.toString=function(){return B},ae}}}var IS={"-":"",_:" ",0:"0"},$t=/^\s*\d+/,tI=/^%/,rI=/[\\^$*+?|[\]().{}]/g;function Ke(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",l=i.length;return n+(l<r?new Array(r-l+1).join(e)+i:i)}function nI(t){return t.replace(rI,"\\$&")}function Cl(t){return new RegExp("^(?:"+t.map(nI).join("|")+")","i")}function jl(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function aI(t,e,r){var n=$t.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function sI(t,e,r){var n=$t.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function iI(t,e,r){var n=$t.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function oI(t,e,r){var n=$t.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function lI(t,e,r){var n=$t.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function PS(t,e,r){var n=$t.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function LS(t,e,r){var n=$t.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function cI(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function uI(t,e,r){var n=$t.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function dI(t,e,r){var n=$t.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function FS(t,e,r){var n=$t.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function mI(t,e,r){var n=$t.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function US(t,e,r){var n=$t.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function fI(t,e,r){var n=$t.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function hI(t,e,r){var n=$t.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function pI(t,e,r){var n=$t.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function gI(t,e,r){var n=$t.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function yI(t,e,r){var n=tI.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function xI(t,e,r){var n=$t.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function vI(t,e,r){var n=$t.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function $S(t,e){return Ke(t.getDate(),e,2)}function bI(t,e){return Ke(t.getHours(),e,2)}function wI(t,e){return Ke(t.getHours()%12||12,e,2)}function SI(t,e){return Ke(1+rc.count(ga(t),t),e,3)}function b2(t,e){return Ke(t.getMilliseconds(),e,3)}function NI(t,e){return b2(t,e)+"000"}function CI(t,e){return Ke(t.getMonth()+1,e,2)}function jI(t,e){return Ke(t.getMinutes(),e,2)}function AI(t,e){return Ke(t.getSeconds(),e,2)}function DI(t){var e=t.getDay();return e===0?7:e}function TI(t,e){return Ke(Qd.count(ga(t)-1,t),e,2)}function w2(t){var e=t.getDay();return e>=4||e===0?po(t):po.ceil(t)}function EI(t,e){return t=w2(t),Ke(po.count(ga(t),t)+(ga(t).getDay()===4),e,2)}function _I(t){return t.getDay()}function RI(t,e){return Ke(yd.count(ga(t)-1,t),e,2)}function kI(t,e){return Ke(t.getFullYear()%100,e,2)}function OI(t,e){return t=w2(t),Ke(t.getFullYear()%100,e,2)}function MI(t,e){return Ke(t.getFullYear()%1e4,e,4)}function II(t,e){var r=t.getDay();return t=r>=4||r===0?po(t):po.ceil(t),Ke(t.getFullYear()%1e4,e,4)}function PI(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ke(e/60|0,"0",2)+Ke(e%60,"0",2)}function zS(t,e){return Ke(t.getUTCDate(),e,2)}function LI(t,e){return Ke(t.getUTCHours(),e,2)}function FI(t,e){return Ke(t.getUTCHours()%12||12,e,2)}function UI(t,e){return Ke(1+Wd.count(ya(t),t),e,3)}function S2(t,e){return Ke(t.getUTCMilliseconds(),e,3)}function $I(t,e){return S2(t,e)+"000"}function zI(t,e){return Ke(t.getUTCMonth()+1,e,2)}function BI(t,e){return Ke(t.getUTCMinutes(),e,2)}function qI(t,e){return Ke(t.getUTCSeconds(),e,2)}function HI(t){var e=t.getUTCDay();return e===0?7:e}function VI(t,e){return Ke(Zd.count(ya(t)-1,t),e,2)}function N2(t){var e=t.getUTCDay();return e>=4||e===0?go(t):go.ceil(t)}function YI(t,e){return t=N2(t),Ke(go.count(ya(t),t)+(ya(t).getUTCDay()===4),e,2)}function GI(t){return t.getUTCDay()}function XI(t,e){return Ke(xd.count(ya(t)-1,t),e,2)}function KI(t,e){return Ke(t.getUTCFullYear()%100,e,2)}function WI(t,e){return t=N2(t),Ke(t.getUTCFullYear()%100,e,2)}function QI(t,e){return Ke(t.getUTCFullYear()%1e4,e,4)}function ZI(t,e){var r=t.getUTCDay();return t=r>=4||r===0?go(t):go.ceil(t),Ke(t.getUTCFullYear()%1e4,e,4)}function JI(){return"+0000"}function BS(){return"%"}function qS(t){return+t}function HS(t){return Math.floor(+t/1e3)}var Zi,C2,j2;eP({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function eP(t){return Zi=eI(t),C2=Zi.format,Zi.parse,j2=Zi.utcFormat,Zi.utcParse,Zi}function tP(t){return new Date(t)}function rP(t){return t instanceof Date?+t:+new Date(+t)}function Vy(t,e,r,n,i,l,u,d,f,h){var p=Ry(),g=p.invert,x=p.domain,w=h(".%L"),S=h(":%S"),C=h("%I:%M"),N=h("%I %p"),A=h("%a %d"),j=h("%b %d"),E=h("%B"),_=h("%Y");function R(k){return(f(k)<k?w:d(k)<k?S:u(k)<k?C:l(k)<k?N:n(k)<k?i(k)<k?A:j:r(k)<k?E:_)(k)}return p.invert=function(k){return new Date(g(k))},p.domain=function(k){return arguments.length?x(Array.from(k,rP)):x().map(tP)},p.ticks=function(k){var D=x();return t(D[0],D[D.length-1],k??10)},p.tickFormat=function(k,D){return D==null?R:h(D)},p.nice=function(k){var D=x();return(!k||typeof k.range!="function")&&(k=e(D[0],D[D.length-1],k??10)),k?x(d2(D,k)):p},p.copy=function(){return tc(p,Vy(t,e,r,n,i,l,u,d,f,h))},p}function nP(){return sn.apply(Vy(Z6,J6,ga,qy,Qd,rc,zy,Uy,Ys,C2).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function aP(){return sn.apply(Vy(W6,Q6,ya,Hy,Zd,Wd,By,$y,Ys,j2).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Jd(){var t=0,e=1,r,n,i,l,u=ur,d=!1,f;function h(g){return g==null||isNaN(g=+g)?f:u(i===0?.5:(g=(l(g)-r)*i,d?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([t,e]=g,r=l(t=+t),n=l(e=+e),i=r===n?0:1/(n-r),h):[t,e]},h.clamp=function(g){return arguments.length?(d=!!g,h):d},h.interpolator=function(g){return arguments.length?(u=g,h):u};function p(g){return function(x){var w,S;return arguments.length?([w,S]=x,u=g(w,S),h):[u(0),u(1)]}}return h.range=p(bo),h.rangeRound=p(_y),h.unknown=function(g){return arguments.length?(f=g,h):f},function(g){return l=g,r=g(t),n=g(e),i=r===n?0:1/(n-r),h}}function hs(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function A2(){var t=fs(Jd()(ur));return t.copy=function(){return hs(t,A2())},wa.apply(t,arguments)}function D2(){var t=My(Jd()).domain([1,10]);return t.copy=function(){return hs(t,D2()).base(t.base())},wa.apply(t,arguments)}function T2(){var t=Iy(Jd());return t.copy=function(){return hs(t,T2()).constant(t.constant())},wa.apply(t,arguments)}function Yy(){var t=Py(Jd());return t.copy=function(){return hs(t,Yy()).exponent(t.exponent())},wa.apply(t,arguments)}function sP(){return Yy.apply(null,arguments).exponent(.5)}function E2(){var t=[],e=ur;function r(n){if(n!=null&&!isNaN(n=+n))return e((Jl(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ss),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,l)=>HM(t,l/n))},r.copy=function(){return E2(e).domain(t)},wa.apply(r,arguments)}function em(){var t=0,e=.5,r=1,n=1,i,l,u,d,f,h=ur,p,g=!1,x;function w(C){return isNaN(C=+C)?x:(C=.5+((C=+p(C))-l)*(n*C<n*l?d:f),h(g?Math.max(0,Math.min(1,C)):C))}w.domain=function(C){return arguments.length?([t,e,r]=C,i=p(t=+t),l=p(e=+e),u=p(r=+r),d=i===l?0:.5/(l-i),f=l===u?0:.5/(u-l),n=l<i?-1:1,w):[t,e,r]},w.clamp=function(C){return arguments.length?(g=!!C,w):g},w.interpolator=function(C){return arguments.length?(h=C,w):h};function S(C){return function(N){var A,j,E;return arguments.length?([A,j,E]=N,h=y6(C,[A,j,E]),w):[h(0),h(.5),h(1)]}}return w.range=S(bo),w.rangeRound=S(_y),w.unknown=function(C){return arguments.length?(x=C,w):x},function(C){return p=C,i=C(t),l=C(e),u=C(r),d=i===l?0:.5/(l-i),f=l===u?0:.5/(u-l),n=l<i?-1:1,w}}function _2(){var t=fs(em()(ur));return t.copy=function(){return hs(t,_2())},wa.apply(t,arguments)}function R2(){var t=My(em()).domain([.1,1,10]);return t.copy=function(){return hs(t,R2()).base(t.base())},wa.apply(t,arguments)}function k2(){var t=Iy(em());return t.copy=function(){return hs(t,k2()).constant(t.constant())},wa.apply(t,arguments)}function Gy(){var t=Py(em());return t.copy=function(){return hs(t,Gy()).exponent(t.exponent())},wa.apply(t,arguments)}function iP(){return Gy.apply(null,arguments).exponent(.5)}const _l=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Dy,scaleDiverging:_2,scaleDivergingLog:R2,scaleDivergingPow:Gy,scaleDivergingSqrt:iP,scaleDivergingSymlog:k2,scaleIdentity:u2,scaleImplicit:Pg,scaleLinear:c2,scaleLog:m2,scaleOrdinal:Ay,scalePoint:GM,scalePow:Ly,scaleQuantile:p2,scaleQuantize:g2,scaleRadial:h2,scaleSequential:A2,scaleSequentialLog:D2,scaleSequentialPow:Yy,scaleSequentialQuantile:E2,scaleSequentialSqrt:sP,scaleSequentialSymlog:T2,scaleSqrt:$6,scaleSymlog:f2,scaleThreshold:y2,scaleTime:nP,scaleUtc:aP,tickFormat:l2},Symbol.toStringTag,{value:"Module"}));var ps=t=>t.chartData,oP=me([ps],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),Xy=(t,e,r,n)=>n?oP(t):ps(t);function yo(t){if(Array.isArray(t)&&t.length===2){var[e,r]=t;if(mr(e)&&mr(r))return!0}return!1}function VS(t,e,r){return r?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function lP(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,n]=t,i,l;if(mr(r))i=r;else if(typeof r=="function")return;if(mr(n))l=n;else if(typeof n=="function")return;var u=[i,l];if(yo(u))return u}}function cP(t,e,r){if(!(!r&&e==null)){if(typeof t=="function"&&e!=null)try{var n=t(e,r);if(yo(n))return VS(n,e,r)}catch{}if(Array.isArray(t)&&t.length===2){var[i,l]=t,u,d;if(i==="auto")e!=null&&(u=Math.min(...e));else if(Fe(i))u=i;else if(typeof i=="function")try{e!=null&&(u=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&q1.test(i)){var f=q1.exec(i);if(f==null||e==null)u=void 0;else{var h=+f[1];u=e[0]-h}}else u=e==null?void 0:e[0];if(l==="auto")e!=null&&(d=Math.max(...e));else if(Fe(l))d=l;else if(typeof l=="function")try{e!=null&&(d=l(e==null?void 0:e[1]))}catch{}else if(typeof l=="string"&&H1.test(l)){var p=H1.exec(l);if(p==null||e==null)d=void 0;else{var g=+p[1];d=e[1]+g}}else d=e==null?void 0:e[1];var x=[u,d];if(yo(x))return e==null?x:VS(x,e,r)}}}var wo=1e9,uP={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Wy,dt=!0,an="[DecimalError] ",Js=an+"Invalid argument: ",Ky=an+"Exponent out of range: ",So=Math.floor,Bs=Math.pow,dP=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Mr,Ut=1e7,lt=7,O2=9007199254740991,vd=So(O2/lt),Ce={};Ce.absoluteValue=Ce.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ce.comparedTo=Ce.cmp=function(t){var e,r,n,i,l=this;if(t=new l.constructor(t),l.s!==t.s)return l.s||-t.s;if(l.e!==t.e)return l.e>t.e^l.s<0?1:-1;for(n=l.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(l.d[e]!==t.d[e])return l.d[e]>t.d[e]^l.s<0?1:-1;return n===i?0:n>i^l.s<0?1:-1};Ce.decimalPlaces=Ce.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*lt;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Ce.dividedBy=Ce.div=function(t){return la(this,new this.constructor(t))};Ce.dividedToIntegerBy=Ce.idiv=function(t){var e=this,r=e.constructor;return at(la(e,new r(t),0,1),r.precision)};Ce.equals=Ce.eq=function(t){return!this.cmp(t)};Ce.exponent=function(){return _t(this)};Ce.greaterThan=Ce.gt=function(t){return this.cmp(t)>0};Ce.greaterThanOrEqualTo=Ce.gte=function(t){return this.cmp(t)>=0};Ce.isInteger=Ce.isint=function(){return this.e>this.d.length-2};Ce.isNegative=Ce.isneg=function(){return this.s<0};Ce.isPositive=Ce.ispos=function(){return this.s>0};Ce.isZero=function(){return this.s===0};Ce.lessThan=Ce.lt=function(t){return this.cmp(t)<0};Ce.lessThanOrEqualTo=Ce.lte=function(t){return this.cmp(t)<1};Ce.logarithm=Ce.log=function(t){var e,r=this,n=r.constructor,i=n.precision,l=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Mr))throw Error(an+"NaN");if(r.s<1)throw Error(an+(r.s?"NaN":"-Infinity"));return r.eq(Mr)?new n(0):(dt=!1,e=la(Hl(r,l),Hl(t,l),l),dt=!0,at(e,i))};Ce.minus=Ce.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?P2(e,t):M2(e,(t.s=-t.s,t))};Ce.modulo=Ce.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(an+"NaN");return r.s?(dt=!1,e=la(r,t,0,1).times(t),dt=!0,r.minus(e)):at(new n(r),i)};Ce.naturalExponential=Ce.exp=function(){return I2(this)};Ce.naturalLogarithm=Ce.ln=function(){return Hl(this)};Ce.negated=Ce.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ce.plus=Ce.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?M2(e,t):P2(e,(t.s=-t.s,t))};Ce.precision=Ce.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Js+t);if(e=_t(i)+1,n=i.d.length-1,r=n*lt+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};Ce.squareRoot=Ce.sqrt=function(){var t,e,r,n,i,l,u,d=this,f=d.constructor;if(d.s<1){if(!d.s)return new f(0);throw Error(an+"NaN")}for(t=_t(d),dt=!1,i=Math.sqrt(+d),i==0||i==1/0?(e=kn(d.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=So((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new f(e)):n=new f(i.toString()),r=f.precision,i=u=r+3;;)if(l=n,n=l.plus(la(d,l,u+2)).times(.5),kn(l.d).slice(0,u)===(e=kn(n.d)).slice(0,u)){if(e=e.slice(u-3,u+1),i==u&&e=="4999"){if(at(l,r+1,0),l.times(l).eq(d)){n=l;break}}else if(e!="9999")break;u+=4}return dt=!0,at(n,r)};Ce.times=Ce.mul=function(t){var e,r,n,i,l,u,d,f,h,p=this,g=p.constructor,x=p.d,w=(t=new g(t)).d;if(!p.s||!t.s)return new g(0);for(t.s*=p.s,r=p.e+t.e,f=x.length,h=w.length,f<h&&(l=x,x=w,w=l,u=f,f=h,h=u),l=[],u=f+h,n=u;n--;)l.push(0);for(n=h;--n>=0;){for(e=0,i=f+n;i>n;)d=l[i]+w[n]*x[i-n-1]+e,l[i--]=d%Ut|0,e=d/Ut|0;l[i]=(l[i]+e)%Ut|0}for(;!l[--u];)l.pop();return e?++r:l.shift(),t.d=l,t.e=r,dt?at(t,g.precision):t};Ce.toDecimalPlaces=Ce.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Mn(t,0,wo),e===void 0?e=n.rounding:Mn(e,0,8),at(r,t+_t(r)+1,e))};Ce.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=ai(n,!0):(Mn(t,0,wo),e===void 0?e=i.rounding:Mn(e,0,8),n=at(new i(n),t+1,e),r=ai(n,!0,t+1)),r};Ce.toFixed=function(t,e){var r,n,i=this,l=i.constructor;return t===void 0?ai(i):(Mn(t,0,wo),e===void 0?e=l.rounding:Mn(e,0,8),n=at(new l(i),t+_t(i)+1,e),r=ai(n.abs(),!1,t+_t(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Ce.toInteger=Ce.toint=function(){var t=this,e=t.constructor;return at(new e(t),_t(t)+1,e.rounding)};Ce.toNumber=function(){return+this};Ce.toPower=Ce.pow=function(t){var e,r,n,i,l,u,d=this,f=d.constructor,h=12,p=+(t=new f(t));if(!t.s)return new f(Mr);if(d=new f(d),!d.s){if(t.s<1)throw Error(an+"Infinity");return d}if(d.eq(Mr))return d;if(n=f.precision,t.eq(Mr))return at(d,n);if(e=t.e,r=t.d.length-1,u=e>=r,l=d.s,u){if((r=p<0?-p:p)<=O2){for(i=new f(Mr),e=Math.ceil(n/lt+4),dt=!1;r%2&&(i=i.times(d),GS(i.d,e)),r=So(r/2),r!==0;)d=d.times(d),GS(d.d,e);return dt=!0,t.s<0?new f(Mr).div(i):at(i,n)}}else if(l<0)throw Error(an+"NaN");return l=l<0&&t.d[Math.max(e,r)]&1?-1:1,d.s=1,dt=!1,i=t.times(Hl(d,n+h)),dt=!0,i=I2(i),i.s=l,i};Ce.toPrecision=function(t,e){var r,n,i=this,l=i.constructor;return t===void 0?(r=_t(i),n=ai(i,r<=l.toExpNeg||r>=l.toExpPos)):(Mn(t,1,wo),e===void 0?e=l.rounding:Mn(e,0,8),i=at(new l(i),t,e),r=_t(i),n=ai(i,t<=r||r<=l.toExpNeg,t)),n};Ce.toSignificantDigits=Ce.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Mn(t,1,wo),e===void 0?e=n.rounding:Mn(e,0,8)),at(new n(r),t,e)};Ce.toString=Ce.valueOf=Ce.val=Ce.toJSON=Ce[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=_t(t),r=t.constructor;return ai(t,e<=r.toExpNeg||e>=r.toExpPos)};function M2(t,e){var r,n,i,l,u,d,f,h,p=t.constructor,g=p.precision;if(!t.s||!e.s)return e.s||(e=new p(t)),dt?at(e,g):e;if(f=t.d,h=e.d,u=t.e,i=e.e,f=f.slice(),l=u-i,l){for(l<0?(n=f,l=-l,d=h.length):(n=h,i=u,d=f.length),u=Math.ceil(g/lt),d=u>d?u+1:d+1,l>d&&(l=d,n.length=1),n.reverse();l--;)n.push(0);n.reverse()}for(d=f.length,l=h.length,d-l<0&&(l=d,n=h,h=f,f=n),r=0;l;)r=(f[--l]=f[l]+h[l]+r)/Ut|0,f[l]%=Ut;for(r&&(f.unshift(r),++i),d=f.length;f[--d]==0;)f.pop();return e.d=f,e.e=i,dt?at(e,g):e}function Mn(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Js+t)}function kn(t){var e,r,n,i=t.length-1,l="",u=t[0];if(i>0){for(l+=u,e=1;e<i;e++)n=t[e]+"",r=lt-n.length,r&&(l+=rs(r)),l+=n;u=t[e],n=u+"",r=lt-n.length,r&&(l+=rs(r))}else if(u===0)return"0";for(;u%10===0;)u/=10;return l+u}var la=(function(){function t(n,i){var l,u=0,d=n.length;for(n=n.slice();d--;)l=n[d]*i+u,n[d]=l%Ut|0,u=l/Ut|0;return u&&n.unshift(u),n}function e(n,i,l,u){var d,f;if(l!=u)f=l>u?1:-1;else for(d=f=0;d<l;d++)if(n[d]!=i[d]){f=n[d]>i[d]?1:-1;break}return f}function r(n,i,l){for(var u=0;l--;)n[l]-=u,u=n[l]<i[l]?1:0,n[l]=u*Ut+n[l]-i[l];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,l,u){var d,f,h,p,g,x,w,S,C,N,A,j,E,_,R,k,D,I,z=n.constructor,V=n.s==i.s?1:-1,P=n.d,$=i.d;if(!n.s)return new z(n);if(!i.s)throw Error(an+"Division by zero");for(f=n.e-i.e,D=$.length,R=P.length,w=new z(V),S=w.d=[],h=0;$[h]==(P[h]||0);)++h;if($[h]>(P[h]||0)&&--f,l==null?j=l=z.precision:u?j=l+(_t(n)-_t(i))+1:j=l,j<0)return new z(0);if(j=j/lt+2|0,h=0,D==1)for(p=0,$=$[0],j++;(h<R||p)&&j--;h++)E=p*Ut+(P[h]||0),S[h]=E/$|0,p=E%$|0;else{for(p=Ut/($[0]+1)|0,p>1&&($=t($,p),P=t(P,p),D=$.length,R=P.length),_=D,C=P.slice(0,D),N=C.length;N<D;)C[N++]=0;I=$.slice(),I.unshift(0),k=$[0],$[1]>=Ut/2&&++k;do p=0,d=e($,C,D,N),d<0?(A=C[0],D!=N&&(A=A*Ut+(C[1]||0)),p=A/k|0,p>1?(p>=Ut&&(p=Ut-1),g=t($,p),x=g.length,N=C.length,d=e(g,C,x,N),d==1&&(p--,r(g,D<x?I:$,x))):(p==0&&(d=p=1),g=$.slice()),x=g.length,x<N&&g.unshift(0),r(C,g,N),d==-1&&(N=C.length,d=e($,C,D,N),d<1&&(p++,r(C,D<N?I:$,N))),N=C.length):d===0&&(p++,C=[0]),S[h++]=p,d&&C[0]?C[N++]=P[_]||0:(C=[P[_]],N=1);while((_++<R||C[0]!==void 0)&&j--)}return S[0]||S.shift(),w.e=f,at(w,u?l+_t(w)+1:l)}})();function I2(t,e){var r,n,i,l,u,d,f=0,h=0,p=t.constructor,g=p.precision;if(_t(t)>16)throw Error(Ky+_t(t));if(!t.s)return new p(Mr);for(dt=!1,d=g,u=new p(.03125);t.abs().gte(.1);)t=t.times(u),h+=5;for(n=Math.log(Bs(2,h))/Math.LN10*2+5|0,d+=n,r=i=l=new p(Mr),p.precision=d;;){if(i=at(i.times(t),d),r=r.times(++f),u=l.plus(la(i,r,d)),kn(u.d).slice(0,d)===kn(l.d).slice(0,d)){for(;h--;)l=at(l.times(l),d);return p.precision=g,e==null?(dt=!0,at(l,g)):l}l=u}}function _t(t){for(var e=t.e*lt,r=t.d[0];r>=10;r/=10)e++;return e}function Ep(t,e,r){if(e>t.LN10.sd())throw dt=!0,r&&(t.precision=r),Error(an+"LN10 precision limit exceeded");return at(new t(t.LN10),e)}function rs(t){for(var e="";t--;)e+="0";return e}function Hl(t,e){var r,n,i,l,u,d,f,h,p,g=1,x=10,w=t,S=w.d,C=w.constructor,N=C.precision;if(w.s<1)throw Error(an+(w.s?"NaN":"-Infinity"));if(w.eq(Mr))return new C(0);if(e==null?(dt=!1,h=N):h=e,w.eq(10))return e==null&&(dt=!0),Ep(C,h);if(h+=x,C.precision=h,r=kn(S),n=r.charAt(0),l=_t(w),Math.abs(l)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)w=w.times(t),r=kn(w.d),n=r.charAt(0),g++;l=_t(w),n>1?(w=new C("0."+r),l++):w=new C(n+"."+r.slice(1))}else return f=Ep(C,h+2,N).times(l+""),w=Hl(new C(n+"."+r.slice(1)),h-x).plus(f),C.precision=N,e==null?(dt=!0,at(w,N)):w;for(d=u=w=la(w.minus(Mr),w.plus(Mr),h),p=at(w.times(w),h),i=3;;){if(u=at(u.times(p),h),f=d.plus(la(u,new C(i),h)),kn(f.d).slice(0,h)===kn(d.d).slice(0,h))return d=d.times(2),l!==0&&(d=d.plus(Ep(C,h+2,N).times(l+""))),d=la(d,new C(g),h),C.precision=N,e==null?(dt=!0,at(d,N)):d;d=f,i+=2}}function YS(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=So(r/lt),t.d=[],n=(r+1)%lt,r<0&&(n+=lt),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=lt;n<i;)t.d.push(+e.slice(n,n+=lt));e=e.slice(n),n=lt-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),dt&&(t.e>vd||t.e<-vd))throw Error(Ky+r)}else t.s=0,t.e=0,t.d=[0];return t}function at(t,e,r){var n,i,l,u,d,f,h,p,g=t.d;for(u=1,l=g[0];l>=10;l/=10)u++;if(n=e-u,n<0)n+=lt,i=e,h=g[p=0];else{if(p=Math.ceil((n+1)/lt),l=g.length,p>=l)return t;for(h=l=g[p],u=1;l>=10;l/=10)u++;n%=lt,i=n-lt+u}if(r!==void 0&&(l=Bs(10,u-i-1),d=h/l%10|0,f=e<0||g[p+1]!==void 0||h%l,f=r<4?(d||f)&&(r==0||r==(t.s<0?3:2)):d>5||d==5&&(r==4||f||r==6&&(n>0?i>0?h/Bs(10,u-i):0:g[p-1])%10&1||r==(t.s<0?8:7))),e<1||!g[0])return f?(l=_t(t),g.length=1,e=e-l-1,g[0]=Bs(10,(lt-e%lt)%lt),t.e=So(-e/lt)||0):(g.length=1,g[0]=t.e=t.s=0),t;if(n==0?(g.length=p,l=1,p--):(g.length=p+1,l=Bs(10,lt-n),g[p]=i>0?(h/Bs(10,u-i)%Bs(10,i)|0)*l:0),f)for(;;)if(p==0){(g[0]+=l)==Ut&&(g[0]=1,++t.e);break}else{if(g[p]+=l,g[p]!=Ut)break;g[p--]=0,l=1}for(n=g.length;g[--n]===0;)g.pop();if(dt&&(t.e>vd||t.e<-vd))throw Error(Ky+_t(t));return t}function P2(t,e){var r,n,i,l,u,d,f,h,p,g,x=t.constructor,w=x.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new x(t),dt?at(e,w):e;if(f=t.d,g=e.d,n=e.e,h=t.e,f=f.slice(),u=h-n,u){for(p=u<0,p?(r=f,u=-u,d=g.length):(r=g,n=h,d=f.length),i=Math.max(Math.ceil(w/lt),d)+2,u>i&&(u=i,r.length=1),r.reverse(),i=u;i--;)r.push(0);r.reverse()}else{for(i=f.length,d=g.length,p=i<d,p&&(d=i),i=0;i<d;i++)if(f[i]!=g[i]){p=f[i]<g[i];break}u=0}for(p&&(r=f,f=g,g=r,e.s=-e.s),d=f.length,i=g.length-d;i>0;--i)f[d++]=0;for(i=g.length;i>u;){if(f[--i]<g[i]){for(l=i;l&&f[--l]===0;)f[l]=Ut-1;--f[l],f[i]+=Ut}f[i]-=g[i]}for(;f[--d]===0;)f.pop();for(;f[0]===0;f.shift())--n;return f[0]?(e.d=f,e.e=n,dt?at(e,w):e):new x(0)}function ai(t,e,r){var n,i=_t(t),l=kn(t.d),u=l.length;return e?(r&&(n=r-u)>0?l=l.charAt(0)+"."+l.slice(1)+rs(n):u>1&&(l=l.charAt(0)+"."+l.slice(1)),l=l+(i<0?"e":"e+")+i):i<0?(l="0."+rs(-i-1)+l,r&&(n=r-u)>0&&(l+=rs(n))):i>=u?(l+=rs(i+1-u),r&&(n=r-i-1)>0&&(l=l+"."+rs(n))):((n=i+1)<u&&(l=l.slice(0,n)+"."+l.slice(n)),r&&(n=r-u)>0&&(i+1===u&&(l+="."),l+=rs(n))),t.s<0?"-"+l:l}function GS(t,e){if(t.length>e)return t.length=e,!0}function L2(t){var e,r,n;function i(l){var u=this;if(!(u instanceof i))return new i(l);if(u.constructor=i,l instanceof i){u.s=l.s,u.e=l.e,u.d=(l=l.d)?l.slice():l;return}if(typeof l=="number"){if(l*0!==0)throw Error(Js+l);if(l>0)u.s=1;else if(l<0)l=-l,u.s=-1;else{u.s=0,u.e=0,u.d=[0];return}if(l===~~l&&l<1e7){u.e=0,u.d=[l];return}return YS(u,l.toString())}else if(typeof l!="string")throw Error(Js+l);if(l.charCodeAt(0)===45?(l=l.slice(1),u.s=-1):u.s=1,dP.test(l))YS(u,l);else throw Error(Js+l)}if(i.prototype=Ce,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=L2,i.config=i.set=mP,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function mP(t){if(!t||typeof t!="object")throw Error(an+"Object expected");var e,r,n,i=["precision",1,wo,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(So(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(Js+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Js+r+": "+n);return this}var Wy=L2(uP);Mr=new Wy(1);const Je=Wy;var fP=t=>t,F2={},U2=t=>t===F2,XS=t=>function e(){return arguments.length===0||arguments.length===1&&U2(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},$2=(t,e)=>t===1?e:XS(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var l=n.filter(u=>u!==F2).length;return l>=t?e(...n):$2(t-l,XS(function(){for(var u=arguments.length,d=new Array(u),f=0;f<u;f++)d[f]=arguments[f];var h=n.map(p=>U2(p)?d.shift():p);return e(...h,...d)}))}),tm=t=>$2(t.length,t),$g=(t,e)=>{for(var r=[],n=t;n<e;++n)r[n-t]=n;return r},hP=tm((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(r=>e[r]).map(t)),pP=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return fP;var i=r.reverse(),l=i[0],u=i.slice(1);return function(){return u.reduce((d,f)=>f(d),l(...arguments))}},zg=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),z2=t=>{var e=null,r=null;return function(){for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return e&&i.every((u,d)=>{var f;return u===((f=e)===null||f===void 0?void 0:f[d])})||(e=i,r=t(...i)),r}};function B2(t){var e;return t===0?e=1:e=Math.floor(new Je(t).abs().log(10).toNumber())+1,e}function q2(t,e,r){for(var n=new Je(t),i=0,l=[];n.lt(e)&&i<1e5;)l.push(n.toNumber()),n=n.add(r),i++;return l}tm((t,e,r)=>{var n=+t,i=+e;return n+r*(i-n)});tm((t,e,r)=>{var n=e-+t;return n=n||1/0,(r-t)/n});tm((t,e,r)=>{var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});var H2=t=>{var[e,r]=t,[n,i]=[e,r];return e>r&&([n,i]=[r,e]),[n,i]},V2=(t,e,r)=>{if(t.lte(0))return new Je(0);var n=B2(t.toNumber()),i=new Je(10).pow(n),l=t.div(i),u=n!==1?.05:.1,d=new Je(Math.ceil(l.div(u).toNumber())).add(r).mul(u),f=d.mul(i);return e?new Je(f.toNumber()):new Je(Math.ceil(f.toNumber()))},gP=(t,e,r)=>{var n=new Je(1),i=new Je(t);if(!i.isint()&&r){var l=Math.abs(t);l<1?(n=new Je(10).pow(B2(t)-1),i=new Je(Math.floor(i.div(n).toNumber())).mul(n)):l>1&&(i=new Je(Math.floor(t)))}else t===0?i=new Je(Math.floor((e-1)/2)):r||(i=new Je(Math.floor(t)));var u=Math.floor((e-1)/2),d=pP(hP(f=>i.add(new Je(f-u).mul(n)).toNumber()),$g);return d(0,e)},Y2=function(e,r,n,i){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(n-1)))return{step:new Je(0),tickMin:new Je(0),tickMax:new Je(0)};var u=V2(new Je(r).sub(e).div(n-1),i,l),d;e<=0&&r>=0?d=new Je(0):(d=new Je(e).add(r).div(2),d=d.sub(new Je(d).mod(u)));var f=Math.ceil(d.sub(e).div(u).toNumber()),h=Math.ceil(new Je(r).sub(d).div(u).toNumber()),p=f+h+1;return p>n?Y2(e,r,n,i,l+1):(p<n&&(h=r>0?h+(n-p):h,f=r>0?f:f+(n-p)),{step:u,tickMin:d.sub(new Je(f).mul(u)),tickMax:d.add(new Je(h).mul(u))})};function yP(t){var[e,r]=t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(n,2),[u,d]=H2([e,r]);if(u===-1/0||d===1/0){var f=d===1/0?[u,...$g(0,n-1).map(()=>1/0)]:[...$g(0,n-1).map(()=>-1/0),d];return e>r?zg(f):f}if(u===d)return gP(u,n,i);var{step:h,tickMin:p,tickMax:g}=Y2(u,d,l,i,0),x=q2(p,g.add(new Je(.1).mul(h)),h);return e>r?zg(x):x}function xP(t,e){var[r,n]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[l,u]=H2([r,n]);if(l===-1/0||u===1/0)return[r,n];if(l===u)return[l];var d=Math.max(e,2),f=V2(new Je(u).sub(l).div(d-1),i,0),h=[...q2(new Je(l),new Je(u),f),u];return i===!1&&(h=h.map(p=>Math.round(p))),r>n?zg(h):h}var vP=z2(yP),bP=z2(xP),wP=t=>t.rootProps.barCategoryGap,rm=t=>t.rootProps.stackOffset,Qy=t=>t.options.chartName,G2=t=>t.rootProps.syncId,SP=t=>t.rootProps.syncMethod,X2=t=>t.options.eventEmitter,ea={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Or={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},nm=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},NP={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ea.angleAxisId,includeHidden:!1,name:void 0,reversed:ea.reversed,scale:ea.scale,tick:ea.tick,tickCount:void 0,ticks:void 0,type:ea.type,unit:void 0},CP={allowDataOverflow:Or.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Or.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Or.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Or.scale,tick:Or.tick,tickCount:Or.tickCount,ticks:void 0,type:Or.type,unit:void 0},jP={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:ea.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ea.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ea.scale,tick:ea.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},AP={allowDataOverflow:Or.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Or.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Or.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Or.scale,tick:Or.tick,tickCount:Or.tickCount,ticks:void 0,type:"category",unit:void 0},Zy=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?jP:NP,Jy=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?AP:CP,am=t=>t.polarOptions,e0=me([va,ba,Wt],iO),K2=me([am,e0],(t,e)=>{if(t!=null)return ti(t.innerRadius,e,0)}),W2=me([am,e0],(t,e)=>{if(t!=null)return ti(t.outerRadius,e,e*.8)}),DP=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:r}=t;return[e,r]},Q2=me([am],DP);me([Zy,Q2],nm);var Z2=me([e0,K2,W2],(t,e,r)=>{if(!(t==null||e==null||r==null))return[e,r]});me([Jy,Z2],nm);var J2=me([st,am,K2,W2,va,ba],(t,e,r,n,i,l)=>{if(!(t!=="centric"&&t!=="radial"||e==null||r==null||n==null)){var{cx:u,cy:d,startAngle:f,endAngle:h}=e;return{cx:ti(u,i,i/2),cy:ti(d,l,l/2),innerRadius:r,outerRadius:n,startAngle:f,endAngle:h,clockWise:!1}}}),Rt=(t,e)=>e,sm=(t,e,r)=>r;function t0(t){return t==null?void 0:t.id}var Pt=t=>{var e=st(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},No=t=>t.tooltip.settings.axisId,Qt=t=>{var e=Pt(t),r=No(t);return nc(t,e,r)},eA=me([Qt],t=>t==null?void 0:t.dataKey);function tA(t,e,r){var{chartData:n=[]}=e,{allowDuplicatedCategory:i,dataKey:l}=r,u=new Map;return t.forEach(d=>{var f,h=(f=d.data)!==null&&f!==void 0?f:n;if(!(h==null||h.length===0)){var p=t0(d);h.forEach((g,x)=>{var w=l==null||i?x:String(dr(g,l,null)),S=dr(g,d.dataKey,0),C;u.has(w)?C=u.get(w):C={},Object.assign(C,{[p]:S}),u.set(w,C)})}}),Array.from(u.values())}function r0(t){return t.stackId!=null&&t.dataKey!=null}function KS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function bd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KS(Object(r),!0).forEach(function(n){TP(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function TP(t,e,r){return(e=EP(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function EP(t){var e=_P(t,"string");return typeof e=="symbol"?e:e+""}function _P(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Bg=[0,"auto"],rA={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},RP=(t,e)=>t.cartesianAxis.xAxis[e],Sa=(t,e)=>{var r=RP(t,e);return r??rA},kr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Bg,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Ql},nA=(t,e)=>t.cartesianAxis.yAxis[e],Na=(t,e)=>{var r=nA(t,e);return r??kr},kP={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},n0=(t,e)=>{var r=t.cartesianAxis.zAxis[e];return r??kP},Cr=(t,e,r)=>{switch(e){case"xAxis":return Sa(t,r);case"yAxis":return Na(t,r);case"zAxis":return n0(t,r);case"angleAxis":return Zy(t,r);case"radiusAxis":return Jy(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},OP=(t,e,r)=>{switch(e){case"xAxis":return Sa(t,r);case"yAxis":return Na(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},nc=(t,e,r)=>{switch(e){case"xAxis":return Sa(t,r);case"yAxis":return Na(t,r);case"angleAxis":return Zy(t,r);case"radiusAxis":return Jy(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},aA=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function sA(t,e){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===e;case"yAxis":return"yAxisId"in r&&r.yAxisId===e;case"zAxis":return"zAxisId"in r&&r.zAxisId===e;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===e;default:return!1}}}var iA=t=>t.graphicalItems.cartesianItems,MP=me([Rt,sm],sA),oA=(t,e,r)=>t.filter(r).filter(n=>(e==null?void 0:e.includeHidden)===!0?!0:!n.hide),ac=me([iA,Cr,MP],oA),lA=me([ac],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(r0)),cA=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),uA=me([ac],cA),dA=t=>t.map(e=>e.data).filter(Boolean).flat(1),IP=me([ac],dA),mA=(t,e)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=e;return t.length>0?t:r.slice(n,i+1)},a0=me([IP,Xy],mA),fA=(t,e,r)=>(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:dr(n,e.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>t.map(i=>({value:dr(i,n)}))):t.map(n=>({value:n})),im=me([a0,Cr,ac],fA);function hA(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function di(t){return t.filter(e=>co(e)||e instanceof Date).map(Number).filter(e=>Fr(e)===!1)}function PP(t,e,r){return!r||typeof e!="number"||Fr(e)?[]:r.length?di(r.flatMap(n=>{var i=dr(t,n.dataKey),l,u;if(Array.isArray(i)?[l,u]=i:l=u=i,!(!mr(l)||!mr(u)))return[e-l,e+u]})):[]}var LP=me([lA,Xy,Qt],tA),pA=(t,e,r)=>{var n={},i=e.reduce((l,u)=>(u.stackId==null||(l[u.stackId]==null&&(l[u.stackId]=[]),l[u.stackId].push(u)),l),n);return Object.fromEntries(Object.entries(i).map(l=>{var[u,d]=l,f=d.map(t0);return[u,{stackedData:wO(t,f,r),graphicalItems:d}]}))},qg=me([LP,lA,rm],pA),gA=(t,e,r)=>{var{dataStartIndex:n,dataEndIndex:i}=e;if(r!=="zAxis"){var l=jO(t,n,i);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},FP=me([qg,ps,Rt],gA),yA=(t,e,r,n,i)=>r.length>0?t.flatMap(l=>r.flatMap(u=>{var d,f,h=(d=n[u.id])===null||d===void 0?void 0:d.filter(g=>hA(i,g)),p=dr(l,(f=e.dataKey)!==null&&f!==void 0?f:u.dataKey);return{value:p,errorDomain:PP(l,p,h)}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(l=>({value:dr(l,e.dataKey),errorDomain:[]})):t.map(l=>({value:l,errorDomain:[]})),om=t=>t.errorBars,xA=(t,e,r)=>t.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>hA(r,n));me([uA,om,Rt],xA);var UP=me([a0,Cr,uA,om,Rt],yA);function $P(t){var{value:e}=t;if(co(e)||e instanceof Date)return e}var WS=t=>{var e=t.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=di(e);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},zP=(t,e,r)=>{var n=t.map($P).filter(i=>i!=null);return r&&(e.dataKey==null||e.allowDuplicatedCategory&&VC(n))?Zj(0,t.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},s0=t=>{var e;if(t==null||!("domain"in t))return Bg;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var r=di(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:Bg},wd=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var l=i.flat(),u=Math.min(...l),d=Math.max(...l);return[u,d]}},vA=t=>t.referenceElements.dots,Co=(t,e,r)=>t.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===r:n.yAxisId===r),BP=me([vA,Rt,sm],Co),bA=t=>t.referenceElements.areas,qP=me([bA,Rt,sm],Co),wA=t=>t.referenceElements.lines,HP=me([wA,Rt,sm],Co),SA=(t,e)=>{var r=di(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},VP=me(BP,Rt,SA),NA=(t,e)=>{var r=di(t.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},YP=me([qP,Rt],NA),CA=(t,e)=>{var r=di(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},GP=me(HP,Rt,CA),XP=me(VP,GP,YP,(t,e,r)=>wd(t,r,e)),KP=me([Cr],s0),jA=(t,e,r,n,i,l,u)=>{var d=lP(e,t.allowDataOverflow);if(d!=null)return d;var f=l==="vertical"&&u==="xAxis"||l==="horizontal"&&u==="yAxis",h=f?wd(r,i,WS(n)):wd(i,WS(n));return cP(e,h,t.allowDataOverflow)},WP=me([Cr,KP,FP,UP,XP,st,Rt],jA),QP=[0,1],AA=(t,e,r,n,i,l,u)=>{if(!((t==null||r==null||r.length===0)&&u===void 0)){var{dataKey:d,type:f}=t,h=xa(e,l);return h&&d==null?Zj(0,r.length):f==="category"?zP(n,t,h):i==="expand"?QP:u}},i0=me([Cr,st,a0,im,rm,Rt,WP],AA),DA=(t,e,r,n,i)=>{if(t!=null){var{scale:l,type:u}=t;if(l==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":u==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":u==="category"?"band":"linear";if(typeof l=="string"){var d="scale".concat(hy(l));return d in _l?d:"point"}}},sc=me([Cr,st,aA,Qy,Rt],DA);function ZP(t){if(t!=null){if(t in _l)return _l[t]();var e="scale".concat(hy(t));if(e in _l)return _l[e]()}}function o0(t,e,r,n){if(!(r==null||n==null)){if(typeof t.scale=="function")return t.scale.copy().domain(r).range(n);var i=ZP(e);if(i!=null){var l=i.domain(r).range(n);return yO(l),l}}}var TA=(t,e,r)=>{var n=s0(e);if(!(r!=="auto"&&r!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&yo(t))return vP(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&yo(t))return bP(t,e.tickCount,e.allowDecimals)}},l0=me([i0,nc,sc],TA),EA=(t,e,r,n)=>{if(n!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&yo(e)&&Array.isArray(r)&&r.length>0){var i=e[0],l=r[0],u=e[1],d=r[r.length-1];return[Math.min(i,l),Math.max(u,d)]}return e},JP=me([Cr,i0,l0,Rt],EA),eL=me(im,Cr,(t,e)=>{if(!(!e||e.type!=="number")){var r=1/0,n=Array.from(di(t.map(d=>d.value))).sort((d,f)=>d-f);if(n.length<2)return 1/0;var i=n[n.length-1]-n[0];if(i===0)return 1/0;for(var l=0;l<n.length-1;l++){var u=n[l+1]-n[l];r=Math.min(r,u)}return r/i}}),_A=me(eL,st,wP,Wt,(t,e,r,n)=>n,(t,e,r,n,i)=>{if(!mr(t))return 0;var l=e==="vertical"?n.height:n.width;if(i==="gap")return t*l/2;if(i==="no-gap"){var u=ti(r,t*l),d=t*l/2;return d-u-(d-u)/l*u}return 0}),tL=(t,e)=>{var r=Sa(t,e);return r==null||typeof r.padding!="string"?0:_A(t,"xAxis",e,r.padding)},rL=(t,e)=>{var r=Na(t,e);return r==null||typeof r.padding!="string"?0:_A(t,"yAxis",e,r.padding)},nL=me(Sa,tL,(t,e)=>{var r,n;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((r=i.left)!==null&&r!==void 0?r:0)+e,right:((n=i.right)!==null&&n!==void 0?n:0)+e}}),aL=me(Na,rL,(t,e)=>{var r,n;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((r=i.top)!==null&&r!==void 0?r:0)+e,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+e}}),sL=me([Wt,nL,Xd,Gd,(t,e,r)=>r],(t,e,r,n,i)=>{var{padding:l}=n;return i?[l.left,r.width-l.right]:[t.left+e.left,t.left+t.width-e.right]}),iL=me([Wt,st,aL,Xd,Gd,(t,e,r)=>r],(t,e,r,n,i,l)=>{var{padding:u}=i;return l?[n.height-u.bottom,u.top]:e==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),ic=(t,e,r,n)=>{var i;switch(e){case"xAxis":return sL(t,r,n);case"yAxis":return iL(t,r,n);case"zAxis":return(i=n0(t,r))===null||i===void 0?void 0:i.range;case"angleAxis":return Q2(t);case"radiusAxis":return Z2(t,r);default:return}},RA=me([Cr,ic],nm),oc=me([Cr,sc,JP,RA],o0);me([ac,om,Rt],xA);function kA(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var lm=(t,e)=>e,cm=(t,e,r)=>r,oL=me(Vd,lm,cm,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(kA)),lL=me(Yd,lm,cm,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(kA)),OA=(t,e)=>({width:t.width,height:e.height}),cL=(t,e)=>{var r=typeof e.width=="number"?e.width:Ql;return{width:r,height:t.height}};me(Wt,Sa,OA);var uL=(t,e,r)=>{switch(e){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},dL=(t,e,r)=>{switch(e){case"left":return t.left;case"right":return r-t.right;default:return 0}},mL=me(ba,Wt,oL,lm,cm,(t,e,r,n,i)=>{var l={},u;return r.forEach(d=>{var f=OA(e,d);u==null&&(u=uL(e,n,t));var h=n==="top"&&!i||n==="bottom"&&i;l[d.id]=u-Number(h)*f.height,u+=(h?-1:1)*f.height}),l}),fL=me(va,Wt,lL,lm,cm,(t,e,r,n,i)=>{var l={},u;return r.forEach(d=>{var f=cL(e,d);u==null&&(u=dL(e,n,t));var h=n==="left"&&!i||n==="right"&&i;l[d.id]=u-Number(h)*f.width,u+=(h?-1:1)*f.width}),l}),hL=(t,e)=>{var r=Sa(t,e);if(r!=null)return mL(t,r.orientation,r.mirror)};me([Wt,Sa,hL,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var i=r==null?void 0:r[n];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}});var pL=(t,e)=>{var r=Na(t,e);if(r!=null)return fL(t,r.orientation,r.mirror)},gL=me([Wt,Na,pL,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var i=r==null?void 0:r[n];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),yL=me(Wt,Na,(t,e)=>{var r=typeof e.width=="number"?e.width:Ql;return{width:r,height:t.height}}),MA=(t,e,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:l,dataKey:u}=r,d=xa(t,n),f=e.map(h=>h.value);if(u&&d&&l==="category"&&i&&VC(f))return f}},c0=me([st,im,Cr,Rt],MA),IA=(t,e,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:l}=r,u=xa(t,n);if(u&&(i==="number"||l!=="auto"))return e.map(d=>d.value)}},u0=me([st,im,nc,Rt],IA),QS=me([st,OP,sc,oc,c0,u0,ic,l0,Rt],(t,e,r,n,i,l,u,d,f)=>{if(e==null)return null;var h=xa(t,f);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:f,categoricalDomain:l,duplicateDomain:i,isCategorical:h,niceTicks:d,range:u,realScaleType:r,scale:n}}),xL=(t,e,r,n,i,l,u,d,f)=>{if(!(e==null||n==null)){var h=xa(t,f),{type:p,ticks:g,tickCount:x}=e,w=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,S=p==="category"&&n.bandwidth?n.bandwidth()/w:0;S=f==="angleAxis"&&l!=null&&l.length>=2?Rn(l[0]-l[1])*2*S:S;var C=g||i;if(C){var N=C.map((A,j)=>{var E=u?u.indexOf(A):A;return{index:j,coordinate:n(E)+S,value:A,offset:S}});return N.filter(A=>!Fr(A.coordinate))}return h&&d?d.map((A,j)=>({coordinate:n(A)+S,value:A,index:j,offset:S})):n.ticks?n.ticks(x).map(A=>({coordinate:n(A)+S,value:A,offset:S})):n.domain().map((A,j)=>({coordinate:n(A)+S,value:u?u[A]:A,index:j,offset:S}))}},vL=me([st,nc,sc,oc,l0,ic,c0,u0,Rt],xL),bL=(t,e,r,n,i,l,u)=>{if(!(e==null||r==null||n==null||n[0]===n[1])){var d=xa(t,u),{tickCount:f}=e,h=0;return h=u==="angleAxis"&&(n==null?void 0:n.length)>=2?Rn(n[0]-n[1])*2*h:h,d&&l?l.map((p,g)=>({coordinate:r(p)+h,value:p,index:g,offset:h})):r.ticks?r.ticks(f).map(p=>({coordinate:r(p)+h,value:p,offset:h})):r.domain().map((p,g)=>({coordinate:r(p)+h,value:i?i[p]:p,index:g,offset:h}))}},PA=me([st,nc,oc,ic,c0,u0,Rt],bL),LA=me(Cr,oc,(t,e)=>{if(!(t==null||e==null))return bd(bd({},t),{},{scale:e})}),wL=me([Cr,sc,i0,RA],o0);me((t,e,r)=>n0(t,r),wL,(t,e)=>{if(!(t==null||e==null))return bd(bd({},t),{},{scale:e})});var SL=me([st,Vd,Yd],(t,e,r)=>{switch(t){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),FA=t=>t.options.defaultTooltipEventType,UA=t=>t.options.validateTooltipEventTypes;function $A(t,e,r){if(t==null)return e;var n=t?"axis":"item";return r==null?e:r.includes(n)?n:e}function zA(t,e){var r=FA(t),n=UA(t);return $A(e,r,n)}var BA=(t,e)=>{var r,n=Number(e);if(!(Fr(n)||e==null))return n>=0?t==null||(r=t[n])===null||r===void 0?void 0:r.value:void 0},NL=t=>t.tooltip.settings,as={active:!1,index:null,dataKey:void 0,coordinate:void 0},CL={itemInteraction:{click:as,hover:as},axisInteraction:{click:as,hover:as},keyboardInteraction:as,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},qA=zr({name:"tooltip",initialState:CL,reducers:{addTooltipEntrySettings(t,e){t.tooltipItemPayloads.push(e.payload)},removeTooltipEntrySettings(t,e){var r=oa(t).tooltipItemPayloads.indexOf(e.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:jL,removeTooltipEntrySettings:AL,setTooltipSettingsState:PB,setActiveMouseOverItemIndex:DL,mouseLeaveItem:LB,mouseLeaveChart:HA,setActiveClickItemIndex:FB,setMouseOverAxisIndex:VA,setMouseClickAxisIndex:TL,setSyncInteraction:ZS,setKeyboardInteraction:Hg}=qA.actions,EL=qA.reducer;function JS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Fu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JS(Object(r),!0).forEach(function(n){_L(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _L(t,e,r){return(e=RL(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RL(t){var e=kL(t,"string");return typeof e=="symbol"?e:e+""}function kL(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function OL(t,e,r){return e==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function ML(t){return t.index!=null}var YA=(t,e,r,n)=>{if(e==null)return as;var i=OL(t,e,r);if(i==null)return as;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var l=t.settings.active===!0;if(ML(i)){if(l)return Fu(Fu({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return Fu(Fu({},as),{},{coordinate:i.coordinate})},d0=(t,e)=>{var r=t==null?void 0:t.index;if(r==null)return null;var n=Number(r);if(!mr(n))return r;var i=0,l=1/0;return e.length>0&&(l=e.length-1),String(Math.max(i,Math.min(n,l)))},GA=(t,e,r,n,i,l,u,d)=>{if(!(l==null||d==null)){var f=u[0],h=f==null?void 0:d(f.positions,l);if(h!=null)return h;var p=i==null?void 0:i[Number(l)];if(p)switch(r){case"horizontal":return{x:p.coordinate,y:(n.top+e)/2};default:return{x:(n.left+t)/2,y:p.coordinate}}}},XA=(t,e,r,n)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return r==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&n!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(l=>{var u;return((u=l.settings)===null||u===void 0?void 0:u.dataKey)===i})},lc=t=>t.options.tooltipPayloadSearcher,cc=t=>t.tooltip;function eN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function tN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eN(Object(r),!0).forEach(function(n){IL(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function IL(t,e,r){return(e=PL(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PL(t){var e=LL(t,"string");return typeof e=="symbol"?e:e+""}function LL(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FL(t,e){return t??e}var KA=(t,e,r,n,i,l,u)=>{if(!(e==null||l==null)){var{chartData:d,computedData:f,dataStartIndex:h,dataEndIndex:p}=r,g=[];return t.reduce((x,w)=>{var S,{dataDefinedOnItem:C,settings:N}=w,A=FL(C,d),j=Array.isArray(A)?Uj(A,h,p):A,E=(S=N==null?void 0:N.dataKey)!==null&&S!==void 0?S:n,_=N==null?void 0:N.nameKey,R;if(n&&Array.isArray(j)&&!Array.isArray(j[0])&&u==="axis"?R=YC(j,n,i):R=l(j,e,f,_),Array.isArray(R))R.forEach(D=>{var I=tN(tN({},N),{},{name:D.name,unit:D.unit,color:void 0,fill:void 0});x.push(Y1({tooltipEntrySettings:I,dataKey:D.dataKey,payload:D.payload,value:dr(D.payload,D.dataKey),name:D.name}))});else{var k;x.push(Y1({tooltipEntrySettings:N,dataKey:E,payload:R,value:dr(R,E),name:(k=dr(R,_))!==null&&k!==void 0?k:N==null?void 0:N.name}))}return x},g)}},m0=me([Qt,st,aA,Qy,Pt],DA),UL=me([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),$L=me([Pt,No],sA),uc=me([UL,Qt,$L],oA),zL=me([uc],t=>t.filter(r0)),BL=me([uc],dA),jo=me([BL,ps],mA),qL=me([zL,ps,Qt],tA),f0=me([jo,Qt,uc],fA),HL=me([Qt],s0),VL=me([uc],t=>t.filter(r0)),YL=me([qL,VL,rm],pA),GL=me([YL,ps,Pt],gA),XL=me([uc],cA),KL=me([jo,Qt,XL,om,Pt],yA),WL=me([vA,Pt,No],Co),QL=me([WL,Pt],SA),ZL=me([bA,Pt,No],Co),JL=me([ZL,Pt],NA),eF=me([wA,Pt,No],Co),tF=me([eF,Pt],CA),rF=me([QL,tF,JL],wd),nF=me([Qt,HL,GL,KL,rF,st,Pt],jA),WA=me([Qt,st,jo,f0,rm,Pt,nF],AA),aF=me([WA,Qt,m0],TA),sF=me([Qt,WA,aF,Pt],EA),QA=t=>{var e=Pt(t),r=No(t),n=!1;return ic(t,e,r,n)},ZA=me([Qt,QA],nm),iF=me([Qt,m0,sF,ZA],o0),oF=me([st,f0,Qt,Pt],MA),lF=me([st,f0,Qt,Pt],IA),cF=(t,e,r,n,i,l,u,d)=>{if(e){var{type:f}=e,h=xa(t,d);if(n){var p=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,g=f==="category"&&n.bandwidth?n.bandwidth()/p:0;return g=d==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?Rn(i[0]-i[1])*2*g:g,h&&u?u.map((x,w)=>({coordinate:n(x)+g,value:x,index:w,offset:g})):n.domain().map((x,w)=>({coordinate:n(x)+g,value:l?l[x]:x,index:w,offset:g}))}}},gs=me([st,Qt,m0,iF,QA,oF,lF,Pt],cF),h0=me([FA,UA,NL],(t,e,r)=>$A(r.shared,t,e)),JA=t=>t.tooltip.settings.trigger,p0=t=>t.tooltip.settings.defaultIndex,um=me([cc,h0,JA,p0],YA),Vl=me([um,jo],d0),eD=me([gs,Vl],BA),uF=me([um],t=>{if(t)return t.dataKey}),tD=me([cc,h0,JA,p0],XA),dF=me([va,ba,st,Wt,gs,p0,tD,lc],GA),mF=me([um,dF],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),fF=me([um],t=>t.active),hF=me([tD,Vl,ps,eA,eD,lc,h0],KA),pF=me([hF],t=>{if(t!=null){var e=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(e))}}),gF=()=>Ve(Qy),g0=(t,e)=>e,rD=(t,e,r)=>r,y0=(t,e,r,n)=>n,yF=me(gs,t=>vy(t,e=>e.coordinate)),x0=me([cc,g0,rD,y0],YA),nD=me([x0,jo],d0),aD=me([cc,g0,rD,y0],XA),Sd=me([va,ba,st,Wt,gs,y0,aD,lc],GA);me([x0,Sd],(t,e)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:e});var xF=me(gs,nD,BA);me([aD,nD,ps,eA,xF,lc,g0],KA);me([x0],t=>({isActive:t.active,activeIndex:t.index}));var vF=(t,e,r,n,i,l,u,d)=>{if(!(!t||!e||!n||!i||!l)){var f=AO(t.chartX,t.chartY,e,r,d);if(f){var h=TO(f,e),p=pO(h,u,l,n,i),g=DO(e,l,p,f);return{activeIndex:String(p),activeCoordinate:g}}}},bF=b.createContext(null),_p={exports:{}},rN;function wF(){return rN||(rN=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(f,h,p){this.fn=f,this.context=h,this.once=p||!1}function l(f,h,p,g,x){if(typeof p!="function")throw new TypeError("The listener must be a function");var w=new i(p,g||f,x),S=r?r+h:h;return f._events[S]?f._events[S].fn?f._events[S]=[f._events[S],w]:f._events[S].push(w):(f._events[S]=w,f._eventsCount++),f}function u(f,h){--f._eventsCount===0?f._events=new n:delete f._events[h]}function d(){this._events=new n,this._eventsCount=0}d.prototype.eventNames=function(){var h=[],p,g;if(this._eventsCount===0)return h;for(g in p=this._events)e.call(p,g)&&h.push(r?g.slice(1):g);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},d.prototype.listeners=function(h){var p=r?r+h:h,g=this._events[p];if(!g)return[];if(g.fn)return[g.fn];for(var x=0,w=g.length,S=new Array(w);x<w;x++)S[x]=g[x].fn;return S},d.prototype.listenerCount=function(h){var p=r?r+h:h,g=this._events[p];return g?g.fn?1:g.length:0},d.prototype.emit=function(h,p,g,x,w,S){var C=r?r+h:h;if(!this._events[C])return!1;var N=this._events[C],A=arguments.length,j,E;if(N.fn){switch(N.once&&this.removeListener(h,N.fn,void 0,!0),A){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,p),!0;case 3:return N.fn.call(N.context,p,g),!0;case 4:return N.fn.call(N.context,p,g,x),!0;case 5:return N.fn.call(N.context,p,g,x,w),!0;case 6:return N.fn.call(N.context,p,g,x,w,S),!0}for(E=1,j=new Array(A-1);E<A;E++)j[E-1]=arguments[E];N.fn.apply(N.context,j)}else{var _=N.length,R;for(E=0;E<_;E++)switch(N[E].once&&this.removeListener(h,N[E].fn,void 0,!0),A){case 1:N[E].fn.call(N[E].context);break;case 2:N[E].fn.call(N[E].context,p);break;case 3:N[E].fn.call(N[E].context,p,g);break;case 4:N[E].fn.call(N[E].context,p,g,x);break;default:if(!j)for(R=1,j=new Array(A-1);R<A;R++)j[R-1]=arguments[R];N[E].fn.apply(N[E].context,j)}}return!0},d.prototype.on=function(h,p,g){return l(this,h,p,g,!1)},d.prototype.once=function(h,p,g){return l(this,h,p,g,!0)},d.prototype.removeListener=function(h,p,g,x){var w=r?r+h:h;if(!this._events[w])return this;if(!p)return u(this,w),this;var S=this._events[w];if(S.fn)S.fn===p&&(!x||S.once)&&(!g||S.context===g)&&u(this,w);else{for(var C=0,N=[],A=S.length;C<A;C++)(S[C].fn!==p||x&&!S[C].once||g&&S[C].context!==g)&&N.push(S[C]);N.length?this._events[w]=N.length===1?N[0]:N:u(this,w)}return this},d.prototype.removeAllListeners=function(h){var p;return h?(p=r?r+h:h,this._events[p]&&u(this,p)):(this._events=new n,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=r,d.EventEmitter=d,t.exports=d})(_p)),_p.exports}var SF=wF();const NF=os(SF);var Nd=new NF,nN="recharts.syncEvent.tooltip",aN="recharts.syncEvent.brush";function CF(t,e){if(e){var r=Number.parseInt(e,10);if(!Fr(r))return t==null?void 0:t[r]}}var jF={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},sD=zr({name:"options",initialState:jF,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),AF=sD.reducer,{createEventEmitter:DF}=sD.actions,TF={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},iD=zr({name:"chartData",initialState:TF,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:r,endIndex:n}=e.payload;r!=null&&(t.dataStartIndex=r),n!=null&&(t.dataEndIndex=n)}}}),{setChartData:sN,setDataStartEndIndexes:EF,setComputedData:UB}=iD.actions,_F=iD.reducer,RF=["x","y"];function iN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ps(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iN(Object(r),!0).forEach(function(n){kF(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kF(t,e,r){return(e=OF(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OF(t){var e=MF(t,"string");return typeof e=="symbol"?e:e+""}function MF(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function IF(t,e){if(t==null)return{};var r,n,i=PF(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)r=l[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function PF(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var oD=()=>{};function LF(){var t=Ve(G2),e=Ve(X2),r=$r(),n=Ve(SP),i=Ve(gs),l=Gj(),u=Hj(),d=Ve(f=>f.rootProps.className);b.useEffect(()=>{if(t==null)return oD;var f=(h,p,g)=>{if(e!==g&&t===h){if(n==="index"){var x;if(u&&p!==null&&p!==void 0&&(x=p.payload)!==null&&x!==void 0&&x.coordinate){var w=p.payload.coordinate,{x:S,y:C}=w,N=IF(w,RF),A=Ps(Ps(Ps({},N),typeof S=="number"&&{x:Math.max(u.x,Math.min(S,u.x+u.width))}),typeof C=="number"&&{y:Math.max(u.y,Math.min(C,u.y+u.height))}),j=Ps(Ps({},p),{},{payload:Ps(Ps({},p.payload),{},{coordinate:A})});r(j)}else r(p);return}if(i!=null){var E;if(typeof n=="function"){var _={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},R=n(i,_);E=i[R]}else n==="value"&&(E=i.find(Q=>String(Q.value)===p.payload.label));var{coordinate:k}=p.payload;if(E==null||p.payload.active===!1||k==null||u==null){r(ZS({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:D,y:I}=k,z=Math.min(D,u.x+u.width),V=Math.min(I,u.y+u.height),P={x:l==="horizontal"?E.coordinate:z,y:l==="horizontal"?V:E.coordinate},$=ZS({active:p.payload.active,coordinate:P,dataKey:p.payload.dataKey,index:String(E.index),label:p.payload.label});r($)}}};return Nd.on(nN,f),()=>{Nd.off(nN,f)}},[d,r,e,t,n,i,l,u])}function FF(){var t=Ve(G2),e=Ve(X2),r=$r();b.useEffect(()=>{if(t==null)return oD;var n=(i,l,u)=>{e!==u&&t===i&&r(EF(l))};return Nd.on(aN,n),()=>{Nd.off(aN,n)}},[r,e,t])}function UF(){var t=$r();b.useEffect(()=>{t(DF())},[t]),LF(),FF()}var Rp={},kp={},Op={},oN;function $F(){return oN||(oN=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n,{signal:i,edges:l}={}){let u,d=null;const f=l!=null&&l.includes("leading"),h=l==null||l.includes("trailing"),p=()=>{d!==null&&(r.apply(u,d),u=void 0,d=null)},g=()=>{h&&p(),C()};let x=null;const w=()=>{x!=null&&clearTimeout(x),x=setTimeout(()=>{x=null,g()},n)},S=()=>{x!==null&&(clearTimeout(x),x=null)},C=()=>{S(),u=void 0,d=null},N=()=>{p()},A=function(...j){if(i!=null&&i.aborted)return;u=this,d=j;const E=x==null;w(),f&&E&&p()};return A.schedule=w,A.cancel=C,A.flush=N,i==null||i.addEventListener("abort",C,{once:!0}),A}t.debounce=e})(Op)),Op}var lN;function zF(){return lN||(lN=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$F();function r(n,i=0,l={}){typeof l!="object"&&(l={});const{leading:u=!1,trailing:d=!0,maxWait:f}=l,h=Array(2);u&&(h[0]="leading"),d&&(h[1]="trailing");let p,g=null;const x=e.debounce(function(...C){p=n.apply(this,C),g=null},i,{edges:h}),w=function(...C){return f!=null&&(g===null&&(g=Date.now()),Date.now()-g>=f)?(p=n.apply(this,C),g=Date.now(),x.cancel(),x.schedule(),p):(x.apply(this,C),p)},S=()=>(x.flush(),p);return w.cancel=x.cancel,w.flush=S,w}t.debounce=r})(kp)),kp}var cN;function BF(){return cN||(cN=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zF();function r(n,i=0,l={}){const{leading:u=!0,trailing:d=!0}=l;return e.debounce(n,i,{leading:u,maxWait:i,trailing:d})}t.throttle=r})(Rp)),Rp}var Mp,uN;function qF(){return uN||(uN=1,Mp=BF().throttle),Mp}var HF=qF();const VF=os(HF);var kl=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),l=2;l<n;l++)i[l-2]=arguments[l]};function dN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ip(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dN(Object(r),!0).forEach(function(n){YF(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function YF(t,e,r){return(e=GF(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GF(t){var e=XF(t,"string");return typeof e=="symbol"?e:e+""}function XF(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lD=b.forwardRef((t,e)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:i="100%",height:l="100%",minWidth:u=0,minHeight:d,maxHeight:f,children:h,debounce:p=0,id:g,className:x,onResize:w,style:S={}}=t,C=b.useRef(null),N=b.useRef();N.current=w,b.useImperativeHandle(e,()=>C.current);var[A,j]=b.useState({containerWidth:n.width,containerHeight:n.height}),E=b.useCallback((R,k)=>{j(D=>{var I=Math.round(R),z=Math.round(k);return D.containerWidth===I&&D.containerHeight===z?D:{containerWidth:I,containerHeight:z}})},[]);b.useEffect(()=>{var R=z=>{var V,{width:P,height:$}=z[0].contentRect;E(P,$),(V=N.current)===null||V===void 0||V.call(N,P,$)};p>0&&(R=VF(R,p,{trailing:!0,leading:!1}));var k=new ResizeObserver(R),{width:D,height:I}=C.current.getBoundingClientRect();return E(D,I),k.observe(C.current),()=>{k.disconnect()}},[E,p]);var _=b.useMemo(()=>{var{containerWidth:R,containerHeight:k}=A;if(R<0||k<0)return null;kl(Hs(i)||Hs(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,l),kl(!r||r>0,"The aspect(%s) must be greater than zero.",r);var D=Hs(i)?R:i,I=Hs(l)?k:l;return r&&r>0&&(D?I=D/r:I&&(D=I*r),f&&I>f&&(I=f)),kl(D>0||I>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,D,I,i,l,u,d,r),b.Children.map(h,z=>b.cloneElement(z,{width:D,height:I,style:Ip({width:D,height:I},z.props.style)}))},[r,h,l,f,d,u,A,i]);return b.createElement("div",{id:g?"".concat(g):void 0,className:Kt("recharts-responsive-container",x),style:Ip(Ip({},S),{},{width:i,height:l,minWidth:u,minHeight:d,maxHeight:f}),ref:C},b.createElement("div",{style:{width:0,height:0,overflow:"visible"}},_))});function KF(t,e,r){return(e=WF(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function WF(t){var e=QF(t,"string");return typeof e=="symbol"?e:e+""}function QF(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class ZF{constructor(e){KF(this,"cache",new Map),this.maxSize=e}get(e){var r=this.cache.get(e);return r!==void 0&&(this.cache.delete(e),this.cache.set(e,r)),r}set(e,r){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function mN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function JF(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mN(Object(r),!0).forEach(function(n){e8(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function e8(t,e,r){return(e=t8(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function t8(t){var e=r8(t,"string");return typeof e=="symbol"?e:e+""}function r8(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var n8={cacheSize:2e3,enableCache:!0},cD=JF({},n8),fN=new ZF(cD.cacheSize),a8={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},hN="recharts_measurement_span";function s8(t,e){var r=e.fontSize||"",n=e.fontFamily||"",i=e.fontWeight||"",l=e.fontStyle||"",u=e.letterSpacing||"",d=e.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(l,"|").concat(u,"|").concat(d)}var pN=(t,e)=>{try{var r=document.getElementById(hN);r||(r=document.createElement("span"),r.setAttribute("id",hN),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,a8,e),r.textContent="".concat(t);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Ol=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Zl.isSsr)return{width:0,height:0};if(!cD.enableCache)return pN(e,r);var n=s8(e,r),i=fN.get(n);if(i)return i;var l=pN(e,r);return fN.set(n,l),l},gN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,yN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,i8=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,o8=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,uD={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},l8=Object.keys(uD),no="NaN";function c8(t,e){return t*uD[e]}class br{static parse(e){var r,[,n,i]=(r=o8.exec(e))!==null&&r!==void 0?r:[];return new br(parseFloat(n),i??"")}constructor(e,r){this.num=e,this.unit=r,this.num=e,this.unit=r,Fr(e)&&(this.unit=""),r!==""&&!i8.test(r)&&(this.num=NaN,this.unit=""),l8.includes(r)&&(this.num=c8(e,r),this.unit="px")}add(e){return this.unit!==e.unit?new br(NaN,""):new br(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new br(NaN,""):new br(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new br(NaN,""):new br(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new br(NaN,""):new br(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Fr(this.num)}}function dD(t){if(t.includes(no))return no;for(var e=t;e.includes("*")||e.includes("/");){var r,[,n,i,l]=(r=gN.exec(e))!==null&&r!==void 0?r:[],u=br.parse(n??""),d=br.parse(l??""),f=i==="*"?u.multiply(d):u.divide(d);if(f.isNaN())return no;e=e.replace(gN,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,[,p,g,x]=(h=yN.exec(e))!==null&&h!==void 0?h:[],w=br.parse(p??""),S=br.parse(x??""),C=g==="+"?w.add(S):w.subtract(S);if(C.isNaN())return no;e=e.replace(yN,C.toString())}return e}var xN=/\(([^()]*)\)/;function u8(t){for(var e=t,r;(r=xN.exec(e))!=null;){var[,n]=r;e=e.replace(xN,dD(n))}return e}function d8(t){var e=t.replace(/\s+/g,"");return e=u8(e),e=dD(e),e}function m8(t){try{return d8(t)}catch{return no}}function Pp(t){var e=m8(t.slice(5,-1));return e===no?"":e}var f8=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],h8=["dx","dy","angle","className","breakAll"];function Vg(){return Vg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vg.apply(null,arguments)}function vN(t,e){if(t==null)return{};var r,n,i=p8(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)r=l[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function p8(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var mD=/[ \f\n\r\t\v\u2028\u2029]+/,fD=t=>{var{children:e,breakAll:r,style:n}=t;try{var i=[];tr(e)||(r?i=e.toString().split(""):i=e.toString().split(mD));var l=i.map(d=>({word:d,width:Ol(d,n).width})),u=r?0:Ol(" ",n).width;return{wordsWithComputedWidth:l,spaceWidth:u}}catch{return null}},g8=(t,e,r,n,i)=>{var{maxLines:l,children:u,style:d,breakAll:f}=t,h=Fe(l),p=u,g=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P.reduce(($,Q)=>{var{word:re,width:ee}=Q,U=$[$.length-1];if(U&&(n==null||i||U.width+ee+r<Number(n)))U.words.push(re),U.width+=ee+r;else{var J={words:[re],width:ee};$.push(J)}return $},[])},x=g(e),w=V=>V.reduce((P,$)=>P.width>$.width?P:$);if(!h||i)return x;var S=x.length>l||w(x).width>Number(n);if(!S)return x;for(var C="…",N=V=>{var P=p.slice(0,V),$=fD({breakAll:f,style:d,children:P+C}).wordsWithComputedWidth,Q=g($),re=Q.length>l||w(Q).width>Number(n);return[re,Q]},A=0,j=p.length-1,E=0,_;A<=j&&E<=p.length-1;){var R=Math.floor((A+j)/2),k=R-1,[D,I]=N(k),[z]=N(R);if(!D&&!z&&(A=R+1),D&&z&&(j=R-1),!D&&z){_=I;break}E++}return _||x},bN=t=>{var e=tr(t)?[]:t.toString().split(mD);return[{words:e}]},y8=t=>{var{width:e,scaleToFit:r,children:n,style:i,breakAll:l,maxLines:u}=t;if((e||r)&&!Zl.isSsr){var d,f,h=fD({breakAll:l,children:n,style:i});if(h){var{wordsWithComputedWidth:p,spaceWidth:g}=h;d=p,f=g}else return bN(n);return g8({breakAll:l,children:n,maxLines:u,style:i},d,f,e,r)}return bN(n)},wN="#808080",v0=b.forwardRef((t,e)=>{var{x:r=0,y:n=0,lineHeight:i="1em",capHeight:l="0.71em",scaleToFit:u=!1,textAnchor:d="start",verticalAnchor:f="end",fill:h=wN}=t,p=vN(t,f8),g=b.useMemo(()=>y8({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:u,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,u,p.style,p.width]),{dx:x,dy:w,angle:S,className:C,breakAll:N}=p,A=vN(p,h8);if(!co(r)||!co(n)||g.length===0)return null;var j=r+(Fe(x)?x:0),E=n+(Fe(w)?w:0),_;switch(f){case"start":_=Pp("calc(".concat(l,")"));break;case"middle":_=Pp("calc(".concat((g.length-1)/2," * -").concat(i," + (").concat(l," / 2))"));break;default:_=Pp("calc(".concat(g.length-1," * -").concat(i,")"));break}var R=[];if(u){var k=g[0].width,{width:D}=p;R.push("scale(".concat(Fe(D)?D/k:1,")"))}return S&&R.push("rotate(".concat(S,", ").concat(j,", ").concat(E,")")),R.length&&(A.transform=R.join(" ")),b.createElement("text",Vg({},gn(A,!0),{ref:e,x:j,y:E,className:Kt("recharts-text",C),textAnchor:d,fill:h.includes("url")?wN:h}),g.map((I,z)=>{var V=I.words.join(N?"":" ");return b.createElement("tspan",{x:j,dy:z===0?_:i,key:"".concat(V,"-").concat(z)},V)}))});v0.displayName="Text";var x8=["labelRef"];function v8(t,e){if(t==null)return{};var r,n,i=b8(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)r=l[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function b8(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function SN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function St(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SN(Object(r),!0).forEach(function(n){w8(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function w8(t,e,r){return(e=S8(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function S8(t){var e=N8(t,"string");return typeof e=="symbol"?e:e+""}function N8(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ta(){return ta=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ta.apply(null,arguments)}var hD=b.createContext(null),C8=t=>{var{x:e,y:r,width:n,height:i,children:l}=t,u=b.useMemo(()=>({x:e,y:r,width:n,height:i}),[e,r,n,i]);return b.createElement(hD.Provider,{value:u},l)},pD=()=>{var t=b.useContext(hD),e=Hj();return t||e},j8=b.createContext(null),A8=()=>{var t=b.useContext(j8),e=Ve(J2);return t||e},D8=t=>{var{value:e,formatter:r}=t,n=tr(t.children)?e:t.children;return typeof r=="function"?r(n):n},b0=t=>t!=null&&typeof t=="function",T8=(t,e)=>{var r=Rn(e-t),n=Math.min(Math.abs(e-t),360);return r*n},E8=(t,e,r,n,i)=>{var{offset:l,className:u}=t,{cx:d,cy:f,innerRadius:h,outerRadius:p,startAngle:g,endAngle:x,clockWise:w}=i,S=(h+p)/2,C=T8(g,x),N=C>=0?1:-1,A,j;switch(e){case"insideStart":A=g+N*l,j=w;break;case"insideEnd":A=x-N*l,j=!w;break;case"end":A=x+N*l,j=w;break;default:throw new Error("Unsupported position ".concat(e))}j=C<=0?j:!j;var E=fo(d,f,S,A),_=fo(d,f,S,A+(j?1:-1)*359),R="M".concat(E.x,",").concat(E.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(j?0:1,`,
    `).concat(_.x,",").concat(_.y),k=tr(t.id)?Pl("recharts-radial-line-"):t.id;return b.createElement("text",ta({},n,{dominantBaseline:"central",className:Kt("recharts-radial-bar-label",u)}),b.createElement("defs",null,b.createElement("path",{id:k,d:R})),b.createElement("textPath",{xlinkHref:"#".concat(k)},r))},_8=(t,e,r)=>{var{cx:n,cy:i,innerRadius:l,outerRadius:u,startAngle:d,endAngle:f}=t,h=(d+f)/2;if(r==="outside"){var{x:p,y:g}=fo(n,i,u+e,h);return{x:p,y:g,textAnchor:p>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var x=(l+u)/2,{x:w,y:S}=fo(n,i,x,h);return{x:w,y:S,textAnchor:"middle",verticalAnchor:"middle"}},gD=t=>"cx"in t&&Fe(t.cx),R8=(t,e)=>{var{parentViewBox:r,offset:n,position:i}=t,l;r!=null&&!gD(r)&&(l=r);var{x:u,y:d,width:f,height:h}=e,p=h>=0?1:-1,g=p*n,x=p>0?"end":"start",w=p>0?"start":"end",S=f>=0?1:-1,C=S*n,N=S>0?"end":"start",A=S>0?"start":"end";if(i==="top"){var j={x:u+f/2,y:d-p*n,textAnchor:"middle",verticalAnchor:x};return St(St({},j),l?{height:Math.max(d-l.y,0),width:f}:{})}if(i==="bottom"){var E={x:u+f/2,y:d+h+g,textAnchor:"middle",verticalAnchor:w};return St(St({},E),l?{height:Math.max(l.y+l.height-(d+h),0),width:f}:{})}if(i==="left"){var _={x:u-C,y:d+h/2,textAnchor:N,verticalAnchor:"middle"};return St(St({},_),l?{width:Math.max(_.x-l.x,0),height:h}:{})}if(i==="right"){var R={x:u+f+C,y:d+h/2,textAnchor:A,verticalAnchor:"middle"};return St(St({},R),l?{width:Math.max(l.x+l.width-R.x,0),height:h}:{})}var k=l?{width:f,height:h}:{};return i==="insideLeft"?St({x:u+C,y:d+h/2,textAnchor:A,verticalAnchor:"middle"},k):i==="insideRight"?St({x:u+f-C,y:d+h/2,textAnchor:N,verticalAnchor:"middle"},k):i==="insideTop"?St({x:u+f/2,y:d+g,textAnchor:"middle",verticalAnchor:w},k):i==="insideBottom"?St({x:u+f/2,y:d+h-g,textAnchor:"middle",verticalAnchor:x},k):i==="insideTopLeft"?St({x:u+C,y:d+g,textAnchor:A,verticalAnchor:w},k):i==="insideTopRight"?St({x:u+f-C,y:d+g,textAnchor:N,verticalAnchor:w},k):i==="insideBottomLeft"?St({x:u+C,y:d+h-g,textAnchor:A,verticalAnchor:x},k):i==="insideBottomRight"?St({x:u+f-C,y:d+h-g,textAnchor:N,verticalAnchor:x},k):i&&typeof i=="object"&&(Fe(i.x)||Hs(i.x))&&(Fe(i.y)||Hs(i.y))?St({x:u+ti(i.x,f),y:d+ti(i.y,h),textAnchor:"end",verticalAnchor:"end"},k):St({x:u+f/2,y:d+h/2,textAnchor:"middle",verticalAnchor:"middle"},k)},k8={offset:5};function ns(t){var e=ms(t,k8),{viewBox:r,position:n,value:i,children:l,content:u,className:d="",textBreakAll:f,labelRef:h}=e,p=A8(),g=pD(),x=n==="center"?g:p??g,w=r||x;if(!w||tr(i)&&tr(l)&&!b.isValidElement(u)&&typeof u!="function")return null;var S=St(St({},e),{},{viewBox:w});if(b.isValidElement(u)){var{labelRef:C}=S,N=v8(S,x8);return b.cloneElement(u,N)}var A;if(typeof u=="function"){if(A=b.createElement(u,S),b.isValidElement(A))return A}else A=D8(e);var j=gD(w),E=gn(e,!0);if(j&&(n==="insideStart"||n==="insideEnd"||n==="end"))return E8(e,n,A,E,w);var _=j?_8(w,e.offset,e.position):R8(e,w);return b.createElement(v0,ta({ref:h,className:Kt("recharts-label",d)},E,_,{breakAll:f}),A)}ns.displayName="Label";var O8=(t,e,r)=>{if(!t)return null;var n={viewBox:e,labelRef:r};return t===!0?b.createElement(ns,ta({key:"label-implicit"},n)):co(t)?b.createElement(ns,ta({key:"label-implicit",value:t},n)):b.isValidElement(t)?t.type===ns?b.cloneElement(t,St({key:"label-implicit"},n)):b.createElement(ns,ta({key:"label-implicit",content:t},n)):b0(t)?b.createElement(ns,ta({key:"label-implicit",content:t},n)):t&&typeof t=="object"?b.createElement(ns,ta({},t,{key:"label-implicit"},n)):null};function M8(t){var{label:e}=t,r=pD();return O8(e,r)||null}var Lp={},Fp={},NN;function I8(){return NN||(NN=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r[r.length-1]}t.last=e})(Fp)),Fp}var Up={},CN;function P8(){return CN||(CN=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=e})(Up)),Up}var jN;function L8(){return jN||(jN=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=I8(),r=P8(),n=uj();function i(l){if(n.isArrayLike(l))return e.last(r.toArray(l))}t.last=i})(Lp)),Lp}var $p,AN;function F8(){return AN||(AN=1,$p=L8().last),$p}var U8=F8();const $8=os(U8);var z8=["valueAccessor"],B8=["dataKey","clockWise","id","textBreakAll"];function Cd(){return Cd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cd.apply(null,arguments)}function DN(t,e){if(t==null)return{};var r,n,i=q8(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)r=l[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function q8(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var H8=t=>Array.isArray(t.value)?$8(t.value):t.value,yD=b.createContext(void 0),V8=yD.Provider,xD=b.createContext(void 0);xD.Provider;function Y8(){return b.useContext(yD)}function G8(){return b.useContext(xD)}function Hu(t){var{valueAccessor:e=H8}=t,r=DN(t,z8),{dataKey:n,clockWise:i,id:l,textBreakAll:u}=r,d=DN(r,B8),f=Y8(),h=G8(),p=f||h;return!p||!p.length?null:b.createElement(fa,{className:"recharts-label-list"},p.map((g,x)=>{var w,S=tr(n)?e(g,x):dr(g&&g.payload,n),C=tr(l)?{}:{id:"".concat(l,"-").concat(x)};return b.createElement(ns,Cd({},gn(g,!0),d,C,{fill:(w=r.fill)!==null&&w!==void 0?w:g.fill,parentViewBox:g.parentViewBox,value:S,textBreakAll:u,viewBox:g.viewBox,key:"label-".concat(x),index:x}))}))}Hu.displayName="LabelList";function X8(t){var{label:e}=t;return e?e===!0?b.createElement(Hu,{key:"labelList-implicit"}):b.isValidElement(e)||b0(e)?b.createElement(Hu,{key:"labelList-implicit",content:e}):typeof e=="object"?b.createElement(Hu,Cd({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function Yg(){return Yg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Yg.apply(null,arguments)}var vD=t=>{var{cx:e,cy:r,r:n,className:i}=t,l=Kt("recharts-dot",i);return e===+e&&r===+r&&n===+n?b.createElement("circle",Yg({},ds(t),gy(t),{className:l,cx:e,cy:r,r:n})):null},K8={radiusAxis:{},angleAxis:{}},bD=zr({name:"polarAxis",initialState:K8,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:$B,removeRadiusAxis:zB,addAngleAxis:BB,removeAngleAxis:qB}=bD.actions,W8=bD.reducer;function Q8(t){var{fn:e,args:r}=t,n=$r(),i=bn();return b.useEffect(()=>{if(!i){var l=e(r);return n(jL(l)),()=>{n(AL(l))}}},[e,r,n,i]),null}var Z8=()=>{};function J8(t){var{legendPayload:e}=t,r=$r(),n=bn();return b.useEffect(()=>n?Z8:(r(YO(e)),()=>{r(GO(e))}),[r,n,e]),null}var zp,eU=()=>{var[t]=b.useState(()=>Pl("uid-"));return t},tU=(zp=N_.useId)!==null&&zp!==void 0?zp:eU;function rU(t,e){var r=tU();return e||(t?"".concat(t,"-").concat(r):r)}var nU=b.createContext(void 0),aU=t=>{var{id:e,type:r,children:n}=t,i=rU("recharts-".concat(r),e);return b.createElement(nU.Provider,{value:i},n(i))},sU={cartesianItems:[],polarItems:[]},wD=zr({name:"graphicalItems",initialState:sU,reducers:{addCartesianGraphicalItem(t,e){t.cartesianItems.push(e.payload)},replaceCartesianGraphicalItem(t,e){var{prev:r,next:n}=e.payload,i=oa(t).cartesianItems.indexOf(r);i>-1&&(t.cartesianItems[i]=n)},removeCartesianGraphicalItem(t,e){var r=oa(t).cartesianItems.indexOf(e.payload);r>-1&&t.cartesianItems.splice(r,1)},addPolarGraphicalItem(t,e){t.polarItems.push(e.payload)},removePolarGraphicalItem(t,e){var r=oa(t).polarItems.indexOf(e.payload);r>-1&&t.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:iU,replaceCartesianGraphicalItem:oU,removeCartesianGraphicalItem:lU,addPolarGraphicalItem:HB,removePolarGraphicalItem:VB}=wD.actions,cU=wD.reducer;function uU(t){var e=$r(),r=b.useRef(null);return b.useEffect(()=>{r.current===null?e(iU(t)):r.current!==t&&e(oU({prev:r.current,next:t})),r.current=t},[e,t]),b.useEffect(()=>()=>{r.current&&(e(lU(r.current)),r.current=null)},[e]),null}function TN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function EN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TN(Object(r),!0).forEach(function(n){dU(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dU(t,e,r){return(e=mU(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mU(t){var e=fU(t,"string");return typeof e=="symbol"?e:e+""}function fU(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hU={xAxis:{},yAxis:{},zAxis:{}},SD=zr({name:"cartesianAxis",initialState:hU,reducers:{addXAxis(t,e){t.xAxis[e.payload.id]=e.payload},removeXAxis(t,e){delete t.xAxis[e.payload.id]},addYAxis(t,e){t.yAxis[e.payload.id]=e.payload},removeYAxis(t,e){delete t.yAxis[e.payload.id]},addZAxis(t,e){t.zAxis[e.payload.id]=e.payload},removeZAxis(t,e){delete t.zAxis[e.payload.id]},updateYAxisWidth(t,e){var{id:r,width:n}=e.payload;t.yAxis[r]&&(t.yAxis[r]=EN(EN({},t.yAxis[r]),{},{width:n}))}}}),{addXAxis:YB,removeXAxis:GB,addYAxis:pU,removeYAxis:gU,addZAxis:XB,removeZAxis:KB,updateYAxisWidth:yU}=SD.actions,xU=SD.reducer,vU=me([Wt],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),bU=me([vU,va,ba],(t,e,r)=>{if(!(!t||e==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),w0=()=>Ve(bU),wU=()=>Ve(pF);function _N(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function RN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_N(Object(r),!0).forEach(function(n){SU(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_N(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function SU(t,e,r){return(e=NU(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NU(t){var e=CU(t,"string");return typeof e=="symbol"?e:e+""}function CU(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jU=t=>{var{point:e,childIndex:r,mainColor:n,activeDot:i,dataKey:l}=t;if(i===!1||e.x==null||e.y==null)return null;var u=RN(RN({index:r,dataKey:l,cx:e.x,cy:e.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},gn(i,!1)),gy(i)),d;return b.isValidElement(i)?d=b.cloneElement(i,u):typeof i=="function"?d=i(u):d=b.createElement(vD,u),b.createElement(fa,{className:"recharts-active-dot"},d)};function kN(t){var{points:e,mainColor:r,activeDot:n,itemDataKey:i}=t,l=Ve(Vl),u=wU();if(e==null||u==null)return null;var d=e.find(f=>u.includes(f.payload));return tr(d)?null:jU({point:d,childIndex:Number(l),mainColor:r,dataKey:i,activeDot:n})}var AU={},ND=zr({name:"errorBars",initialState:AU,reducers:{addErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]||(t[r]=[]),t[r].push(n)},replaceErrorBar:(t,e)=>{var{itemId:r,prev:n,next:i}=e.payload;t[r]&&(t[r]=t[r].map(l=>l.dataKey===n.dataKey&&l.direction===n.direction?i:l))},removeErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]&&(t[r]=t[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:WB,replaceErrorBar:QB,removeErrorBar:ZB}=ND.actions,DU=ND.reducer;function CD(t,e){var r,n,i=Ve(h=>Sa(h,t)),l=Ve(h=>Na(h,e)),u=(r=i==null?void 0:i.allowDataOverflow)!==null&&r!==void 0?r:rA.allowDataOverflow,d=(n=l==null?void 0:l.allowDataOverflow)!==null&&n!==void 0?n:kr.allowDataOverflow,f=u||d;return{needClip:f,needClipX:u,needClipY:d}}function TU(t){var{xAxisId:e,yAxisId:r,clipPathId:n}=t,i=w0(),{needClipX:l,needClipY:u,needClip:d}=CD(e,r);if(!d)return null;var{x:f,y:h,width:p,height:g}=i;return b.createElement("clipPath",{id:"clipPath-".concat(n)},b.createElement("rect",{x:l?f:f-p/2,y:u?h:h-g/2,width:l?p:p*2,height:u?g:g*2}))}var EU=t=>{var{chartData:e}=t,r=$r(),n=bn();return b.useEffect(()=>n?()=>{}:(r(sN(e)),()=>{r(sN(void 0))}),[e,r,n]),null},ON={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},jD=zr({name:"brush",initialState:ON,reducers:{setBrushSettings(t,e){return e.payload==null?ON:e.payload}}}),{setBrushSettings:JB}=jD.actions,_U=jD.reducer;function RU(t,e,r){return(e=kU(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kU(t){var e=OU(t,"string");return typeof e=="symbol"?e:e+""}function OU(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class S0{static create(e){return new S0(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(e)+l}default:return this.scale(e)}if(r){var u=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+u}return this.scale(e)}}isInRange(e){var r=this.range(),n=r[0],i=r[r.length-1];return n<=i?e>=n&&e<=i:e>=i&&e<=n}}RU(S0,"EPS",1e-4);function MU(t){return(t%180+180)%180}var IU=function(e){var{width:r,height:n}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=MU(i),u=l*Math.PI/180,d=Math.atan(n/r),f=u>d&&u<Math.PI-d?n/Math.sin(u):r/Math.cos(u);return Math.abs(f)},PU={dots:[],areas:[],lines:[]},AD=zr({name:"referenceElements",initialState:PU,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var r=oa(t).dots.findIndex(n=>n===e.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var r=oa(t).areas.findIndex(n=>n===e.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var r=oa(t).lines.findIndex(n=>n===e.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:eq,removeDot:tq,addArea:rq,removeArea:nq,addLine:aq,removeLine:sq}=AD.actions,LU=AD.reducer,FU=b.createContext(void 0),UU=t=>{var{children:e}=t,[r]=b.useState("".concat(Pl("recharts"),"-clip")),n=w0();if(n==null)return null;var{x:i,y:l,width:u,height:d}=n;return b.createElement(FU.Provider,{value:r},b.createElement("defs",null,b.createElement("clipPath",{id:r},b.createElement("rect",{x:i,y:l,height:d,width:u}))),e)};function jd(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function DD(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],i=0;i<t.length;i+=e)n.push(t[i]);return n}function $U(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return IU(n,r)}function zU(t,e,r){var n=r==="width",{x:i,y:l,width:u,height:d}=t;return e===1?{start:n?i:l,end:n?i+u:l+d}:{start:n?i+u:l+d,end:n?i:l}}function Ad(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var l=r();return t*(e-t*l/2-n)>=0&&t*(e+t*l/2-i)<=0}function BU(t,e){return DD(t,e+1)}function qU(t,e,r,n,i){for(var l=(n||[]).slice(),{start:u,end:d}=e,f=0,h=1,p=u,g=function(){var S=n==null?void 0:n[f];if(S===void 0)return{v:DD(n,h)};var C=f,N,A=()=>(N===void 0&&(N=r(S,C)),N),j=S.coordinate,E=f===0||Ad(t,j,A,p,d);E||(f=0,p=u,h+=1),E&&(p=j+t*(A()/2+i),f+=h)},x;h<=l.length;)if(x=g(),x)return x.v;return[]}function MN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Jt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MN(Object(r),!0).forEach(function(n){HU(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function HU(t,e,r){return(e=VU(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VU(t){var e=YU(t,"string");return typeof e=="symbol"?e:e+""}function YU(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GU(t,e,r,n,i){for(var l=(n||[]).slice(),u=l.length,{start:d}=e,{end:f}=e,h=function(x){var w=l[x],S,C=()=>(S===void 0&&(S=r(w,x)),S);if(x===u-1){var N=t*(w.coordinate+t*C()/2-f);l[x]=w=Jt(Jt({},w),{},{tickCoord:N>0?w.coordinate-N*t:w.coordinate})}else l[x]=w=Jt(Jt({},w),{},{tickCoord:w.coordinate});var A=Ad(t,w.tickCoord,C,d,f);A&&(f=w.tickCoord-t*(C()/2+i),l[x]=Jt(Jt({},w),{},{isShow:!0}))},p=u-1;p>=0;p--)h(p);return l}function XU(t,e,r,n,i,l){var u=(n||[]).slice(),d=u.length,{start:f,end:h}=e;if(l){var p=n[d-1],g=r(p,d-1),x=t*(p.coordinate+t*g/2-h);u[d-1]=p=Jt(Jt({},p),{},{tickCoord:x>0?p.coordinate-x*t:p.coordinate});var w=Ad(t,p.tickCoord,()=>g,f,h);w&&(h=p.tickCoord-t*(g/2+i),u[d-1]=Jt(Jt({},p),{},{isShow:!0}))}for(var S=l?d-1:d,C=function(j){var E=u[j],_,R=()=>(_===void 0&&(_=r(E,j)),_);if(j===0){var k=t*(E.coordinate-t*R()/2-f);u[j]=E=Jt(Jt({},E),{},{tickCoord:k<0?E.coordinate-k*t:E.coordinate})}else u[j]=E=Jt(Jt({},E),{},{tickCoord:E.coordinate});var D=Ad(t,E.tickCoord,R,f,h);D&&(f=E.tickCoord+t*(R()/2+i),u[j]=Jt(Jt({},E),{},{isShow:!0}))},N=0;N<S;N++)C(N);return u}function N0(t,e,r){var{tick:n,ticks:i,viewBox:l,minTickGap:u,orientation:d,interval:f,tickFormatter:h,unit:p,angle:g}=t;if(!i||!i.length||!n)return[];if(Fe(f)||Zl.isSsr){var x;return(x=BU(i,Fe(f)?f:0))!==null&&x!==void 0?x:[]}var w=[],S=d==="top"||d==="bottom"?"width":"height",C=p&&S==="width"?Ol(p,{fontSize:e,letterSpacing:r}):{width:0,height:0},N=(E,_)=>{var R=typeof h=="function"?h(E.value,_):E.value;return S==="width"?$U(Ol(R,{fontSize:e,letterSpacing:r}),C,g):Ol(R,{fontSize:e,letterSpacing:r})[S]},A=i.length>=2?Rn(i[1].coordinate-i[0].coordinate):1,j=zU(l,A,S);return f==="equidistantPreserveStart"?qU(A,j,N,i,u):(f==="preserveStart"||f==="preserveStartEnd"?w=XU(A,j,N,i,u,f==="preserveStartEnd"):w=GU(A,j,N,i,u),w.filter(E=>E.isShow))}var KU=t=>{var{ticks:e,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:l=0}=t,u=0;if(e){e.forEach(p=>{if(p){var g=p.getBoundingClientRect();g.width>u&&(u=g.width)}});var d=r?r.getBoundingClientRect().width:0,f=i+l,h=u+f+d+(r?n:0);return Math.round(h)}return 0},WU=["axisLine","width","height","className","hide","ticks"],QU=["viewBox"],ZU=["viewBox"];function Gg(t,e){if(t==null)return{};var r,n,i=JU(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)r=l[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function JU(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function si(){return si=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},si.apply(null,arguments)}function IN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Mt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IN(Object(r),!0).forEach(function(n){e7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function e7(t,e,r){return(e=t7(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function t7(t){var e=r7(t,"string");return typeof e=="symbol"?e:e+""}function r7(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var C0={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function n7(t){var{x:e,y:r,width:n,height:i,orientation:l,mirror:u,axisLine:d,otherSvgProps:f}=t;if(!d)return null;var h=Mt(Mt(Mt({},f),gn(d,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var p=+(l==="top"&&!u||l==="bottom"&&u);h=Mt(Mt({},h),{},{x1:e,y1:r+p*i,x2:e+n,y2:r+p*i})}else{var g=+(l==="left"&&!u||l==="right"&&u);h=Mt(Mt({},h),{},{x1:e+g*n,y1:r,x2:e+g*n,y2:r+i})}return b.createElement("line",si({},h,{className:Kt("recharts-cartesian-axis-line",Ld(d,"className"))}))}function a7(t,e,r,n,i,l,u,d,f){var h,p,g,x,w,S,C=d?-1:1,N=t.tickSize||u,A=Fe(t.tickCoord)?t.tickCoord:t.coordinate;switch(l){case"top":h=p=t.coordinate,x=r+ +!d*i,g=x-C*N,S=g-C*f,w=A;break;case"left":g=x=t.coordinate,p=e+ +!d*n,h=p-C*N,w=h-C*f,S=A;break;case"right":g=x=t.coordinate,p=e+ +d*n,h=p+C*N,w=h+C*f,S=A;break;default:h=p=t.coordinate,x=r+ +d*i,g=x+C*N,S=g+C*f,w=A;break}return{line:{x1:h,y1:g,x2:p,y2:x},tick:{x:w,y:S}}}function s7(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function i7(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function o7(t){var{option:e,tickProps:r,value:n}=t,i,l=Kt(r.className,"recharts-cartesian-axis-tick-value");if(b.isValidElement(e))i=b.cloneElement(e,Mt(Mt({},r),{},{className:l}));else if(typeof e=="function")i=e(Mt(Mt({},r),{},{className:l}));else{var u="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(u=Kt(u,e==null?void 0:e.className)),i=b.createElement(v0,si({},r,{className:u}),n)}return i}function l7(t){var{ticks:e=[],tick:r,tickLine:n,stroke:i,tickFormatter:l,unit:u,padding:d,tickTextProps:f,orientation:h,mirror:p,x:g,y:x,width:w,height:S,tickSize:C,tickMargin:N,fontSize:A,letterSpacing:j,getTicksConfig:E,events:_}=t,R=N0(Mt(Mt({},E),{},{ticks:e}),A,j),k=s7(h,p),D=i7(h,p),I=ds(E),z=gn(r,!1),V=Mt(Mt({},I),{},{fill:"none"},gn(n,!1)),P=R.map(($,Q)=>{var{line:re,tick:ee}=a7($,g,x,w,S,h,C,p,N),U=Mt(Mt(Mt(Mt({textAnchor:k,verticalAnchor:D},I),{},{stroke:"none",fill:i},z),ee),{},{index:Q,payload:$,visibleTicksCount:R.length,tickFormatter:l,padding:d},f);return b.createElement(fa,si({className:"recharts-cartesian-axis-tick",key:"tick-".concat($.value,"-").concat($.coordinate,"-").concat($.tickCoord)},Q4(_,$,Q)),n&&b.createElement("line",si({},V,re,{className:Kt("recharts-cartesian-axis-tick-line",Ld(n,"className"))})),r&&b.createElement(o7,{option:r,tickProps:U,value:"".concat(typeof l=="function"?l($.value,Q):$.value).concat(u||"")}))});return P.length>0?b.createElement("g",{className:"recharts-cartesian-axis-ticks"},P):null}var c7=b.forwardRef((t,e)=>{var{axisLine:r,width:n,height:i,className:l,hide:u,ticks:d}=t,f=Gg(t,WU),[h,p]=b.useState(""),[g,x]=b.useState(""),w=b.useRef([]);b.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var C;return KU({ticks:w.current,label:(C=t.labelRef)===null||C===void 0?void 0:C.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var S=b.useCallback(C=>{if(C){var N=C.getElementsByClassName("recharts-cartesian-axis-tick-value");w.current=Array.from(N);var A=N[0];if(A){var j=window.getComputedStyle(A),E=j.fontSize,_=j.letterSpacing;(E!==h||_!==g)&&(p(E),x(_))}}},[h,g]);return u||n!=null&&n<=0||i!=null&&i<=0?null:b.createElement(fa,{className:Kt("recharts-cartesian-axis",l),ref:S},b.createElement(n7,{x:t.x,y:t.y,width:n,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:r,otherSvgProps:ds(t)}),b.createElement(l7,{ticks:d,tick:t.tick,tickLine:t.tickLine,stroke:t.stroke,tickFormatter:t.tickFormatter,unit:t.unit,padding:t.padding,tickTextProps:t.tickTextProps,orientation:t.orientation,mirror:t.mirror,x:t.x,y:t.y,width:t.width,height:t.height,tickSize:t.tickSize,tickMargin:t.tickMargin,fontSize:h,letterSpacing:g,getTicksConfig:t,events:f}),b.createElement(C8,{x:t.x,y:t.y,width:t.width,height:t.height},b.createElement(M8,{label:t.label}),t.children))}),u7=b.memo(c7,(t,e)=>{var{viewBox:r}=t,n=Gg(t,QU),{viewBox:i}=e,l=Gg(e,ZU);return jd(r,i)&&jd(n,l)}),TD=b.forwardRef((t,e)=>{var r=ms(t,C0);return b.createElement(u7,si({},r,{ref:e}))});TD.displayName="CartesianAxis";var d7=["x1","y1","x2","y2","key"],m7=["offset"],f7=["xAxisId","yAxisId"],h7=["xAxisId","yAxisId"];function PN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function er(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PN(Object(r),!0).forEach(function(n){p7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function p7(t,e,r){return(e=g7(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g7(t){var e=y7(t,"string");return typeof e=="symbol"?e:e+""}function y7(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gs(){return Gs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gs.apply(null,arguments)}function Dd(t,e){if(t==null)return{};var r,n,i=x7(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)r=l[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function x7(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var v7=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:r,x:n,y:i,width:l,height:u,ry:d}=t;return b.createElement("rect",{x:n,y:i,ry:d,width:l,height:u,stroke:"none",fill:e,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function ED(t,e){var r;if(b.isValidElement(t))r=b.cloneElement(t,e);else if(typeof t=="function")r=t(e);else{var{x1:n,y1:i,x2:l,y2:u,key:d}=e,f=Dd(e,d7),h=ds(f),{offset:p}=h,g=Dd(h,m7);r=b.createElement("line",Gs({},g,{x1:n,y1:i,x2:l,y2:u,fill:"none",key:d}))}return r}function b7(t){var{x:e,width:r,horizontal:n=!0,horizontalPoints:i}=t;if(!n||!i||!i.length)return null;var{xAxisId:l,yAxisId:u}=t,d=Dd(t,f7),f=i.map((h,p)=>{var g=er(er({},d),{},{x1:e,y1:h,x2:e+r,y2:h,key:"line-".concat(p),index:p});return ED(n,g)});return b.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function w7(t){var{y:e,height:r,vertical:n=!0,verticalPoints:i}=t;if(!n||!i||!i.length)return null;var{xAxisId:l,yAxisId:u}=t,d=Dd(t,h7),f=i.map((h,p)=>{var g=er(er({},d),{},{x1:h,y1:e,x2:h,y2:e+r,key:"line-".concat(p),index:p});return ED(n,g)});return b.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function S7(t){var{horizontalFill:e,fillOpacity:r,x:n,y:i,width:l,height:u,horizontalPoints:d,horizontal:f=!0}=t;if(!f||!e||!e.length)return null;var h=d.map(g=>Math.round(g+i-i)).sort((g,x)=>g-x);i!==h[0]&&h.unshift(0);var p=h.map((g,x)=>{var w=!h[x+1],S=w?i+u-g:h[x+1]-g;if(S<=0)return null;var C=x%e.length;return b.createElement("rect",{key:"react-".concat(x),y:g,x:n,height:S,width:l,stroke:"none",fill:e[C],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function N7(t){var{vertical:e=!0,verticalFill:r,fillOpacity:n,x:i,y:l,width:u,height:d,verticalPoints:f}=t;if(!e||!r||!r.length)return null;var h=f.map(g=>Math.round(g+i-i)).sort((g,x)=>g-x);i!==h[0]&&h.unshift(0);var p=h.map((g,x)=>{var w=!h[x+1],S=w?i+u-g:h[x+1]-g;if(S<=0)return null;var C=x%r.length;return b.createElement("rect",{key:"react-".concat(x),x:g,y:l,width:S,height:d,stroke:"none",fill:r[C],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var C7=(t,e)=>{var{xAxis:r,width:n,height:i,offset:l}=t;return $j(N0(er(er(er({},C0),r),{},{ticks:zj(r),viewBox:{x:0,y:0,width:n,height:i}})),l.left,l.left+l.width,e)},j7=(t,e)=>{var{yAxis:r,width:n,height:i,offset:l}=t;return $j(N0(er(er(er({},C0),r),{},{ticks:zj(r),viewBox:{x:0,y:0,width:n,height:i}})),l.top,l.top+l.height,e)},A7={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function _D(t){var e=Vj(),r=Yj(),n=HO(),i=er(er({},ms(t,A7)),{},{x:Fe(t.x)?t.x:n.left,y:Fe(t.y)?t.y:n.top,width:Fe(t.width)?t.width:n.width,height:Fe(t.height)?t.height:n.height}),{xAxisId:l,yAxisId:u,x:d,y:f,width:h,height:p,syncWithTicks:g,horizontalValues:x,verticalValues:w}=i,S=bn(),C=Ve(z=>QS(z,"xAxis",l,S)),N=Ve(z=>QS(z,"yAxis",u,S));if(!Fe(h)||h<=0||!Fe(p)||p<=0||!Fe(d)||d!==+d||!Fe(f)||f!==+f)return null;var A=i.verticalCoordinatesGenerator||C7,j=i.horizontalCoordinatesGenerator||j7,{horizontalPoints:E,verticalPoints:_}=i;if((!E||!E.length)&&typeof j=="function"){var R=x&&x.length,k=j({yAxis:N?er(er({},N),{},{ticks:R?x:N.ticks}):void 0,width:e,height:r,offset:n},R?!0:g);kl(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(E=k)}if((!_||!_.length)&&typeof A=="function"){var D=w&&w.length,I=A({xAxis:C?er(er({},C),{},{ticks:D?w:C.ticks}):void 0,width:e,height:r,offset:n},D?!0:g);kl(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(_=I)}return b.createElement("g",{className:"recharts-cartesian-grid"},b.createElement(v7,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),b.createElement(S7,Gs({},i,{horizontalPoints:E})),b.createElement(N7,Gs({},i,{verticalPoints:_})),b.createElement(b7,Gs({},i,{offset:n,horizontalPoints:E,xAxis:C,yAxis:N})),b.createElement(w7,Gs({},i,{offset:n,verticalPoints:_,xAxis:C,yAxis:N})))}_D.displayName="CartesianGrid";var RD=(t,e,r,n)=>LA(t,"xAxis",e,n),kD=(t,e,r,n)=>PA(t,"xAxis",e,n),OD=(t,e,r,n)=>LA(t,"yAxis",r,n),MD=(t,e,r,n)=>PA(t,"yAxis",r,n),D7=me([st,RD,OD,kD,MD],(t,e,r,n,i)=>xa(t,"xAxis")?V1(e,n,!1):V1(r,i,!1)),T7=(t,e,r,n,i)=>i,ID=me([iA,T7],(t,e)=>t.filter(r=>r.type==="area").find(r=>r.id===e)),E7=(t,e,r,n,i)=>{var l,u=ID(t,e,r,n,i);if(u!=null){var d=st(t),f=xa(d,"xAxis"),h;if(f?h=qg(t,"yAxis",r,n):h=qg(t,"xAxis",e,n),h!=null){var{stackId:p}=u,g=t0(u);if(!(p==null||g==null)){var x=(l=h[p])===null||l===void 0?void 0:l.stackedData;return x==null?void 0:x.find(w=>w.key===g)}}}},_7=me([st,RD,OD,kD,MD,E7,Xy,D7,ID],(t,e,r,n,i,l,u,d,f)=>{var{chartData:h,dataStartIndex:p,dataEndIndex:g}=u;if(!(f==null||t!=="horizontal"&&t!=="vertical"||e==null||r==null||n==null||i==null||n.length===0||i.length===0||d==null)){var{data:x}=f,w;if(x&&x.length>0?w=x:w=h==null?void 0:h.slice(p,g+1),w!=null){var S=void 0;return Q7({layout:t,xAxis:e,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataStartIndex:p,areaSettings:f,stackedData:l,displayedData:w,chartBaseValue:S,bandSize:d})}}}),R7=["id"],k7=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function PD(t,e){if(t==null)return{};var r,n,i=O7(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)r=l[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function O7(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function LN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function aa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LN(Object(r),!0).forEach(function(n){M7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function M7(t,e,r){return(e=I7(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I7(t){var e=P7(t,"string");return typeof e=="symbol"?e:e+""}function P7(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ca(){return ca=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ca.apply(null,arguments)}function Td(t,e){return t&&t!=="none"?t:e}var L7=t=>{var{dataKey:e,name:r,stroke:n,fill:i,legendType:l,hide:u}=t;return[{inactive:u,dataKey:e,type:l,color:Td(n,i),value:Bj(r,e),payload:t}]};function F7(t){var{dataKey:e,data:r,stroke:n,strokeWidth:i,fill:l,name:u,hide:d,unit:f}=t;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:l,dataKey:e,nameKey:void 0,name:Bj(u,e),hide:d,type:t.tooltipType,color:Td(n,l),unit:f}}}var U7=(t,e)=>{var r;if(b.isValidElement(t))r=b.cloneElement(t,e);else if(typeof t=="function")r=t(e);else{var n=Kt("recharts-area-dot",typeof t!="boolean"?t.className:"");r=b.createElement(vD,ca({},e,{className:n}))}return r};function $7(t,e){return t==null?!1:e?!0:t.length===1}function z7(t){var{clipPathId:e,points:r,props:n}=t,{needClip:i,dot:l,dataKey:u}=n;if(!$7(r,l))return null;var d=XC(l),f=ds(n),h=gn(l,!0),p=r.map((x,w)=>{var S=aa(aa(aa({key:"dot-".concat(w),r:3},f),h),{},{index:w,cx:x.x,cy:x.y,dataKey:u,value:x.value,payload:x.payload,points:r});return U7(l,S)}),g={clipPath:i?"url(#clipPath-".concat(d?"":"dots-").concat(e,")"):void 0};return b.createElement(fa,ca({className:"recharts-area-dots"},g),p)}function B7(t){var{showLabels:e,children:r,points:n}=t,i=n.map(l=>{var u={x:l.x,y:l.y,width:0,height:0};return aa(aa({},u),{},{value:l.value,payload:l.payload,parentViewBox:void 0,viewBox:u,fill:void 0})});return b.createElement(V8,{value:e?i:null},r)}function FN(t){var{points:e,baseLine:r,needClip:n,clipPathId:i,props:l}=t,{layout:u,type:d,stroke:f,connectNulls:h,isRange:p}=l,{id:g}=l,x=PD(l,R7),w=ds(x);return b.createElement(b.Fragment,null,(e==null?void 0:e.length)>1&&b.createElement(fa,{clipPath:n?"url(#clipPath-".concat(i,")"):void 0},b.createElement(gp,ca({},w,{id:g,points:e,connectNulls:h,type:d,baseLine:r,layout:u,stroke:"none",className:"recharts-area-area"})),f!=="none"&&b.createElement(gp,ca({},w,{className:"recharts-area-curve",layout:u,type:d,connectNulls:h,fill:"none",points:e})),f!=="none"&&p&&b.createElement(gp,ca({},w,{className:"recharts-area-curve",layout:u,type:d,connectNulls:h,fill:"none",points:r}))),b.createElement(z7,{points:e,props:x,clipPathId:i}))}function q7(t){var{alpha:e,baseLine:r,points:n,strokeWidth:i}=t,l=n[0].y,u=n[n.length-1].y;if(!mr(l)||!mr(u))return null;var d=e*Math.abs(l-u),f=Math.max(...n.map(h=>h.x||0));return Fe(r)?f=Math.max(r,f):r&&Array.isArray(r)&&r.length&&(f=Math.max(...r.map(h=>h.x||0),f)),Fe(f)?b.createElement("rect",{x:0,y:l<u?l:l-d,width:f+(i?parseInt("".concat(i),10):1),height:Math.floor(d)}):null}function H7(t){var{alpha:e,baseLine:r,points:n,strokeWidth:i}=t,l=n[0].x,u=n[n.length-1].x;if(!mr(l)||!mr(u))return null;var d=e*Math.abs(l-u),f=Math.max(...n.map(h=>h.y||0));return Fe(r)?f=Math.max(r,f):r&&Array.isArray(r)&&r.length&&(f=Math.max(...r.map(h=>h.y||0),f)),Fe(f)?b.createElement("rect",{x:l<u?l:l-d,y:0,width:d,height:Math.floor(f+(i?parseInt("".concat(i),10):1))}):null}function V7(t){var{alpha:e,layout:r,points:n,baseLine:i,strokeWidth:l}=t;return r==="vertical"?b.createElement(q7,{alpha:e,points:n,baseLine:i,strokeWidth:l}):b.createElement(H7,{alpha:e,points:n,baseLine:i,strokeWidth:l})}function Y7(t){var{needClip:e,clipPathId:r,props:n,previousPointsRef:i,previousBaselineRef:l}=t,{points:u,baseLine:d,isAnimationActive:f,animationBegin:h,animationDuration:p,animationEasing:g,onAnimationStart:x,onAnimationEnd:w}=n,S=DM(n,"recharts-area-"),[C,N]=b.useState(!1),A=!C,j=b.useCallback(()=>{typeof w=="function"&&w(),N(!1)},[w]),E=b.useCallback(()=>{typeof x=="function"&&x(),N(!0)},[x]),_=i.current,R=l.current;return b.createElement(B7,{showLabels:A,points:u},n.children,b.createElement(AM,{animationId:S,begin:h,duration:p,isActive:f,easing:g,onAnimationEnd:j,onAnimationStart:E,key:S},k=>{if(_){var D=_.length/u.length,I=k===1?u:u.map((V,P)=>{var $=Math.floor(P*D);if(_[$]){var Q=_[$];return aa(aa({},V),{},{x:Qi(Q.x,V.x,k),y:Qi(Q.y,V.y,k)})}return V}),z;return Fe(d)?z=Qi(R,d,k):tr(d)||Fr(d)?z=Qi(R,0,k):z=d.map((V,P)=>{var $=Math.floor(P*D);if(Array.isArray(R)&&R[$]){var Q=R[$];return aa(aa({},V),{},{x:Qi(Q.x,V.x,k),y:Qi(Q.y,V.y,k)})}return V}),k>0&&(i.current=I,l.current=z),b.createElement(FN,{points:I,baseLine:z,needClip:e,clipPathId:r,props:n})}return k>0&&(i.current=u,l.current=d),b.createElement(fa,null,f&&b.createElement("defs",null,b.createElement("clipPath",{id:"animationClipPath-".concat(r)},b.createElement(V7,{alpha:k,points:u,baseLine:d,layout:n.layout,strokeWidth:n.strokeWidth}))),b.createElement(fa,{clipPath:"url(#animationClipPath-".concat(r,")")},b.createElement(FN,{points:u,baseLine:d,needClip:e,clipPathId:r,props:n})))}),b.createElement(X8,{label:n.label}))}function G7(t){var{needClip:e,clipPathId:r,props:n}=t,i=b.useRef(null),l=b.useRef();return b.createElement(Y7,{needClip:e,clipPathId:r,props:n,previousPointsRef:i,previousBaselineRef:l})}class X7 extends b.PureComponent{render(){var e,{hide:r,dot:n,points:i,className:l,top:u,left:d,needClip:f,xAxisId:h,yAxisId:p,width:g,height:x,id:w,baseLine:S}=this.props;if(r)return null;var C=Kt("recharts-area",l),N=w,{r:A=3,strokeWidth:j=2}=(e=gn(n,!1))!==null&&e!==void 0?e:{r:3,strokeWidth:2},E=XC(n),_=A*2+j;return b.createElement(b.Fragment,null,b.createElement(fa,{className:C},f&&b.createElement("defs",null,b.createElement(TU,{clipPathId:N,xAxisId:h,yAxisId:p}),!E&&b.createElement("clipPath",{id:"clipPath-dots-".concat(N)},b.createElement("rect",{x:d-_/2,y:u-_/2,width:g+_,height:x+_}))),b.createElement(G7,{needClip:f,clipPathId:N,props:this.props})),b.createElement(kN,{points:i,mainColor:Td(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(S)&&b.createElement(kN,{points:S,mainColor:Td(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var LD={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!Zl.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function K7(t){var e,r=ms(t,LD),{activeDot:n,animationBegin:i,animationDuration:l,animationEasing:u,connectNulls:d,dot:f,fill:h,fillOpacity:p,hide:g,isAnimationActive:x,legendType:w,stroke:S,xAxisId:C,yAxisId:N}=r,A=PD(r,k7),j=Gj(),E=gF(),{needClip:_}=CD(C,N),R=bn(),{points:k,isRange:D,baseLine:I}=(e=Ve(re=>_7(re,C,N,R,t.id)))!==null&&e!==void 0?e:{},z=w0();if(j!=="horizontal"&&j!=="vertical"||z==null||E!=="AreaChart"&&E!=="ComposedChart")return null;var{height:V,width:P,x:$,y:Q}=z;return!k||!k.length?null:b.createElement(X7,ca({},A,{activeDot:n,animationBegin:i,animationDuration:l,animationEasing:u,baseLine:I,connectNulls:d,dot:f,fill:h,fillOpacity:p,height:V,hide:g,layout:j,isAnimationActive:x,isRange:D,legendType:w,needClip:_,points:k,stroke:S,width:P,left:$,top:Q,xAxisId:C,yAxisId:N}))}var W7=(t,e,r,n,i)=>{var l=r??e;if(Fe(l))return l;var u=t==="horizontal"?i:n,d=u.scale.domain();if(u.type==="number"){var f=Math.max(d[0],d[1]),h=Math.min(d[0],d[1]);return l==="dataMin"?h:l==="dataMax"||f<0?f:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]};function Q7(t){var{areaSettings:{connectNulls:e,baseValue:r,dataKey:n},stackedData:i,layout:l,chartBaseValue:u,xAxis:d,yAxis:f,displayedData:h,dataStartIndex:p,xAxisTicks:g,yAxisTicks:x,bandSize:w}=t,S=i&&i.length,C=W7(l,u,r,d,f),N=l==="horizontal",A=!1,j=h.map((_,R)=>{var k;S?k=i[p+R]:(k=dr(_,n),Array.isArray(k)?A=!0:k=[C,k]);var D=k[1]==null||S&&!e&&dr(_,n)==null;return N?{x:B1({axis:d,ticks:g,bandSize:w,entry:_,index:R}),y:D?null:f.scale(k[1]),value:k,payload:_}:{x:D?null:d.scale(k[1]),y:B1({axis:f,ticks:x,bandSize:w,entry:_,index:R}),value:k,payload:_}}),E;return S||A?E=j.map(_=>{var R=Array.isArray(_.value)?_.value[0]:null;return N?{x:_.x,y:R!=null&&_.y!=null?f.scale(R):null,payload:_.payload}:{x:R!=null?d.scale(R):null,y:_.y,payload:_.payload}}):E=N?f.scale(C):d.scale(C),{points:j,baseLine:E,isRange:A}}function Z7(t){var e=ms(t,LD),r=bn();return b.createElement(aU,{id:e.id,type:"area"},n=>b.createElement(b.Fragment,null,b.createElement(J8,{legendPayload:L7(e)}),b.createElement(Q8,{fn:F7,args:e}),b.createElement(uU,{type:"area",id:n,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:SO(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:r,connectNulls:e.connectNulls}),b.createElement(K7,ca({},e,{id:n}))))}var j0=b.memo(Z7);j0.displayName="Area";var J7=["dangerouslySetInnerHTML","ticks"],e$=["id"],t$=["domain"],r$=["domain"];function Xg(){return Xg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xg.apply(null,arguments)}function Ed(t,e){if(t==null)return{};var r,n,i=n$(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)r=l[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function n$(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function a$(t){var e=$r();return b.useEffect(()=>(e(pU(t)),()=>{e(gU(t))}),[t,e]),null}var s$=t=>{var{yAxisId:e,className:r,width:n,label:i}=t,l=b.useRef(null),u=b.useRef(null),d=Ve(zO),f=bn(),h=$r(),p="yAxis",g=Ve(R=>oc(R,p,e,f)),x=Ve(R=>yL(R,e)),w=Ve(R=>gL(R,e)),S=Ve(R=>vL(R,p,e,f)),C=Ve(R=>nA(R,e));if(b.useLayoutEffect(()=>{if(!(n!=="auto"||!x||b0(i)||b.isValidElement(i)||C==null)){var R=l.current;if(R){var k=R.getCalculatedWidth();Math.round(x.width)!==Math.round(k)&&h(yU({id:e,width:k}))}}},[S,x,h,i,e,n,C]),x==null||w==null||C==null)return null;var{dangerouslySetInnerHTML:N,ticks:A}=t,j=Ed(t,J7),{id:E}=C,_=Ed(C,e$);return b.createElement(TD,Xg({},j,_,{ref:l,labelRef:u,scale:g,x:w.x,y:w.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:x.width,height:x.height,className:Kt("recharts-".concat(p," ").concat(p),r),viewBox:d,ticks:S}))},i$={allowDataOverflow:kr.allowDataOverflow,allowDecimals:kr.allowDecimals,allowDuplicatedCategory:kr.allowDuplicatedCategory,hide:!1,mirror:kr.mirror,orientation:kr.orientation,padding:kr.padding,reversed:kr.reversed,scale:kr.scale,tickCount:kr.tickCount,type:kr.type,width:kr.width,yAxisId:0},o$=t=>{var e,r,n,i,l,u=ms(t,i$);return b.createElement(b.Fragment,null,b.createElement(a$,{interval:(e=u.interval)!==null&&e!==void 0?e:"preserveEnd",id:u.yAxisId,scale:u.scale,type:u.type,domain:u.domain,allowDataOverflow:u.allowDataOverflow,dataKey:u.dataKey,allowDuplicatedCategory:u.allowDuplicatedCategory,allowDecimals:u.allowDecimals,tickCount:u.tickCount,padding:u.padding,includeHidden:(r=u.includeHidden)!==null&&r!==void 0?r:!1,reversed:u.reversed,ticks:u.ticks,width:u.width,orientation:u.orientation,mirror:u.mirror,hide:u.hide,unit:u.unit,name:u.name,angle:(n=u.angle)!==null&&n!==void 0?n:0,minTickGap:(i=u.minTickGap)!==null&&i!==void 0?i:5,tick:(l=u.tick)!==null&&l!==void 0?l:!0,tickFormatter:u.tickFormatter}),b.createElement(s$,u))},l$=(t,e)=>{var{domain:r}=t,n=Ed(t,t$),{domain:i}=e,l=Ed(e,r$);return jd(n,l)?Array.isArray(r)&&r.length===2&&Array.isArray(i)&&i.length===2?r[0]===i[0]&&r[1]===i[1]:jd({domain:r},{domain:i}):!1},A0=b.memo(o$,l$);A0.displayName="YAxis";var Bp={exports:{}},qp={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UN;function c$(){if(UN)return qp;UN=1;var t=ls();function e(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:e,n=t.useSyncExternalStore,i=t.useRef,l=t.useEffect,u=t.useMemo,d=t.useDebugValue;return qp.useSyncExternalStoreWithSelector=function(f,h,p,g,x){var w=i(null);if(w.current===null){var S={hasValue:!1,value:null};w.current=S}else S=w.current;w=u(function(){function N(R){if(!A){if(A=!0,j=R,R=g(R),x!==void 0&&S.hasValue){var k=S.value;if(x(k,R))return E=k}return E=R}if(k=E,r(j,R))return k;var D=g(R);return x!==void 0&&x(k,D)?(j=R,k):(j=R,E=D)}var A=!1,j,E,_=p===void 0?null:p;return[function(){return N(h())},_===null?void 0:function(){return N(_())}]},[h,p,g,x]);var C=n(f,w[0],w[1]);return l(function(){S.hasValue=!0,S.value=C},[C]),d(C),C},qp}var $N;function u$(){return $N||($N=1,Bp.exports=c$()),Bp.exports}u$();function d$(t){t()}function m$(){let t=null,e=null;return{clear(){t=null,e=null},notify(){d$(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=e={callback:r,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!n||t===null||(n=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var zN={notify(){},get:()=>[]};function f$(t,e){let r,n=zN,i=0,l=!1;function u(C){p();const N=n.subscribe(C);let A=!1;return()=>{A||(A=!0,N(),g())}}function d(){n.notify()}function f(){S.onStateChange&&S.onStateChange()}function h(){return l}function p(){i++,r||(r=t.subscribe(f),n=m$())}function g(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=zN)}function x(){l||(l=!0,p())}function w(){l&&(l=!1,g())}const S={addNestedSub:u,notifyNestedSubs:d,handleChangeWrapper:f,isSubscribed:h,trySubscribe:x,tryUnsubscribe:w,getListeners:()=>n};return S}var h$=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",p$=h$(),g$=()=>typeof navigator<"u"&&navigator.product==="ReactNative",y$=g$(),x$=()=>p$||y$?b.useLayoutEffect:b.useEffect,v$=x$(),Hp=Symbol.for("react-redux-context"),Vp=typeof globalThis<"u"?globalThis:{};function b$(){if(!b.createContext)return{};const t=Vp[Hp]??(Vp[Hp]=new Map);let e=t.get(b.createContext);return e||(e=b.createContext(null),t.set(b.createContext,e)),e}var w$=b$();function S$(t){const{children:e,context:r,serverState:n,store:i}=t,l=b.useMemo(()=>{const f=f$(i);return{store:i,subscription:f,getServerState:n?()=>n:void 0}},[i,n]),u=b.useMemo(()=>i.getState(),[i]);v$(()=>{const{subscription:f}=l;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),u!==i.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[l,u]);const d=r||w$;return b.createElement(d.Provider,{value:l},e)}var N$=S$,C$=(t,e)=>e,D0=me([C$,st,J2,Pt,ZA,gs,yF,Wt],vF),T0=t=>{var e=t.currentTarget.getBoundingClientRect(),r=e.width/t.currentTarget.offsetWidth,n=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/r),chartY:Math.round((t.clientY-e.top)/n)}},FD=nn("mouseClick"),UD=Wl();UD.startListening({actionCreator:FD,effect:(t,e)=>{var r=t.payload,n=D0(e.getState(),T0(r));(n==null?void 0:n.activeIndex)!=null&&e.dispatch(TL({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var Kg=nn("mouseMove"),$D=Wl();$D.startListening({actionCreator:Kg,effect:(t,e)=>{var r=t.payload,n=e.getState(),i=zA(n,n.tooltip.settings.shared),l=D0(n,T0(r));i==="axis"&&((l==null?void 0:l.activeIndex)!=null?e.dispatch(VA({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate})):e.dispatch(HA()))}});var BN={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},zD=zr({name:"rootProps",initialState:BN,reducers:{updateOptions:(t,e)=>{var r;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(r=e.payload.barGap)!==null&&r!==void 0?r:BN.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),j$=zD.reducer,{updateOptions:A$}=zD.actions,BD=zr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:iq}=BD.actions,D$=BD.reducer,qD=nn("keyDown"),HD=nn("focus"),E0=Wl();E0.startListening({actionCreator:qD,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,l=t.payload;if(!(l!=="ArrowRight"&&l!=="ArrowLeft"&&l!=="Enter")){var u=Number(d0(i,jo(r))),d=gs(r);if(l==="Enter"){var f=Sd(r,"axis","hover",String(i.index));e.dispatch(Hg({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:f}));return}var h=SL(r),p=h==="left-to-right"?1:-1,g=l==="ArrowRight"?1:-1,x=u+g*p;if(!(d==null||x>=d.length||x<0)){var w=Sd(r,"axis","hover",String(x));e.dispatch(Hg({active:!0,activeIndex:x.toString(),activeDataKey:void 0,activeCoordinate:w}))}}}}});E0.startListening({actionCreator:HD,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var l="0",u=Sd(r,"axis","hover",String(l));e.dispatch(Hg({activeDataKey:void 0,active:!0,activeIndex:l,activeCoordinate:u}))}}}});var Zr=nn("externalEvent"),VD=Wl();VD.startListening({actionCreator:Zr,effect:(t,e)=>{if(t.payload.handler!=null){var r=e.getState(),n={activeCoordinate:mF(r),activeDataKey:uF(r),activeIndex:Vl(r),activeLabel:eD(r),activeTooltipIndex:Vl(r),isTooltipActive:fF(r)};t.payload.handler(n,t.payload.reactEvent)}}});var T$=me([cc],t=>t.tooltipItemPayloads),E$=me([T$,lc,(t,e,r)=>e,(t,e,r)=>r],(t,e,r,n)=>{var i=t.find(d=>d.settings.dataKey===n);if(i!=null){var{positions:l}=i;if(l!=null){var u=e(l,r);return u}}}),YD=nn("touchMove"),GD=Wl();GD.startListening({actionCreator:YD,effect:(t,e)=>{var r=t.payload,n=e.getState(),i=zA(n,n.tooltip.settings.shared);if(i==="axis"){var l=D0(n,T0({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(l==null?void 0:l.activeIndex)!=null&&e.dispatch(VA({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate}))}else if(i==="item"){var u,d=r.touches[0],f=document.elementFromPoint(d.clientX,d.clientY);if(!f||!f.getAttribute)return;var h=f.getAttribute(_O),p=(u=f.getAttribute(RO))!==null&&u!==void 0?u:void 0,g=E$(e.getState(),h,p);e.dispatch(DL({activeDataKey:p,activeIndex:h,activeCoordinate:g}))}}});var _$=gj({brush:_U,cartesianAxis:xU,chartData:_F,errorBars:DU,graphicalItems:cU,layout:tO,legend:XO,options:AF,polarAxis:W8,polarOptions:D$,referenceElements:LU,rootProps:j$,tooltip:EL}),R$=function(e){return A3({reducer:_$,preloadedState:e,middleware:r=>r({serializableCheck:!1}).concat([UD.middleware,$D.middleware,E0.middleware,VD.middleware,GD.middleware]),devTools:Zl.devToolsEnabled})};function k$(t){var{preloadedState:e,children:r,reduxStoreName:n}=t,i=bn(),l=b.useRef(null);if(i)return r;l.current==null&&(l.current=R$(e));var u=xy;return b.createElement(N$,{context:u,store:l.current},r)}function O$(t){var{layout:e,width:r,height:n,margin:i}=t,l=$r(),u=bn();return b.useEffect(()=>{u||(l(Z3(e)),l(J3({width:r,height:n})),l(Q3(i)))},[l,u,e,r,n,i]),null}function M$(t){var e=$r();return b.useEffect(()=>{e(A$(t))},[e,t]),null}var I$=["children"];function P$(t,e){if(t==null)return{};var r,n,i=L$(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)r=l[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function L$(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function _d(){return _d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_d.apply(null,arguments)}var F$={width:"100%",height:"100%"},U$=b.forwardRef((t,e)=>{var r=Vj(),n=Yj(),i=WO();if(!od(r)||!od(n))return null;var{children:l,otherAttributes:u,title:d,desc:f}=t,h,p;return typeof u.tabIndex=="number"?h=u.tabIndex:h=i?0:void 0,typeof u.role=="string"?p=u.role:p=i?"application":void 0,b.createElement(KC,_d({},u,{title:d,desc:f,role:p,tabIndex:h,width:r,height:n,style:F$,ref:e}),l)}),$$=t=>{var{children:e}=t,r=Ve(Xd);if(!r)return null;var{width:n,height:i,y:l,x:u}=r;return b.createElement(KC,{width:n,height:i,x:u,y:l},e)},qN=b.forwardRef((t,e)=>{var{children:r}=t,n=P$(t,I$),i=bn();return i?b.createElement($$,null,r):b.createElement(U$,_d({ref:e},n),r)});function z$(){var t=$r(),[e,r]=b.useState(null),n=Ve(EO);return b.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),l=i.width/e.offsetWidth;mr(l)&&l!==n&&t(eO(l))}},[e,t,n]),r}function HN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function B$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HN(Object(r),!0).forEach(function(n){q$(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function q$(t,e,r){return(e=H$(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function H$(t){var e=V$(t,"string");return typeof e=="symbol"?e:e+""}function V$(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Y$=b.forwardRef((t,e)=>{var{children:r,className:n,height:i,onClick:l,onContextMenu:u,onDoubleClick:d,onMouseDown:f,onMouseEnter:h,onMouseLeave:p,onMouseMove:g,onMouseUp:x,onTouchEnd:w,onTouchMove:S,onTouchStart:C,style:N,width:A}=t,j=$r(),[E,_]=b.useState(null),[R,k]=b.useState(null);UF();var D=z$(),I=b.useCallback(L=>{D(L),typeof e=="function"&&e(L),_(L),k(L)},[D,e,_,k]),z=b.useCallback(L=>{j(FD(L)),j(Zr({handler:l,reactEvent:L}))},[j,l]),V=b.useCallback(L=>{j(Kg(L)),j(Zr({handler:h,reactEvent:L}))},[j,h]),P=b.useCallback(L=>{j(HA()),j(Zr({handler:p,reactEvent:L}))},[j,p]),$=b.useCallback(L=>{j(Kg(L)),j(Zr({handler:g,reactEvent:L}))},[j,g]),Q=b.useCallback(()=>{j(HD())},[j]),re=b.useCallback(L=>{j(qD(L.key))},[j]),ee=b.useCallback(L=>{j(Zr({handler:u,reactEvent:L}))},[j,u]),U=b.useCallback(L=>{j(Zr({handler:d,reactEvent:L}))},[j,d]),J=b.useCallback(L=>{j(Zr({handler:f,reactEvent:L}))},[j,f]),pe=b.useCallback(L=>{j(Zr({handler:x,reactEvent:L}))},[j,x]),ce=b.useCallback(L=>{j(Zr({handler:C,reactEvent:L}))},[j,C]),oe=b.useCallback(L=>{j(YD(L)),j(Zr({handler:S,reactEvent:L}))},[j,S]),F=b.useCallback(L=>{j(Zr({handler:w,reactEvent:L}))},[j,w]);return b.createElement(bF.Provider,{value:E},b.createElement(ik.Provider,{value:R},b.createElement("div",{className:Kt("recharts-wrapper",n),style:B$({position:"relative",cursor:"default",width:A,height:i},N),onClick:z,onContextMenu:ee,onDoubleClick:U,onFocus:Q,onKeyDown:re,onMouseDown:J,onMouseEnter:V,onMouseLeave:P,onMouseMove:$,onMouseUp:pe,onTouchEnd:F,onTouchMove:oe,onTouchStart:ce,ref:I},r)))}),G$=["children","className","width","height","style","compact","title","desc"];function X$(t,e){if(t==null)return{};var r,n,i=K$(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)r=l[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function K$(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var W$=b.forwardRef((t,e)=>{var{children:r,className:n,width:i,height:l,style:u,compact:d,title:f,desc:h}=t,p=X$(t,G$),g=ds(p);return d?b.createElement(qN,{otherAttributes:g,title:f,desc:h},r):b.createElement(Y$,{className:n,style:u,width:i,height:l,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},b.createElement(qN,{otherAttributes:g,title:f,desc:h,ref:e},b.createElement(UU,null,r)))}),Q$=["width","height"];function Wg(){return Wg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wg.apply(null,arguments)}function Z$(t,e){if(t==null)return{};var r,n,i=J$(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)r=l[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function J$(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var ez={top:5,right:5,bottom:5,left:5},tz={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:ez,reverseStackOrder:!1,syncMethod:"index"},rz=b.forwardRef(function(e,r){var n,i=ms(e.categoricalChartProps,tz),{width:l,height:u}=i,d=Z$(i,Q$);if(!od(l)||!od(u))return null;var{chartName:f,defaultTooltipEventType:h,validateTooltipEventTypes:p,tooltipPayloadSearcher:g,categoricalChartProps:x}=e,w={chartName:f,defaultTooltipEventType:h,validateTooltipEventTypes:p,tooltipPayloadSearcher:g,eventEmitter:void 0};return b.createElement(k$,{preloadedState:{options:w},reduxStoreName:(n=x.id)!==null&&n!==void 0?n:f},b.createElement(EU,{chartData:x.data}),b.createElement(O$,{width:l,height:u,layout:i.layout,margin:i.margin}),b.createElement(M$,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),b.createElement(W$,Wg({},d,{width:l,height:u,ref:r})))}),nz=["axis"],XD=b.forwardRef((t,e)=>b.createElement(rz,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:nz,tooltipPayloadSearcher:CF,categoricalChartProps:t,ref:e}));const az={BASE_URL:"/LeaperFX/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var sz={};class iz{constructor(){te(this,"subscribers",[]);te(this,"ws",null);te(this,"connected",!1);te(this,"reconnectTimer",null);te(this,"heartbeatTimer",null);te(this,"pollingTimer",null);te(this,"isPollingMode",!1);te(this,"maxReconnectAttempts",5);te(this,"reconnectAttempts",0);te(this,"eventQueue",[]);te(this,"localEventBus",{})}connect(e){return new Promise(r=>{if(!e&&typeof window>"u"){this.startLocalMode(),r(!0);return}if(typeof window<"u"&&(window.location.hostname.includes("github.io")||window.location.hostname.includes("vercel.app")||window.location.hostname.includes("netlify.app"))){console.log("[WebSocket] Static hosting detected, using local mode"),this.startLocalMode(),r(!0);return}const n=e||this.getWebSocketUrl();if(!n){console.log("[WebSocket] No WS URL available, falling back to local mode"),this.startLocalMode(),r(!0);return}try{this.ws=new WebSocket(n),this.ws.onopen=()=>{this.connected=!0,this.reconnectAttempts=0,this.startHeartbeat(),r(!0)},this.ws.onmessage=i=>{try{const l=JSON.parse(i.data);if(!l||typeof l!="object"||!l.type){console.warn("Invalid WebSocket message format:",l);return}const u={type:l.type,data:l.data||{},timestamp:l.timestamp||new Date().toISOString(),id:l.id};this.notifySubscribers(u)}catch(l){console.error("Error parsing WebSocket message:",l)}},this.ws.onclose=()=>{this.connected=!1,this.stopHeartbeat(),this.scheduleReconnect()},this.ws.onerror=i=>{var l;console.error("WebSocket error:",i),(l=this.ws)==null||l.close(),this.startLocalMode(),r(!0)},setTimeout(()=>{var i;this.connected||((i=this.ws)==null||i.close(),this.startLocalMode(),r(!0))},5e3)}catch(i){console.error("Failed to create WebSocket connection:",i),this.startLocalMode(),r(!0)}})}startLocalMode(){this.connected=!0,this.isPollingMode=!0,this.pollingTimer=setInterval(()=>{this.processEventQueue()},1e3)}getWebSocketUrl(){if(typeof window<"u"){const e=window.location.host||window.location.hostname||"",r=this.getEnv("VITE_API_BASE_URL");return r?r.replace(/^https?:/,window.location.protocol==="https:"?"wss:":"ws:")+"/websocket":e.includes("github.io")?null:`${window.location.protocol==="https:"?"wss:":"ws:"}//${e}/ws`}return"ws://localhost:3001/ws"}getEnv(e){try{const r=typeof import.meta<"u"?az:void 0,n=typeof window<"u"?window:{},i=typeof process<"u"?sz:void 0;return r&&r[e]||n.__ENV__&&n.__ENV__[e]||i&&i[e]}catch{return}}startHeartbeat(){this.heartbeatTimer=setInterval(()=>{this.ws&&this.connected&&this.ws.send(JSON.stringify({type:"ping"}))},3e4)}stopHeartbeat(){this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=null)}scheduleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){this.startLocalMode();return}this.reconnectAttempts++;const e=Math.min(1e3*Math.pow(2,this.reconnectAttempts),3e4);this.reconnectTimer=setTimeout(()=>{this.connect()},e)}processEventQueue(){if(this.eventQueue.length===0)return;const e=[...this.eventQueue];this.eventQueue=[],e.forEach(r=>{this.notifySubscribers(r)})}disconnect(){this.connected=!1,this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.pollingTimer&&(clearInterval(this.pollingTimer),this.pollingTimer=null),this.stopHeartbeat(),this.ws&&(this.ws.close(),this.ws=null),this.subscribers=[]}send(e){const r={...e,timestamp:new Date().toISOString(),id:`evt_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};if(this.ws&&this.connected&&this.ws.readyState===WebSocket.OPEN)try{this.ws.send(JSON.stringify(r))}catch(n){console.error("Error sending WebSocket message:",n),this.eventQueue.push(r)}else this.eventQueue.push(r),this.isPollingMode&&setTimeout(()=>this.processEventQueue(),100)}subscribe(e){return this.subscribers.push(e),()=>{const r=this.subscribers.indexOf(e);r!==-1&&this.subscribers.splice(r,1)}}notifySubscribers(e){this.subscribers.forEach(r=>{try{r(e)}catch(n){console.error("Error in WebSocket subscriber:",n)}})}isConnected(){return this.connected}getStatus(){return{connected:this.connected,mode:this.isPollingMode?"local":"websocket",subscriberCount:this.subscribers.length,queueSize:this.eventQueue.length}}broadcastSystemEvent(e,r){this.send({type:e,data:{...r,source:"system",environment:"production"}})}getEventHistory(e=100){return Object.values(this.localEventBus).flat().sort((r,n)=>new Date(n.timestamp).getTime()-new Date(r.timestamp).getTime()).slice(0,e)}}const _e=new iz,Rd=Object.freeze(Object.defineProperty({__proto__:null,default:_e},Symbol.toStringTag,{value:"Module"})),Yp={BASE_URL:"/LeaperFX/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Gp={};class oz{constructor(){te(this,"ws",null);te(this,"isConnected",!1);te(this,"reconnectAttempts",0);te(this,"maxReconnectAttempts",5);te(this,"reconnectTimer",null);te(this,"heartbeatTimer",null);te(this,"lastLogTs",new Map);te(this,"priceSubscribers",new Map);te(this,"ohlcvSubscribers",new Map);te(this,"latestPrices",new Map);te(this,"ohlcvBuffers",new Map);te(this,"priceHistory",new Map);te(this,"subscribedSymbols",new Set);te(this,"WS_URL","wss://ws-feed.exchange.coinbase.com");te(this,"DEFAULT_SYMBOLS",["BTC-USD","ETH-USD","SOL-USD","AVAX-USD","MATIC-USD","ADA-USD","DOT-USD","LINK-USD","UNI-USD","XRP-USD"]);this.initializeBuffers()}initializeBuffers(){const e=["1m","5m","15m","1h","4h","1d"];this.DEFAULT_SYMBOLS.forEach(r=>{const n=new Map;e.forEach(i=>{n.set(i,[])}),this.ohlcvBuffers.set(r,n),this.priceHistory.set(r,[])})}async connect(){return new Promise((e,r)=>{try{console.log("[CoinbaseWS] Connecting to Coinbase WebSocket..."),this.ws=new WebSocket(this.WS_URL),this.ws.onopen=()=>{console.log("[CoinbaseWS] Connected successfully"),this.isConnected=!0,this.reconnectAttempts=0,this.subscribeToDefaultChannels(),this.startHeartbeat(),e(!0)},this.ws.onmessage=n=>{this.handleMessage(n.data)},this.ws.onclose=n=>{console.log("[CoinbaseWS] Connection closed:",n.code,n.reason),this.isConnected=!1,this.stopHeartbeat(),this.scheduleReconnect()},this.ws.onerror=n=>{console.error("[CoinbaseWS] WebSocket error:",n),this.isConnected=!1,r(n)},setTimeout(()=>{var n;this.isConnected||((n=this.ws)==null||n.close(),r(new Error("Connection timeout")))},1e4)}catch(n){console.error("[CoinbaseWS] Failed to create connection:",n),r(n)}})}subscribeToDefaultChannels(){var r;if(!this.ws||!this.isConnected)return;const e={type:"subscribe",product_ids:this.DEFAULT_SYMBOLS,channels:["ticker","matches"]};if(this.ws.readyState===WebSocket.OPEN)console.log("[CoinbaseWS] Subscribing to channels immediately:",e),this.ws.send(JSON.stringify(e));else{console.log("[CoinbaseWS] WebSocket not OPEN, deferring subscription until open");const n=()=>{var i;try{(i=this.ws)==null||i.send(JSON.stringify(e)),console.log("[CoinbaseWS] Subscribed after open event")}catch(l){console.warn("[CoinbaseWS] Failed to send subscribe after open:",l)}};(r=this.ws)==null||r.addEventListener("open",n,{once:!0})}this.DEFAULT_SYMBOLS.forEach(n=>{this.subscribedSymbols.add(n)})}handleMessage(e){try{const r=JSON.parse(e);switch(r.type){case"ticker":this.processTicker(r);break;case"match":this.processMatch(r);break;case"l2update":break;case"heartbeat":break;default:"type"in r&&r.type==="subscriptions"&&console.log("[CoinbaseWS] Subscription confirmed");break}}catch(r){console.error("[CoinbaseWS] Error parsing message:",r,e)}}processTicker(e){const r=parseFloat(e.price),n=parseFloat(e.open_24h),i=r-n,l=n?i/n*100:0,u={symbol:e.product_id,price:r,change24h:i,changePercent24h:l,volume24h:parseFloat(e.volume_24h),high24h:parseFloat(e.high_24h),low24h:parseFloat(e.low_24h),timestamp:new Date(e.time).getTime()};try{if((()=>{var f;try{const h=typeof import.meta<"u"?Yp==null?void 0:Yp.VITE_DEBUG_MODE:void 0,p=typeof window<"u"?(f=window.__ENV__)==null?void 0:f.VITE_DEBUG_MODE:void 0,g=typeof process<"u"?Gp==null?void 0:Gp.VITE_DEBUG_MODE:void 0;return String(h??p??g??"").toLowerCase()==="true"}catch{return!1}})()&&(e.product_id==="BTC-USD"||e.product_id==="ETH-USD")){const f=Date.now(),h=this.lastLogTs.get(e.product_id)||0;f-h>3e4&&(console.debug(`[CoinbaseWS] ${e.product_id} ${r.toFixed(2)} (Δ24h ${l.toFixed(2)}%) @ ${new Date(u.timestamp).toLocaleTimeString()}`),this.lastLogTs.set(e.product_id,f))}}catch{}this.latestPrices.set(e.product_id,u),this.updatePriceHistory(e.product_id,r),this.notifyPriceSubscribers(e.product_id,u)}processMatch(e){const r=parseFloat(e.price),n=parseFloat(e.size),i=new Date(e.time).getTime();this.updateOHLCVBuffers(e.product_id,r,n,i)}updatePriceHistory(e,r){let n=this.priceHistory.get(e)||[];n.push(r),n.length>100&&(n=n.slice(-100)),this.priceHistory.set(e,n)}updateOHLCVBuffers(e,r,n,i){const l=this.ohlcvBuffers.get(e);if(!l)return;[{tf:"1m",interval:60*1e3},{tf:"5m",interval:300*1e3},{tf:"15m",interval:900*1e3},{tf:"1h",interval:3600*1e3},{tf:"4h",interval:14400*1e3},{tf:"1d",interval:1440*60*1e3}].forEach(({tf:d,interval:f})=>{const h=l.get(d)||[],p=Math.floor(i/f)*f;let g=h.find(x=>x.timestamp===p);g?(g.high=Math.max(g.high,r),g.low=Math.min(g.low,r),g.close=r,g.volume+=n):(g={timestamp:p,open:r,high:r,low:r,close:r,volume:n},h.push(g),h.length>1e3&&h.shift()),h.sort((x,w)=>x.timestamp-w.timestamp),l.set(d,h),this.notifyOHLCVSubscribers(e,d,g)})}notifyPriceSubscribers(e,r){const n=this.priceSubscribers.get(e);n&&n.forEach(i=>{try{i.callback(r)}catch(l){console.error("[CoinbaseWS] Error in price subscriber:",l)}})}notifyOHLCVSubscribers(e,r,n){const i=`${e}:${r}`,l=this.ohlcvSubscribers.get(i);l&&l.forEach(u=>{try{u.callback(n)}catch(d){console.error("[CoinbaseWS] Error in OHLCV subscriber:",d)}})}subscribePriceUpdates(e,r){let n=this.priceSubscribers.get(e);n||(n=[],this.priceSubscribers.set(e,n));const i={symbol:e,callback:r};n.push(i);const l=this.latestPrices.get(e);return l&&r(l),()=>{const u=this.priceSubscribers.get(e);if(u){const d=u.findIndex(f=>f.callback===r);d!==-1&&u.splice(d,1)}}}subscribeOHLCVUpdates(e,r,n){const i=`${e}:${r}`;let l=this.ohlcvSubscribers.get(i);l||(l=[],this.ohlcvSubscribers.set(i,l));const u={symbol:e,timeframe:r,callback:n};l.push(u);const d=this.ohlcvBuffers.get(e),f=d==null?void 0:d.get(r);return f&&f.length>0&&n(f[f.length-1]),()=>{const h=this.ohlcvSubscribers.get(i);if(h){const p=h.findIndex(g=>g.callback===n);p!==-1&&h.splice(p,1)}}}getHistoricalOHLCV(e,r,n=100){const i=this.ohlcvBuffers.get(e),l=i==null?void 0:i.get(r);return l?l.slice(-n):[]}getLatestPrice(e){return this.latestPrices.get(e)||null}getPriceHistory(e,r=50){return(this.priceHistory.get(e)||[]).slice(-r)}startHeartbeat(){this.heartbeatTimer=setInterval(()=>{this.ws&&this.isConnected&&this.ws.readyState===WebSocket.OPEN&&console.log("[CoinbaseWS] Connection alive, subscribed to:",Array.from(this.subscribedSymbols))},3e4)}stopHeartbeat(){this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=null)}scheduleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("[CoinbaseWS] Max reconnection attempts reached");return}this.reconnectAttempts++;const e=Math.min(1e3*Math.pow(2,this.reconnectAttempts),3e4);console.log(`[CoinbaseWS] Scheduling reconnect in ${e}ms (attempt ${this.reconnectAttempts})`),this.reconnectTimer=setTimeout(()=>{this.connect().catch(r=>{console.error("[CoinbaseWS] Reconnection failed:",r)})},e)}disconnect(){console.log("[CoinbaseWS] Disconnecting..."),this.isConnected=!1,this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.stopHeartbeat(),this.ws&&(this.ws.close(),this.ws=null),this.priceSubscribers.clear(),this.ohlcvSubscribers.clear(),this.subscribedSymbols.clear()}getStatus(){return{connected:this.isConnected,subscribedSymbols:Array.from(this.subscribedSymbols),priceSubscribers:Array.from(this.priceSubscribers.values()).reduce((e,r)=>e+r.length,0),ohlcvSubscribers:Array.from(this.ohlcvSubscribers.values()).reduce((e,r)=>e+r.length,0),reconnectAttempts:this.reconnectAttempts}}addSymbol(e){if(this.subscribedSymbols.has(e)||!this.ws||!this.isConnected)return;const r={type:"subscribe",product_ids:[e],channels:["ticker","matches"]};this.ws.send(JSON.stringify(r)),this.subscribedSymbols.add(e);const n=["1m","5m","15m","1h","4h","1d"],i=new Map;n.forEach(l=>{i.set(l,[])}),this.ohlcvBuffers.set(e,i),this.priceHistory.set(e,[])}removeSymbol(e){if(!this.subscribedSymbols.has(e)||!this.ws||!this.isConnected)return;const r={type:"unsubscribe",product_ids:[e],channels:["ticker","matches"]};this.ws.send(JSON.stringify(r)),this.subscribedSymbols.delete(e),this.latestPrices.delete(e),this.ohlcvBuffers.delete(e),this.priceHistory.delete(e),this.priceSubscribers.delete(e)}}const Jr=new oz,lz=Object.freeze(Object.defineProperty({__proto__:null,coinbaseWebSocketService:Jr,default:Jr},Symbol.toStringTag,{value:"Module"}));class cz{constructor(){te(this,"priceBuffers",new Map);te(this,"smoothingFactors",new Map([["1m",.3],["5m",.4],["15m",.5],["1h",.6],["4h",.7],["1d",.8]]));this.initializeBuffers()}initializeBuffers(){["BTC-USD","ETH-USD","SOL-USD","AVAX-USD","MATIC-USD","ADA-USD","DOT-USD","LINK-USD","UNI-USD","XRP-USD"].forEach(r=>{this.priceBuffers.set(r,[])})}transformPriceToRechartsData(e,r=50){return e.slice(-r).map((n,i)=>({time:i,value:n.price,name:new Date(n.timestamp).toLocaleTimeString()}))}transformOHLCVToCandlestick(e){return e.map(r=>({time:r.timestamp,open:r.open,high:r.high,low:r.low,close:r.close,volume:r.volume}))}generatePriceAnimationData(e,r,n){const i=this.priceBuffers.get(e)||[],l=.3;i.push(r.price),i.length>100&&i.shift(),this.priceBuffers.set(e,i);const u=[];if(i.length>0){u[0]=i[0];for(let p=1;p<i.length;p++)u[p]=l*i[p]+(1-l)*u[p-1]}const d=(n==null?void 0:n.price)||r.price,f=r.price-d,h=d!==0?f/d*100:0;return{current:r.price,previous:d,change:f,changePercent:h,trend:f>0?"up":f<0?"down":"neutral",smoothed:u}}generateMiniChartData(e,r,n=20){const i=this.priceBuffers.get(e)||[];if(i.length>=n)return i.slice(-n).map((l,u)=>({time:u,value:l}));{const l=i.length>0?i[i.length-1]:100,u=[];for(let d=0;d<n;d++){const f=d/(n-1),h=r==="up"?f*.05:-f*.05,p=(Math.random()-.5)*.02,g=l*(1+h+p);u.push({time:d,value:Math.max(0,g)})}return u}}transformToMarketItemData(e,r){const n=e.changePercent24h>=0?"up":"down",i=this.generateMiniChartData(e.symbol,n);return{name:r||e.symbol.replace("-USD","").replace("-CAD",""),symbol:e.symbol.replace("-USD","/CAD").replace("-","/"),value:this.formatPrice(e.price),change:this.formatChange(e.changePercent24h),changePercent:`${Math.abs(e.changePercent24h).toFixed(2)}%`,trend:n,miniChartData:i}}formatPrice(e){return e>=1e3?e.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}):e>=1?e.toFixed(2):e.toFixed(4)}formatChange(e){return`${e>=0?"+":""}${e.toFixed(2)}`}generateBloombergChartData(e,r,n=100){const i=e.slice(-n),l=this.smoothingFactors.get(r)||.5;if(i.length===0)return[];const u=[];let d=i[0].close;return i.forEach((f,h)=>{d=l*f.close+(1-l)*d,u.push({time:this.formatTimeLabel(f.timestamp,r),value:d,name:new Date(f.timestamp).toLocaleString()})}),u}formatTimeLabel(e,r){const n=new Date(e);switch(r){case"1m":case"5m":case"15m":return n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});case"1h":case"4h":return n.toLocaleDateString("en-US",{month:"short",day:"numeric"})+" "+n.toLocaleTimeString([],{hour:"2-digit"});case"1d":return n.toLocaleDateString("en-US",{month:"short",day:"numeric"});default:return n.toLocaleDateString()}}generateCurrencyChartData(e,r,n=12){const i=[];for(let l=0;l<n;l++){const u=l/(n-1),d=e+(r-e)*u,f=Math.sin(u*Math.PI*2)*(Math.abs(r-e)*.08),h=l>0&&l<n-1?(Math.random()-.5)*(Math.abs(r-e)*.05):0;i.push({time:`p${l}`,value:d+f+h})}return i}createAnimatedTransition(e,r,n=30){const i=[],l=r-e;for(let u=0;u<=n;u++){const d=u/n,f=this.easeOutCubic(d),h=e+l*f;i.push(h)}return i}easeOutCubic(e){return 1-Math.pow(1-e,3)}calculateVWAP(e){if(e.length===0)return 0;let r=0,n=0;return e.forEach(i=>{const l=(i.high+i.low+i.close)/3;r+=l*i.volume,n+=i.volume}),n>0?r/n:0}calculateSMA(e,r){const n=[];for(let i=0;i<e.length;i++)if(i<r-1)n.push(NaN);else{const l=e.slice(i-r+1,i+1).reduce((u,d)=>u+d,0);n.push(l/r)}return n}calculateEMA(e,r){const n=[],i=2/(r+1);if(e.length===0)return n;n[0]=e[0];for(let l=1;l<e.length;l++)n[l]=e[l]*i+n[l-1]*(1-i);return n}generateTickChart(e,r,n=1e3){const i=Math.min(e.length,n),l=[];for(let u=Math.max(0,e.length-i);u<e.length;u++)l.push({time:new Date(r[u]).toLocaleTimeString(),value:e[u]});return l}clearBuffers(){this.priceBuffers.clear(),this.initializeBuffers()}getBufferStats(){const e={};return this.priceBuffers.forEach((r,n)=>{e[n]={count:r.length,latest:r.length>0?r[r.length-1]:null}}),e}}const VN=new cz,Vu={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>t*(2-t),easeInOutQuad:t=>t<.5?2*t*t:-1+(4-2*t)*t,easeInCubic:t=>t*t*t,easeOutCubic:t=>--t*t*t+1,easeInOutCubic:t=>t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,spring:t=>1-Math.cos(t*Math.PI*2)*Math.exp(-t*6),bounce:t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375};class uz{constructor(){te(this,"activeAnimations",new Map);te(this,"animationCallbacks",new Map);te(this,"animationFrameId",null);te(this,"lastFrameTime",0);te(this,"isRunning",!1);te(this,"defaultConfig",{duration:800,frameRate:60,easing:"easeOutCubic",smoothingFactor:.3,maxPriceChange:5});te(this,"priceHistories",new Map);te(this,"smoothedPrices",new Map);this.startAnimationLoop()}startAnimationLoop(){if(this.isRunning)return;this.isRunning=!0;const e=r=>{this.processAnimationFrame(r),this.isRunning&&(this.animationFrameId=requestAnimationFrame(e))};this.animationFrameId=requestAnimationFrame(e)}stopAnimationLoop(){this.isRunning=!1,this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}processAnimationFrame(e){const r=e-this.lastFrameTime,n=1e3/this.defaultConfig.frameRate;if(!(r<n)){this.lastFrameTime=e;for(const[i,l]of this.activeAnimations.entries()){const u=e-l.startTime,d=Math.min(u/l.duration,1);if(d>=1)this.notifyCallbacks(i,l.targetPrice),this.activeAnimations.delete(i);else{const f=l.easing(d),h=l.currentPrice+(l.targetPrice-l.currentPrice)*f;this.notifyCallbacks(i,h)}}}}animatePrice(e,r,n,i){const l={...this.defaultConfig,...i},u=n||this.smoothedPrices.get(e)||r,d=Math.abs((r-u)/u)*100;if(d>l.maxPriceChange){this.smoothedPrices.set(e,r),this.notifyCallbacks(e,r);return}if(d<.01)return;const f={symbol:e,targetPrice:r,currentPrice:u,animationFrames:[],startTime:performance.now(),duration:l.duration,easing:Vu[l.easing]};this.activeAnimations.set(e,f),this.updatePriceHistory(e,r,l.smoothingFactor)}updatePriceHistory(e,r,n){let i=this.priceHistories.get(e)||[];i.push(r),i.length>50&&(i=i.slice(-50)),this.priceHistories.set(e,i);const l=this.smoothedPrices.get(e)||r,u=n*r+(1-n)*l;this.smoothedPrices.set(e,u)}subscribe(e,r){let n=this.animationCallbacks.get(e);n||(n=[],this.animationCallbacks.set(e,n)),n.push(r);const i=this.smoothedPrices.get(e);return i!==void 0&&r(i),()=>{const l=this.animationCallbacks.get(e);if(l){const u=l.indexOf(r);u!==-1&&l.splice(u,1)}}}notifyCallbacks(e,r){const n=this.animationCallbacks.get(e);n&&n.forEach(i=>{try{i(r)}catch(l){console.error("[AnimationBuffer] Error in callback:",l)}})}generateBufferedChartData(e,r,n,i=50){if(n.length===0)return[r];const l=n[n.length-1],u=r.value-l.value,d=5,f=[];for(let p=1;p<=d;p++){const g=p/(d+1),x=Vu.easeOutQuad(g),w=l.value+u*x;f.push({time:`interp_${l.time}_${p}`,value:w})}return[...n,...f,r].slice(-i)}createSmoothTransition(e,r,n=20,i="easeOutCubic"){const l=[],u=Vu[i];for(let d=0;d<n;d++){const f=d/(n-1),h=u(f),p=e+(r-e)*h;l.push({time:d,value:p})}return l}applyVolumeWeightedSmoothing(e,r,n=10){if(e.length!==r.length)throw new Error("Prices and volumes arrays must have same length");const i=[];for(let l=0;l<e.length;l++){const u=Math.max(0,l-n+1),d=l+1,f=e.slice(u,d),h=r.slice(u,d);let p=0,g=0;for(let w=0;w<f.length;w++)p+=f[w]*h[w],g+=h[w];const x=g>0?p/g:e[l];i.push(x)}return i}createAnimatedSparkline(e,r=2e3,n=30){return new Promise(i=>{const l=[],u=n,d=r/u;let f=0;const h=()=>{const p=f/(u-1),g=Math.ceil(e.length*p),x=e.slice(0,g).map((w,S)=>({time:S,value:w}));l.push(x),f++,f<u?setTimeout(h,d):i(l)};h()})}getSmoothedPrice(e){return this.smoothedPrices.get(e)||null}getPriceHistory(e,r=50){return(this.priceHistories.get(e)||[]).slice(-r)}isAnimating(e){return this.activeAnimations.has(e)}getAnimationProgress(e){const r=this.activeAnimations.get(e);if(!r)return null;const n=performance.now()-r.startTime;return Math.min(n/r.duration,1)}clearAnimations(e){e?(this.activeAnimations.delete(e),this.animationCallbacks.delete(e)):(this.activeAnimations.clear(),this.animationCallbacks.clear())}updateConfig(e){this.defaultConfig={...this.defaultConfig,...e}}getConfig(){return{...this.defaultConfig}}getStats(){const e=Array.from(this.animationCallbacks.values()).reduce((r,n)=>r+n.length,0);return{activeAnimations:this.activeAnimations.size,totalSubscribers:e,priceHistories:this.priceHistories.size,isRunning:this.isRunning}}cleanup(){this.stopAnimationLoop(),this.activeAnimations.clear(),this.animationCallbacks.clear(),this.priceHistories.clear(),this.smoothedPrices.clear()}}const _n=new uz,dz=Object.freeze(Object.defineProperty({__proto__:null,EasingFunctions:Vu,animationBufferService:_n,default:_n},Symbol.toStringTag,{value:"Module"})),mz="modulepreload",fz=function(t){return"/LeaperFX/"+t},YN={},He=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){let u=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));i=u(r.map(h=>{if(h=fz(h),h in YN)return;YN[h]=!0;const p=h.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const x=document.createElement("link");if(x.rel=p?"stylesheet":mz,p||(x.as="script"),x.crossOrigin="",x.href=h,f&&x.setAttribute("nonce",f),document.head.appendChild(x),p)return new Promise((w,S)=>{x.addEventListener("load",w),x.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${h}`)))})}))}function l(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return i.then(u=>{for(const d of u||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})};class hz{constructor(){te(this,"errors",new Map);te(this,"errorCallbacks",[]);te(this,"healthCallbacks",[]);te(this,"serviceHealth",new Map);te(this,"healthCheckTimers",new Map);te(this,"recoveryStrategies",new Map([["coinbase-ws",{maxAttempts:5,baseDelay:1e3,maxDelay:3e4,backoffMultiplier:2,resetThreshold:300*1e3}],["data-manager",{maxAttempts:3,baseDelay:2e3,maxDelay:15e3,backoffMultiplier:1.5,resetThreshold:180*1e3}],["animation-buffer",{maxAttempts:2,baseDelay:500,maxDelay:5e3,backoffMultiplier:2,resetThreshold:120*1e3}]]));te(this,"activeRecoveries",new Map);te(this,"errorPatterns",new Map);this.initializeHealthTracking()}initializeHealthTracking(){["coinbase-ws","data-manager","animation-buffer","chart-adapter"].forEach(r=>{this.serviceHealth.set(r,{service:r,status:"offline",lastSeen:Date.now(),errorCount:0,uptime:0});const n=setInterval(()=>{this.checkServiceHealth(r)},3e4);this.healthCheckTimers.set(r,n)})}reportError(e,r,n,i,l="medium"){const u=`${e}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,d={id:u,timestamp:Date.now(),service:e,type:r,severity:l,message:n,details:i,resolved:!1,recoveryAttempts:0};return this.errors.set(u,d),this.updateServiceHealth(e,"error"),this.detectErrorPattern(e,n),this.notifyErrorCallbacks(d),this.logError(d),l==="critical"&&this.attemptRecovery(e,u),u}updateServiceHealth(e,r){const n=this.serviceHealth.get(e);if(!n)return;const i=Date.now();switch(r){case"healthy":n.status="healthy",n.lastSeen=i,n.errorCount=Math.max(0,n.errorCount-1);break;case"error":n.errorCount++,n.lastSeen=i,n.errorCount>=5?n.status="unhealthy":n.errorCount>=3&&(n.status="degraded");break;case"timeout":n.lastSeen=i,n.status="degraded";break;case"offline":n.status="offline";break}this.notifyHealthCallbacks()}checkServiceHealth(e){const r=this.serviceHealth.get(e);if(!r)return;const i=Date.now()-r.lastSeen;i>120*1e3&&r.status==="healthy"&&(r.status="degraded",this.notifyHealthCallbacks()),i>300*1e3&&r.status!=="offline"&&(r.status="offline",this.notifyHealthCallbacks())}detectErrorPattern(e,r){const n=`${e}:${r.substring(0,50)}`,i=this.errorPatterns.get(n);i?(i.count++,i.count>=5&&Date.now()-i.firstOccurred<=300*1e3&&(console.warn(`[ErrorHandling] Error pattern detected for ${e}: ${r}`),this.reportError(e,"unknown",`Error pattern detected: ${r}`,{originalCount:i.count,timeSpan:Date.now()-i.firstOccurred},"critical"))):this.errorPatterns.set(n,{count:1,firstOccurred:Date.now(),pattern:new RegExp(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))})}attemptRecovery(e,r){const n=this.recoveryStrategies.get(e);if(!n)return;if(this.activeRecoveries.has(e)){console.log(`[ErrorHandling] Recovery already in progress for ${e}`);return}const i=r?this.errors.get(r):null,l=i?i.recoveryAttempts+1:1;if(l>n.maxAttempts){console.error(`[ErrorHandling] Max recovery attempts exceeded for ${e}`),this.updateServiceHealth(e,"offline");return}const u=Math.min(n.baseDelay*Math.pow(n.backoffMultiplier,l-1),n.maxDelay);console.log(`[ErrorHandling] Attempting recovery for ${e} (attempt ${l}/${n.maxAttempts}) in ${u}ms`);const d=setTimeout(()=>{this.activeRecoveries.delete(e),this.executeRecovery(e,l,r)},u);this.activeRecoveries.set(e,d),i&&(i.recoveryAttempts=l)}async executeRecovery(e,r,n){try{console.log(`[ErrorHandling] Executing recovery for ${e} (attempt ${r})`);let i=!1;switch(e){case"coinbase-ws":i=await this.recoverWebSocketService();break;case"data-manager":i=await this.recoverDataManager();break;case"animation-buffer":i=await this.recoverAnimationBuffer();break;default:console.warn(`[ErrorHandling] No recovery strategy defined for ${e}`);break}if(i){if(console.log(`[ErrorHandling] Recovery successful for ${e}`),this.updateServiceHealth(e,"healthy"),n){const l=this.errors.get(n);l&&(l.resolved=!0)}}else console.warn(`[ErrorHandling] Recovery failed for ${e}, will retry`),this.attemptRecovery(e,n)}catch(i){console.error(`[ErrorHandling] Recovery execution failed for ${e}:`,i),this.attemptRecovery(e,n)}}async recoverWebSocketService(){try{const{coinbaseWebSocketService:e}=await He(async()=>{const{coinbaseWebSocketService:n}=await Promise.resolve().then(()=>lz);return{coinbaseWebSocketService:n}},[]);return e.disconnect(),await new Promise(n=>setTimeout(n,1e3)),await e.connect()}catch(e){return console.error("[ErrorHandling] WebSocket recovery failed:",e),!1}}async recoverDataManager(){try{const{realTimeDataManager:e}=await He(async()=>{const{realTimeDataManager:r}=await Promise.resolve().then(()=>gz);return{realTimeDataManager:r}},void 0);return await e.refresh(),e.isReady()}catch(e){return console.error("[ErrorHandling] Data manager recovery failed:",e),!1}}async recoverAnimationBuffer(){try{const{animationBufferService:e}=await He(async()=>{const{animationBufferService:r}=await Promise.resolve().then(()=>dz);return{animationBufferService:r}},void 0);return e.cleanup(),await new Promise(r=>setTimeout(r,500)),!0}catch(e){return console.error("[ErrorHandling] Animation buffer recovery failed:",e),!1}}subscribeToErrors(e){return this.errorCallbacks.push(e),()=>{const r=this.errorCallbacks.indexOf(e);r>=0&&this.errorCallbacks.splice(r,1)}}subscribeToHealth(e){return this.healthCallbacks.push(e),e(new Map(this.serviceHealth)),()=>{const r=this.healthCallbacks.indexOf(e);r>=0&&this.healthCallbacks.splice(r,1)}}notifyErrorCallbacks(e){this.errorCallbacks.forEach(r=>{try{r(e)}catch(n){console.error("[ErrorHandling] Error in error callback:",n)}})}notifyHealthCallbacks(){const e=new Map(this.serviceHealth);this.healthCallbacks.forEach(r=>{try{r(e)}catch(n){console.error("[ErrorHandling] Error in health callback:",n)}})}logError(e){const r=e.severity==="critical"?"error":e.severity==="high"?"warn":"info";console[r](`[${e.service}] ${e.type}: ${e.message}`,e.details)}getServiceHealth(e){return e?this.serviceHealth.get(e)||null:new Map(this.serviceHealth)}getRecentErrors(e=50,r){let n=Array.from(this.errors.values());return r&&(n=n.filter(i=>i.service===r)),n.sort((i,l)=>l.timestamp-i.timestamp).slice(0,e)}getErrorStatistics(){const e=Array.from(this.errors.values()),r=new Map,n=new Map,i=new Map;let l=0,u=0;return e.forEach(d=>{r.set(d.service,(r.get(d.service)||0)+1),n.set(d.type,(n.get(d.type)||0)+1),i.set(d.severity,(i.get(d.severity)||0)+1),d.resolved?l++:u++}),{totalErrors:e.length,errorsByService:r,errorsByType:n,errorsBySeverity:i,resolvedErrors:l,unresolvedErrors:u}}forceRecovery(e){const r=this.activeRecoveries.get(e);r&&(clearTimeout(r),this.activeRecoveries.delete(e)),this.attemptRecovery(e)}clearOldErrors(e=1440*60*1e3){const r=Date.now()-e;for(const[n,i]of this.errors.entries())i.resolved&&i.timestamp<r&&this.errors.delete(n)}cleanup(){this.healthCheckTimers.forEach(e=>clearInterval(e)),this.healthCheckTimers.clear(),this.activeRecoveries.forEach(e=>clearTimeout(e)),this.activeRecoveries.clear(),this.errorCallbacks=[],this.healthCallbacks=[],this.errors.clear(),this.serviceHealth.clear(),this.errorPatterns.clear()}}const Al=new hz;class pz{constructor(){te(this,"subscriptions",new Map);te(this,"unsubscribeFunctions",new Map);te(this,"state");te(this,"stateCallbacks",[]);te(this,"isInitialized",!1);te(this,"enginePushData",null);te(this,"config",{maxHistoryPoints:100,animationDuration:800,smoothingFactor:.3,reconnectAttempts:5,updateFrequency:1e3});te(this,"stateUpdateTimer",null);te(this,"cryptoSymbolMap",new Map([["BTC/CAD","BTC-USD"],["ETH/CAD","ETH-USD"],["SOL/CAD","SOL-USD"],["AVAX/CAD","AVAX-USD"],["MATIC/CAD","MATIC-USD"],["ADA/CAD","ADA-USD"],["DOT/CAD","DOT-USD"],["LINK/CAD","LINK-USD"],["UNI/CAD","UNI-USD"],["XRP/CAD","XRP-USD"]]));this.state={prices:new Map,ohlcvData:new Map,chartData:new Map,marketItems:new Map,connectionStatus:"disconnected",lastUpdate:Date.now()}}async initialize(){if(this.isInitialized)return!0;try{return console.log("[RealTimeDataManager] Initializing..."),Al.updateServiceHealth("data-manager","healthy"),this.state.connectionStatus="connecting",await Jr.connect(),this.state.connectionStatus="connected",Al.updateServiceHealth("coinbase-ws","healthy"),await this.initializeDefaultSubscriptions(),this.startStateBroadcast(),this.isInitialized=!0,console.log("[RealTimeDataManager] Initialized successfully"),!0}catch(e){return console.error("[RealTimeDataManager] Initialization failed:",e),this.state.connectionStatus="error",Al.reportError("data-manager","connection",`Initialization failed: ${e instanceof Error?e.message:"Unknown error"}`,e,"critical"),!1}}async initializeDefaultSubscriptions(){const e=["1m","5m","15m","1h"];for(const[r,n]of this.cryptoSymbolMap.entries())await this.subscribeToSymbol(r,n,e)}async subscribeToSymbol(e,r,n){if(this.subscriptions.has(e)){console.warn(`[RealTimeDataManager] Already subscribed to ${e}`);return}const i={symbol:r,timeframes:n,ohlcvCallbacks:new Map},u=[Jr.subscribePriceUpdates(r,d=>this.handlePriceUpdate(e,d))];for(const d of n){const f=Jr.subscribeOHLCVUpdates(r,d,h=>this.handleOHLCVUpdate(e,d,h));u.push(f)}this.subscriptions.set(e,i),this.unsubscribeFunctions.set(e,u),console.log(`[RealTimeDataManager] Subscribed to ${e} (${r})`)}handlePriceUpdate(e,r){try{if(this.state.prices.set(e,r),this.enginePushData){const d=e.replace("/CAD","").replace("-USD","");this.enginePushData(d,r.price,r.timestamp),Math.abs(r.changePercent24h)>2&&console.log(`[Signal] ${d} moved ${r.changePercent24h.toFixed(2)}%`)}const n=r.price*1.35,i={...r,price:n,high24h:r.high24h*1.35,low24h:r.low24h*1.35},l=VN.transformToMarketItemData(i,e.replace("/CAD",""));this.state.marketItems.set(e,l);const u=_n.getSmoothedPrice(e);_n.animatePrice(e,n,u||void 0,{duration:this.config.animationDuration,easing:"easeOutCubic",smoothingFactor:this.config.smoothingFactor}),Al.updateServiceHealth("data-manager","healthy"),this.updateStateTimestamp()}catch(n){console.error(`[RealTimeDataManager] Error handling price update for ${e}:`,n),Al.reportError("data-manager","data",`Price update failed for ${e}: ${n instanceof Error?n.message:"Unknown error"}`,{symbol:e,priceData:r},"medium")}}handleOHLCVUpdate(e,r,n){this.state.ohlcvData.has(e)||(this.state.ohlcvData.set(e,new Map),this.state.chartData.set(e,new Map));const i=this.state.ohlcvData.get(e),l=this.state.chartData.get(e);let u=i.get(r)||[];const d=u.findIndex(h=>h.timestamp===n.timestamp);d>=0?u[d]=n:(u.push(n),u.sort((h,p)=>h.timestamp-p.timestamp)),u.length>this.config.maxHistoryPoints&&(u=u.slice(-this.config.maxHistoryPoints)),i.set(r,u);const f=VN.generateBloombergChartData(u,r,this.config.maxHistoryPoints);l.set(r,f),this.updateStateTimestamp()}subscribeToState(e){return this.stateCallbacks.push(e),e({...this.state}),()=>{const r=this.stateCallbacks.indexOf(e);r>=0&&this.stateCallbacks.splice(r,1)}}startStateBroadcast(){this.stateUpdateTimer||(this.stateUpdateTimer=setInterval(()=>{this.broadcastState()},this.config.updateFrequency))}broadcastState(){const e={...this.state};this.stateCallbacks.forEach(r=>{try{r(e)}catch(n){console.error("[RealTimeDataManager] Error in state callback:",n)}})}updateStateTimestamp(){this.state.lastUpdate=Date.now()}getCurrentPrice(e){return this.state.prices.get(e)||null}getOHLCVData(e,r){const n=this.state.ohlcvData.get(e);return(n==null?void 0:n.get(r))||[]}getChartData(e,r){const n=this.state.chartData.get(e);return(n==null?void 0:n.get(r))||[]}getMarketItem(e){return this.state.marketItems.get(e)||null}getAllMarketItems(){return Array.from(this.state.marketItems.values())}async addSymbol(e,r,n){const i=n||["1m","5m","15m","1h"];Jr.addSymbol(r),await this.subscribeToSymbol(e,r,i),this.cryptoSymbolMap.set(e,r)}removeSymbol(e){const r=this.subscriptions.get(e);if(!r)return;const n=this.unsubscribeFunctions.get(e);n&&n.forEach(i=>i()),Jr.removeSymbol(r.symbol),this.subscriptions.delete(e),this.unsubscribeFunctions.delete(e),this.state.prices.delete(e),this.state.ohlcvData.delete(e),this.state.chartData.delete(e),this.state.marketItems.delete(e),this.cryptoSymbolMap.delete(e),this.updateStateTimestamp()}getConnectionStatus(){return this.state.connectionStatus}getStatistics(){let e=0;return this.state.ohlcvData.forEach(r=>{r.forEach(n=>{e+=n.length})}),{subscriptions:this.subscriptions.size,pricesTracked:this.state.prices.size,totalOHLCVBars:e,connectionStatus:this.state.connectionStatus,lastUpdate:new Date(this.state.lastUpdate).toISOString(),webSocketStats:Jr.getStatus(),animationStats:_n.getStats()}}updateConfig(e){this.config={...this.config,...e},_n.updateConfig({duration:this.config.animationDuration,smoothingFactor:this.config.smoothingFactor}),this.stateUpdateTimer&&e.updateFrequency&&(clearInterval(this.stateUpdateTimer),this.stateUpdateTimer=null,this.startStateBroadcast())}async refresh(){console.log("[RealTimeDataManager] Forcing refresh..."),Jr.disconnect(),this.state.connectionStatus="connecting",await Jr.connect(),this.state.connectionStatus="connected",await this.initializeDefaultSubscriptions(),this.updateStateTimestamp(),this.broadcastState()}cleanup(){console.log("[RealTimeDataManager] Cleaning up..."),this.stateUpdateTimer&&(clearInterval(this.stateUpdateTimer),this.stateUpdateTimer=null),this.unsubscribeFunctions.forEach(e=>{e.forEach(r=>r())}),Jr.disconnect(),_n.cleanup(),this.subscriptions.clear(),this.unsubscribeFunctions.clear(),this.stateCallbacks=[],this.isInitialized=!1,this.state={prices:new Map,ohlcvData:new Map,chartData:new Map,marketItems:new Map,connectionStatus:"disconnected",lastUpdate:Date.now()}}getState(){return{...this.state}}isReady(){return this.isInitialized&&this.state.connectionStatus==="connected"}setEnginePushData(e){this.enginePushData=e,console.log("[RealTimeDataManager] High-performance engine connected")}async connect(){return this.initialize()}}const wr=new pz,gz=Object.freeze(Object.defineProperty({__proto__:null,default:wr,realTimeDataManager:wr},Symbol.toStringTag,{value:"Module"}));function _0(t={}){const{symbols:e=[],timeframes:r=["1m","5m","15m","1h"],enableAnimations:n=!0,autoInitialize:i=!0}=t,[l,u]=b.useState({prices:new Map,ohlcvData:new Map,chartData:new Map,marketItems:new Map,connectionStatus:"disconnected",lastUpdate:Date.now()}),[d,f]=b.useState(null),h=b.useRef(null),p=b.useRef(null),g=b.useCallback(async()=>(p.current||(p.current=(async()=>{try{if(f(null),h.current=wr.subscribeToState(E=>{u(E)}),!await wr.initialize())return f("Failed to initialize real-time data connection"),!1;for(const E of e){const _=E.replace("/CAD","-USD");await wr.addSymbol(E,_,r)}return!0}catch(j){return console.error("[useRealTimeData] Initialization error:",j),f(j instanceof Error?j.message:"Unknown error"),!1}})()),p.current),[e,r]);b.useEffect(()=>(i&&g(),()=>{h.current&&h.current()}),[i,g]),b.useEffect(()=>()=>{h.current&&(h.current(),h.current=null)},[]);const x=b.useCallback(async()=>{try{f(null),await wr.refresh()}catch(j){console.error("[useRealTimeData] Refresh error:",j),f(j instanceof Error?j.message:"Refresh failed")}},[]),w=b.useCallback(async(j,E,_)=>{try{await wr.addSymbol(j,E,_||r)}catch(R){throw console.error("[useRealTimeData] Add symbol error:",R),R}},[r]),S=b.useCallback(j=>{wr.removeSymbol(j)},[]),C=b.useCallback((j,E)=>wr.getChartData(j,E),[]),N=b.useCallback(j=>wr.getCurrentPrice(j),[]),A=b.useCallback((j,E)=>{if(!n){const _=l.prices.get(j);return _&&E(_.price),()=>{}}return _n.subscribe(j,E)},[n,l.prices]);return{isConnected:l.connectionStatus==="connected",isConnecting:l.connectionStatus==="connecting",connectionError:d,prices:l.prices,marketItems:Array.from(l.marketItems.values()),initialize:g,refresh:x,addSymbol:w,removeSymbol:S,getChartData:C,getCurrentPrice:N,getAnimatedPrice:A,statistics:wr.getStatistics()}}function yz(){const{marketItems:t,isConnected:e,connectionError:r,refresh:n}=_0({autoInitialize:!0,enableAnimations:!0}),[i,l]=b.useState(!0);b.useEffect(()=>{e&&l(!1)},[e]);const u=b.useCallback(async()=>{l(!0);try{await n()}finally{l(!1)}},[n]);return{cryptoData:t.filter(d=>["BTC","ETH","SOL","AVAX","MATIC","ADA","DOT","LINK","UNI","XRP"].includes(d.name)),isLoading:i,error:r,refresh:u}}function xz(t){const{symbol:e,enableAnimation:r=!0,animationDuration:n=800,smoothingFactor:i=.3}=t,[l,u]=b.useState(null),[d,f]=b.useState(null),[h,p]=b.useState(0),[g,x]=b.useState(0),[w,S]=b.useState("neutral"),[C,N]=b.useState(!1),{getCurrentPrice:A,getAnimatedPrice:j}=_0({autoInitialize:!0});return b.useEffect(()=>{if(!r){const _=A(e);_&&(u(_.price),p(_.change24h),x(_.changePercent24h),S(_.changePercent24h>=0?"up":"down"));return}return _n.updateConfig({duration:n,smoothingFactor:i}),j(e,_=>{if(f(l),u(_),l!==null){const R=_-l;p(R),x(l!==0?R/l*100:0),S(R>0?"up":R<0?"down":"neutral")}N(_n.isAnimating(e))})},[e,r,n,i,A,j,l]),{price:l,previousPrice:d,change:h,changePercent:g,trend:w,isAnimating:C}}function vz(){const{statistics:t,isConnected:e,connectionError:r}=_0({autoInitialize:!0}),[n,i]=b.useState("unhealthy");return b.useEffect(()=>{e?r?i("degraded"):t.pricesTracked>0?i("healthy"):i("degraded"):i("unhealthy")},[e,r,t.pricesTracked]),{health:n,isConnected:e,error:r,statistics:t,lastUpdate:t.lastUpdate}}const dc=[{symbol:"USD/CAD",name:"US Dollar / Canadian Dollar",category:"forex",subCategory:"major_pair",baseCurrency:"USD",quoteCurrency:"CAD",dataSource:"fxapi",updateFrequency:5e3,priority:"critical",tradeable:!0,showInDashboard:!0},{symbol:"EUR/CAD",name:"Euro / Canadian Dollar",category:"forex",subCategory:"major_pair",baseCurrency:"EUR",quoteCurrency:"CAD",dataSource:"fxapi",updateFrequency:5e3,priority:"critical",tradeable:!0,showInDashboard:!0},{symbol:"GBP/CAD",name:"British Pound / Canadian Dollar",category:"forex",subCategory:"major_pair",baseCurrency:"GBP",quoteCurrency:"CAD",dataSource:"fxapi",updateFrequency:5e3,priority:"critical",tradeable:!0,showInDashboard:!0},{symbol:"JPY/CAD",name:"Japanese Yen / Canadian Dollar",category:"forex",subCategory:"major_pair",baseCurrency:"JPY",quoteCurrency:"CAD",dataSource:"fxapi",updateFrequency:1e4,priority:"high",tradeable:!0,showInDashboard:!0},{symbol:"CHF/CAD",name:"Swiss Franc / Canadian Dollar",category:"forex",subCategory:"major_pair",baseCurrency:"CHF",quoteCurrency:"CAD",dataSource:"fxapi",updateFrequency:1e4,priority:"high",tradeable:!0,showInDashboard:!0},{symbol:"AUD/CAD",name:"Australian Dollar / Canadian Dollar",category:"forex",subCategory:"major_pair",baseCurrency:"AUD",quoteCurrency:"CAD",dataSource:"fxapi",updateFrequency:1e4,priority:"high",tradeable:!0,showInDashboard:!0},{symbol:"EUR/USD",name:"Euro / US Dollar",category:"forex",subCategory:"cross_rate",baseCurrency:"EUR",quoteCurrency:"USD",dataSource:"fxapi",updateFrequency:5e3,priority:"high",tradeable:!1,showInDashboard:!1},{symbol:"CNY/CAD",name:"Chinese Yuan / Canadian Dollar",category:"forex",subCategory:"asia",baseCurrency:"CNY",quoteCurrency:"CAD",dataSource:"fxapi",updateFrequency:6e4,priority:"high",tradeable:!0,showInDashboard:!0},{symbol:"HKD/CAD",name:"Hong Kong Dollar / Canadian Dollar",category:"forex",subCategory:"asia",baseCurrency:"HKD",quoteCurrency:"CAD",dataSource:"fxapi",updateFrequency:6e4,priority:"medium",tradeable:!0,showInDashboard:!0},{symbol:"INR/CAD",name:"Indian Rupee / Canadian Dollar",category:"forex",subCategory:"asia",baseCurrency:"INR",quoteCurrency:"CAD",dataSource:"fxapi",updateFrequency:6e4,priority:"high",tradeable:!0,showInDashboard:!0},{symbol:"KRW/CAD",name:"South Korean Won / Canadian Dollar",category:"forex",subCategory:"asia",baseCurrency:"KRW",quoteCurrency:"CAD",dataSource:"fxapi",updateFrequency:6e4,priority:"medium",tradeable:!0,showInDashboard:!0},{symbol:"THB/CAD",name:"Thai Baht / Canadian Dollar",category:"forex",subCategory:"asia",baseCurrency:"THB",quoteCurrency:"CAD",dataSource:"fxapi",updateFrequency:6e4,priority:"low",tradeable:!0,showInDashboard:!1},{symbol:"PKR/CAD",name:"Pakistani Rupee / Canadian Dollar",category:"forex",subCategory:"asia",baseCurrency:"PKR",quoteCurrency:"CAD",dataSource:"fxapi",updateFrequency:6e4,priority:"medium",tradeable:!0,showInDashboard:!0},{symbol:"AED/CAD",name:"UAE Dirham / Canadian Dollar",category:"forex",subCategory:"middle_east",baseCurrency:"AED",quoteCurrency:"CAD",dataSource:"fxapi",updateFrequency:6e4,priority:"high",tradeable:!0,showInDashboard:!0},{symbol:"SAR/CAD",name:"Saudi Riyal / Canadian Dollar",category:"forex",subCategory:"middle_east",baseCurrency:"SAR",quoteCurrency:"CAD",dataSource:"fxapi",updateFrequency:6e4,priority:"medium",tradeable:!0,showInDashboard:!0},{symbol:"TRY/CAD",name:"Turkish Lira / Canadian Dollar",category:"forex",subCategory:"middle_east",baseCurrency:"TRY",quoteCurrency:"CAD",dataSource:"fxapi",updateFrequency:3e4,priority:"medium",tradeable:!0,showInDashboard:!0},{symbol:"ILS/CAD",name:"Israeli Shekel / Canadian Dollar",category:"forex",subCategory:"middle_east",baseCurrency:"ILS",quoteCurrency:"CAD",dataSource:"fxapi",updateFrequency:6e4,priority:"high",tradeable:!0,showInDashboard:!0},{symbol:"MXN/CAD",name:"Mexican Peso / Canadian Dollar",category:"forex",subCategory:"americas",baseCurrency:"MXN",quoteCurrency:"CAD",dataSource:"fxapi",updateFrequency:6e4,priority:"high",tradeable:!0,showInDashboard:!0},{symbol:"BRL/CAD",name:"Brazilian Real / Canadian Dollar",category:"forex",subCategory:"americas",baseCurrency:"BRL",quoteCurrency:"CAD",dataSource:"fxapi",updateFrequency:6e4,priority:"medium",tradeable:!0,showInDashboard:!0},{symbol:"NZD/CAD",name:"New Zealand Dollar / Canadian Dollar",category:"forex",subCategory:"oceania",baseCurrency:"NZD",quoteCurrency:"CAD",dataSource:"fxapi",updateFrequency:6e4,priority:"medium",tradeable:!0,showInDashboard:!0},{symbol:"ZAR/CAD",name:"South African Rand / Canadian Dollar",category:"forex",subCategory:"africa",baseCurrency:"ZAR",quoteCurrency:"CAD",dataSource:"fxapi",updateFrequency:6e4,priority:"low",tradeable:!0,showInDashboard:!1},{symbol:"NGN/CAD",name:"Nigerian Naira / Canadian Dollar",category:"forex",subCategory:"africa",baseCurrency:"NGN",quoteCurrency:"CAD",dataSource:"fxapi",updateFrequency:6e4,priority:"low",tradeable:!0,showInDashboard:!1}],dm=[{symbol:"BTC/CAD",wsSymbol:"BTC-USD",name:"Bitcoin / Canadian Dollar",category:"crypto",subCategory:"major",baseCurrency:"BTC",quoteCurrency:"CAD",dataSource:"coinbase",updateFrequency:1e3,priority:"high",tradeable:!0,showInDashboard:!0,metadata:{chainId:"bitcoin",decimals:8}},{symbol:"ETH/CAD",wsSymbol:"ETH-USD",name:"Ethereum / Canadian Dollar",category:"crypto",subCategory:"major",baseCurrency:"ETH",quoteCurrency:"CAD",dataSource:"coinbase",updateFrequency:1e3,priority:"high",tradeable:!0,showInDashboard:!0,metadata:{chainId:"ethereum",decimals:18}},{symbol:"SOL/CAD",wsSymbol:"SOL-USD",name:"Solana / Canadian Dollar",category:"crypto",subCategory:"layer1",baseCurrency:"SOL",quoteCurrency:"CAD",dataSource:"coinbase",updateFrequency:1e3,priority:"medium",tradeable:!0,showInDashboard:!0,metadata:{chainId:"solana",decimals:9}},{symbol:"AVAX/CAD",wsSymbol:"AVAX-USD",name:"Avalanche / Canadian Dollar",category:"crypto",subCategory:"layer1",baseCurrency:"AVAX",quoteCurrency:"CAD",dataSource:"coinbase",updateFrequency:1e3,priority:"medium",tradeable:!0,showInDashboard:!0,metadata:{chainId:"avalanche",decimals:18}},{symbol:"USDC/CAD",wsSymbol:"USDC-USD",name:"USD Coin / Canadian Dollar",category:"crypto",subCategory:"stablecoin",baseCurrency:"USDC",quoteCurrency:"CAD",dataSource:"coinbase",updateFrequency:5e3,priority:"high",tradeable:!0,showInDashboard:!0,metadata:{chainId:"ethereum",decimals:6,isStablecoin:!0}}],mm=[{symbol:"XAU/CAD",wsSymbol:"XAUUSD",name:"Gold (Troy Ounce) / CAD",category:"commodity",subCategory:"precious_metal",baseCurrency:"XAU",quoteCurrency:"CAD",dataSource:"twelvedata",updateFrequency:15e3,priority:"critical",tradeable:!0,showInDashboard:!0,metadata:{unit:"oz_t",purity:"999.9",gramsPerUnit:31.1035}},{symbol:"XAU-G/CAD",wsSymbol:"XAUUSD",name:"Gold (Gram) / CAD",category:"commodity",subCategory:"precious_metal_retail",baseCurrency:"XAU",quoteCurrency:"CAD",dataSource:"twelvedata",updateFrequency:3e4,priority:"high",tradeable:!0,showInDashboard:!0,metadata:{unit:"gram",purity:"999.9",baseUnit:"oz_t",conversionFactor:.0321507}},{symbol:"XAU-KG/CAD",wsSymbol:"XAUUSD",name:"Gold (Kilogram) / CAD",category:"commodity",subCategory:"precious_metal_bulk",baseCurrency:"XAU",quoteCurrency:"CAD",dataSource:"twelvedata",updateFrequency:6e4,priority:"medium",tradeable:!0,showInDashboard:!1,metadata:{unit:"kg",purity:"999.9",baseUnit:"oz_t",conversionFactor:32.1507}},{symbol:"XAG/CAD",wsSymbol:"XAGUSD",name:"Silver (Troy Ounce) / CAD",category:"commodity",subCategory:"precious_metal",baseCurrency:"XAG",quoteCurrency:"CAD",dataSource:"twelvedata",updateFrequency:2e4,priority:"high",tradeable:!0,showInDashboard:!0,metadata:{unit:"oz_t",purity:"999",gramsPerUnit:31.1035}},{symbol:"XAG-G/CAD",wsSymbol:"XAGUSD",name:"Silver (Gram) / CAD",category:"commodity",subCategory:"precious_metal_retail",baseCurrency:"XAG",quoteCurrency:"CAD",dataSource:"twelvedata",updateFrequency:3e4,priority:"medium",tradeable:!0,showInDashboard:!0,metadata:{unit:"gram",purity:"999",baseUnit:"oz_t",conversionFactor:.0321507}},{symbol:"XAG-KG/CAD",wsSymbol:"XAGUSD",name:"Silver (Kilogram) / CAD",category:"commodity",subCategory:"precious_metal_bulk",baseCurrency:"XAG",quoteCurrency:"CAD",dataSource:"twelvedata",updateFrequency:6e4,priority:"low",tradeable:!0,showInDashboard:!1,metadata:{unit:"kg",purity:"999",baseUnit:"oz_t",conversionFactor:32.1507}},{symbol:"XPT/CAD",wsSymbol:"XPTUSD",name:"Platinum (Troy Ounce) / CAD",category:"commodity",subCategory:"precious_metal",baseCurrency:"XPT",quoteCurrency:"CAD",dataSource:"twelvedata",updateFrequency:6e4,priority:"medium",tradeable:!0,showInDashboard:!0,metadata:{unit:"oz_t",purity:"999.5"}},{symbol:"XPD/CAD",wsSymbol:"XPDUSD",name:"Palladium (Troy Ounce) / CAD",category:"commodity",subCategory:"precious_metal",baseCurrency:"XPD",quoteCurrency:"CAD",dataSource:"twelvedata",updateFrequency:6e4,priority:"low",tradeable:!1,showInDashboard:!0,metadata:{unit:"oz_t",purity:"999.5"}},{symbol:"WTI/CAD",wsSymbol:"CL=F",name:"WTI Crude Oil / CAD",category:"commodity",subCategory:"energy",baseCurrency:"WTI",quoteCurrency:"CAD",dataSource:"twelvedata",updateFrequency:15e3,priority:"high",tradeable:!1,showInDashboard:!0,metadata:{unit:"barrel",contract:"futures",marketHours:"extended"}},{symbol:"BRENT/CAD",wsSymbol:"BZ=F",name:"Brent Crude Oil / CAD",category:"commodity",subCategory:"energy",baseCurrency:"BRENT",quoteCurrency:"CAD",dataSource:"twelvedata",updateFrequency:2e4,priority:"medium",tradeable:!1,showInDashboard:!0,metadata:{unit:"barrel",contract:"futures",marketHours:"extended"}},{symbol:"NG/CAD",wsSymbol:"NG=F",name:"Natural Gas / CAD",category:"commodity",subCategory:"energy",baseCurrency:"NG",quoteCurrency:"CAD",dataSource:"twelvedata",updateFrequency:3e4,priority:"low",tradeable:!1,showInDashboard:!0,metadata:{unit:"mmBtu",contract:"futures",marketHours:"extended"}}],fm=[{symbol:"TSX",wsSymbol:"^GSPTSE",name:"S&P/TSX Composite Index",category:"index",subCategory:"canadian",baseCurrency:"TSX",quoteCurrency:"CAD",dataSource:"twelvedata",updateFrequency:3e4,priority:"high",tradeable:!1,showInDashboard:!0,metadata:{exchange:"TSE",country:"CA"}},{symbol:"TSX60",wsSymbol:"^TX60",name:"S&P/TSX 60 Index",category:"index",subCategory:"canadian",baseCurrency:"TSX60",quoteCurrency:"CAD",dataSource:"twelvedata",updateFrequency:6e4,priority:"medium",tradeable:!1,showInDashboard:!0,metadata:{exchange:"TSE",country:"CA"}},{symbol:"SPX/CAD",wsSymbol:"SPY",name:"S&P 500 (CAD)",category:"index",subCategory:"us",baseCurrency:"SPX",quoteCurrency:"CAD",dataSource:"alpaca",updateFrequency:1e4,priority:"high",tradeable:!1,showInDashboard:!0,metadata:{exchange:"NYSE",country:"US"}},{symbol:"DJI/CAD",wsSymbol:"DIA",name:"Dow Jones (CAD)",category:"index",subCategory:"us",baseCurrency:"DJI",quoteCurrency:"CAD",dataSource:"alpaca",updateFrequency:1e4,priority:"medium",tradeable:!1,showInDashboard:!0,metadata:{exchange:"NYSE",country:"US"}},{symbol:"NASDAQ/CAD",wsSymbol:"QQQ",name:"NASDAQ 100 (CAD)",category:"index",subCategory:"us",baseCurrency:"NASDAQ",quoteCurrency:"CAD",dataSource:"alpaca",updateFrequency:1e4,priority:"medium",tradeable:!1,showInDashboard:!0,metadata:{exchange:"NASDAQ",country:"US"}},{symbol:"CA-30Y-YIELD",wsSymbol:"CA_30Y",name:"Canada 30-Year Government Bond Yield",category:"index",subCategory:"bond_yield",baseCurrency:"CAD",quoteCurrency:"CAD",dataSource:"bankofcanada",updateFrequency:6e4,priority:"high",tradeable:!1,showInDashboard:!0,metadata:{unit:"percent",decimals:3,series:"CGB.30Y"}}],Xp=[...dc,...dm,...mm,...fm];dc.filter(t=>t.showInDashboard&&t.tradeable),dm.filter(t=>t.showInDashboard),mm.filter(t=>t.showInDashboard),fm.filter(t=>t.showInDashboard);const Kp={storeOpen:1,storeClosed:.5,weekend:.25},bz="https://api.frankfurter.app",wz=1e4,Wp=3,GN=1e3,Sz={AUD:1.1159,BGN:1.2221,BRL:3.9509,CHF:.58801,CNY:5.2288,CZK:15.2759,DKK:4.6637,EUR:.62488,GBP:.54184,HKD:5.7137,HUF:247.38,IDR:11836,ILS:2.5013,INR:63.776,ISK:89.36,JPY:107.59,KRW:1012.27,MXN:13.5381,MYR:3.0862,NOK:7.4698,NZD:1.2224,PHP:41.424,PLN:2.6564,RON:3.1697,SEK:6.9849,SGD:.93539,THB:23.561,TRY:29.617,USD:.72786,ZAR:12.8901},Nz=async(t,e=wz)=>{const r=new AbortController,n=setTimeout(()=>r.abort(),e);try{const i=await fetch(t,{signal:r.signal,headers:{Accept:"application/json","Content-Type":"application/json"}});return clearTimeout(n),i}catch(i){throw clearTimeout(n),i}},Cz=t=>new Promise(e=>setTimeout(e,t)),Qg=async(t="CAD")=>{let e=null;for(let r=1;r<=Wp;r++)try{console.log(`Fetching latest rates (attempt ${r}/${Wp}) for ${t}`);const n=await Nz(`${bz}/latest?from=${t}`);if(!n.ok)throw new Error(`API Network Error: ${n.status} ${n.statusText}`);const i=await n.json();if(!i||!i.rates)throw new Error("Invalid response format: missing rates data");return console.log(`✅ Successfully fetched latest rates for ${t}`),i.rates}catch(n){e=n,console.warn(`❌ Attempt ${r} failed:`,n),r<Wp&&(console.log(`⏳ Retrying in ${GN}ms...`),await Cz(GN*r))}return console.error("❌ All attempts to fetch latest rates failed. Using fallback data.",e),console.log("📊 Using fallback exchange rates (may not be current)"),Sz};async function jz(t,e,r){try{if(!e)return null;const[n,i]=t.split("/"),l=`C:${n}${i}`,d=`${(r||"https://api.polygon.io").replace(/\/$/,"")}/v2/aggs/ticker/${encodeURIComponent(l)}/prev?adjusted=true&apiKey=${e}`,f=await fetch(d);if(!f.ok)return null;const h=await f.json(),p=Array.isArray(h==null?void 0:h.results)?h.results[0]:null,g=(p==null?void 0:p.c)??(p==null?void 0:p.close)??(p==null?void 0:p.p)??null;return typeof g=="number"&&isFinite(g)?g:null}catch{return null}}const XN={getFxRate:jz};async function Az(t,e,r){var n,i,l,u,d;try{if(!e)return null;const f=(r||"https://api.twelvedata.com").replace(/\/$/,""),h=`${f}/price?symbol=${encodeURIComponent(t)}&apikey=${e}`;let p=await fetch(h);if(p.ok){const x=await p.json(),w=parseFloat((x==null?void 0:x.price)??((n=x==null?void 0:x.data)==null?void 0:n.price)??"");if(Number.isFinite(w)&&w>0)return w}const g=`${f}/time_series?symbol=${encodeURIComponent(t)}&interval=1min&outputsize=1&apikey=${e}`;if(p=await fetch(g),p.ok){const x=await p.json(),w=parseFloat(((l=(i=x==null?void 0:x.values)==null?void 0:i[0])==null?void 0:l.close)??((d=(u=x==null?void 0:x.data)==null?void 0:u[0])==null?void 0:d.close)??"");if(Number.isFinite(w)&&w>0)return w}return null}catch{return null}}const Dz={getCommodityUSD:Az},Tz={BASE_URL:"/LeaperFX/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Ez={};class _z{constructor(){te(this,"instruments",new Map);te(this,"marketData",new Map);te(this,"fxRateCache",{});te(this,"dataSourceStatus",new Map);te(this,"subscribers",new Map);te(this,"updateTimers",new Map);te(this,"isInitialized",!1);te(this,"CRITICAL_FX_PAIRS",["USD/CAD","EUR/USD","GBP/USD"]);te(this,"FX_CACHE_TTL",3e5);te(this,"FALLBACK_USD_CAD",1.35);te(this,"wsConnections",new Map);te(this,"API_ENDPOINTS");this.API_ENDPOINTS={fxapi:this.getEnv("VITE_FXAPI_URL")||"https://api.fxapi.com/v1",twelvedata:this.getEnv("VITE_TWELVEDATA_URL")||"https://api.twelvedata.com",alpaca:this.getEnv("VITE_ALPACA_URL")||"https://data.alpaca.markets/v2",polygon:this.getEnv("VITE_POLYGON_URL")||"https://api.polygon.io",finnhub:this.getEnv("VITE_FINNHUB_URL")||"https://finnhub.io/api/v1",bankofcanada:this.getEnv("VITE_BOC_URL")||"https://www.bankofcanada.ca/valet"},Xp.forEach(e=>{this.instruments.set(e.symbol,e)})}getEnv(e){try{const r=typeof import.meta<"u"?Tz:void 0,n=typeof window<"u"?window:{},i=typeof process<"u"?Ez:void 0;return r&&r[e]||n.__ENV__&&n.__ENV__[e]||i&&i[e]}catch{return}}async initialize(){if(!this.isInitialized){console.log("[UnifiedDataAggregator] Initializing...");try{await this.initializeFXRates(),await this.connectCoinbase(),await this.connectForexProvider(),await this.connectCommoditiesProvider(),await this.connectIndicesProvider(),this.startUpdateSchedulers(),this.isInitialized=!0,console.log("[UnifiedDataAggregator] Initialized successfully")}catch(e){throw console.error("[UnifiedDataAggregator] Initialization failed:",e),e}}}async initializeFXRates(){console.log("[UnifiedDataAggregator] Fetching initial FX rates (Polygon first)...");const e=Date.now(),r=this.getEnv("VITE_POLYGON_KEY"),n=this.getEnv("VITE_POLYGON_URL"),i=new Set;dc.forEach(u=>{u.quoteCurrency==="CAD"&&i.add(`${u.baseCurrency}/CAD`)}),this.CRITICAL_FX_PAIRS.forEach(u=>i.add(u));let l=0;if(r)for(const u of i){const d=await XN.getFxRate(u,r,n);Number.isFinite(d)&&d>0&&(this.fxRateCache[u]={rate:d,timestamp:e,ttl:this.FX_CACHE_TTL},l++)}if(l<Math.max(3,Math.floor(i.size*.5)))try{const u=await Qg("CAD");if(u){i.forEach(f=>{const h=f.split("/")[0],p=u[h];typeof p=="number"&&p>0&&(this.fxRateCache[f]={rate:1/p,timestamp:e,ttl:this.FX_CACHE_TTL})});const d=await Qg("USD");d&&(this.fxRateCache["EUR/USD"]={rate:d.EUR||.92,timestamp:e,ttl:this.FX_CACHE_TTL},this.fxRateCache["GBP/USD"]={rate:d.GBP||.79,timestamp:e,ttl:this.FX_CACHE_TTL})}else this.useFallbackRates()}catch(u){console.warn("[UnifiedDataAggregator] Frankfurter fallback failed, using static fallbacks",u),this.useFallbackRates()}console.log("[UnifiedDataAggregator] FX init complete. Pairs cached:",Object.keys(this.fxRateCache).length)}async fetchPolygonFxPair(e,r){try{const[n,i]=e.split("/"),l=`C:${n}${i}`,u=`${this.API_ENDPOINTS.polygon}/v2/aggs/ticker/${encodeURIComponent(l)}/prev?adjusted=true&apiKey=${r}`,d=await fetch(u);if(!d.ok)return null;const f=await d.json(),h=Array.isArray(f==null?void 0:f.results)?f.results[0]:null,p=(h==null?void 0:h.c)??(h==null?void 0:h.close)??(h==null?void 0:h.p)??null;return typeof p=="number"&&isFinite(p)?p:null}catch{return null}}useFallbackRates(){Object.entries({"USD/CAD":1.35,"EUR/USD":1.08,"GBP/USD":1.27,"EUR/CAD":1.46,"GBP/CAD":1.71,"JPY/CAD":.0092,"CHF/CAD":1.52,"AUD/CAD":.88,"CNY/CAD":.19,"HKD/CAD":.17,"INR/CAD":.016,"KRW/CAD":.001,"THB/CAD":.043,"AED/CAD":.37,"SAR/CAD":.36,"TRY/CAD":.034,"MXN/CAD":.079,"BRL/CAD":.25,"NZD/CAD":.82,"ZAR/CAD":.078}).forEach(([r,n])=>{this.fxRateCache[r]||(this.fxRateCache[r]={rate:n,timestamp:Date.now(),ttl:this.FX_CACHE_TTL})})}async connectCoinbase(){const e=this.getInstrumentsByCategory("crypto");for(const r of e)r.wsSymbol&&Jr.subscribePriceUpdates(r.wsSymbol,n=>this.handleCryptoUpdate(r,n));this.updateSourceStatus("coinbase","healthy")}async connectForexProvider(){console.log("[UnifiedDataAggregator] Connecting to forex provider (Polygon)..."),this.updateSourceStatus("polygon","healthy"),this.getInstrumentsByCategory("forex").forEach(r=>{this.scheduleUpdate(r)})}async connectCommoditiesProvider(){console.log("[UnifiedDataAggregator] Connecting to commodities provider..."),this.updateSourceStatus("twelvedata","healthy"),this.getInstrumentsByCategory("commodity").forEach(r=>{this.scheduleUpdate(r)})}async connectIndicesProvider(){console.log("[UnifiedDataAggregator] Connecting to indices provider..."),this.updateSourceStatus("alpaca","degraded"),this.getInstrumentsByCategory("index").forEach(r=>{this.scheduleUpdate(r)})}handleCryptoUpdate(e,r){const n=r.price,i=this.getCADRate("USD"),l=n*i;try{const d=this.getEnv("VITE_DEBUG_MODE");String(d).toLowerCase()==="true"&&console.debug(`[Aggregator] ${e.symbol} tick → USD ${n.toFixed(2)} | CAD ${l.toFixed(2)} | Δ24h ${(r.changePercent24h??0).toFixed(2)}%`)}catch{}const u={symbol:e.symbol,price:n,priceCAD:l,timestamp:r.timestamp||Date.now(),source:"coinbase",change24h:r.change24h,changePercent24h:r.changePercent24h,volume24h:r.volume24h,high24h:r.high24h?r.high24h*i:void 0,low24h:r.low24h?r.low24h*i:void 0};this.updateSourceStatus("coinbase","healthy"),this.updateMarketData(e.symbol,u);try{const d=this.getEnv("VITE_DEBUG_MODE");String(d).toLowerCase()==="true"&&console.debug(`[Aggregator] published ${e.symbol} @ CAD ${l.toFixed(2)} (${new Date(u.timestamp).toLocaleTimeString()})`)}catch{}}scheduleUpdate(e){this.updateTimers.has(e.symbol)&&clearInterval(this.updateTimers.get(e.symbol));const r=e.updateFrequency,n=this.getAdjustedUpdateFrequency(r),i=setInterval(()=>{this.fetchInstrumentData(e)},n);this.updateTimers.set(e.symbol,i),this.fetchInstrumentData(e)}async fetchInstrumentData(e){var r,n,i,l,u,d,f;try{let h=0,p,g,x;if(e.category==="forex"){const C=this.fxRateCache[e.symbol];if(C&&this.isFXRateValid(C))h=C.rate;else if(e.quoteCurrency==="CAD"){const N=this.getEnv("VITE_POLYGON_KEY");if(N){const A=this.getEnv("VITE_POLYGON_URL"),j=await XN.getFxRate(e.symbol,N,A);Number.isFinite(j)&&j>0&&(this.fxRateCache[e.symbol]={rate:j,timestamp:Date.now(),ttl:this.FX_CACHE_TTL},h=j)}h||(h=this.getCADRate(e.baseCurrency))}else if(e.symbol.includes("/USD")){const N=e.symbol,A=this.fxRateCache[N];A&&(h=A.rate)}this.updateSourceStatus("polygon",h?"healthy":"degraded")}else if(e.category==="commodity"){const C=this.getEnv("VITE_TWELVEDATA_KEY");if(C||this.handleDataSourceError("twelvedata"),C&&e.wsSymbol){const A=/USD$/.test(e.wsSymbol)?e.wsSymbol.replace("USD","/USD"):e.wsSymbol,j=this.getEnv("VITE_TWELVEDATA_URL"),E=await Dz.getCommodityUSD(A,C,j);Number.isFinite(E)&&E>0?(h=E,this.updateSourceStatus("twelvedata","healthy")):this.handleDataSourceError("twelvedata")}if(!h){const A=this.getErrorDataPoint();h=A.price,p=A.change24h,g=A.changePercent24h,x=A.volume24h}const N=(r=e.metadata)==null?void 0:r.conversionFactor;typeof N=="number"&&N>0&&(h=h*N)}else if(e.category==="index")if(e.subCategory==="bond_yield"){const C=typeof((n=e.metadata)==null?void 0:n.series)=="string"?e.metadata.series:void 0;let N=!1;if(C)try{const A=await(await He(async()=>{const{then:j}=await Promise.resolve().then(()=>kB);return{then:j}},void 0)).then(j=>j.default.getLatestYield(C,this.API_ENDPOINTS.bankofcanada));Number.isFinite(A)&&A>0&&(h=A,this.updateSourceStatus("bankofcanada","healthy"),N=!0)}catch{}if(!N&&C)try{const A=`${this.API_ENDPOINTS.bankofcanada}/observations/${C}.json?recent=1`,j=await fetch(A,{headers:{Accept:"application/json"}});if(j.ok){const E=await j.json(),_=Array.isArray(E==null?void 0:E.observations)?E.observations:[],R=_.length>0?_[_.length-1]:null,k=R?R[C]:void 0,D=k?parseFloat(k.v??k):NaN;Number.isFinite(D)&&(h=D,this.updateSourceStatus("bankofcanada","healthy"),N=!0)}}catch(A){console.warn("[UnifiedDataAggregator] BoC fetch failed",A)}if(!N)try{const A=`${this.API_ENDPOINTS.bankofcanada}/observations/group/bond_yields/json?recent=1`,j=await fetch(A,{headers:{Accept:"application/json"}});if(j.ok){const E=await j.json(),_=Array.isArray(E==null?void 0:E.observations)?E.observations:[];if(_.length>0){const R=_[_.length-1],k=[String(C||""),"30","long","30y"].filter(Boolean);let D=null;for(const I of Object.keys(R)){if(I==="d")continue;const z=R[I],V=parseFloat(typeof z=="object"&&z!==null?z.v:z);if(!Number.isFinite(V))continue;const P=I.toLowerCase();if(k.some($=>P.includes($.toLowerCase()))){D=V;break}D===null&&(D=V)}D!==null&&(h=D,this.updateSourceStatus("bankofcanada","healthy"),N=!0)}}}catch(A){console.warn("[UnifiedDataAggregator] BoC group fetch failed",A)}N||(this.handleDataSourceError("bankofcanada"),h=Number.NaN)}else{const C=this.getEnv("VITE_ALPACA_KEY_ID")||this.getEnv("VITE_ALPACA_KEY"),N=this.getEnv("VITE_ALPACA_SECRET_KEY")||this.getEnv("VITE_ALPACA_SECRET");let A=!1;(!C||!N)&&this.handleDataSourceError("alpaca");try{const j=e.wsSymbol||e.symbol.replace("/CAD","");if(C&&N&&j){const E=`${this.API_ENDPOINTS.alpaca}/stocks/${encodeURIComponent(j)}/quotes/latest`,_=await fetch(E,{headers:{"apca-api-key-id":C,"apca-api-secret-key":N}});if(_.ok){const R=await _.json(),k=parseFloat(((i=R==null?void 0:R.quote)==null?void 0:i.ap)??(R==null?void 0:R.ap)??"0"),D=parseFloat(((l=R==null?void 0:R.quote)==null?void 0:l.bp)??(R==null?void 0:R.bp)??"0"),I=Number.isFinite(k)&&Number.isFinite(D)&&(k>0||D>0)?((k||D)+(D||k))/2:0;I>0?(h=I,this.updateSourceStatus("alpaca","healthy"),A=!0):this.handleDataSourceError("alpaca")}else this.handleDataSourceError("alpaca")}}catch{this.handleDataSourceError("alpaca")}if(!A){const j=this.getEnv("VITE_POLYGON_KEY");if(j)try{const E=(e.wsSymbol||e.symbol.replace("/CAD","")).toUpperCase(),_=`${this.API_ENDPOINTS.polygon}/v2/last/trade/${encodeURIComponent(E)}?apiKey=${j}`,R=await fetch(_);if(R.ok){const k=await R.json(),D=parseFloat(((u=k==null?void 0:k.results)==null?void 0:u.p)??(k==null?void 0:k.price)??"0");Number.isFinite(D)&&D>0?(h=D,this.updateSourceStatus("polygon","healthy"),A=!0):this.handleDataSourceError("polygon")}else this.handleDataSourceError("polygon")}catch{this.handleDataSourceError("polygon")}}if(!h){const j=this.getErrorDataPoint();h=j.price,p=j.change24h,g=j.changePercent24h,x=j.volume24h}}else{const C=this.getErrorDataPoint();h=C.price,p=C.change24h,g=C.changePercent24h,x=C.volume24h}let w=this.convertToCAD(h,e.baseCurrency,e.category);if(e.category==="commodity"){let C=(d=e.metadata)==null?void 0:d.roundingDecimals;if(typeof C!="number"){const N=(((f=e.metadata)==null?void 0:f.unit)||"").toLowerCase();N==="gram"||N==="g"?C=2:N==="kg"||N==="kilogram"?C=0:(N==="oz_t"||N==="ounce"||N==="oz")&&(C=2)}typeof C=="number"&&isFinite(C)&&(w=parseFloat(w.toFixed(C)))}const S={symbol:e.symbol,price:h,priceCAD:w,timestamp:Date.now(),source:e.dataSource,change24h:p,changePercent24h:g,volume24h:x};this.updateMarketData(e.symbol,S)}catch(h){console.error(`[UnifiedDataAggregator] Failed to fetch ${e.symbol}:`,h),this.handleDataSourceError(e.dataSource)}}convertToCAD(e,r,n){if(!Number.isFinite(e))return NaN;if(r==="CAD")return e;if(n==="forex"&&r!=="CAD"){const l=`${r}/CAD`;if(this.fxRateCache[l])return e}if(n==="crypto"||n==="commodity"||n==="index"&&r!=="TSX"){const l=this.getCADRate("USD");return e*l}const i=this.getCADRate(r);return e*i}getCADRate(e){var n;const r=`${e}/CAD`;if(this.fxRateCache[r]&&this.isFXRateValid(this.fxRateCache[r]))return this.fxRateCache[r].rate;if(e!=="USD"){const i=`${e}/USD`,l="USD/CAD";if(this.fxRateCache[i]&&this.fxRateCache[l]){const u=this.fxRateCache[i].rate,d=this.fxRateCache[l].rate;return u*d}}return e==="USD"?((n=this.fxRateCache["USD/CAD"])==null?void 0:n.rate)||this.FALLBACK_USD_CAD:(console.warn(`[UnifiedDataAggregator] No FX rate found for ${e}/CAD, using fallback`),this.FALLBACK_USD_CAD)}isFXRateValid(e){return Date.now()-e.timestamp<e.ttl}updateMarketData(e,r){this.marketData.set(e,r);const n=this.subscribers.get(e);n&&n.forEach(i=>{try{i(r)}catch(l){console.error(`[UnifiedDataAggregator] Subscriber error for ${e}:`,l)}}),wr.isReady()&&Number.isFinite(r.priceCAD)&&e.replace("/CAD","").replace("-USD","")}getAdjustedUpdateFrequency(e){const r=new Date,n=r.getDay(),i=r.getHours();let l=Kp.storeOpen;return n===0||n===6?l=Kp.weekend:(i<9||i>19)&&(l=Kp.storeClosed),e/l}startUpdateSchedulers(){setInterval(()=>{this.refreshFXRates()},this.FX_CACHE_TTL),setInterval(()=>{this.performHealthCheck()},3e4)}async refreshFXRates(){console.log("[UnifiedDataAggregator] Refreshing FX rates..."),await this.initializeFXRates()}performHealthCheck(){this.dataSourceStatus.forEach((e,r)=>{const n=Date.now()-e.lastUpdate;n>3e5?e.health="error":n>6e4?e.health="degraded":e.health="healthy"})}connectToRealTimeDataManager(){Xp.forEach(e=>{e.showInDashboard&&this.subscribe(e.symbol,r=>{wr.isReady()&&e.symbol.replace("/CAD","").replace("-USD","").replace("/","")})}),console.log("[UnifiedDataAggregator] Ready for engine integration")}setEnginePushFunction(e){const r=[];return Xp.forEach(n=>{if(n.showInDashboard){const i=this.subscribe(n.symbol,l=>{if(Number.isFinite(l.priceCAD)){const u=n.symbol.replace("/","").replace("-","");e(u,l.priceCAD,l.timestamp)}});r.push(i)}}),console.log("[UnifiedDataAggregator] Engine push function connected"),()=>{r.forEach(n=>{try{n()}catch{}})}}subscribe(e,r){this.subscribers.has(e)||this.subscribers.set(e,new Set),this.subscribers.get(e).add(r);const n=this.marketData.get(e);return n&&r(n),()=>{const i=this.subscribers.get(e);i&&i.delete(r)}}getMarketData(e){return this.marketData.get(e)}getAllMarketData(){return new Map(this.marketData)}getInstrumentsByCategory(e){return Array.from(this.instruments.values()).filter(r=>r.category===e)}updateSourceStatus(e,r){const n=this.dataSourceStatus.get(e)||{source:e,connected:r==="healthy",lastUpdate:Date.now(),errorCount:0,health:r};n.health=r,n.lastUpdate=Date.now(),n.connected=r==="healthy",this.dataSourceStatus.set(e,n)}handleDataSourceError(e){const r=this.dataSourceStatus.get(e);r&&(r.errorCount++,r.errorCount>5?(r.health="error",r.connected=!1):r.health="degraded")}getErrorDataPoint(){return{price:NaN,change24h:void 0,changePercent24h:void 0,volume24h:void 0,high24h:void 0,low24h:void 0}}getHealthStatus(){var i;const e={healthy:0,degraded:0,error:0};this.dataSourceStatus.forEach(l=>{e[l.health]++});let r;e.error>0?r="error":e.degraded>0?r="degraded":r="healthy";const n=Date.now()-(((i=this.fxRateCache["USD/CAD"])==null?void 0:i.timestamp)||0);return{overall:r,sources:new Map(this.dataSourceStatus),fxRatesAge:n}}async shutdown(){console.log("[UnifiedDataAggregator] Shutting down..."),this.updateTimers.forEach(e=>clearInterval(e)),this.updateTimers.clear(),this.wsConnections.forEach(e=>e.close()),this.wsConnections.clear(),this.subscribers.clear(),this.isInitialized=!1,console.log("[UnifiedDataAggregator] Shutdown complete")}}const hn=new _z,or={primary:{orange:"#FFA500",blue:"#4A90E2"},trend:{up:"#00FF88",down:"#FF4444"}},Rz={card:{heightPx:"90px"}},Wa={duration:{fast:"200ms",normal:"300ms",slow:"600ms"},easing:{default:"cubic-bezier(0.4, 0, 0.2, 1)",smooth:"ease-in-out"},bluePulse:{defaultSpeed:6,defaultOpacity:1,minSpeed:2,maxSpeed:12,minOpacity:.05,maxOpacity:1}},kz={BASE_URL:"/LeaperFX/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Oz={};function Mz(){return b.useMemo(()=>{try{const t=typeof import.meta<"u"?kz:void 0,e=typeof window<"u"?window.__ENV__:void 0,r=typeof process<"u"?Oz:void 0,n=String(t&&t.VITE_BLUE_PULSE_SPEED||e&&e.VITE_BLUE_PULSE_SPEED||r&&r.VITE_BLUE_PULSE_SPEED||Wa.bluePulse.defaultSpeed),i=String(t&&t.VITE_BLUE_WASH_OPACITY||e&&e.VITE_BLUE_WASH_OPACITY||r&&r.VITE_BLUE_WASH_OPACITY||Wa.bluePulse.defaultOpacity),l=Math.max(Wa.bluePulse.minSpeed,Math.min(Wa.bluePulse.maxSpeed,parseFloat(n))),u=Math.max(Wa.bluePulse.minOpacity,Math.min(Wa.bluePulse.maxOpacity,parseFloat(i)));return{speed:l,opacity:u}}catch{return{speed:Wa.bluePulse.defaultSpeed,opacity:Wa.bluePulse.defaultOpacity}}},[])}const KD=({children:t,height:e=Rz.card.heightPx,variant:r="crypto",className:n="",showBlueOverlay:i=!0,featured:l=!1})=>{const u=Mz(),d=typeof e=="number"?`${e}px`:e,f=["relative","overflow-hidden","transition-all","duration-300","bloomberg-terminal-card","movers-card","slide-up","data-update","min-w-0",l&&"ring-1 ring-orange-500/50",n].filter(Boolean).join(" ");return s.jsxs("div",{className:f,style:{height:d},"data-variant":r,children:[i&&s.jsx("div",{className:"card-blue-inner blue-pulse",style:{opacity:u.opacity,animationDuration:`${u.speed}s`}}),t]})},Ji={BASE_URL:"/LeaperFX/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var eo={};const Iz=({crypto:t,index:e})=>{const{price:r,trend:n,isAnimating:i}=xz({symbol:t.symbol,enableAnimation:!0,animationDuration:800,smoothingFactor:.3}),l=n==="up",u=r?r.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:2}):t.price,d=Number.isFinite(t.change)?`${Math.abs(t.change).toFixed(2)}%`:"—",[f,h]=b.useState([]);return b.useEffect(()=>{const p=r??parseFloat(t.price.replace(/,/g,"")),g=12,x=[];for(let w=0;w<g;w++){const S=w/(g-1),C=t.trend==="up"?S*.03:-S*.03,N=(Math.random()-.5)*.01,A=p*(1+C+N);x.push({time:w,value:Math.max(0,A)})}h(x)},[t,r]),b.useEffect(()=>{const p=setInterval(()=>{h(g=>{if(g.length===0)return g;const x=g[g.length-1].value,w=t.trend==="up"?1.002:.998,S=(Math.random()-.5)*.008,C=Math.max(0,x*w*(1+S)),N=Math.sin(Date.now()/1e4)*.005,A=C*(1+N);return[...g.slice(1),{time:g.length,value:A}]})},3e3);return()=>clearInterval(p)},[t.trend]),s.jsx(KD,{height:"90px",variant:"crypto",children:s.jsxs("div",{className:"h-full flex items-center px-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"mb-1 truncate",children:s.jsx("div",{className:"text-base font-bold",style:{color:or.primary.orange,fontFamily:"monospace"},children:t.symbol})}),s.jsxs("div",{className:"text-xs",children:[s.jsx("span",{style:{color:or.primary.blue},children:"Price: "}),s.jsx("span",{className:`font-mono font-bold text-base transition-all duration-300 ${i?"text-blue-300":"text-white"}`,children:u}),s.jsx("span",{className:"ml-1 text-[10px] text-gray-500",children:"CAD"}),i&&s.jsx("span",{className:"ml-2 text-xs text-blue-400 animate-pulse",children:"●"})]}),s.jsxs("div",{className:"text-xs mt-0.5",style:{color:l?or.trend.up:or.trend.down},children:[Number.isFinite(t.change)&&s.jsx("span",{className:"mr-1",children:l?"▲":"▼"}),d]})]}),s.jsx("div",{className:"w-[120px] h-[50px] ml-3 flex items-center crypto-chart-container",children:s.jsx(lD,{width:"100%",height:"100%",children:s.jsxs(XD,{data:f,margin:{top:2,right:2,left:2,bottom:2},children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:`crypto-gradient-${e}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:l?or.trend.up:or.trend.down,stopOpacity:.7}),s.jsx("stop",{offset:"100%",stopColor:l?or.trend.up:or.trend.down,stopOpacity:.1})]})}),s.jsx(A0,{hide:!0,domain:["dataMin","dataMax"]}),s.jsx(j0,{type:"monotone",dataKey:"value",stroke:l?or.trend.up:or.trend.down,strokeWidth:.8,fillOpacity:1,fill:`url(#crypto-gradient-${e})`,dot:!1})]})})})]})})},Pz=()=>{const{cryptoData:t,isLoading:e,error:r,refresh:n}=yz(),[i,l]=b.useState(0),[u,d]=b.useState({}),f=b.useMemo(()=>["BTC/CAD","ETH/CAD","SOL/CAD","AVAX/CAD","MATIC/CAD","ADA/CAD","DOT/CAD","LINK/CAD","UNI/CAD","XRP/CAD"],[]),h=b.useMemo(()=>[{symbol:"BTC/CAD",name:"Bitcoin",price:"86,420",change:-1.42,trend:"down"},{symbol:"ETH/CAD",name:"Ethereum",price:"3,580",change:2.43,trend:"up"},{symbol:"SOL/CAD",name:"Solana",price:"142.85",change:5.21,trend:"up"},{symbol:"AVAX/CAD",name:"Avalanche",price:"51.30",change:-.85,trend:"down"},{symbol:"MATIC/CAD",name:"Polygon",price:"0.872",change:3.15,trend:"up"},{symbol:"ADA/CAD",name:"Cardano",price:"0.512",change:-2.14,trend:"down"},{symbol:"DOT/CAD",name:"Polkadot",price:"8.94",change:1.28,trend:"up"},{symbol:"LINK/CAD",name:"Chainlink",price:"18.65",change:-.42,trend:"down"},{symbol:"UNI/CAD",name:"Uniswap",price:"10.28",change:2.95,trend:"up"},{symbol:"XRP/CAD",name:"Ripple",price:"0.689",change:-1.18,trend:"down"}],[]),p=b.useMemo(()=>{const w=new Set,S=[],C=j=>{j&&(w.has(j.symbol)||(S.push(j),w.add(j.symbol)))};return f.map(j=>{const E=u[j];if(!E)return null;const _=typeof E.priceCAD=="number"&&Number.isFinite(E.priceCAD)?E.priceCAD:typeof E.price=="number"&&Number.isFinite(E.price)?E.price:null;if(_===null)return null;const R=typeof E.changePercent24h=="number"&&Number.isFinite(E.changePercent24h)?E.changePercent24h:0;return{symbol:j,name:j.split("/")[0],price:_.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:2}),change:R,trend:R>=0?"up":"down"}}).filter(j=>j!==null).forEach(C),t.map(j=>({symbol:j.symbol,name:j.name,price:j.value,change:parseFloat(String(j.change)),trend:j.trend})).forEach(j=>{S.length<f.length&&C(j)}),h.forEach(j=>{S.length<f.length&&C(j)}),S.length<5?h.slice(0,5):S},[u,f,t,h]);b.useEffect(()=>{const x=(()=>{var S;try{const C=typeof import.meta<"u"?Ji==null?void 0:Ji.VITE_DEBUG_MODE:void 0,N=typeof window<"u"?(S=window.__ENV__)==null?void 0:S.VITE_DEBUG_MODE:void 0,A=typeof process<"u"?eo==null?void 0:eo.VITE_DEBUG_MODE:void 0;return String(C??N??A??"").toLowerCase()==="true"}catch{return!1}})(),w=f.map(S=>hn.subscribe(S,C=>{x&&Number.isFinite(C.priceCAD)&&console.debug(`[UI] ${S} update → CAD ${C.priceCAD.toFixed(2)} (${new Date(C.timestamp).toLocaleTimeString()})`),d(N=>({...N,[S]:C}))}));return()=>{w.forEach(S=>{try{S&&S()}catch{}})}},[f]),b.useEffect(()=>{if(p.length<=5)return;const x=setInterval(()=>{l(w=>(w+2)%Math.max(1,p.length-2))},21e3);return()=>clearInterval(x)},[p.length]);const g=b.useMemo(()=>{var N;if(p.length<=5)return p.slice(0,5);const x=p.slice(0,3),w=p.slice(3),S=w.slice(i,i+2);if(S.length<2){const A=2-S.length;S.push(...w.slice(0,A))}const C=[...x,...S];try{const A=typeof import.meta<"u"?Ji==null?void 0:Ji.VITE_DEBUG_MODE:void 0,j=typeof window<"u"?(N=window.__ENV__)==null?void 0:N.VITE_DEBUG_MODE:void 0,E=typeof process<"u"?eo==null?void 0:eo.VITE_DEBUG_MODE:void 0;String(A??j??E??"").toLowerCase()==="true"&&console.debug("[UI] Rendering crypto cards:",C.map(R=>R.symbol).join(", "))}catch{}return C},[p,i]);return e?s.jsx("div",{className:"w-full",children:s.jsx("div",{className:"h-[425px] flex items-center justify-center",style:{background:"linear-gradient(135deg, #000000 0%, #000814 50%, #001428 100%)",border:"0.5px solid rgba(0, 150, 255, 0.2)"},children:s.jsxs("div",{className:"text-center",children:[s.jsx(Xu,{className:"h-8 w-8 animate-spin text-blue-400 mx-auto mb-3"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Loading crypto data..."})]})})}):r?s.jsx("div",{className:"w-full",children:s.jsx("div",{className:"h-[425px] flex items-center justify-center",style:{background:"linear-gradient(135deg, #000000 0%, #000814 50%, #001428 100%)",border:"0.5px solid rgba(255, 0, 0, 0.2)"},children:s.jsxs("div",{className:"text-center",children:[s.jsx(cr,{className:"h-8 w-8 text-red-400 mx-auto mb-3"}),s.jsx("p",{className:"text-sm text-red-400 mb-2",children:"Failed to load crypto data"}),s.jsx("button",{onClick:n,className:"px-4 py-2 text-xs bg-red-500/20 hover:bg-red-500/30 border border-red-500/40 rounded",children:"Retry"})]})})}):s.jsx("div",{className:"w-full flex flex-col",children:s.jsx("div",{className:"space-y-2",children:g.map((x,w)=>s.jsx(Iz,{crypto:x,index:w},`${x.symbol}-${w}`))})})};class Lz{constructor(e=5e3){te(this,"buffer");te(this,"timestamps");te(this,"capacity");te(this,"head",0);te(this,"size",0);te(this,"tempArray");te(this,"downsampledCache");this.capacity=e,this.buffer=new Float32Array(e),this.timestamps=new Float32Array(e),this.tempArray=new Float32Array(e),this.downsampledCache=new Map}push(e,r=Date.now()){const n=this.head%this.capacity;this.buffer[n]=e,this.timestamps[n]=r,this.head++,this.size<this.capacity&&this.size++,this.downsampledCache.clear()}pushBatch(e,r,n){const i=Math.min(e.length,this.capacity);for(let l=0;l<i;l++){const u=(this.head+l)%this.capacity;this.buffer[u]=e[l],this.timestamps[u]=r+l*n}this.head+=i,this.size=Math.min(this.size+i,this.capacity),this.downsampledCache.clear()}getRawData(e){const r=Math.min(e||this.size,this.size),n=this.getStartIndex();if(n+r<=this.capacity)return{values:this.buffer.subarray(n,n+r),timestamps:this.timestamps.subarray(n,n+r)};{const i=new Float32Array(r),l=new Float32Array(r),u=this.capacity-n;return i.set(this.buffer.subarray(n,this.capacity),0),i.set(this.buffer.subarray(0,r-u),u),l.set(this.timestamps.subarray(n,this.capacity),0),l.set(this.timestamps.subarray(0,r-u),u),{values:i,timestamps:l}}}getLastN(e){const r=Math.min(e,this.size),n=new Float32Array(r),l=this.getStartIndex()+this.size;if(l<=this.capacity)n.set(this.buffer.subarray(l-r,l));else{const u=l-this.capacity,d=r-u;n.set(this.buffer.subarray(this.capacity-d,this.capacity),0),n.set(this.buffer.subarray(0,u),d)}return n}getMinMax(){if(this.size===0)return{min:0,max:0};let e=1/0,r=-1/0;const n=this.getStartIndex(),i=n+this.size;if(i<=this.capacity)for(let l=n;l<i;l++){const u=this.buffer[l];e=Math.min(e,u),r=Math.max(r,u)}else{for(let l=n;l<this.capacity;l++){const u=this.buffer[l];e=Math.min(e,u),r=Math.max(r,u)}for(let l=0;l<i-this.capacity;l++){const u=this.buffer[l];e=Math.min(e,u),r=Math.max(r,u)}}return{min:e,max:r}}getStats(e=100){const r=Math.min(e,this.size),n=this.getLastN(r);let i=0;for(let C=0;C<r;C++)i+=n[C];const l=i/r;let u=0;for(let C=0;C<r;C++){const N=n[C]-l;u+=N*N}const d=Math.sqrt(u/r),f=Math.min(10,r),h=n.subarray(r-f);let p=0;f>1&&(p=(h[f-1]-h[0])/f);const g=Math.min(20,r),x=n.subarray(r-g);let w=0;for(let C=1;C<g;C++){const N=Math.abs(x[C]-x[C-1]);w+=N}const S=w/(g-1);return{mean:l,stdDev:d,velocity:p,volatility:S}}getStartIndex(){return this.size<this.capacity?0:this.head%this.capacity}clear(){this.head=0,this.size=0,this.downsampledCache.clear()}getSize(){return this.size}getCapacity(){return this.capacity}}class Fz{constructor(e=5e3){te(this,"buffers",new Map);te(this,"capacity");this.capacity=e}getBuffer(e){let r=this.buffers.get(e);return r||(r=new Lz(this.capacity),this.buffers.set(e,r)),r}removeBuffer(e){this.buffers.delete(e)}clear(){this.buffers.clear()}getAllKeys(){return Array.from(this.buffers.keys())}}class Uz{constructor(e){te(this,"canvas");te(this,"ctx");te(this,"config");te(this,"animationFrame",null);te(this,"lastFrameTime",0);te(this,"frameCount",0);te(this,"fps",60);te(this,"scaleX",1);te(this,"scaleY",1);te(this,"gradient",null);te(this,"pathCache",null);te(this,"lastDataHash",0);this.config=e,typeof OffscreenCanvas<"u"?(this.canvas=new OffscreenCanvas(e.width,e.height),this.ctx=this.canvas.getContext("2d",{alpha:!0,desynchronized:!0,willReadFrequently:!1})):(this.canvas=document.createElement("canvas"),this.canvas.width=e.width,this.canvas.height=e.height,this.ctx=this.canvas.getContext("2d",{alpha:!0,desynchronized:!0,willReadFrequently:!1})),this.setupContext()}setupContext(){this.ctx.imageSmoothingEnabled=!1,this.config.fillGradient&&(this.gradient=this.ctx.createLinearGradient(0,0,0,this.config.height),this.gradient.addColorStop(0,this.config.fillGradient.start),this.gradient.addColorStop(1,this.config.fillGradient.end))}decimateData(e,r){if(e.length<=r)return e;const n=new Float32Array(r),i=(e.length-1)/(r-1);for(let l=0;l<r;l++){const u=Math.round(l*i);n[l]=e[u]}return n}render(e){const r=performance.now();this.ctx.clearRect(0,0,this.config.width,this.config.height);const n=Math.min(this.config.width,300),i=e.getLastN(n*(this.config.decimationFactor||2)),l=this.decimateData(i,n);if(l.length<2)return this.getStats(r,0);const u=this.calculateDataHash(l);return u===this.lastDataHash&&this.pathCache!==null||(this.pathCache=this.createPath(l,e),this.lastDataHash=u),this.renderPath(this.pathCache),this.config.glowIntensity&&this.config.glowIntensity>0&&this.addGlowEffect(),this.getStats(r,l.length)}createPath(e,r){const n=new Path2D,{min:i,max:l}=r.getMinMax(),u=l-i||1;this.scaleX=this.config.width/(e.length-1),this.scaleY=this.config.height/u,n.moveTo(0,this.config.height-(e[0]-i)*this.scaleY);for(let d=1;d<e.length;d++){const f=d*this.scaleX,h=this.config.height-(e[d]-i)*this.scaleY;n.lineTo(f,h)}return n}renderPath(e){this.ctx.save(),this.gradient&&(this.ctx.fillStyle=this.gradient,this.ctx.fill(e)),this.ctx.strokeStyle=this.config.strokeColor,this.ctx.lineWidth=this.config.strokeWidth,this.ctx.lineJoin="round",this.ctx.lineCap="round",this.ctx.stroke(e),this.ctx.restore()}addGlowEffect(){this.ctx.save(),this.ctx.shadowColor=this.config.strokeColor,this.ctx.shadowBlur=this.config.glowIntensity||4,this.ctx.strokeStyle=this.config.strokeColor,this.ctx.lineWidth=this.config.strokeWidth*.5,this.pathCache&&this.ctx.stroke(this.pathCache),this.ctx.restore()}calculateDataHash(e){let r=0;const n=Math.max(1,Math.floor(e.length/10));for(let i=0;i<e.length;i+=n)r=(r<<5)-r+e[i],r=r&r;return r}getStats(e,r){const n=performance.now()-e;return this.frameCount++,e-this.lastFrameTime>1e3&&(this.fps=this.frameCount,this.frameCount=0,this.lastFrameTime=e),{frameTime:n,drawCalls:1,pointsRendered:r,fps:this.fps}}getCanvas(){return this.canvas}async transferToImageBitmap(){return this.canvas instanceof OffscreenCanvas?await createImageBitmap(this.canvas):await createImageBitmap(this.canvas)}updateConfig(e){this.config={...this.config,...e},e.fillGradient&&(this.gradient=this.ctx.createLinearGradient(0,0,0,this.config.height),this.gradient.addColorStop(0,e.fillGradient.start),this.gradient.addColorStop(1,e.fillGradient.end)),this.pathCache=null,this.lastDataHash=0}dispose(){this.animationFrame&&cancelAnimationFrame(this.animationFrame),this.pathCache=null}}class $z{constructor(){te(this,"renderers",new Map);te(this,"animationFrame",null);te(this,"targetFPS",60);te(this,"frameInterval",1e3/60);te(this,"lastFrameTime",0);te(this,"stats",{frameTime:0,drawCalls:0,pointsRendered:0,fps:60})}addSparkline(e,r){const n=new Uz(r);return this.renderers.set(e,n),n}removeSparkline(e){const r=this.renderers.get(e);r&&(r.dispose(),this.renderers.delete(e))}renderAll(e){const r=performance.now();let n=0,i=0;for(const[u,d]of this.renderers){const f=e.get(u);if(f){const h=d.render(f);n+=h.pointsRendered,i++}}const l=performance.now()-r;return this.stats={frameTime:l,drawCalls:i,pointsRendered:n,fps:Math.round(1e3/l)},this.stats}startAnimation(e,r){const n=i=>{if(i-this.lastFrameTime>=this.frameInterval){const l=this.renderAll(e);r&&r(l),this.lastFrameTime=i}this.animationFrame=requestAnimationFrame(n)};this.animationFrame=requestAnimationFrame(n)}stopAnimation(){this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=null)}getStats(){return this.stats}dispose(){this.stopAnimation();for(const e of this.renderers.values())e.dispose();this.renderers.clear()}}class zz{constructor(e){te(this,"config");te(this,"activeSignals",new Map);te(this,"signalHistory",[]);te(this,"lastSignalTime",new Map);te(this,"baselineVolatility",new Map);te(this,"rollingMeans",new Map);this.config=e}detectPriceSpike(e,r,n){if(!this.checkCooldown(e))return null;const i=this.config.priceChangeWindow*60*1e3,l=r.getStats(Math.min(100,r.getSize())),u=r.getRawData(),d=Date.now();let f=null,h=-1;for(let x=u.timestamps.length-1;x>=0;x--)if(d-u.timestamps[x]>=i){f=u.values[x],h=x;break}if(f===null||h===-1)return null;const p=(n-f)/f*100,g=Math.abs(p);if(g>=this.config.priceChangeThreshold){const x={id:`${e}_price_${Date.now()}`,type:"price_spike",symbol:e,timestamp:d,magnitude:g,direction:p>0?"up":"down",metadata:{priceChange:p,volatility:l.volatility},priority:this.calculatePriority(g,this.config.priceChangeThreshold),duration:this.config.minSignalDuration*1e3};return this.registerSignal(x),x}return null}detectVolatilitySpike(e,r){if(!this.checkCooldown(e))return null;const n=r.getStats();let i=this.baselineVolatility.get(e);if(!i)return i=n.stdDev,this.baselineVolatility.set(e,i),null;i=i*.95+n.stdDev*.05,this.baselineVolatility.set(e,i);const l=n.stdDev/i;if(l>=this.config.volatilityMultiplier){const u={id:`${e}_vol_${Date.now()}`,type:"volatility_spike",symbol:e,timestamp:Date.now(),magnitude:l,direction:n.velocity>0?"up":n.velocity<0?"down":"neutral",metadata:{volatility:n.stdDev,priceChange:n.velocity*100},priority:this.calculatePriority(l,this.config.volatilityMultiplier),duration:this.config.minSignalDuration*1e3};return this.registerSignal(u),u}return null}detectBookImbalance(e,r){if(!this.checkCooldown(e))return null;const n=r.bids.reduce((f,h)=>f+h.volume,0),i=r.asks.reduce((f,h)=>f+h.volume,0),l=n+i;if(l===0)return null;const u=(n-i)/l,d=Math.abs(u);if(d>=this.config.bookImbalanceThreshold){const f={id:`${e}_book_${Date.now()}`,type:"book_imbalance",symbol:e,timestamp:Date.now(),magnitude:d,direction:u>0?"up":"down",metadata:{imbalance:u*100},priority:this.calculatePriority(d,this.config.bookImbalanceThreshold),duration:this.config.minSignalDuration*1e3};return this.registerSignal(f),f}return null}registerNewsEvent(e,r,n){const i={id:`${e}_news_${Date.now()}`,type:"news_event",symbol:e,timestamp:Date.now(),magnitude:Math.abs(n),direction:n>0?"up":n<0?"down":"neutral",metadata:{headline:r},priority:Math.min(10,Math.abs(n)*2),duration:this.config.minSignalDuration*1500};return this.registerSignal(i),i}calculatePriority(e,r){const n=e/r;return Math.min(10,Math.round(n*5))}checkCooldown(e){const r=this.lastSignalTime.get(e);return r?Date.now()-r>=this.config.cooldownPeriod*1e3:!0}registerSignal(e){this.activeSignals.set(e.id,e),this.signalHistory.push(e),this.lastSignalTime.set(e.symbol,e.timestamp),setTimeout(()=>{this.activeSignals.delete(e.id)},e.duration),this.signalHistory.length>1e3&&(this.signalHistory=this.signalHistory.slice(-500))}getActiveSignals(){return Array.from(this.activeSignals.values()).sort((e,r)=>r.priority-e.priority)}getTopSignal(){const e=this.getActiveSignals();return e.length>0?e[0]:null}clearSignal(e){this.activeSignals.delete(e)}updateConfig(e){this.config={...this.config,...e}}reset(){this.activeSignals.clear(),this.signalHistory=[],this.lastSignalTime.clear(),this.baselineVolatility.clear(),this.rollingMeans.clear()}getStats(){const e={};for(const n of this.signalHistory)e[n.type]=(e[n.type]||0)+1;const r=this.signalHistory.reduce((n,i)=>n+i.magnitude,0);return{totalSignals:this.signalHistory.length,activeSignals:this.activeSignals.size,signalsByType:e,averageMagnitude:this.signalHistory.length>0?r/this.signalHistory.length:0}}}class Bz{constructor(e,r){te(this,"engines",new Map);te(this,"globalConfig");te(this,"signalCallback");this.globalConfig=e,this.signalCallback=r}getEngine(e){let r=this.engines.get(e);return r||(r=new zz(this.globalConfig),this.engines.set(e,r)),r}processData(e,r,n,i){const l=this.getEngine(e),u=l.detectPriceSpike(e,r,n);if(u)return this.signalCallback&&this.signalCallback(u),u;const d=l.detectVolatilitySpike(e,r);if(d)return this.signalCallback&&this.signalCallback(d),d;if(i){const f=l.detectBookImbalance(e,i);if(f)return this.signalCallback&&this.signalCallback(f),f}return null}getAllActiveSignals(){const e=[];for(const r of this.engines.values())e.push(...r.getActiveSignals());return e.sort((r,n)=>n.priority-r.priority)}getGlobalTopSignal(){const e=this.getAllActiveSignals();return e.length>0?e[0]:null}updateConfig(e){this.globalConfig={...this.globalConfig,...e};for(const r of this.engines.values())r.updateConfig(e)}resetAll(){for(const e of this.engines.values())e.reset()}}class qz{constructor(e){te(this,"config");te(this,"items",new Map);te(this,"rotationHistory",[]);te(this,"currentRotation",[]);te(this,"rotationIndex",0);te(this,"lastRotationTime",0);te(this,"rotationCount",0);te(this,"activeSignals",new Map);te(this,"spotlightOverride",null);this.config=e}addItem(e){this.items.set(e.id,{...e,lastShown:0,showCount:0})}removeItem(e){this.items.delete(e),this.currentRotation=this.currentRotation.filter(r=>r!==e)}calculatePriority(e,r){var f;let n=e.weight;const i=this.getCurrentDayPart();if(i){const h=i.weights[e.category]||1;n*=h,(f=i.prioritySymbols)!=null&&f.includes(e.symbol)&&(n*=1.5)}const l=r-e.lastShown,u=Math.min(2,l/(this.config.rotationInterval*1e3*10));n*=u;const d=Math.max(.5,1-e.showCount/100);return n*=d,e.signalActive&&(n*=10),e.pinned&&(n*=2),n}getCurrentDayPart(){const r=new Date().getHours();for(const n of this.config.dayParts)if(n.startHour<=r&&r<n.endHour||n.startHour>n.endHour&&(r>=n.startHour||r<n.endHour))return n;return null}isInFairnessWindow(e){const r=Math.min(this.config.fairnessWindow,this.rotationHistory.length);return this.rotationHistory.slice(-r).some(i=>i.includes(e))}ensureSectorDiversity(e,r){if(!this.config.sectorDiversity)return e;const n=new Set(r.map(u=>u.category)),i=[],l=[];for(const u of e)n.has(u.category)?l.push(u):(i.push(u),n.add(u.category));return[...i,...l]}selectNextRotation(){const e=Date.now(),r=[],n=this.config.fixedSlots+this.config.spotlightSlots,i=Array.from(this.items.values()).filter(h=>!this.isInFairnessWindow(h.id)).map(h=>({...h,calculatedPriority:this.calculatePriority(h,e)})).sort((h,p)=>p.calculatedPriority-h.calculatedPriority);if(this.spotlightOverride){const h=this.items.get(this.spotlightOverride);h&&r.push(h)}const l=i.filter(h=>h.pinned);for(const h of l){if(r.length>=this.config.fixedSlots)break;r.push(h)}const u=i.filter(h=>!r.some(p=>p.id===h.id)),d=this.ensureSectorDiversity(u,r);for(const h of d){if(r.length>=n)break;r.push(h)}const f=r.map(h=>h.id);for(const h of r)h.lastShown=e,h.showCount++,this.items.set(h.id,h);return this.currentRotation=f,this.rotationHistory.push(f),this.rotationHistory.length>100&&(this.rotationHistory=this.rotationHistory.slice(-50)),this.lastRotationTime=e,this.rotationCount++,f}registerSignal(e){this.activeSignals.set(e.symbol,e);for(const[r,n]of this.items)if(n.symbol===e.symbol){n.signalActive=!0,this.items.set(r,n),e.priority>=7&&(this.spotlightOverride=r,setTimeout(()=>{this.spotlightOverride===r&&(this.spotlightOverride=null)},e.duration));break}}clearSignal(e){this.activeSignals.delete(e);for(const[r,n]of this.items)if(n.symbol===e){n.signalActive=!1,this.items.set(r,n),this.spotlightOverride===r&&(this.spotlightOverride=null);break}}getCurrentRotation(){return this.currentRotation}getNextInSequence(){if(this.currentRotation.length===0&&this.selectNextRotation(),this.currentRotation.length===0)return null;const e=this.currentRotation[this.rotationIndex];return this.rotationIndex=(this.rotationIndex+1)%this.currentRotation.length,e}forceRefresh(){this.selectNextRotation(),this.rotationIndex=0}getStats(){const e=Array.from(this.items.values()),r=e.reduce((n,i)=>n+i.showCount,0);return{totalItems:this.items.size,activeRotation:this.currentRotation.length,rotationCount:this.rotationCount,averageShowCount:e.length>0?r/e.length:0,signalsActive:this.activeSignals.size}}updateConfig(e){this.config={...this.config,...e}}reset(){for(const e of this.items.values())e.lastShown=0,e.showCount=0,e.signalActive=!1;this.rotationHistory=[],this.currentRotation=[],this.rotationIndex=0,this.activeSignals.clear(),this.spotlightOverride=null}}class Hz{constructor(){te(this,"schedulers",new Map);te(this,"intervalHandles",new Map);te(this,"rotationCallbacks",new Map)}createScheduler(e,r,n){const i=new qz(r);return this.schedulers.set(e,i),n&&this.rotationCallbacks.set(e,n),i}startRotation(e,r){const n=this.schedulers.get(e);if(!n)return;this.stopRotation(e);const i=r||21e3,l=()=>{const d=n.selectNextRotation(),f=this.rotationCallbacks.get(e);f&&f(d)};l();const u=setInterval(l,i);this.intervalHandles.set(e,u)}stopRotation(e){const r=this.intervalHandles.get(e);r&&(clearInterval(r),this.intervalHandles.delete(e))}broadcastSignal(e){for(const r of this.schedulers.values())r.registerSignal(e)}getScheduler(e){return this.schedulers.get(e)}dispose(){for(const e of this.intervalHandles.keys())this.stopRotation(e);this.schedulers.clear(),this.rotationCallbacks.clear()}}function Vz(t={}){const e=b.useRef(new Fz(t.bufferCapacity||5e3)),r=b.useRef(new $z),n=b.useRef(),i=b.useRef(new Hz),l=b.useRef(),u=b.useRef(0),d=b.useRef(0),f=b.useRef(!1),h=b.useRef(t.targetFPS||60),p=b.useRef(t.debugMode),[g,x]=b.useState({isRunning:!1,fps:0,frameTime:0,activeSignals:[],topSignal:null,currentRotation:{},stats:{bufferedPoints:0,renderedFrames:0,detectedSignals:0,rotationCount:0}}),w=b.useRef(new Map);b.useEffect(()=>{h.current=t.targetFPS||60,p.current=t.debugMode},[t.targetFPS,t.debugMode]),b.useEffect(()=>{const $={priceChangeThreshold:2,priceChangeWindow:5,volatilityMultiplier:2.5,bookImbalanceThreshold:.7,minSignalDuration:8,cooldownPeriod:30,...t.signalConfig};return n.current=new Bz($,Q=>j(Q)),()=>{var Q;(Q=n.current)==null||Q.resetAll()}},[t.signalConfig]);const S=b.useCallback(($,Q,re)=>{const ee={width:Q.width||120,height:Q.height||50,strokeColor:"#FFD700",strokeWidth:1.5,fillGradient:{start:"rgba(255, 215, 0, 0.6)",end:"rgba(255, 140, 0, 0.1)"},glowIntensity:2,animated:!0,decimationFactor:2,...t.sparklineConfig,...re};r.current.addSparkline($,ee),w.current.set($,Q),t.debugMode&&console.log(`[Engine] Initialized sparkline: ${$}`)},[t.sparklineConfig,t.debugMode]),C=b.useCallback(($,Q,re)=>{const ee={fixedSlots:3,spotlightSlots:2,rotationInterval:21,fairnessWindow:3,sectorDiversity:!0,dayParts:[{name:"morning",startHour:6,endHour:12,weights:{currency:1.5,crypto:1,commodity:1.2,index:1}},{name:"afternoon",startHour:12,endHour:18,weights:{currency:1.2,crypto:1.5,commodity:1,index:1.3}},{name:"evening",startHour:18,endHour:24,weights:{currency:1,crypto:2,commodity:.8,index:1}},{name:"overnight",startHour:0,endHour:6,weights:{currency:.8,crypto:1.5,commodity:.5,index:.8}}],...t.rotationConfig,...re},U=i.current.createScheduler($,ee,J=>E($,J));return Q.forEach(J=>U.addItem(J)),t.debugMode&&console.log(`[Engine] Initialized rotation: ${$} with ${Q.length} items`),U},[t.rotationConfig,t.debugMode]),N=b.useCallback(($,Q,re)=>{const ee=e.current.getBuffer($);if(ee.push(Q,re),n.current){const U=n.current.processData($,ee,Q);U&&t.debugMode&&console.log(`[Signal] Detected: ${U.type} for ${$}`,U)}},[t.debugMode]),A=b.useCallback(($,Q,re,ee)=>{e.current.getBuffer($).pushBatch(Q,re,ee)},[]),j=b.useCallback($=>{x(Q=>{var re;return{...Q,activeSignals:[...Q.activeSignals,$],topSignal:$.priority>(((re=Q.topSignal)==null?void 0:re.priority)||0)?$:Q.topSignal,stats:{...Q.stats,detectedSignals:Q.stats.detectedSignals+1}}}),i.current.broadcastSignal($),$.priority>=7&&_($)},[]),E=b.useCallback(($,Q)=>{x(re=>({...re,currentRotation:{...re.currentRotation,[$]:Q},stats:{...re.stats,rotationCount:re.stats.rotationCount+1}}))},[]),_=b.useCallback($=>{const Q=new CustomEvent("pauseOnSignal",{detail:$});window.dispatchEvent(Q)},[]),R=b.useRef();R.current=()=>{const $=performance.now();if($-u.current>=1e3/h.current){const re=new Map;for(const U of e.current.getAllKeys())re.set(U,e.current.getBuffer(U));const ee=r.current.renderAll(re);for(const[U,J]of w.current){const pe=r.current.renderers.get(U);if(pe&&J){const ce=J.getContext("2d");if(ce){const oe=pe.getCanvas();ce.clearRect(0,0,J.width,J.height),ce.drawImage(oe,0,0)}}}d.current++,$-u.current>1e3&&(x(U=>({...U,fps:d.current,frameTime:ee.frameTime,stats:{...U.stats,renderedFrames:U.stats.renderedFrames+d.current}})),d.current=0),u.current=$}f.current&&R.current&&(l.current=requestAnimationFrame(R.current))};const k=b.useCallback(()=>{f.current||(f.current=!0,x($=>({...$,isRunning:!0})),u.current=performance.now(),d.current=0,R.current&&(l.current=requestAnimationFrame(R.current)),p.current&&console.log("[Engine] Started"))},[]),D=b.useCallback(()=>{f.current=!1,x($=>({...$,isRunning:!1})),l.current&&(cancelAnimationFrame(l.current),l.current=void 0),p.current&&console.log("[Engine] Stopped")},[]),I=b.useCallback(($,Q)=>{i.current.startRotation($,Q)},[]),z=b.useCallback($=>{i.current.stopRotation($)},[]),V=b.useCallback($=>e.current.getBuffer($),[]),P=b.useCallback(()=>{var $;return{fps:g.fps,frameTime:g.frameTime,sparklineStats:r.current.getStats(),signalStats:(($=n.current)==null?void 0:$.getAllActiveSignals().length)||0,bufferCount:e.current.getAllKeys().length}},[g]);return b.useEffect(()=>(k(),()=>{D(),r.current.dispose(),i.current.dispose(),e.current.clear()}),[]),{engineState:g,initializeSparkline:S,initializeRotation:C,pushData:N,pushBatchData:A,start:k,stop:D,startRotation:I,stopRotation:z,getBuffer:V,getPerformanceMetrics:P,services:{bufferPool:e.current,sparklineCompositor:r.current,signalAggregator:n.current,rotationOrchestrator:i.current}}}const R0=({symbol:t,buffer:e,width:r=120,height:n=50,color:i="#FFD700",glowIntensity:l=2,showStats:u=!1,isSignalActive:d=!1,volatilityAdaptive:f=!0,baseLineWidth:h=1.25,maxLineWidth:p=2.5,smoothingFactor:g=.25,expandOnHover:x=!1,expandedWidth:w=240,expandedHeight:S=100,renderMode:C="line",lineColor:N="#FFFFFF",areaTopColor:A,areaBottomColor:j,glowPulseSpeed:E=.6,sampleCount:_})=>{const R=b.useRef(null),k=b.useRef(null),[D,I]=b.useState(!1),[z,V]=b.useState({min:0,max:0,current:0,change:0}),P=re=>{const ee=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(re.trim());return ee?[parseInt(ee[1],16),parseInt(ee[2],16),parseInt(ee[3],16)]:null},$=re=>{const ee=re.match(/rgb\s*\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/i);return ee?[parseInt(ee[1],10),parseInt(ee[2],10),parseInt(ee[3],10)]:null},Q=(re,ee)=>{const U=P(re);if(U)return`rgba(${U[0]}, ${U[1]}, ${U[2]}, ${ee})`;const J=$(re);return J?`rgba(${J[0]}, ${J[1]}, ${J[2]}, ${ee})`:re};return b.useEffect(()=>{if(!R.current)return;const re=R.current,ee=re.getContext("2d",{alpha:!0,desynchronized:!0,willReadFrequently:!1});if(!ee)return;const U=window.devicePixelRatio||1;re.width=r*U,re.height=n*U,re.style.width=`${r}px`,re.style.height=`${n}px`,ee.scale(U,U);let J;const pe=()=>{ee.clearRect(0,0,r,n);const ce=_&&_>0?Math.min(_,1e3):Math.min(r,300),oe=e.getLastN(ce);if(oe.length<2){J=requestAnimationFrame(pe);return}const F=new Float32Array(oe.length);if(g>0&&g<1){F[0]=oe[0];for(let de=1;de<oe.length;de++)F[de]=g*oe[de]+(1-g)*F[de-1]}else F.set(oe);const{min:L,max:X}=e.getMinMax(),O=X-L||1,q=F[F.length-1],Y=F[0],le=(q-Y)/Y*100;V({min:L,max:X,current:q,change:le});const ye=ee.createLinearGradient(0,0,0,n);if(C==="areaNeon"){const de=A||Q(i,.85),Z=j||"rgba(0,0,0,0)";ye.addColorStop(0,de),ye.addColorStop(1,Z)}else d?(ye.addColorStop(0,le>=0?"#00FF88":"#FF4444"),ye.addColorStop(1,"rgba(0, 0, 0, 0)")):(ye.addColorStop(0,Q(i,.9)),ye.addColorStop(.5,Q(i,.45)),ye.addColorStop(1,"rgba(0, 0, 0, 0)"));const B=r/(F.length-1),ae=n/O;if(C==="areaNeon"){ee.beginPath(),ee.moveTo(0,n-(F[0]-L)*ae);for(let xe=1;xe<F.length;xe++){const be=xe*B,Ae=n-(F[xe]-L)*ae;ee.lineTo(be,Ae)}ee.lineTo(r,n),ee.lineTo(0,n),ee.closePath(),ee.fillStyle=ye,ee.globalCompositeOperation="lighter",ee.fill(),ee.globalCompositeOperation="source-over";const de=performance.now()*.001,Z=.15+.2*(.5+.5*Math.sin(de*Math.max(E,.1)*Math.PI*2));ee.beginPath(),ee.moveTo(0,n-(F[0]-L)*ae);for(let xe=1;xe<F.length;xe++){const be=xe*B,Ae=n-(F[xe]-L)*ae;ee.lineTo(be,Ae)}ee.strokeStyle=Q(N,Z);let ve=h;if(f){const xe=e.getStats(100),be=Math.abs(xe.mean)>1e-6?Math.abs(xe.mean):1,Ae=Math.min(xe.stdDev/be*10,1);ve=h+(p-h)*Ae}ee.lineWidth=Math.max(ve*2.4,2.4),ee.lineJoin="round",ee.lineCap="round",ee.shadowColor=Q(N,.6),ee.shadowBlur=l*4,ee.stroke(),ee.shadowBlur=0,ee.beginPath(),ee.moveTo(0,n-(F[0]-L)*ae);for(let xe=1;xe<F.length;xe++){const be=xe*B,Ae=n-(F[xe]-L)*ae;ee.lineTo(be,Ae)}ee.strokeStyle=N,ee.lineWidth=Math.max(ve*1.1,1.4),ee.lineJoin="round",ee.lineCap="round",ee.stroke()}else{ee.beginPath(),ee.moveTo(0,n-(F[0]-L)*ae);for(let Z=1;Z<F.length;Z++){const ve=Z*B,xe=n-(F[Z]-L)*ae;ee.lineTo(ve,xe)}ee.strokeStyle=d?le>=0?"#00FF88":"#FF4444":i;let de=h;if(f){const Z=e.getStats(100),ve=Math.abs(Z.mean)>1e-6?Math.abs(Z.mean):1,xe=Math.min(Z.stdDev/ve*10,1);de=h+(p-h)*xe}ee.lineWidth=d?Math.max(de,2):de,ee.lineJoin="round",ee.lineCap="round",(l>0||d)&&(ee.shadowColor=ee.strokeStyle,ee.shadowBlur=d?10:l),ee.stroke(),ee.lineTo(r,n),ee.lineTo(0,n),ee.closePath(),ee.fillStyle=ye,ee.fill(),ee.shadowBlur=0}if(ee.shadowBlur=0,x&&D&&k.current){const de=k.current.getContext("2d");if(de){const Z=window.devicePixelRatio||1;k.current.width=w*Z,k.current.height=S*Z,k.current.style.width=`${w}px`,k.current.style.height=`${S}px`,de.setTransform(1,0,0,1,0,0),de.scale(Z,Z),de.clearRect(0,0,w,S);const ve=de.createLinearGradient(0,0,0,S);ve.addColorStop(0,Q(i,.9)),ve.addColorStop(1,"rgba(0, 0, 0, 0)"),de.strokeStyle=ee.strokeStyle,de.lineWidth=Math.max(lineWidth,2),de.lineJoin="round",de.lineCap="round",de.shadowColor=de.strokeStyle,de.shadowBlur=10,de.beginPath();const xe=w/(F.length-1),{min:be,max:Ae}=e.getMinMax(),Ie=Ae-be||1,ct=S/Ie;de.moveTo(0,S-(F[0]-be)*ct);for(let kt=1;kt<F.length;kt++){const ys=kt*xe,Ca=S-(F[kt]-be)*ct;de.lineTo(ys,Ca)}de.stroke(),de.lineTo(w,S),de.lineTo(0,S),de.closePath(),de.fillStyle=ve,de.fill(),de.shadowBlur=0}}J=requestAnimationFrame(pe)};return pe(),()=>{cancelAnimationFrame(J)}},[e,r,n,i,l,d,f,h,p,g,x,w,S,D,C,N,A,j,E]),s.jsxs("div",{className:"relative",style:{width:r,height:n},onMouseEnter:()=>x&&I(!0),onMouseLeave:()=>x&&I(!1),children:[s.jsx("canvas",{ref:R,className:"absolute inset-0",style:{width:`${r}px`,height:`${n}px`,imageRendering:"crisp-edges"}}),x&&D&&s.jsx("div",{className:"absolute -top-1/2 left-1/2 -translate-x-1/2 z-20 p-1",style:{background:"rgba(0,0,0,0.7)",border:"0.5px solid rgba(0,212,255,0.3)"},children:s.jsx("canvas",{ref:k})}),u&&s.jsx("div",{className:"absolute top-0 right-0 text-xs font-mono p-1 bg-black/60 rounded",children:s.jsxs("span",{style:{color:z.change>=0?"#00FF88":"#FF4444"},children:[z.change>=0?"▲":"▼"," ",Math.abs(z.change).toFixed(1),"%"]})})]})},Yz=({signal:t,duration:e=8e3})=>{var u;const[r,n]=b.useState(!1),[i,l]=b.useState(0);return b.useEffect(()=>{if(t&&t.priority>=8){n(!0),l(0);const d=setInterval(()=>{l(f=>f>=100?(clearInterval(d),setTimeout(()=>n(!1),500),100):f+100/(e/100))},100);return()=>clearInterval(d)}},[t,e]),!r||!t?null:s.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-[100] transform transition-transform duration-500",style:{transform:r?"translateY(0)":"translateY(100%)"},children:s.jsxs("div",{className:"relative bg-gradient-to-r from-black via-gray-900 to-black border-t-2",style:{borderColor:t.direction==="up"?"#00FF88":"#FF4444"},children:[s.jsx("div",{className:"absolute top-0 left-0 h-0.5 transition-all duration-100",style:{width:`${i}%`,background:t.direction==="up"?"#00FF88":"#FF4444"}}),s.jsxs("div",{className:"flex items-center justify-between px-6 py-3",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"animate-pulse",children:s.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:t.direction==="up"?"#00FF88":"#FF4444"}})}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-bold text-white",children:[t.symbol," ALERT"]}),s.jsx("div",{className:"text-xs",style:{color:"#FFA500"},children:t.type.replace("_"," ").toUpperCase()})]})]}),s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-lg font-mono font-bold",style:{color:t.direction==="up"?"#00FF88":"#FF4444"},children:[t.metadata.priceChange>0?"+":"",(u=t.metadata.priceChange)==null?void 0:u.toFixed(2),"%"]}),s.jsx("div",{className:"text-xs text-gray-400",children:"CHANGE"})]}),t.metadata.volatility&&s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-lg font-mono font-bold text-yellow-400",children:[(t.metadata.volatility*100).toFixed(1),"%"]}),s.jsx("div",{className:"text-xs text-gray-400",children:"VOLATILITY"})]}),s.jsxs("div",{className:"flex items-center space-x-2 border-l pl-6 border-gray-700",children:[s.jsx("div",{className:"bg-white p-2 rounded",children:s.jsx("div",{className:"w-12 h-12 bg-gray-200 flex items-center justify-center",children:s.jsx("span",{className:"text-xs text-gray-600",children:"QR"})})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-400",children:"SCAN FOR"}),s.jsx("div",{className:"text-sm font-bold",style:{color:"#FFA500"},children:"LIVE RATE"})]})]})]})]})]})})},Gz=({fps:t,frameTime:e,visible:r=!1})=>{if(!r)return null;const n=()=>t>=55?"#00FF88":t>=30?"#FFA500":"#FF4444";return s.jsx("div",{className:"fixed top-4 right-4 bg-black/90 border border-gray-700 rounded p-3 font-mono text-xs z-[90]",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400",children:"FPS:"}),s.jsx("span",{style:{color:n()},className:"ml-4 font-bold",children:t})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400",children:"Frame:"}),s.jsxs("span",{className:"ml-4 text-white",children:[e.toFixed(2),"ms"]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400",children:"Target:"}),s.jsx("span",{className:"ml-4 text-gray-500",children:"≤12ms @ 4K"})]})]})})},Qp={BASE_URL:"/LeaperFX/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Zp={};const Xz={forex:{colorUp:"#FFD700",colorDown:"#8B0000",glowIntensity:2,smoothingFactor:.3,baseLineWidth:1.25,maxLineWidth:2.4},commodity:{colorUp:"#FFD700",colorDown:"#8B0000",glowIntensity:2,smoothingFactor:.2,baseLineWidth:1.1,maxLineWidth:2.2},crypto:{colorUp:"#00FF88",colorDown:"#FF4444",glowIntensity:4,smoothingFactor:.25,baseLineWidth:1.3,maxLineWidth:2.6}};function k0(t){const e=Kz(),r=Xz[t],n=e==="bright"?.85:e==="dim"?1.15:1,i=e==="bright"?-.02:e==="dim"?.02:0;return{...r,glowIntensity:Math.max(1,r.glowIntensity*n),smoothingFactor:Math.max(.15,Math.min(.4,r.smoothingFactor+i))}}function Kz(){var t;try{const e=typeof import.meta<"u"?Qp==null?void 0:Qp.VITE_DISPLAY_ENV:void 0,r=typeof window<"u"?(t=window.__ENV__)==null?void 0:t.VITE_DISPLAY_ENV:void 0,n=typeof process<"u"?Zp==null?void 0:Zp.VITE_DISPLAY_ENV:void 0,i=String(e??r??n??"").toLowerCase();if(i==="bright"||i==="dim"||i==="normal"||i==="auto")return i}catch{}return"auto"}const Jp={BASE_URL:"/LeaperFX/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var eg={};const Zg=["CA-30Y-YIELD","TSX","TSX60","SPX/CAD","DJI/CAD","NASDAQ/CAD"];function WD(){const t=Jg("VITE_MOVERS_MODE_MS",24e3),e=Jg("VITE_MOVERS_FEATURE_MS",12e3);return{modeMs:t,featureMs:e}}const Yu={symbols:["XAU/CAD","XAG/CAD","XPT/CAD","WTI/CAD","BRENT/CAD","NG/CAD"],rotationIntervalMs:Jg("VITE_COMMODITIES_ROTATE_MS",21e3),fixedSlots:3,spotlightSlots:3},Wz={forex:["polygon","fxapi"],commodity:["twelvedata","polygon"],crypto:["coinbase"],index:["polygon","alpaca"],yield:["boc"]};function Jg(t,e){var r;try{const n=typeof import.meta<"u"?Jp==null?void 0:Jp[t]:void 0,i=typeof window<"u"?(r=window.__ENV__)==null?void 0:r[t]:void 0,l=typeof process<"u"?eg==null?void 0:eg[t]:void 0,d=parseFloat(String(n??i??l));return Number.isFinite(d)?d:e}catch{return e}}const tg={BASE_URL:"/LeaperFX/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var rg={};function ng(t,e){var r;try{const n=typeof import.meta<"u"?tg==null?void 0:tg[t]:void 0,i=typeof window<"u"?(r=window.__ENV__)==null?void 0:r[t]:void 0,l=typeof process<"u"?rg==null?void 0:rg[t]:void 0,u=String(n??i??l??"").trim();return u?u.split(",").map(d=>d.trim()).filter(Boolean):e}catch{return e}}function Qz(){const t=["USD","EUR","GBP","JPY","CHF"],e=new Set(dc.filter(r=>r.quoteCurrency==="CAD").map(r=>r.baseCurrency));return t.filter(r=>e.has(r))}function Zz(){const t=["BTC/CAD","ETH/CAD","SOL/CAD","AVAX/CAD","MATIC/CAD","ADA/CAD"],e=new Set(dm.map(r=>r.symbol));return t.filter(r=>e.has(r))}function Jz(){const t=Yu.symbols,e=new Set(mm.map(r=>r.symbol));return t.filter(r=>e.has(r))}function e9(){const t=Zg,e=new Set(fm.map(r=>r.symbol));return t.filter(r=>e.has(r))}function t9(){const t=ng("VITE_FOREX_BASES",Qz()),e=ng("VITE_CRYPTO_MAIN",Zz()),r=Jz(),n=e9(),l=ng("VITE_MOVERS_SEQUENCE",["gainers","indices","losers"]).map(d=>d==="gainers"||d==="indices"||d==="losers"?d:"gainers"),u=WD();return{forex:{id:"forex",title:"Foreign Exchange",symbols:t,theme:"forex"},cryptoMain:{id:"cryptoMain",title:"Cryptocurrency",symbols:e,theme:"crypto"},cryptoMovers:{id:"cryptoMovers",title:"Top Movers",symbols:e,theme:"crypto",moversIndices:n,sequence:l,cadence:u},commodities:{id:"commodities",title:"Precious Metals & Energy",symbols:r,theme:"commodity",rotation:{intervalMs:Yu.rotationIntervalMs,fixedSlots:Yu.fixedSlots,spotlightSlots:Yu.spotlightSlots}},indices:{id:"indices",title:"Market Indices",symbols:n,theme:"commodity"},providerPriority:Wz}}const QD={getLayoutConfig:t9},r9={coinbase:"Coinbase (Crypto)",fxapi:"FX API (Forex)",twelvedata:"TwelveData (Commodities)",alpaca:"Alpaca (US Markets)",polygon:"Polygon (Backup)",finnhub:"Finnhub (Fallback)",bankofcanada:"Bank of Canada (Yields)"},n9=()=>{const[t,e]=b.useState(null),[r,n]=b.useState(!1),[i,l]=b.useState(Date.now());b.useEffect(()=>{const w=()=>{const C=hn.getHealthStatus();e(C),l(Date.now())};w();const S=setInterval(w,5e3);return()=>clearInterval(S)},[]);const u=w=>{switch(w){case"healthy":return s.jsx(ft,{className:"w-4 h-4 text-green-500"});case"degraded":return s.jsx(rr,{className:"w-4 h-4 text-yellow-500"});case"error":return s.jsx(us,{className:"w-4 h-4 text-red-500"})}},d=w=>{switch(w){case"healthy":return"bg-green-500";case"degraded":return"bg-yellow-500";case"error":return"bg-red-500"}},f=w=>{const S=Math.floor((Date.now()-w)/1e3);if(S<60)return`${S}s ago`;const C=Math.floor(S/60);return C<60?`${C}m ago`:`${Math.floor(C/60)}h ago`},h=w=>{const S=Math.floor(w/6e4);return S<1?"Just now":S<60?`${S} min old`:`${Math.floor(S/60)} hr old`};if(!t)return s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-900 rounded-lg border border-gray-800",children:[s.jsx(oo,{className:"w-4 h-4 text-gray-400 animate-spin"}),s.jsx("span",{className:"text-xs text-gray-400",children:"Initializing feeds..."})]});const p=Array.from(t.sources.entries()),g=p.filter(([w,S])=>S.health==="healthy").length,x=p.length;return s.jsxs("div",{className:"bg-gray-900 rounded-lg border border-gray-800",children:[s.jsxs("div",{className:"flex items-center justify-between px-3 py-2 cursor-pointer hover:bg-gray-800/50 transition-colors",onClick:()=>n(!r),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${d(t.overall)} animate-pulse`}),s.jsx("span",{className:"text-xs font-medium text-gray-300",children:"Data Feeds"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[s.jsxs("span",{children:[g,"/",x," active"]}),s.jsx("span",{className:"text-gray-600",children:"|"}),s.jsxs("span",{children:["FX: ",h(t.fxRatesAge)]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[t.overall==="healthy"?s.jsx(Wu,{className:"w-4 h-4 text-green-500"}):t.overall==="degraded"?s.jsx(EC,{className:"w-4 h-4 text-yellow-500"}):s.jsx(fy,{className:"w-4 h-4 text-red-500"}),s.jsx(oo,{className:`w-3 h-3 text-gray-500 transition-transform ${r?"rotate-180":""}`})]})]}),r&&s.jsx("div",{className:"border-t border-gray-800",children:s.jsxs("div",{className:"px-3 py-2 space-y-2",children:[p.map(([w,S])=>s.jsxs("div",{className:"flex items-center justify-between py-1.5 px-2 rounded bg-gray-800/30",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[u(S.health),s.jsx("span",{className:"text-xs font-medium text-gray-300",children:r9[w]||w})]}),s.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[S.errorCount>0&&s.jsxs("span",{className:"text-red-400",children:[S.errorCount," errors"]}),s.jsx("span",{children:f(S.lastUpdate)}),s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${S.connected?"bg-green-500":"bg-gray-600"}`})]})]},w)),s.jsxs("div",{className:"flex items-center justify-between pt-2 mt-2 border-t border-gray-700",children:[s.jsx("span",{className:"text-xs text-gray-500",children:"Last checked"}),s.jsx("span",{className:"text-xs text-gray-400",children:f(i)})]})]})})]})},a9=({tz:t="America/Toronto",fmt:e})=>{const[r,n]=b.useState(new Date);b.useEffect(()=>{const l=setInterval(()=>n(new Date),1e3);return()=>clearInterval(l)},[]);const i=e||{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1,timeZone:t};return s.jsx("span",{className:"font-mono font-bold text-xs",style:{color:"#00D4FF"},children:r.toLocaleTimeString("en-CA",i)})},ag={BASE_URL:"/LeaperFX/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var sg={};const s9=t=>t===null||!Number.isFinite(t)?"—":t>=1e3?t.toFixed(0):t>=1?t.toFixed(2):t.toFixed(4),i9=({getBuffer:t})=>{const[e,r]=b.useState({}),[n,i]=b.useState(0),[l,u]=b.useState(!1),[d,f]=b.useState(0);b.useEffect(()=>{const x=[];dm.forEach(N=>{const A=hn.subscribe(N.symbol,j=>{const E=N.symbol.split("/")[0],_=typeof j.changePercent24h=="number"&&Number.isFinite(j.changePercent24h)?j.changePercent24h:0,R=Number.isFinite(j.priceCAD)?j.priceCAD:Number.isFinite(j.price)?j.price:null;r(k=>({...k,[N.symbol]:{symbol:E,engineSymbol:N.symbol.replace("/","").replace(/-/g,""),change:_,price:R,trend:_>=0?"up":"down"}}))});x.push(A)});const w=new Set(Zg);fm.filter(N=>w.has(N.symbol)).forEach(N=>{const A=hn.subscribe(N.symbol,j=>{const E=N.symbol.replace("/CAD",""),_=typeof j.changePercent24h=="number"&&Number.isFinite(j.changePercent24h)?j.changePercent24h:0,R=Number.isFinite(j.priceCAD)?j.priceCAD:Number.isFinite(j.price)?j.price:null;r(k=>({...k,[N.symbol]:{symbol:E,engineSymbol:N.symbol.replace("/","").replace(/-/g,""),change:_,price:R,trend:_>=0?"up":"down"}}))});x.push(A)});const{modeMs:S}=WD(),C=setInterval(()=>i(N=>N+1),S);return()=>{x.forEach(N=>{try{N()}catch{}}),clearInterval(C)}},[]),b.useEffect(()=>{if(n!==d){u(!0),f(n);const x=setTimeout(()=>u(!1),600);return()=>clearTimeout(x)}},[n,d]);const h=b.useMemo(()=>{var x;try{const w=typeof import.meta<"u"?ag==null?void 0:ag.VITE_MOVERS_SEQUENCE:void 0,S=typeof window<"u"?(x=window.__ENV__)==null?void 0:x.VITE_MOVERS_SEQUENCE:void 0,C=typeof process<"u"?sg==null?void 0:sg.VITE_MOVERS_SEQUENCE:void 0,A=String(w??S??C??"gainers,indices,losers").split(",").map(R=>R.trim().toLowerCase()).filter(Boolean),j=["gainers","losers","indices"],E=A.filter(R=>j.includes(R));return E.length?E:QD.getLayoutConfig().cryptoMovers.sequence}catch{return["gainers","indices","losers"]}},[]),p=b.useMemo(()=>{const x=Object.values(e);if(x.length===0)return[];const w=x.filter(j=>j.change>=0).sort((j,E)=>E.change-j.change).slice(0,6),S=x.filter(j=>j.change<0).sort((j,E)=>j.change-E.change).slice(0,6),C=Zg.map(j=>e[j]).filter(Boolean).slice(0,6),N=h[n%h.length],A=N==="gainers"?w:N==="losers"?S:C;for(;A.length<6;)A.push({symbol:"—",engineSymbol:"—",change:0,price:null,trend:"down"});return A.slice(0,6)},[e,n]),g=k0("crypto");return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"text-xs font-bold uppercase tracking-wider",style:{color:or.primary.orange,fontFamily:"monospace"},children:(()=>{const x=h[n%h.length];return x==="gainers"?"Top Gainers":x==="losers"?"Top Losers":"Market Indices"})()}),s.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:"Auto‑rotating"})]}),s.jsx("div",{className:`grid grid-cols-3 gap-2 ${l?"fade-in":""}`,children:p.map((x,w)=>{const S=x.engineSymbol.endsWith("YIELD");return s.jsx(KD,{height:"90px",variant:"mover",children:s.jsxs("div",{className:"h-full flex items-center px-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"mb-1 truncate",children:s.jsx("div",{className:"text-sm font-bold",style:{color:or.primary.orange,fontFamily:"monospace"},children:x.symbol})}),s.jsxs("div",{className:"text-xs",children:[s.jsx("span",{style:{color:or.primary.blue},children:"Price: "}),s.jsx("span",{className:`font-mono font-bold ${x.price===null?"text-gray-500":"text-white"}`,children:s9(x.price)}),s.jsx("span",{className:"ml-1 text-[10px] text-gray-500",children:"CAD"})]}),s.jsxs("div",{className:"text-xs mt-0.5",style:{color:x.change>=0?or.trend.up:or.trend.down},children:[x.price!==null?x.change>=0?"▲":"▼":"•"," ",Math.abs(x.change).toFixed(2),"%"]})]}),!S&&s.jsx("div",{className:"w-[120px] h-[50px] ml-3 flex items-center",children:s.jsx(R0,{symbol:x.engineSymbol,buffer:t(x.engineSymbol),width:120,height:50,color:x.trend==="up"?g.colorUp:g.colorDown,glowIntensity:g.glowIntensity,showStats:!1,isSignalActive:!1,volatilityAdaptive:!0,baseLineWidth:g.baseLineWidth,maxLineWidth:g.maxLineWidth,smoothingFactor:g.smoothingFactor,renderMode:"areaNeon",lineColor:"#FFFFFF",expandOnHover:!1,sampleCount:160})})]})},`${x.engineSymbol}-${w}`)})})]})},o9=t=>t==="up"?"#00FF88":t==="down"?"#FF4444":"#888888",l9=({fxBases:t,cryptoSymbols:e,commoditySymbols:r,indexSymbols:n})=>{const[i,l]=b.useState({});b.useEffect(()=>{const f=[];return t.forEach(h=>{const p=`${h}/CAD`,g=hn.subscribe(p,x=>l(w=>({...w,[p]:x})));f.push(g)}),[...e,...r,...n].forEach(h=>{const p=hn.subscribe(h,g=>l(x=>({...x,[h]:g})));f.push(p)}),()=>{f.forEach(h=>{try{h()}catch{}})}},[t,e,r,n]);const u=b.useMemo(()=>{const f=[];return t.forEach(h=>{const p=`${h}/CAD`,g=i[p];if(!g)return;const x=Number.isFinite(g.priceCAD)?g.priceCAD:Number.isFinite(g.price)?g.price:NaN;if(!Number.isFinite(x))return;const w=typeof g.changePercent24h=="number"?g.changePercent24h:0;f.push({label:h,value:x>=2?x.toFixed(2):x.toFixed(4),dir:w>0?"up":w<0?"down":"flat"})}),e.forEach(h=>{const p=i[h];if(!p)return;const g=Number.isFinite(p.priceCAD)?p.priceCAD:Number.isFinite(p.price)?p.price:NaN;if(!Number.isFinite(g))return;const x=h.replace("/CAD","").replace("-USD",""),w=typeof p.changePercent24h=="number"?p.changePercent24h:0;f.push({label:x,value:g>=1e3?g.toFixed(0):g>=1?g.toFixed(2):g.toFixed(4),dir:w>0?"up":w<0?"down":"flat"})}),r.forEach(h=>{const p=i[h];if(!p)return;const g=Number.isFinite(p.priceCAD)?p.priceCAD:Number.isFinite(p.price)?p.price:NaN;if(!Number.isFinite(g))return;const x=h.replace("/CAD",""),w=typeof p.changePercent24h=="number"?p.changePercent24h:0;f.push({label:x,value:g>=1e3?g.toFixed(0):g>=1?g.toFixed(2):g.toFixed(4),dir:w>0?"up":w<0?"down":"flat"})}),n.forEach(h=>{const p=i[h];if(!p)return;const g=Number.isFinite(p.priceCAD)?p.priceCAD:Number.isFinite(p.price)?p.price:NaN;if(!Number.isFinite(g))return;const x=h.replace("/CAD",""),w=typeof p.changePercent24h=="number"?p.changePercent24h:0;f.push({label:x,value:g>=1e3?g.toFixed(0):g>=1?g.toFixed(2):g.toFixed(4),dir:w>0?"up":w<0?"down":"flat"})}),f},[i,t,e,r,n]),d=s.jsx("div",{className:"flex items-center gap-6 whitespace-nowrap px-4 py-1 text-xs font-mono",children:u.map((f,h)=>s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{style:{color:"#FFD700"},children:f.label}),s.jsx("span",{style:{color:o9(f.dir)},children:f.dir==="up"?"▲":f.dir==="down"?"▼":"•"}),s.jsx("span",{className:"text-white",children:f.value})]},`${f.label}-${h}`))});return s.jsx("div",{className:"relative overflow-hidden w-full h-full",children:s.jsxs("div",{className:"absolute inset-0 flex animate-ticker-scroll",children:[d,d]})})},es={BASE_URL:"/LeaperFX/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var ts={};class c9 extends cs.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,message:String((e==null?void 0:e.message)||e)}}componentDidCatch(e,r){console.error("ExchangeDashboard crashed:",e,r)}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen bg-black text-gray-300 flex items-center justify-center p-6",children:s.jsxs("div",{className:"max-w-lg w-full border border-red-500/40 bg-red-900/10 rounded p-4",children:[s.jsx("div",{className:"text-red-400 font-bold mb-2",children:"Dashboard failed to render"}),s.jsx("div",{className:"text-sm",children:this.state.message||"Unknown error"})]})}):this.props.children}}const u9="CAD",d9=1.5,KN=(t,e=20)=>{const r=t==="up"?1+Math.random()*.2:1.2-Math.random()*.2;return Array.from({length:e},(n,i)=>({time:i,value:r+(t==="up"?i:-i)*.002+(Math.random()-.5)*.006}))},m9=({item:t,getBuffer:e})=>{t.trend,`${t.symbol}`;const[r,n]=b.useState(()=>KN(t.trend,20));b.useEffect(()=>{const l=setInterval(()=>{n(u=>{if(u.length===0)return u;const d=u[u.length-1].value,f=t.trend==="up"?1.001:.999,h=(Math.random()-.5)*.004,p=Math.sin(Date.now()/8e3+Math.random()*Math.PI)*.003,g=Math.max(0,d*f*(1+h+p));return[...u.slice(1),{time:u.length,value:g}]})},3e3);return()=>clearInterval(l)},[t.trend,t.symbol]),b.useEffect(()=>{n(KN(t.trend,20))},[t.trend]);const i=(()=>{try{const l=typeof import.meta<"u"?es:void 0,u=typeof window<"u"?window.__ENV__:void 0,d=typeof process<"u"?ts:void 0,f=String(l&&l.VITE_BLUE_PULSE_SPEED||u&&u.VITE_BLUE_PULSE_SPEED||d&&d.VITE_BLUE_PULSE_SPEED||"6"),h=String(l&&l.VITE_BLUE_WASH_OPACITY||u&&u.VITE_BLUE_WASH_OPACITY||d&&d.VITE_BLUE_WASH_OPACITY||"1.0"),p=Math.max(2,Math.min(12,parseFloat(f))),g=Math.max(.05,Math.min(1,parseFloat(h)));return{speed:p,opacity:g}}catch{return{speed:6,opacity:1}}})();return s.jsxs("div",{className:"h-[110px] bloomberg-terminal-card movers-card",children:[s.jsx("div",{className:"card-blue-inner blue-pulse",style:{opacity:i.opacity,animationDuration:`${i.speed}s`}}),s.jsxs("div",{className:"p-2 h-full flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-xs",style:{color:"#FFA500",fontFamily:"monospace"},children:t.symbol}),s.jsx("div",{className:`font-mono font-bold text-sm mt-0.5 ${t.value==="—"?"text-gray-500":"text-white"}`,children:t.value}),s.jsxs("div",{className:"font-bold text-xs mt-1",style:{color:t.trend==="up"?"#00FF88":"#FF4444"},children:[t.value!=="—"?t.trend==="up"?"▲":"▼":"•"," ",t.change,t.changePercent&&t.value!=="—"&&s.jsxs("span",{className:"ml-1",style:{color:"#666"},children:["(",t.changePercent,")"]}),t.value==="—"&&s.jsx("span",{className:"ml-1 text-[10px] uppercase",style:{color:"#666"},children:"No Data"})]})]}),s.jsx("div",{className:"w-24 h-12 flex items-center",children:(()=>{const l=k0("commodity");return s.jsx(R0,{symbol:t.engineSymbol||t.symbol,buffer:e(t.engineSymbol||t.symbol),width:96,height:48,color:t.trend==="up"?l.colorUp:l.colorDown,glowIntensity:l.glowIntensity,showStats:!1,isSignalActive:!1,volatilityAdaptive:!0,baseLineWidth:l.baseLineWidth,maxLineWidth:l.maxLineWidth,smoothingFactor:l.smoothingFactor,renderMode:"areaNeon",lineColor:"#FFFFFF",expandOnHover:!1})})()})]})]})};function f9(){const[t,e]=b.useState({}),r=b.useMemo(()=>QD.getLayoutConfig(),[]),[n,i]=b.useState(r.forex.symbols),[l,u]=b.useState("CNY"),[d,f]=b.useState(!0),[h,p]=b.useState(null),[g,x]=b.useState(!0),[w,S]=b.useState(0),[C,N]=b.useState(!1),{health:A,isConnected:j,error:E}=vz(),_=Vz({bufferCapacity:5e3,targetFPS:60,debugMode:!1,sparklineConfig:{strokeColor:"#FFD700",fillGradient:{start:"rgba(255, 215, 0, 0.6)",end:"rgba(255, 140, 0, 0.1)"},glowIntensity:3},signalConfig:{priceChangeThreshold:2,priceChangeWindow:5,volatilityMultiplier:2.5,bookImbalanceThreshold:.7,minSignalDuration:8,cooldownPeriod:30}});b.useEffect(()=>{var F;const ce=_.pushData;wr.connect();const oe=hn.setEnginePushFunction(ce);try{const L=typeof import.meta<"u"?es==null?void 0:es.VITE_DEBUG_MODE:void 0,X=typeof window<"u"?(F=window.__ENV__)==null?void 0:F.VITE_DEBUG_MODE:void 0,O=typeof process<"u"?ts==null?void 0:ts.VITE_DEBUG_MODE:void 0;String(L??X??O??"").toLowerCase()==="true"&&console.debug("[Dashboard] Engine connected to UnifiedDataAggregator")}catch{}return hn.initialize().catch(L=>console.error("Aggregator init failed",L)),()=>{try{oe==null||oe()}catch{}try{hn.shutdown()}catch{}}},[]),b.useEffect(()=>{const ce=oe=>{var F;(oe.ctrlKey||oe.metaKey)&&oe.shiftKey&&oe.key==="P"&&(oe.preventDefault(),N(L=>!L)),(oe.ctrlKey||oe.metaKey)&&oe.shiftKey&&oe.key==="S"&&(oe.preventDefault(),n[0],(F=_.services.signalAggregator)==null||F.getEngine(n[0]).registerNewsEvent(n[0],"Test Signal Alert",3.5))};return window.addEventListener("keydown",ce),()=>{window.removeEventListener("keydown",ce)}},[n]),b.useEffect(()=>{const ce=window.document.documentElement;g?ce.classList.add("dark"):ce.classList.remove("dark")},[g]),b.useEffect(()=>{var oe;const ce=(oe=window.matchMedia)==null?void 0:oe.call(window,"(prefers-color-scheme: dark)").matches;x(ce)},[]);const R={USD:{name:"US Dollar",code:"us"},EUR:{name:"Euro",code:"eu"},GBP:{name:"British Pound",code:"gb"},JPY:{name:"Japanese Yen",code:"jp"},CHF:{name:"Swiss Franc",code:"ch"},AUD:{name:"Australian Dollar",code:"au"},CAD:{name:"Canadian Dollar",code:"ca"},CNY:{name:"Chinese Yuan",code:"cn"},INR:{name:"Indian Rupee",code:"in"},MXN:{name:"Mexican Peso",code:"mx"}},k=ce=>R[ce]||{name:ce,code:""},D=b.useMemo(()=>{var ce;try{const oe=typeof import.meta<"u"?es==null?void 0:es.VITE_SHOW_FLAGS:void 0,F=typeof window<"u"?(ce=window.__ENV__)==null?void 0:ce.VITE_SHOW_FLAGS:void 0,L=typeof process<"u"?ts==null?void 0:ts.VITE_SHOW_FLAGS:void 0,X=String(oe??F??L??"true").toLowerCase();return X==="true"||X==="1"||X==="yes"}catch{return!0}},[]),I=b.useMemo(()=>{try{const ce=typeof import.meta<"u"?es:void 0,oe=typeof window<"u"?window.__ENV__:void 0,F=typeof process<"u"?ts:void 0,L=String(ce&&ce.VITE_BLUE_PULSE_SPEED||oe&&oe.VITE_BLUE_PULSE_SPEED||F&&F.VITE_BLUE_PULSE_SPEED||"6"),X=String(ce&&ce.VITE_BLUE_WASH_OPACITY||oe&&oe.VITE_BLUE_WASH_OPACITY||F&&F.VITE_BLUE_WASH_OPACITY||"1.0"),O=Math.max(2,Math.min(12,parseFloat(L))),q=Math.max(.05,Math.min(1,parseFloat(X)));return{speed:O,opacity:q}}catch{return{speed:6,opacity:1}}},[]);b.useEffect(()=>{const ce=[];n.forEach(F=>{const L=`${F}/CAD`,X=hn.subscribe(L,O=>{const q=Number.isFinite(O.priceCAD)?O.priceCAD:Number.isFinite(O.price)?O.price:NaN;Number.isFinite(q)&&e(Y=>{const le=Y[F];return{...Y,[F]:{rate:q,prev:le?le.rate:null,ts:O.timestamp}}})});ce.push(X)});const oe=setTimeout(()=>f(!1),1200);return()=>{ce.forEach(F=>{try{F()}catch{}}),clearTimeout(oe)}},[n]),b.useEffect(()=>{let ce=null,oe=!0;return(async()=>{try{await _e.connect(),ce=_e.subscribe(F=>{if(oe&&F.type==="rate_update"){const{currency:L,buyRate:X,sellRate:O}=F.data,q=(parseFloat(X)+parseFloat(O))/2;Number.isFinite(q)&&q>0&&e(Y=>{const le=Y[L];return{...Y,[L]:{rate:q,prev:le?le.rate:null,ts:Date.now()}}})}})}catch(F){console.error("Failed to set up WebSocket connection:",F)}})(),()=>{oe=!1;try{ce==null||ce()}catch{}try{_e.disconnect()}catch{}}},[]);const[z,V]=b.useState({}),P=b.useMemo(()=>{const ce=r.commodities.symbols,oe=new Set(mm.map(F=>F.symbol));return ce.filter(F=>oe.has(F))},[r]);b.useEffect(()=>{const ce=[],oe=F=>F.startsWith("XAU")?"GOLD":F.startsWith("XAG")?"SILVER":F.startsWith("XPT")?"PLAT.":F.startsWith("XPD")?"PALL.":F.startsWith("WTI")?"CRUDE":F.startsWith("BRENT")?"BRENT":F.startsWith("NG")?"NAT.GAS":F.replace("/CAD","");return P.forEach(F=>{const L=hn.subscribe(F,X=>{const O=Number.isFinite(X.priceCAD)?X.priceCAD:Number.isFinite(X.price)?X.price:NaN;if(!Number.isFinite(O))return;const q=typeof X.changePercent24h=="number"&&Number.isFinite(X.changePercent24h)?X.changePercent24h:0,Y=q>=0?"up":"down";V(le=>({...le,[F]:{name:oe(F),symbol:oe(F),engineSymbol:F.replace("/",""),value:O>=1e3?O.toFixed(0):O>=1?O.toFixed(2):O.toFixed(4),change:`${q>=0?"+":""}${Math.abs(q).toFixed(2)}`,changePercent:`${Math.abs(q).toFixed(2)}%`,trend:Y}}))});ce.push(L)}),()=>{ce.forEach(F=>{try{F()}catch{}})}},[P]);const $=b.useMemo(()=>{const ce=[];return P.forEach(oe=>{const F=z[oe];F&&ce.push(F)}),ce.length===0?P.slice(0,6).map(oe=>({name:oe.replace("/CAD",""),symbol:oe.replace("/CAD",""),value:"—",change:"—",changePercent:void 0,trend:"down"})):ce},[z,P]),{initializeRotation:Q,startRotation:re,stopRotation:ee}=_;b.useEffect(()=>{const ce=$.map((oe,F)=>({id:`commodity_${oe.symbol}`,symbol:oe.symbol,category:"commodity",weight:oe.trend==="up"?1.5:1,lastShown:0,showCount:0,pinned:F<3,signalActive:!1}));return Q("commodities",ce,{fixedSlots:3,spotlightSlots:3,rotationInterval:21,fairnessWindow:2,sectorDiversity:!1}),re("commodities",21e3),()=>ee("commodities")},[Q,re,ee,$]),b.useEffect(()=>{const ce=setInterval(()=>{S(oe=>(oe+1)%1)},21e3);return()=>clearInterval(ce)},[]);const U=ce=>{i(oe=>oe.filter(F=>F!==ce))},J=b.useCallback(ce=>{const oe=t[ce];if(!oe||!Number.isFinite(oe.rate))return{customerBuys:"—",customerSells:"—",spread:"—",change24h:"—",chartData:[]};const F=oe.rate,L=F*(d9/100),X=F-L,O=F+L,q=(O-X)/X*100,Y=oe.prev&&oe.prev>0?(F-oe.prev)/oe.prev*100:"—",le=oe.prev&&oe.prev>0?oe.prev:F*.99,ye=F,B=12,ae=[];for(let de=0;de<B;de++){const Z=de/(B-1),ve=le+(ye-le)*Z,xe=Date.now()/15e3,be=Math.sin(Z*Math.PI*1.5+xe)*(Math.abs(ye-le)*.06),Ae=Math.sin(Z*Math.PI*.8+xe*.5)*(Math.abs(ye-le)*.04),Ie=de>0&&de<B-1?(Math.random()-.5)*(Math.abs(ye-le)*.03):0;ae.push({name:`p${de}`,value:ve+be+Ae+Ie})}return{customerBuys:O.toFixed(4),customerSells:X.toFixed(4),spread:q.toFixed(2),change24h:typeof Y=="number"?Y.toFixed(2):"—",chartData:ae}},[t]),pe=b.useMemo(()=>$.length<=6?$:$.slice(w).concat($.slice(0,w)).slice(0,6),[$,w]);return b.useMemo(()=>Array.from(new Set(dc.filter(oe=>oe.quoteCurrency==="CAD").map(oe=>oe.baseCurrency))).filter(oe=>!n.includes(oe)&&oe!==u9).map(oe=>({value:oe,label:oe})),[n]),s.jsx(c9,{children:s.jsx("div",{className:"h-screen bg-black text-gray-100 font-sans overflow-hidden",children:s.jsxs("div",{className:"h-screen flex flex-col min-h-0",children:[s.jsxs("main",{className:"flex-1 flex flex-col px-2 py-2 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(h9,{isConnected:j,health:A,error:E}),s.jsx("div",{className:"ml-2",children:s.jsx(n9,{})})]}),d&&s.jsxs("div",{className:"flex justify-center items-center p-10 bg-gray-900 rounded-lg shadow-md",children:[s.jsx(Xu,{className:"h-12 w-12 mr-4 animate-spin text-cyan-400"}),s.jsx("span",{className:"text-lg text-white",children:"Loading rates..."})]}),h&&!d&&s.jsxs("div",{className:"bg-red-900/50 border-l-4 border-red-500 text-red-300 p-4 rounded-lg shadow-md flex items-center",role:"alert",children:[s.jsx(cr,{className:"h-6 w-6 mr-3"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold",children:"Error:"}),s.jsx("p",{children:h})]})]}),!d&&!h&&s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsxs("div",{className:"h-full flex flex-col xl:flex-row gap-3",children:[s.jsx("div",{className:"flex-1 min-w-0 flex flex-col space-y-3 overflow-hidden",children:s.jsx("div",{className:"space-y-2 overflow-visible",children:n.map(ce=>{const{customerBuys:oe,customerSells:F,spread:L,change24h:X,chartData:O}=J(ce),q=k(ce),Y=parseFloat(X),le=Number.isFinite(Y)?Y>=0:null,ye=oe==="—"&&F==="—";return s.jsxs("div",{className:"h-[105px] relative group overflow-hidden transition-all duration-200 bloomberg-terminal-card movers-card",children:[s.jsx("div",{className:"card-blue-inner blue-pulse",style:{opacity:I.opacity,animationDuration:`${I.speed}s`}}),s.jsx("button",{onClick:()=>U(ce),className:"absolute top-2 right-2 z-10 text-gray-600 hover:text-red-400 opacity-0 group-hover:opacity-100",children:s.jsx(Ir,{className:"h-3 w-3"})}),s.jsxs("div",{className:"h-full flex items-center px-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[D&&s.jsx("img",{src:`https://flagcdn.com/w40/${q.code}.png`,width:"24",alt:`${q.name} flag`,className:"mr-2"}),s.jsx("h3",{className:"text-base font-bold",style:{color:"#FFA500",fontFamily:"monospace"},children:ce})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{style:{color:"#4A90E2"},children:"We Buy: "}),s.jsx("span",{className:`font-mono font-bold ${ye?"text-gray-500":"text-white"}`,children:F})]}),s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{style:{color:"#4A90E2"},children:"We Sell: "}),s.jsx("span",{className:"font-mono font-bold",style:{color:ye?"#888888":"#00FF88"},children:oe})]}),ye&&s.jsx("div",{className:"text-[10px] font-bold uppercase tracking-wider",style:{color:"#666"},children:"No Data"})]})]}),s.jsx("div",{className:"w-[120px] h-[50px] mx-4",style:{background:"linear-gradient(135deg, rgba(0, 8, 20, 0.6) 0%, rgba(0, 20, 40, 0.4) 100%)",border:"0.5px solid rgba(0, 212, 255, 0.2)",borderRadius:"0px",boxShadow:"inset 0 0 10px rgba(0, 20, 40, 0.3)"},children:(()=>{var ae;const B=k0("forex");return s.jsx(R0,{symbol:`${ce}CAD`,buffer:_.getBuffer(`${ce}CAD`),width:120,height:50,color:le===null?"#888888":le?B.colorUp:B.colorDown,glowIntensity:B.glowIntensity,showStats:!1,isSignalActive:((ae=_.engineState.topSignal)==null?void 0:ae.symbol)===ce,volatilityAdaptive:!0,baseLineWidth:B.baseLineWidth,maxLineWidth:B.maxLineWidth,smoothingFactor:B.smoothingFactor,renderMode:"areaNeon",lineColor:"#FFFFFF",expandOnHover:!1})})()}),s.jsx("div",{className:"hidden",children:s.jsx(lD,{width:"100%",height:"100%",children:s.jsxs(XD,{data:O,margin:{top:2,right:2,left:2,bottom:2},children:[s.jsxs("defs",{children:[s.jsx("linearGradient",{id:`bloomberg-gradient-${ce}`,x1:"0",y1:"0",x2:"0",y2:"1",children:le===null?s.jsxs(s.Fragment,{children:[s.jsx("stop",{offset:"0%",stopColor:"#888888",stopOpacity:.9}),s.jsx("stop",{offset:"25%",stopColor:"#777777",stopOpacity:.7}),s.jsx("stop",{offset:"50%",stopColor:"#666666",stopOpacity:.5}),s.jsx("stop",{offset:"75%",stopColor:"#555555",stopOpacity:.3}),s.jsx("stop",{offset:"100%",stopColor:"#444444",stopOpacity:.1})]}):le?s.jsxs(s.Fragment,{children:[s.jsx("stop",{offset:"0%",stopColor:"#FFD700",stopOpacity:.9}),s.jsx("stop",{offset:"25%",stopColor:"#FFB000",stopOpacity:.7}),s.jsx("stop",{offset:"50%",stopColor:"#FF8C00",stopOpacity:.5}),s.jsx("stop",{offset:"75%",stopColor:"#FF6B00",stopOpacity:.3}),s.jsx("stop",{offset:"100%",stopColor:"#FF4500",stopOpacity:.1})]}):s.jsxs(s.Fragment,{children:[s.jsx("stop",{offset:"0%",stopColor:"#8B0000",stopOpacity:.9}),s.jsx("stop",{offset:"25%",stopColor:"#A52A2A",stopOpacity:.7}),s.jsx("stop",{offset:"50%",stopColor:"#DC143C",stopOpacity:.5}),s.jsx("stop",{offset:"75%",stopColor:"#FF4444",stopOpacity:.3}),s.jsx("stop",{offset:"100%",stopColor:"#FF6666",stopOpacity:.1})]})}),s.jsxs("filter",{id:`glow-${ce}`,children:[s.jsx("feGaussianBlur",{stdDeviation:"1",result:"coloredBlur"}),s.jsxs("feMerge",{children:[s.jsx("feMergeNode",{in:"coloredBlur"}),s.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),s.jsx(_D,{stroke:"rgba(255, 255, 255, 0.05)",strokeWidth:.5,vertical:!1,horizontal:!0,strokeDasharray:"1 1"}),s.jsx(A0,{hide:!0,domain:["dataMin","dataMax"]}),s.jsx(j0,{type:"monotoneX",dataKey:"value",stroke:le===null?"#888888":le?"#FFD700":"#8B0000",strokeWidth:1.5,fillOpacity:1,fill:`url(#bloomberg-gradient-${ce})`,dot:!1,filter:`url(#glow-${ce})`,strokeLinecap:"round",strokeLinejoin:"round"})]})})}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-mono font-extrabold text-lg tabular-nums",style:{color:le===null?"#888888":le?"#00FF88":"#FF4444",textShadow:le===null?"none":le?"0 0 3px rgba(0, 255, 136, 0.45)":"0 0 3px rgba(255, 68, 68, 0.45)"},children:[le!==null&&s.jsx("span",{className:"mr-1 align-middle text-[10px]",children:le?"▲":"▼"}),X!=="N/A"?`${X}%`:"—"]}),s.jsx("div",{className:"text-[10px] font-bold uppercase tracking-wider",style:{color:"#666",letterSpacing:"0.08em"},children:"24H"})]})]})]},ce)})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx(Pz,{}),s.jsx("div",{className:"mt-4",children:s.jsx(i9,{getBuffer:_.getBuffer})})]}),s.jsxs("div",{className:"flex-shrink-0 w-[200px] flex flex-col gap-2",children:[s.jsx("div",{className:"h-[690px] overflow-hidden flex flex-col gap-2",children:pe.map((ce,oe)=>s.jsx(m9,{item:ce,getBuffer:_.getBuffer},`${ce.symbol}-${oe}`))}),s.jsx("div",{className:"bg-black border h-[100px] mt-auto",style:{background:"linear-gradient(135deg, #000000 0%, #000814 50%, #001428 100%)",border:"0.5px solid rgba(0, 150, 255, 0.2)",boxShadow:"0 0 15px rgba(0, 150, 255, 0.03)"},children:s.jsxs("div",{className:"p-2 h-full flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"font-bold text-[10px]",style:{color:"#FFA500",fontFamily:"monospace"},children:"CURRENT TIME"}),s.jsx(a9,{})]}),s.jsxs("div",{className:"flex items-center justify-between flex-1",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-[10px] mb-1",style:{color:"#FFA500",fontFamily:"monospace"},children:"WEATHER"}),s.jsx("div",{className:"text-white font-mono font-bold text-xs",children:"Toronto"}),s.jsx("div",{className:"text-[10px]",style:{color:"#00FF88"},children:"Clear"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{style:{fontSize:"18px",marginRight:"4px"},children:"☀️"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-mono font-bold text-sm",style:{color:"#FFD700"},children:"22°C"}),s.jsx("div",{className:"text-[8px]",style:{color:"#666"},children:"H:24° L:18°"})]})]})]})]})})]})]})}),s.jsx(Gz,{fps:_.engineState.fps,frameTime:_.engineState.frameTime,visible:C}),s.jsx(Yz,{signal:_.engineState.topSignal,duration:1e4})]}),s.jsx("footer",{className:"bg-black relative",style:{borderTop:"0.5px solid rgba(0, 212, 255, 0.4)",background:"black"},children:s.jsxs("div",{className:"flex items-center h-8",children:[s.jsx("div",{className:"px-4 flex items-center justify-center h-full",style:{borderRight:"0.5px solid rgba(0, 212, 255, 0.4)",background:"black",minWidth:"180px"},children:s.jsx("div",{className:"font-bold text-sm tracking-wider",style:{color:"#FFA500",textShadow:"0 0 8px rgba(255, 165, 0, 0.4)",fontFamily:"monospace"},children:"SAADAT EXCHANGE"})}),s.jsx("div",{className:"flex-1 h-full",children:s.jsx(l9,{fxBases:n,cryptoSymbols:r.cryptoMain.symbols,commoditySymbols:r.commodities.symbols,indexSymbols:r.indices.symbols})})]})})]})})})}function h9({isConnected:t,health:e,error:r}){const n=()=>{if(!t)return"#FF4444";switch(e){case"healthy":return"#00FF88";case"degraded":return"#FFB000";case"unhealthy":return"#FF4444";default:return"#666"}},i=()=>{if(!t)return"DISCONNECTED";switch(e){case"healthy":return"LIVE";case"degraded":return"DEGRADED";case"unhealthy":return"UNHEALTHY";default:return"UNKNOWN"}};return s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 border border-opacity-30",style:{borderColor:n(),background:`rgba(${n()==="#00FF88"?"0, 255, 136":n()==="#FFB000"?"255, 176, 0":"255, 68, 68"}, 0.1)`},children:[s.jsx("div",{className:"w-2 h-2 rounded-full animate-pulse",style:{backgroundColor:n()}}),s.jsx("span",{className:"text-xs font-mono font-bold",style:{color:n()},children:i()}),r&&s.jsx("span",{className:"text-xs text-red-400 ml-2",title:r,children:"⚠"})]})}const ZD=b.createContext(null),hm=()=>{const t=b.useContext(ZD);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},p9=async t=>{const r=new TextEncoder().encode(t+"leaperfx_salt_2024"),n=await crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(n)).map(l=>l.toString(16).padStart(2,"0")).join("")},g9=({children:t})=>{const[e,r]=b.useState(!1);b.useEffect(()=>{let u=!0;const d=typeof window<"u"?window.location.hostname:"";if(/github\.io$|vercel\.app$|netlify\.app$/.test(d)){r(!1);return}return(async()=>{try{const h=await fetch("/api/auth/session",{credentials:"include"});if(!u)return;r(h.ok)}catch{if(!u)return;r(!1)}})(),()=>{u=!1}},[]);const l={isAuthenticated:e,login:async(u,d)=>{try{if(u==="admin"){const f=await p9(d);if(d==="LeaperFx2024!"||f===ADMIN_HASH){const h={user:"admin",issued:Date.now(),expires:Date.now()+864e5},p=btoa(JSON.stringify(h));return localStorage.setItem("auth_token",p),r(!0),!0}}return!1}catch(f){return console.error("Authentication error:",f),!1}},logout:()=>{localStorage.removeItem("auth_token"),localStorage.removeItem("ownerSettings"),r(!1)}};return s.jsx(ZD.Provider,{value:l,children:t})};var Dl={exports:{}},ig={},og={exports:{}},lg,WN;function y9(){if(WN)return lg;WN=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return lg=t,lg}var cg,QN;function x9(){if(QN)return cg;QN=1;var t=y9();function e(){}function r(){}return r.resetWarningCache=e,cg=function(){function n(u,d,f,h,p,g){if(g!==t){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}n.isRequired=n;function i(){return n}var l={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:r,resetWarningCache:e};return l.PropTypes=l,l},cg}var ZN;function JD(){return ZN||(ZN=1,og.exports=x9()()),og.exports}var Uu={exports:{}},JN;function v9(){if(JN)return Uu.exports;JN=1;function t(r){var n,i,l="";if(typeof r=="string"||typeof r=="number")l+=r;else if(typeof r=="object")if(Array.isArray(r)){var u=r.length;for(n=0;n<u;n++)r[n]&&(i=t(r[n]))&&(l&&(l+=" "),l+=i)}else for(i in r)r[i]&&(l&&(l+=" "),l+=i);return l}function e(){for(var r,n,i=0,l="",u=arguments.length;i<u;i++)(r=arguments[i])&&(n=t(r))&&(l&&(l+=" "),l+=n);return l}return Uu.exports=e,Uu.exports.clsx=e,Uu.exports}var wt={},Qa={},eC;function pm(){if(eC)return Qa;eC=1,Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.dontSetMe=i,Qa.findInArray=t,Qa.int=n,Qa.isFunction=e,Qa.isNum=r;function t(l,u){for(let d=0,f=l.length;d<f;d++)if(u.apply(u,[l[d],d,l]))return l[d]}function e(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Function]"}function r(l){return typeof l=="number"&&!isNaN(l)}function n(l){return parseInt(l,10)}function i(l,u,d){if(l[u])return new Error(`Invalid prop ${u} passed to ${d} - do not set this, set it on the child.`)}return Qa}var Za={},tC;function b9(){if(tC)return Za;tC=1,Object.defineProperty(Za,"__esModule",{value:!0}),Za.browserPrefixToKey=r,Za.browserPrefixToStyle=n,Za.default=void 0,Za.getPrefix=e;const t=["Moz","Webkit","O","ms"];function e(){var d,f;let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const u=(f=(d=window.document)==null?void 0:d.documentElement)==null?void 0:f.style;if(!u||l in u)return"";for(let h=0;h<t.length;h++)if(r(l,t[h])in u)return t[h];return""}function r(l,u){return u?`${u}${i(l)}`:l}function n(l,u){return u?`-${u.toLowerCase()}-${l}`:l}function i(l){let u="",d=!0;for(let f=0;f<l.length;f++)d?(u+=l[f].toUpperCase(),d=!1):l[f]==="-"?d=!0:u+=l[f];return u}return Za.default=e(),Za}var rC;function O0(){if(rC)return wt;rC=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.addClassName=R,wt.addEvent=u,wt.addUserSelectStyles=j,wt.createCSSTransform=w,wt.createSVGTransform=S,wt.getTouch=N,wt.getTouchIdentifier=A,wt.getTranslation=C,wt.innerHeight=p,wt.innerWidth=g,wt.matchesSelector=i,wt.matchesSelectorAndParentsTo=l,wt.offsetXYFromParent=x,wt.outerHeight=f,wt.outerWidth=h,wt.removeClassName=k,wt.removeEvent=d,wt.scheduleRemoveUserSelectStyles=E;var t=pm(),e=r(b9());function r(D,I){if(typeof WeakMap=="function")var z=new WeakMap,V=new WeakMap;return(r=function(P,$){if(!$&&P&&P.__esModule)return P;var Q,re,ee={__proto__:null,default:P};if(P===null||typeof P!="object"&&typeof P!="function")return ee;if(Q=$?V:z){if(Q.has(P))return Q.get(P);Q.set(P,ee)}for(const U in P)U!=="default"&&{}.hasOwnProperty.call(P,U)&&((re=(Q=Object.defineProperty)&&Object.getOwnPropertyDescriptor(P,U))&&(re.get||re.set)?Q(ee,U,re):ee[U]=P[U]);return ee})(D,I)}let n="";function i(D,I){return n||(n=(0,t.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(z){return(0,t.isFunction)(D[z])})),(0,t.isFunction)(D[n])?D[n](I):!1}function l(D,I,z){let V=D;do{if(i(V,I))return!0;if(V===z)return!1;V=V.parentNode}while(V);return!1}function u(D,I,z,V){if(!D)return;const P={capture:!0,...V};D.addEventListener?D.addEventListener(I,z,P):D.attachEvent?D.attachEvent("on"+I,z):D["on"+I]=z}function d(D,I,z,V){if(!D)return;const P={capture:!0,...V};D.removeEventListener?D.removeEventListener(I,z,P):D.detachEvent?D.detachEvent("on"+I,z):D["on"+I]=null}function f(D){let I=D.clientHeight;const z=D.ownerDocument.defaultView.getComputedStyle(D);return I+=(0,t.int)(z.borderTopWidth),I+=(0,t.int)(z.borderBottomWidth),I}function h(D){let I=D.clientWidth;const z=D.ownerDocument.defaultView.getComputedStyle(D);return I+=(0,t.int)(z.borderLeftWidth),I+=(0,t.int)(z.borderRightWidth),I}function p(D){let I=D.clientHeight;const z=D.ownerDocument.defaultView.getComputedStyle(D);return I-=(0,t.int)(z.paddingTop),I-=(0,t.int)(z.paddingBottom),I}function g(D){let I=D.clientWidth;const z=D.ownerDocument.defaultView.getComputedStyle(D);return I-=(0,t.int)(z.paddingLeft),I-=(0,t.int)(z.paddingRight),I}function x(D,I,z){const P=I===I.ownerDocument.body?{left:0,top:0}:I.getBoundingClientRect(),$=(D.clientX+I.scrollLeft-P.left)/z,Q=(D.clientY+I.scrollTop-P.top)/z;return{x:$,y:Q}}function w(D,I){const z=C(D,I,"px");return{[(0,e.browserPrefixToKey)("transform",e.default)]:z}}function S(D,I){return C(D,I,"")}function C(D,I,z){let{x:V,y:P}=D,$=`translate(${V}${z},${P}${z})`;if(I){const Q=`${typeof I.x=="string"?I.x:I.x+z}`,re=`${typeof I.y=="string"?I.y:I.y+z}`;$=`translate(${Q}, ${re})`+$}return $}function N(D,I){return D.targetTouches&&(0,t.findInArray)(D.targetTouches,z=>I===z.identifier)||D.changedTouches&&(0,t.findInArray)(D.changedTouches,z=>I===z.identifier)}function A(D){if(D.targetTouches&&D.targetTouches[0])return D.targetTouches[0].identifier;if(D.changedTouches&&D.changedTouches[0])return D.changedTouches[0].identifier}function j(D){if(!D)return;let I=D.getElementById("react-draggable-style-el");I||(I=D.createElement("style"),I.type="text/css",I.id="react-draggable-style-el",I.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,I.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,D.getElementsByTagName("head")[0].appendChild(I)),D.body&&R(D.body,"react-draggable-transparent-selection")}function E(D){window.requestAnimationFrame?window.requestAnimationFrame(()=>{_(D)}):_(D)}function _(D){if(D)try{if(D.body&&k(D.body,"react-draggable-transparent-selection"),D.selection)D.selection.empty();else{const I=(D.defaultView||window).getSelection();I&&I.type!=="Caret"&&I.removeAllRanges()}}catch{}}function R(D,I){D.classList?D.classList.add(I):D.className.match(new RegExp(`(?:^|\\s)${I}(?!\\S)`))||(D.className+=` ${I}`)}function k(D,I){D.classList?D.classList.remove(I):D.className=D.className.replace(new RegExp(`(?:^|\\s)${I}(?!\\S)`,"g"),"")}return wt}var An={},nC;function eT(){if(nC)return An;nC=1,Object.defineProperty(An,"__esModule",{value:!0}),An.canDragX=i,An.canDragY=l,An.createCoreData=d,An.createDraggableData=f,An.getBoundPosition=r,An.getControlPosition=u,An.snapToGrid=n;var t=pm(),e=O0();function r(g,x,w){if(!g.props.bounds)return[x,w];let{bounds:S}=g.props;S=typeof S=="string"?S:h(S);const C=p(g);if(typeof S=="string"){const{ownerDocument:N}=C,A=N.defaultView;let j;if(S==="parent"?j=C.parentNode:j=C.getRootNode().querySelector(S),!(j instanceof A.HTMLElement))throw new Error('Bounds selector "'+S+'" could not find an element.');const E=j,_=A.getComputedStyle(C),R=A.getComputedStyle(E);S={left:-C.offsetLeft+(0,t.int)(R.paddingLeft)+(0,t.int)(_.marginLeft),top:-C.offsetTop+(0,t.int)(R.paddingTop)+(0,t.int)(_.marginTop),right:(0,e.innerWidth)(E)-(0,e.outerWidth)(C)-C.offsetLeft+(0,t.int)(R.paddingRight)-(0,t.int)(_.marginRight),bottom:(0,e.innerHeight)(E)-(0,e.outerHeight)(C)-C.offsetTop+(0,t.int)(R.paddingBottom)-(0,t.int)(_.marginBottom)}}return(0,t.isNum)(S.right)&&(x=Math.min(x,S.right)),(0,t.isNum)(S.bottom)&&(w=Math.min(w,S.bottom)),(0,t.isNum)(S.left)&&(x=Math.max(x,S.left)),(0,t.isNum)(S.top)&&(w=Math.max(w,S.top)),[x,w]}function n(g,x,w){const S=Math.round(x/g[0])*g[0],C=Math.round(w/g[1])*g[1];return[S,C]}function i(g){return g.props.axis==="both"||g.props.axis==="x"}function l(g){return g.props.axis==="both"||g.props.axis==="y"}function u(g,x,w){const S=typeof x=="number"?(0,e.getTouch)(g,x):null;if(typeof x=="number"&&!S)return null;const C=p(w),N=w.props.offsetParent||C.offsetParent||C.ownerDocument.body;return(0,e.offsetXYFromParent)(S||g,N,w.props.scale)}function d(g,x,w){const S=!(0,t.isNum)(g.lastX),C=p(g);return S?{node:C,deltaX:0,deltaY:0,lastX:x,lastY:w,x,y:w}:{node:C,deltaX:x-g.lastX,deltaY:w-g.lastY,lastX:g.lastX,lastY:g.lastY,x,y:w}}function f(g,x){const w=g.props.scale;return{node:x.node,x:g.state.x+x.deltaX/w,y:g.state.y+x.deltaY/w,deltaX:x.deltaX/w,deltaY:x.deltaY/w,lastX:g.state.x,lastY:g.state.y}}function h(g){return{left:g.left,top:g.top,right:g.right,bottom:g.bottom}}function p(g){const x=g.findDOMNode();if(!x)throw new Error("<DraggableCore>: Unmounted during event!");return x}return An}var Tl={},$u={},aC;function tT(){if(aC)return $u;aC=1,Object.defineProperty($u,"__esModule",{value:!0}),$u.default=t;function t(){}return $u}var sC;function w9(){if(sC)return Tl;sC=1,Object.defineProperty(Tl,"__esModule",{value:!0}),Tl.default=void 0;var t=f(ls()),e=d(JD()),r=d(ey()),n=O0(),i=eT(),l=pm(),u=d(tT());function d(C){return C&&C.__esModule?C:{default:C}}function f(C,N){if(typeof WeakMap=="function")var A=new WeakMap,j=new WeakMap;return(f=function(E,_){if(!_&&E&&E.__esModule)return E;var R,k,D={__proto__:null,default:E};if(E===null||typeof E!="object"&&typeof E!="function")return D;if(R=_?j:A){if(R.has(E))return R.get(E);R.set(E,D)}for(const I in E)I!=="default"&&{}.hasOwnProperty.call(E,I)&&((k=(R=Object.defineProperty)&&Object.getOwnPropertyDescriptor(E,I))&&(k.get||k.set)?R(D,I,k):D[I]=E[I]);return D})(C,N)}function h(C,N,A){return(N=p(N))in C?Object.defineProperty(C,N,{value:A,enumerable:!0,configurable:!0,writable:!0}):C[N]=A,C}function p(C){var N=g(C,"string");return typeof N=="symbol"?N:N+""}function g(C,N){if(typeof C!="object"||!C)return C;var A=C[Symbol.toPrimitive];if(A!==void 0){var j=A.call(C,N);if(typeof j!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(N==="string"?String:Number)(C)}const x={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let w=x.mouse,S=class extends t.Component{constructor(){super(...arguments),h(this,"dragging",!1),h(this,"lastX",NaN),h(this,"lastY",NaN),h(this,"touchIdentifier",null),h(this,"mounted",!1),h(this,"handleDragStart",N=>{if(this.props.onMouseDown(N),!this.props.allowAnyClick&&typeof N.button=="number"&&N.button!==0)return!1;const A=this.findDOMNode();if(!A||!A.ownerDocument||!A.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:j}=A;if(this.props.disabled||!(N.target instanceof j.defaultView.Node)||this.props.handle&&!(0,n.matchesSelectorAndParentsTo)(N.target,this.props.handle,A)||this.props.cancel&&(0,n.matchesSelectorAndParentsTo)(N.target,this.props.cancel,A))return;N.type==="touchstart"&&!this.props.allowMobileScroll&&N.preventDefault();const E=(0,n.getTouchIdentifier)(N);this.touchIdentifier=E;const _=(0,i.getControlPosition)(N,E,this);if(_==null)return;const{x:R,y:k}=_,D=(0,i.createCoreData)(this,R,k);(0,u.default)("DraggableCore: handleDragStart: %j",D),(0,u.default)("calling",this.props.onStart),!(this.props.onStart(N,D)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,n.addUserSelectStyles)(j),this.dragging=!0,this.lastX=R,this.lastY=k,(0,n.addEvent)(j,w.move,this.handleDrag),(0,n.addEvent)(j,w.stop,this.handleDragStop))}),h(this,"handleDrag",N=>{const A=(0,i.getControlPosition)(N,this.touchIdentifier,this);if(A==null)return;let{x:j,y:E}=A;if(Array.isArray(this.props.grid)){let k=j-this.lastX,D=E-this.lastY;if([k,D]=(0,i.snapToGrid)(this.props.grid,k,D),!k&&!D)return;j=this.lastX+k,E=this.lastY+D}const _=(0,i.createCoreData)(this,j,E);if((0,u.default)("DraggableCore: handleDrag: %j",_),this.props.onDrag(N,_)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const D=document.createEvent("MouseEvents");D.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(D)}return}this.lastX=j,this.lastY=E}),h(this,"handleDragStop",N=>{if(!this.dragging)return;const A=(0,i.getControlPosition)(N,this.touchIdentifier,this);if(A==null)return;let{x:j,y:E}=A;if(Array.isArray(this.props.grid)){let D=j-this.lastX||0,I=E-this.lastY||0;[D,I]=(0,i.snapToGrid)(this.props.grid,D,I),j=this.lastX+D,E=this.lastY+I}const _=(0,i.createCoreData)(this,j,E);if(this.props.onStop(N,_)===!1||this.mounted===!1)return!1;const k=this.findDOMNode();k&&this.props.enableUserSelectHack&&(0,n.scheduleRemoveUserSelectStyles)(k.ownerDocument),(0,u.default)("DraggableCore: handleDragStop: %j",_),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,k&&((0,u.default)("DraggableCore: Removing handlers"),(0,n.removeEvent)(k.ownerDocument,w.move,this.handleDrag),(0,n.removeEvent)(k.ownerDocument,w.stop,this.handleDragStop))}),h(this,"onMouseDown",N=>(w=x.mouse,this.handleDragStart(N))),h(this,"onMouseUp",N=>(w=x.mouse,this.handleDragStop(N))),h(this,"onTouchStart",N=>(w=x.touch,this.handleDragStart(N))),h(this,"onTouchEnd",N=>(w=x.touch,this.handleDragStop(N)))}componentDidMount(){this.mounted=!0;const N=this.findDOMNode();N&&(0,n.addEvent)(N,x.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const N=this.findDOMNode();if(N){const{ownerDocument:A}=N;(0,n.removeEvent)(A,x.mouse.move,this.handleDrag),(0,n.removeEvent)(A,x.touch.move,this.handleDrag),(0,n.removeEvent)(A,x.mouse.stop,this.handleDragStop),(0,n.removeEvent)(A,x.touch.stop,this.handleDragStop),(0,n.removeEvent)(N,x.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,n.scheduleRemoveUserSelectStyles)(A)}}findDOMNode(){var N,A,j;return(N=this.props)!=null&&N.nodeRef?(j=(A=this.props)==null?void 0:A.nodeRef)==null?void 0:j.current:r.default.findDOMNode(this)}render(){return t.cloneElement(t.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return Tl.default=S,h(S,"displayName","DraggableCore"),h(S,"propTypes",{allowAnyClick:e.default.bool,allowMobileScroll:e.default.bool,children:e.default.node.isRequired,disabled:e.default.bool,enableUserSelectHack:e.default.bool,offsetParent:function(C,N){if(C[N]&&C[N].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:e.default.arrayOf(e.default.number),handle:e.default.string,cancel:e.default.string,nodeRef:e.default.object,onStart:e.default.func,onDrag:e.default.func,onStop:e.default.func,onMouseDown:e.default.func,scale:e.default.number,className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),h(S,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),Tl}var iC;function S9(){return iC||(iC=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return f.default}}),t.default=void 0;var e=g(ls()),r=p(JD()),n=p(ey()),i=v9(),l=O0(),u=eT(),d=pm(),f=p(w9()),h=p(tT());function p(A){return A&&A.__esModule?A:{default:A}}function g(A,j){if(typeof WeakMap=="function")var E=new WeakMap,_=new WeakMap;return(g=function(R,k){if(!k&&R&&R.__esModule)return R;var D,I,z={__proto__:null,default:R};if(R===null||typeof R!="object"&&typeof R!="function")return z;if(D=k?_:E){if(D.has(R))return D.get(R);D.set(R,z)}for(const V in R)V!=="default"&&{}.hasOwnProperty.call(R,V)&&((I=(D=Object.defineProperty)&&Object.getOwnPropertyDescriptor(R,V))&&(I.get||I.set)?D(z,V,I):z[V]=R[V]);return z})(A,j)}function x(){return x=Object.assign?Object.assign.bind():function(A){for(var j=1;j<arguments.length;j++){var E=arguments[j];for(var _ in E)({}).hasOwnProperty.call(E,_)&&(A[_]=E[_])}return A},x.apply(null,arguments)}function w(A,j,E){return(j=S(j))in A?Object.defineProperty(A,j,{value:E,enumerable:!0,configurable:!0,writable:!0}):A[j]=E,A}function S(A){var j=C(A,"string");return typeof j=="symbol"?j:j+""}function C(A,j){if(typeof A!="object"||!A)return A;var E=A[Symbol.toPrimitive];if(E!==void 0){var _=E.call(A,j);if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(j==="string"?String:Number)(A)}class N extends e.Component{static getDerivedStateFromProps(j,E){let{position:_}=j,{prevPropsPosition:R}=E;return _&&(!R||_.x!==R.x||_.y!==R.y)?((0,h.default)("Draggable: getDerivedStateFromProps %j",{position:_,prevPropsPosition:R}),{x:_.x,y:_.y,prevPropsPosition:{..._}}):null}constructor(j){super(j),w(this,"onDragStart",(E,_)=>{if((0,h.default)("Draggable: onDragStart: %j",_),this.props.onStart(E,(0,u.createDraggableData)(this,_))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),w(this,"onDrag",(E,_)=>{if(!this.state.dragging)return!1;(0,h.default)("Draggable: onDrag: %j",_);const R=(0,u.createDraggableData)(this,_),k={x:R.x,y:R.y,slackX:0,slackY:0};if(this.props.bounds){const{x:I,y:z}=k;k.x+=this.state.slackX,k.y+=this.state.slackY;const[V,P]=(0,u.getBoundPosition)(this,k.x,k.y);k.x=V,k.y=P,k.slackX=this.state.slackX+(I-k.x),k.slackY=this.state.slackY+(z-k.y),R.x=k.x,R.y=k.y,R.deltaX=k.x-this.state.x,R.deltaY=k.y-this.state.y}if(this.props.onDrag(E,R)===!1)return!1;this.setState(k)}),w(this,"onDragStop",(E,_)=>{if(!this.state.dragging||this.props.onStop(E,(0,u.createDraggableData)(this,_))===!1)return!1;(0,h.default)("Draggable: onDragStop: %j",_);const k={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:I,y:z}=this.props.position;k.x=I,k.y=z}this.setState(k)}),this.state={dragging:!1,dragged:!1,x:j.position?j.position.x:j.defaultPosition.x,y:j.position?j.position.y:j.defaultPosition.y,prevPropsPosition:{...j.position},slackX:0,slackY:0,isElementSVG:!1},j.position&&!(j.onDrag||j.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var j,E;return((E=(j=this.props)==null?void 0:j.nodeRef)==null?void 0:E.current)??n.default.findDOMNode(this)}render(){const{axis:j,bounds:E,children:_,defaultPosition:R,defaultClassName:k,defaultClassNameDragging:D,defaultClassNameDragged:I,position:z,positionOffset:V,scale:P,...$}=this.props;let Q={},re=null;const U=!!!z||this.state.dragging,J=z||R,pe={x:(0,u.canDragX)(this)&&U?this.state.x:J.x,y:(0,u.canDragY)(this)&&U?this.state.y:J.y};this.state.isElementSVG?re=(0,l.createSVGTransform)(pe,V):Q=(0,l.createCSSTransform)(pe,V);const ce=(0,i.clsx)(_.props.className||"",k,{[D]:this.state.dragging,[I]:this.state.dragged});return e.createElement(f.default,x({},$,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(_),{className:ce,style:{..._.props.style,...Q},transform:re}))}}t.default=N,w(N,"displayName","Draggable"),w(N,"propTypes",{...f.default.propTypes,axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:d.dontSetMe,style:d.dontSetMe,transform:d.dontSetMe}),w(N,"defaultProps",{...f.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(ig)),ig}var oC;function N9(){if(oC)return Dl.exports;oC=1;const{default:t,DraggableCore:e}=S9();return Dl.exports=t,Dl.exports.default=t,Dl.exports.DraggableCore=e,Dl.exports}var C9=N9();const j9=os(C9),A9=({isOpen:t,onClose:e,children:r,title:n,size:i="md",initialPosition:l={x:0,y:0},onMinimize:u,isMinimized:d=!1,onMaximize:f,isMaximized:h=!1,zIndex:p=50})=>{const[g,x]=b.useState(l),[w,S]=b.useState(!1),C=b.useRef(null);if(b.useEffect(()=>{t&&x(l)},[t,l]),b.useEffect(()=>(t&&!d?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t,d]),!t||d)return null;const N={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl"},A=()=>{S(!0)},j=(E,_)=>{S(!1),x({x:_.x,y:_.y})};return s.jsx("div",{className:"fixed inset-0 overflow-y-auto pointer-events-none",style:{zIndex:p},children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0 pointer-events-none",children:[!w&&s.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity pointer-events-auto",onClick:e,"aria-hidden":"true"}),s.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),s.jsx(j9,{nodeRef:C,handle:".draggable-handle",position:g,onStart:A,onStop:j,bounds:"parent",children:s.jsxs("div",{ref:C,className:`inline-block align-bottom bg-white rounded-lg text-left shadow-xl transform transition-all sm:my-8 sm:align-middle sm:w-full ${N[i]} pointer-events-auto ${h?"fixed inset-4 max-w-none":""}`,role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:[s.jsxs("div",{className:"draggable-handle flex items-center justify-between p-4 border-b border-gray-200 cursor-move",children:[s.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline",children:n}),s.jsxs("div",{className:"flex items-center space-x-2",children:[u&&s.jsx("button",{onClick:u,className:"text-gray-400 hover:text-gray-500 focus:outline-none focus:text-gray-500 transition ease-in-out duration-150","aria-label":"Minimize",children:s.jsx(J5,{className:"h-5 w-5"})}),f&&s.jsx("button",{onClick:f,className:"text-gray-400 hover:text-gray-500 focus:outline-none focus:text-gray-500 transition ease-in-out duration-150","aria-label":h?"Restore":"Maximize",children:s.jsx(K5,{className:"h-5 w-5"})}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500 focus:outline-none focus:text-gray-500 transition ease-in-out duration-150","aria-label":"Close",children:s.jsx(Ir,{className:"h-5 w-5"})})]})]}),s.jsx("div",{className:"p-4 overflow-y-auto max-h-[calc(100vh-10rem)]",children:r})]})})]})})},D9=({title:t,onRestore:e,onClose:r,index:n})=>s.jsxs("div",{className:"fixed bottom-4 bg-white rounded-lg shadow-lg border border-gray-200 flex items-center justify-between p-2 w-48 cursor-pointer",style:{left:`${n*200+16}px`},onClick:e,children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 truncate",children:t}),s.jsx("button",{onClick:i=>{i.stopPropagation(),r()},className:"text-gray-400 hover:text-gray-500 focus:outline-none focus:text-gray-500 transition ease-in-out duration-150","aria-label":"Close",children:s.jsx(Ir,{className:"h-4 w-4"})})]}),T9=()=>{const[t,e]=b.useState({}),[r,n]=b.useState(50);return{modals:t,openModal:(g,x,w={x:0,y:0})=>{const S=r+1;n(S),e(C=>({...C,[g]:{id:g,isOpen:!0,isMinimized:!1,isMaximized:!1,title:x,position:w,zIndex:S}}))},closeModal:g=>{e(x=>{const w={...x};return delete w[g],w})},minimizeModal:g=>{e(x=>({...x,[g]:{...x[g],isMinimized:!0}}))},restoreModal:g=>{const x=r+1;n(x),e(w=>({...w,[g]:{...w[g],isMinimized:!1,zIndex:x}}))},maximizeModal:g=>{e(x=>({...x,[g]:{...x[g],isMaximized:!x[g].isMaximized}}))},updatePosition:(g,x)=>{e(w=>({...w,[g]:{...w[g],position:x}}))},bringToFront:g=>{const x=r+1;n(x),e(w=>({...w,[g]:{...w[g],zIndex:x}}))}}},E9=({modals:t,onRestore:e,onClose:r})=>{const n=Object.values(t).filter(i=>i.isMinimized);return n.length===0?null:s.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50",children:n.map((i,l)=>s.jsx(D9,{title:i.title,onRestore:()=>e(i.id),onClose:()=>r(i.id),index:l},i.id))})},yt=({isOpen:t,onClose:e,children:r,title:n,size:i="md"})=>{if(b.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),!t)return null;const l={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl"};return s.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},children:[s.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 transition-opacity",onClick:e,"aria-hidden":"true"}),s.jsx("div",{className:`relative bg-white rounded-lg shadow-xl transform transition-all w-full ${l[i]} max-h-[90vh] overflow-y-auto`,role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",onClick:u=>u.stopPropagation(),children:s.jsxs("div",{className:"px-6 py-5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline",children:n}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500 focus:outline-none focus:text-gray-500 transition ease-in-out duration-150","aria-label":"Close",children:s.jsx(Ir,{className:"h-5 w-5"})})]}),r]})})]})},Ao=({type:t,message:e,isVisible:r,onClose:n})=>{if(b.useEffect(()=>{if(r){const u=setTimeout(()=>{n()},4e3);return()=>clearTimeout(u)}},[r,n]),!r)return null;const l={success:{icon:s.jsx(ft,{className:"h-5 w-5 text-green-400"}),bgColor:"bg-green-50",borderColor:"border-green-400",textColor:"text-green-800"},error:{icon:s.jsx(us,{className:"h-5 w-5 text-red-400"}),bgColor:"bg-red-50",borderColor:"border-red-400",textColor:"text-red-800"},warning:{icon:s.jsx(rr,{className:"h-5 w-5 text-yellow-400"}),bgColor:"bg-yellow-50",borderColor:"border-yellow-400",textColor:"text-yellow-800"},info:{icon:s.jsx(Id,{className:"h-5 w-5 text-blue-400"}),bgColor:"bg-blue-50",borderColor:"border-blue-400",textColor:"text-blue-800"}}[t];return s.jsx("div",{className:"fixed top-4 right-4 z-50 w-96 max-w-sm",children:s.jsx("div",{className:`${l.bgColor} border-l-4 ${l.borderColor} p-4 rounded shadow-lg transition-all duration-300 transform translate-x-0`,children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:l.icon}),s.jsx("div",{className:"ml-3 flex-1",children:s.jsx("p",{className:`text-sm font-medium ${l.textColor}`,children:e})}),s.jsx("div",{className:"flex-shrink-0 ml-4",children:s.jsx("button",{onClick:n,className:`inline-flex ${l.textColor} hover:opacity-75 focus:outline-none`,"aria-label":"Close notification",children:s.jsx(Ir,{className:"h-4 w-4"})})})]})})})},rT=({isOpen:t,onClose:e,onConfirm:r,title:n,message:i,confirmText:l="Confirm",cancelText:u="Cancel",type:d="info"})=>{const h={danger:{buttonClass:"bg-red-600 hover:bg-red-700 focus:ring-red-500",iconClass:"text-red-600",icon:s.jsx(rr,{className:"h-6 w-6"})},warning:{buttonClass:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500",iconClass:"text-yellow-600",icon:s.jsx(rr,{className:"h-6 w-6"})},info:{buttonClass:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500",iconClass:"text-blue-600",icon:s.jsx(Id,{className:"h-6 w-6"})}}[d];return s.jsxs(yt,{isOpen:t,onClose:e,title:n,size:"sm",children:[s.jsxs("div",{className:"sm:flex sm:items-start",children:[s.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-gray-100 sm:mx-0 sm:h-10 sm:w-10",children:s.jsx("div",{className:h.iconClass,children:h.icon})}),s.jsx("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:s.jsx("div",{className:"mt-2",children:s.jsx("p",{className:"text-sm text-gray-500",children:i})})})]}),s.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[s.jsx("button",{type:"button",className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm ${h.buttonClass}`,onClick:r,children:l}),s.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",onClick:e,children:u})]})]})};var Ls={};const lC=2e3;class _9{constructor(){te(this,"terminal",null);te(this,"isInitialized",!1);te(this,"connectionStatus",{status:"not_connected"});te(this,"configuration",null);te(this,"discoveredDevices",[]);te(this,"realReaders",[]);te(this,"readerMap",new Map);te(this,"connectionAttempts",0);te(this,"maxConnectionAttempts",3);te(this,"forceSimulator",!1);te(this,"simOptions",{successRate:.95})}async initialize(e){try{if(console.log("🔄 Initializing Stripe Terminal SDK..."),this.configuration=e,this.forceSimulator=!!e.forceSimulator,e.simulation&&(this.simOptions={...this.simOptions,...e.simulation}),typeof window<"u"){if(this.forceSimulator)return await this.simulateSDKLoad(),this.terminal=this.createSimulatedTerminal(),this.setupEventListeners(),this.isInitialized=!0,console.log("✅ Stripe Terminal SDK (simulated) initialized (forceSimulator)"),!0;try{await this.loadStripeTerminalScript();const r=window.StripeTerminal;if(r&&typeof r.create=="function")return this.terminal=r.create({onFetchConnectionToken:async()=>{const n=await this.fetchConnectionToken();if(!n)throw new Error("No connection token received");return n},onUnexpectedReaderDisconnect:()=>{console.warn("⚠️ Reader unexpectedly disconnected"),this.connectionStatus={status:"not_connected",connectionError:"Reader disconnected"},this.broadcastPaymentEvent("terminal_disconnected",{success:!1})}}),this.setupEventListeners(),this.isInitialized=!0,console.log("✅ Stripe Terminal SDK (real) initialized successfully"),!0}catch(r){console.warn("Stripe Terminal JS SDK not available or failed to initialize. Falling back to simulator.",r)}return await this.simulateSDKLoad(),this.terminal=this.createSimulatedTerminal(),this.setupEventListeners(),this.isInitialized=!0,console.log("✅ Stripe Terminal SDK (simulated) initialized successfully"),!0}throw new Error("Window object not available")}catch(r){return console.error("❌ Failed to initialize Stripe Terminal SDK:",r),this.isInitialized=!1,!1}}async discoverDevices(){var e,r;if(!this.isInitialized)throw new Error("Terminal SDK not initialized");try{if(console.log("🔍 Discovering terminal devices..."),this.forceSimulator)return await this.delay(500),this.discoveredDevices=[{id:"tmr_sim_001",label:"Simulated Device - Testing",deviceType:"simulated_wisepos_e",status:"online",serialNumber:"SIM-TEST-001",softwareVersion:"1.0.0",lastSeen:new Date().toISOString()}],this.discoveredDevices;if(this.terminal&&typeof this.terminal.discoverReaders=="function"){const n=(((e=this.configuration)==null?void 0:e.environment)||"test")==="test",i=n?{discoveryMethod:"simulated"}:{discoveryMethod:"internet"};!n&&((r=this.configuration)!=null&&r.locationId)&&(i.location=this.configuration.locationId);const{readers:l}=await this.terminal.discoverReaders(i);return this.realReaders=l||[],this.readerMap.clear(),this.discoveredDevices=(l||[]).map((u,d)=>{const f=u.id||u.serial_number||u.serialNumber||`reader_${d}`;return this.readerMap.set(f,u),{id:f,label:u.label||u.device_type||"Stripe Reader",deviceType:u.device_type||"simulated_wisepos_e",status:u.status||"online",batteryLevel:u.battery_level||u.batteryLevel,serialNumber:u.serial_number||u.serialNumber||f,softwareVersion:u.firmware_version||u.softwareVersion||"unknown",ipAddress:u.ip_address||u.ipAddress,lastSeen:new Date().toISOString()}}),console.log(`✅ Discovered ${this.discoveredDevices.length} terminal devices`),this.discoveredDevices}return await this.delay(1e3),this.discoveredDevices=[{id:"tmr_sim_001",label:"Simulated Device - Testing",deviceType:"simulated_wisepos_e",status:"online",serialNumber:"SIM-TEST-001",softwareVersion:"1.0.0",lastSeen:new Date().toISOString()}],console.log(`✅ Discovered ${this.discoveredDevices.length} simulated device(s)`),this.discoveredDevices}catch(n){throw console.error("❌ Failed to discover devices:",n),new Error(`Device discovery failed: ${n}`)}}async connectToDevice(e){if(!this.isInitialized)throw new Error("Terminal SDK not initialized");const r=this.discoveredDevices.find(i=>i.id===e);if(!r)throw new Error(`Device not found: ${e}`);const n=this.readerMap.get(e);if(this.terminal&&n&&typeof this.terminal.connectReader=="function")try{this.connectionStatus={status:"connecting",device:r};const{reader:i,error:l}=await this.terminal.connectReader(n);return l?(console.error("❌ Failed to connect to reader:",l),this.connectionStatus={status:"not_connected",connectionError:l.message},!1):(this.connectionStatus={status:"connected",device:r,lastConnected:new Date().toISOString()},this.broadcastPaymentEvent("terminal_connected",{deviceId:e,label:r.label}),!0)}catch(i){return console.error("❌ Reader connection error:",i),this.connectionStatus={status:"not_connected",connectionError:String((i==null?void 0:i.message)||i)},!1}return this.connectionAttempts=0,this.attemptConnection(r)}async attemptConnection(e){this.connectionAttempts++,this.connectionStatus={status:"connecting",device:e};try{if(console.log(`🔄 Connecting to device ${e.label} (attempt ${this.connectionAttempts}/${this.maxConnectionAttempts})`),await this.delay(3e3),Math.random()>.1)return this.connectionStatus={status:"connected",device:e,lastConnected:new Date().toISOString()},console.log(`✅ Successfully connected to ${e.label}`),!0;throw new Error("Connection failed")}catch(r){return console.warn(`❌ Connection attempt ${this.connectionAttempts} failed:`,r),this.connectionAttempts<this.maxConnectionAttempts?(console.log(`⏳ Retrying connection in ${lC}ms...`),await this.delay(lC),this.attemptConnection(e)):(this.connectionStatus={status:"not_connected",connectionError:`Failed to connect after ${this.maxConnectionAttempts} attempts`},console.error(`❌ Failed to connect to ${e.label} after ${this.maxConnectionAttempts} attempts`),!1)}}async disconnect(){try{this.connectionStatus.status==="connected"&&(console.log("🔄 Disconnecting from terminal device..."),await this.delay(1e3),this.connectionStatus={status:"not_connected"},console.log("✅ Successfully disconnected from terminal device"))}catch(e){console.error("❌ Error during disconnection:",e),this.connectionStatus={status:"not_connected"}}}setForceSimulator(e){this.forceSimulator=e}setSimulationOptions(e){this.simOptions={...this.simOptions,...e}}async processPayment(e){var r,n,i;if(!this.isInitialized)throw new Error("Terminal SDK not initialized");if(this.connectionStatus.status!=="connected")throw new Error("No terminal device connected");try{if(console.log(`💳 Processing payment for ${e.currency.toUpperCase()} ${e.amount/100}`),this.terminal&&typeof this.terminal.collectPaymentMethod=="function"){const g=await this.createPaymentIntentOnServer(e);if(!(g!=null&&g.client_secret))throw new Error("Failed to create PaymentIntent");const x=await this.terminal.collectPaymentMethod(g.client_secret);if(x!=null&&x.error){console.error("❌ collectPaymentMethod error:",x.error);const N={success:!1,error:x.error.message,errorType:"processing_error"};return this.broadcastPaymentEvent("payment_failed",N),N}const w=await this.terminal.processPayment(x.paymentIntent);if(w!=null&&w.error){console.error("❌ processPayment error:",w.error);const N={success:!1,error:w.error.message,errorType:"processing_error"};return this.broadcastPaymentEvent("payment_failed",N),N}const S=w.paymentIntent;(S==null?void 0:S.status)==="requires_capture"&&await this.capturePaymentIntentOnServer(S.id);const C={success:!0,paymentIntent:{id:S.id,amount:S.amount,currency:S.currency,status:S.status||"succeeded",description:e.description,metadata:e.metadata,receiptEmail:e.receiptEmail},paymentMethod:(i=(n=(r=S.charges)==null?void 0:r.data)==null?void 0:n[0])!=null&&i.payment_method_details?{id:S.charges.data[0].payment_method||"pm_unknown",type:S.charges.data[0].payment_method_details.type||"card",cardDetails:S.charges.data[0].payment_method_details.card_present?{last4:S.charges.data[0].payment_method_details.card_present.last4,brand:S.charges.data[0].payment_method_details.card_present.brand,expMonth:S.charges.data[0].payment_method_details.card_present.exp_month,expYear:S.charges.data[0].payment_method_details.card_present.exp_year}:void 0}:void 0};return console.log(`✅ Payment successful: ${S.id}`),this.broadcastPaymentEvent("payment_success",C),C}const l={id:`pi_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,amount:e.amount,currency:e.currency,status:"requires_payment_method",description:e.description,metadata:e.metadata,receiptEmail:e.receiptEmail};console.log("🔄 Collecting payment method (simulated)..."),await this.delay(2e3),l.status="processing",console.log("🔄 Processing payment (simulated)..."),await this.delay(1500);let u=this.simOptions.nextResult;u&&(this.simOptions.nextResult=void 0);const d=typeof this.simOptions.successRate=="number"?this.simOptions.successRate:.95,f=()=>Math.random()<d,h=(g,x)=>({success:!1,errorType:g,error:x||(g==="card_declined"?"Your card was declined":g==="network_error"?"Network error occurred":g==="timeout"?"Payment timed out":"Payment was canceled")});if(u==="success"||!u&&f()){l.status="succeeded";const g={success:!0,paymentIntent:l,paymentMethod:{id:`pm_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"card",cardDetails:{last4:"4242",brand:"visa",expMonth:12,expYear:2025}}};return console.log(`✅ Payment successful (sim): ${l.id}`),this.broadcastPaymentEvent("payment_success",g),g}if(u&&u!=="success"){const g=h(u);return console.log(`❌ Payment failed (sim - ${u})`),this.broadcastPaymentEvent("payment_failed",g),g}const p=h("card_declined");return console.log("❌ Payment declined (sim)"),this.broadcastPaymentEvent("payment_failed",p),p}catch(l){console.error("❌ Payment processing error:",l);const u={success:!1,error:`Payment processing failed: ${l}`,errorType:"processing_error"};return this.broadcastPaymentEvent("payment_failed",u),u}}async cancelPayment(){try{if(console.log("🔄 Canceling payment operation..."),this.terminal&&typeof this.terminal.cancelCollectPaymentMethod=="function"){const e=await this.terminal.cancelCollectPaymentMethod();e!=null&&e.error&&console.warn("⚠️ cancelCollectPaymentMethod error:",e.error)}else await this.delay(500);return console.log("✅ Payment operation canceled"),this.broadcastPaymentEvent("payment_canceled",{success:!1,errorType:"canceled"}),!0}catch(e){return console.error("❌ Failed to cancel payment:",e),!1}}getConnectionStatus(){return{...this.connectionStatus}}getDiscoveredDevices(){return[...this.discoveredDevices]}async updateDeviceStatus(e){const r=this.discoveredDevices.find(n=>n.id===e);if(!r)return null;try{return console.log(`🔄 Updating status for device ${r.label}`),await this.delay(1e3),r.lastSeen=new Date().toISOString(),r.status="online",r.batteryLevel!==void 0&&(r.batteryLevel=Math.max(0,r.batteryLevel-Math.random()*2)),console.log(`✅ Device status updated: ${r.label}`),r}catch(n){return console.error("❌ Failed to update device status:",n),r.status="offline",r}}async rebootDevice(e){const r=this.discoveredDevices.find(n=>n.id===e);if(!r)throw new Error(`Device not found: ${e}`);try{return console.log(`🔄 Rebooting device ${r.label}...`),r.status="needs_reboot",await this.delay(5e3),r.status="online",r.lastSeen=new Date().toISOString(),console.log(`✅ Device ${r.label} rebooted successfully`),!0}catch(n){return console.error("❌ Failed to reboot device:",n),r.status="offline",!1}}async loadStripeTerminalScript(){if(typeof window>"u"||window.StripeTerminal)return;const e="https://js.stripe.com/terminal/v1/";return new Promise((r,n)=>{const i=document.querySelector(`script[src="${e}"]`);if(i){i.addEventListener("load",()=>r()),i.addEventListener("error",()=>n(new Error("Stripe Terminal script failed to load")));return}const l=document.createElement("script");l.src=e,l.async=!0,l.onload=()=>r(),l.onerror=()=>n(new Error("Stripe Terminal script failed to load")),document.head.appendChild(l)})}getApiBaseUrl(){var e,r;try{const n=typeof window<"u"?window:{},i=((e=n.__ENV__)==null?void 0:e.VITE_API_BASE_URL)||((r=n.__ENV__)==null?void 0:r.VITE_BACKEND_URL)||n.__API_BASE_URL__,l=typeof process<"u"?(Ls==null?void 0:Ls.API_BASE_URL)||(Ls==null?void 0:Ls.BACKEND_URL):void 0;return(i||l||"").toString()}catch{return""}}getEnv(e){var r;try{const n=typeof window<"u"?window:{},i=typeof process<"u"?Ls:void 0;return((r=n.__ENV__)==null?void 0:r[e])||(i==null?void 0:i[e])}catch{return}}async fetchConnectionToken(){const e=[],r=this.getApiBaseUrl();e.push("/api/terminal/connection_token"),r&&(e.push(`${r.replace(/\/$/,"")}/payments/terminal/connection_token`),e.push(`${r.replace(/\/$/,"")}/terminal/connection_token`));for(const n of e)try{const i=await fetch(n,{method:"POST",credentials:"include"});if(!i.ok)continue;const l=await i.json(),u=(l==null?void 0:l.secret)||(l==null?void 0:l.client_secret)||(l==null?void 0:l.token)||(l==null?void 0:l.connection_token);if(typeof u=="string"&&u.length>0)return u}catch{}throw new Error("Unable to fetch Stripe Terminal connection token")}async createPaymentIntentOnServer(e){const r={amount:e.amount,currency:e.currency,payment_method_types:["card_present"],capture_method:e.captureMethod||"automatic",description:e.description,metadata:e.metadata,receipt_email:e.receiptEmail,on_behalf_of:e.onBehalfOf},n=[],i=this.getApiBaseUrl();n.push("/api/terminal/payment_intents"),i&&(n.push(`${i.replace(/\/$/,"")}/payments/terminal/payment_intents`),n.push(`${i.replace(/\/$/,"")}/terminal/payment_intents`));for(const l of n)try{const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)});if(!u.ok)continue;const d=await u.json();return(d==null?void 0:d.data)||d}catch{}throw new Error("Unable to create PaymentIntent on server")}async capturePaymentIntentOnServer(e){const r=[],n=this.getApiBaseUrl();r.push(`/api/terminal/payment_intents/${e}/capture`),n&&(r.push(`${n.replace(/\/$/,"")}/payments/terminal/payment_intents/${e}/capture`),r.push(`${n.replace(/\/$/,"")}/terminal/payment_intents/${e}/capture`));for(const i of r)try{const l=await fetch(i,{method:"POST",credentials:"include"});if(!l.ok)continue;const u=await l.json();return!!((u==null?void 0:u.success)??!0)}catch{}return!1}async simulateSDKLoad(){return new Promise(e=>{setTimeout(e,1e3)})}createSimulatedTerminal(){return{initialized:!0,version:"1.0.0"}}setupEventListeners(){console.log("📡 Setting up terminal event listeners")}delay(e){return new Promise(r=>setTimeout(r,e))}broadcastPaymentEvent(e,r){var n;try{typeof window<"u"&&window.dispatchEvent(new CustomEvent(`terminal_${e}`,{detail:{timestamp:new Date().toISOString(),deviceId:(n=this.connectionStatus.device)==null?void 0:n.id,data:r}})),localStorage.setItem("lastTerminalEvent",JSON.stringify({type:e,timestamp:new Date().toISOString(),data:r}))}catch(i){console.warn("Failed to broadcast payment event:",i)}}}const En=new _9,R9=3e4;class k9{constructor(){te(this,"rateCache",new Map);te(this,"lastRateUpdate",0);te(this,"isInitialized",!1);te(this,"supportedCryptos",{BTC:{name:"Bitcoin",symbol:"BTC",decimals:8,minAmount:10,maxAmount:1e6,networkFeeEstimate:15,blockExplorerUrl:"https://blockstream.info/tx/",addressRegex:[/^[13][a-km-zA-HJ-NP-Z1-9]{25,34}$/,/^3[a-km-zA-HJ-NP-Z1-9]{25,34}$/,/^bc1[a-z0-9]{39,59}$/]},ETH:{name:"Ethereum",symbol:"ETH",decimals:18,minAmount:5,maxAmount:1e6,networkFeeEstimate:25,blockExplorerUrl:"https://etherscan.io/tx/",addressRegex:[/^0x[a-fA-F0-9]{40}$/]},SOL:{name:"Solana",symbol:"SOL",decimals:9,minAmount:5,maxAmount:1e6,networkFeeEstimate:.5,blockExplorerUrl:"https://solscan.io/tx/",addressRegex:[/^[1-9A-HJ-NP-Za-km-z]{32,44}$/]},AVAX:{name:"Avalanche",symbol:"AVAX",decimals:18,minAmount:5,maxAmount:1e6,networkFeeEstimate:2,blockExplorerUrl:"https://snowtrace.io/tx/",addressRegex:[/^0x[a-fA-F0-9]{40}$/]},USDC:{name:"USD Coin",symbol:"USDC",decimals:6,minAmount:5,maxAmount:1e6,networkFeeEstimate:3,blockExplorerUrl:"https://etherscan.io/tx/",addressRegex:[/^0x[a-fA-F0-9]{40}$/]}})}async initialize(){try{return console.log("🔄 Initializing Crypto Payment Service..."),await this.updateAllRates(),this.isInitialized=!0,console.log("✅ Crypto Payment Service initialized successfully"),!0}catch(e){return console.error("❌ Failed to initialize Crypto Payment Service:",e),this.isInitialized=!1,!1}}async getCryptoRates(e=!1){const r=Date.now();if(!e&&r-this.lastRateUpdate<R9&&this.rateCache.size>0)return console.log("📊 Using cached crypto rates"),Array.from(this.rateCache.values());try{return await this.updateAllRates(),Array.from(this.rateCache.values())}catch(n){return console.error("❌ Failed to fetch crypto rates:",n),this.rateCache.size>0?(console.log("📊 Using cached rates due to fetch error"),Array.from(this.rateCache.values())):this.getFallbackRates()}}async getCryptoRate(e){const n=(await this.getCryptoRates()).find(i=>i.symbol===e);if(!n)throw new Error(`Rate not found for ${e}`);return n}validateWalletAddress(e,r){try{if(!e||typeof e!="string")return{isValid:!1,format:"unknown",network:"unknown",cryptocurrency:"unknown",error:"Invalid address format"};const n=e.trim();if(r){const l=this.supportedCryptos[r].addressRegex.some(u=>u.test(n));return{isValid:l,format:this.getAddressFormat(n,r),network:"mainnet",cryptocurrency:l?r:"unknown",error:l?void 0:`Invalid ${r} address format`}}for(const[i,l]of Object.entries(this.supportedCryptos))if(l.addressRegex.some(d=>d.test(n)))return{isValid:!0,format:this.getAddressFormat(n,i),network:"mainnet",cryptocurrency:i};return{isValid:!1,format:"unknown",network:"unknown",cryptocurrency:"unknown",error:"Unsupported address format"}}catch(n){return{isValid:!1,format:"unknown",network:"unknown",cryptocurrency:"unknown",error:`Validation error: ${n}`}}}async calculateCryptoAmount(e,r){const n=await this.getCryptoRate(r),i=this.supportedCryptos[r],l=e/n.priceCAD,u=i.networkFeeEstimate,d=e+u;return{cryptoAmount:Number(l.toFixed(i.decimals)),rate:n.priceCAD,networkFee:u,totalCostCAD:d}}async processPayment(e){if(!this.isInitialized)throw new Error("Crypto Payment Service not initialized");try{console.log(`💰 Processing crypto payment: ${e.amount} CAD in ${e.cryptocurrency}`);const r=this.validatePaymentRequest(e);if(!r.isValid)return{success:!1,amountCAD:e.amount,cryptocurrency:e.cryptocurrency,rate:0,error:r.error,errorType:"validation_error"};const n=this.validateWalletAddress(e.recipientWallet,e.cryptocurrency);if(!n.isValid)return{success:!1,amountCAD:e.amount,cryptocurrency:e.cryptocurrency,rate:0,error:`Invalid recipient wallet: ${n.error}`,errorType:"invalid_wallet"};const i=await this.calculateCryptoAmount(e.amount,e.cryptocurrency),l=`crypto_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;console.log("🔄 Broadcasting transaction to blockchain..."),await this.delay(3e3);const u=this.generateTxHash(e.cryptocurrency);if(Math.random()>.05){const f={success:!0,transactionId:l,txHash:u,amountCrypto:i.cryptoAmount,amountCAD:e.amount,cryptocurrency:e.cryptocurrency,rate:i.rate,networkFee:i.networkFee,blockExplorerUrl:`${this.supportedCryptos[e.cryptocurrency].blockExplorerUrl}${u}`};return console.log(`✅ Crypto payment successful: ${l}`),await this.checkFintracRequirements(e,f),this.broadcastPaymentEvent("crypto_payment_success",f),f}else{const f={success:!1,amountCAD:e.amount,cryptocurrency:e.cryptocurrency,rate:i.rate,error:"Transaction failed to broadcast to blockchain",errorType:"network_error"};return console.log("❌ Crypto payment failed"),this.broadcastPaymentEvent("crypto_payment_failed",f),f}}catch(r){console.error("❌ Crypto payment processing error:",r);const n={success:!1,amountCAD:e.amount,cryptocurrency:e.cryptocurrency,rate:0,error:`Payment processing failed: ${r}`,errorType:"network_error"};return this.broadcastPaymentEvent("crypto_payment_failed",n),n}}getSupportedCryptocurrencies(){return Object.entries(this.supportedCryptos).map(([e,r])=>({symbol:e,name:r.name,minAmount:r.minAmount,maxAmount:r.maxAmount,networkFeeEstimate:r.networkFeeEstimate}))}async checkTransactionStatus(e,r){try{return console.log(`🔍 Checking transaction status: ${e}`),await this.delay(2e3),{status:"confirmed",confirmations:12,blockHeight:85e4,timestamp:new Date().toISOString()}}catch(n){return console.error("❌ Failed to check transaction status:",n),{status:"not_found",confirmations:0}}}async updateAllRates(){console.log("🔄 Fetching real-time crypto rates...");const e=Object.keys(this.supportedCryptos).map(r=>this.fetchCryptoRate(r));try{const r=await Promise.all(e);r.forEach(n=>{n&&this.rateCache.set(n.symbol,n)}),this.lastRateUpdate=Date.now(),console.log(`✅ Updated rates for ${r.length} cryptocurrencies`)}catch(r){throw console.error("❌ Failed to update crypto rates:",r),r}}async fetchCryptoRate(e){try{await this.delay(500);const n={BTC:{symbol:"BTC",priceCAD:67500,priceUSD:5e4,change24h:2.5,volume24h:15e9,marketCap:98e10},ETH:{symbol:"ETH",priceCAD:4050,priceUSD:3e3,change24h:-1.2,volume24h:8e9,marketCap:36e10},SOL:{symbol:"SOL",priceCAD:270,priceUSD:200,change24h:5.8,volume24h:2e9,marketCap:9e10},AVAX:{symbol:"AVAX",priceCAD:54,priceUSD:40,change24h:3.2,volume24h:5e8,marketCap:15e9},USDC:{symbol:"USDC",priceCAD:1.35,priceUSD:1,change24h:.1,volume24h:3e9,marketCap:32e9}}[e];return n?{...n,lastUpdated:new Date().toISOString(),source:"simulated_api"}:null}catch(r){return console.error(`❌ Failed to fetch rate for ${e}:`,r),null}}getFallbackRates(){const e=new Date().toISOString();return[{symbol:"BTC",priceCAD:67500,priceUSD:5e4,change24h:0,volume24h:0,marketCap:0,lastUpdated:e,source:"fallback"},{symbol:"ETH",priceCAD:4050,priceUSD:3e3,change24h:0,volume24h:0,marketCap:0,lastUpdated:e,source:"fallback"},{symbol:"SOL",priceCAD:270,priceUSD:200,change24h:0,volume24h:0,marketCap:0,lastUpdated:e,source:"fallback"},{symbol:"AVAX",priceCAD:54,priceUSD:40,change24h:0,volume24h:0,marketCap:0,lastUpdated:e,source:"fallback"},{symbol:"USDC",priceCAD:1.35,priceUSD:1,change24h:0,volume24h:0,marketCap:0,lastUpdated:e,source:"fallback"}]}validatePaymentRequest(e){const r=this.supportedCryptos[e.cryptocurrency];return r?e.amount<r.minAmount?{isValid:!1,error:`Amount below minimum: ${r.minAmount} CAD`}:e.amount>r.maxAmount?{isValid:!1,error:`Amount above maximum: ${r.maxAmount} CAD`}:e.recipientWallet?{isValid:!0}:{isValid:!1,error:"Recipient wallet address required"}:{isValid:!1,error:`Unsupported cryptocurrency: ${e.cryptocurrency}`}}getAddressFormat(e,r){switch(r){case"BTC":if(e.startsWith("1"))return"legacy";if(e.startsWith("3"))return"segwit";if(e.startsWith("bc1"))return"bech32";break;case"ETH":case"AVAX":case"USDC":return"evm";case"SOL":return"solana"}return"unknown"}generateTxHash(e){const r=e==="SOL"?88:64,n="0123456789abcdef";let i="";for(let l=0;l<r;l++)i+=n.charAt(Math.floor(Math.random()*n.length));return i}async checkFintracRequirements(e,r){try{if(e.amount>=1e4){const i={transactionId:r.transactionId,reportType:"LCTR",amount:e.amount,cryptocurrency:e.cryptocurrency,senderWallet:e.senderWallet||"unknown",recipientWallet:e.recipientWallet,timestamp:new Date().toISOString(),customerId:e.customerId,riskLevel:this.assessRiskLevel(e.amount,e.cryptocurrency),flags:this.generateRiskFlags(e),reportedToFintrac:!1};localStorage.setItem("pendingCryptoFintracReport",JSON.stringify(i)),window.dispatchEvent(new CustomEvent("cryptoFintracReportRequired",{detail:{transactionId:r.transactionId,amount:e.amount,cryptocurrency:e.cryptocurrency}})),console.log(`📋 FINTRAC report required for transaction: ${r.transactionId}`)}}catch(n){console.warn("Failed to process FINTRAC requirements:",n)}}assessRiskLevel(e,r){return e>=1e5?"critical":e>=5e4?"high":e>=1e4?"medium":"low"}generateRiskFlags(e){const r=[];return e.amount>=5e4&&r.push("large_amount"),e.cryptocurrency==="BTC"&&r.push("privacy_coin_risk"),e.customerId||r.push("anonymous_transaction"),r}delay(e){return new Promise(r=>setTimeout(r,e))}broadcastPaymentEvent(e,r){try{typeof window<"u"&&window.dispatchEvent(new CustomEvent(e,{detail:{timestamp:new Date().toISOString(),data:r}})),localStorage.setItem("lastCryptoPaymentEvent",JSON.stringify({type:e,timestamp:new Date().toISOString(),data:r}))}catch(n){console.warn("Failed to broadcast crypto payment event:",n)}}}const to=new k9;function Xt(t=32){const e=new Uint8Array(t/2);return crypto.getRandomValues(e),Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Fs(t){return typeof t!="string"?"":t.replace(/[<>]/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").replace(/script/gi,"").trim()}function O9(t){return/^[A-Za-z]\d[A-Za-z] \d[A-Za-z]\d$/.test(t)}function M9(t){return/^(\+1[-.\s]?)?\(?([0-9]{3})\)?[-.\s]?([0-9]{3})[-.\s]?([0-9]{4})$/.test(t)}function I9(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}const ug={requiresEnhancedDueDiligence(t){return t>=1e4},requiresLCTR(t,e){return t>=1e4&&e.toLowerCase().includes("cash")},isHighRiskOccupation(t){const e=["money service business","casino","real estate","precious metals","jewelry","car dealer","art dealer"],r=t.toLowerCase();return e.some(n=>r.includes(n))},isHighRiskCountry(t){return["afghanistan","iran","north korea","syria"].includes(t.toLowerCase())}};let Dn=!0;const Us={transactions:[],inventory:[],customers:[],compliance:[],website_activities:[]};class P9{constructor(){te(this,"db",null);te(this,"dbName","LeaperFxDB");te(this,"version",1)}async init(){if(!window.indexedDB)return Dn=!1,Promise.resolve();try{return new Promise(e=>{const r=indexedDB.open(this.dbName,this.version);r.onerror=n=>{console.error("Error opening IndexedDB:",n),Dn=!1,e()},r.onsuccess=()=>{this.db=r.result,Dn=!0,e()},r.onupgradeneeded=n=>{try{const i=n.target.result;if(!i.objectStoreNames.contains("transactions")){const l=i.createObjectStore("transactions",{keyPath:"id"});l.createIndex("date","date",{unique:!1}),l.createIndex("status","status",{unique:!1}),l.createIndex("complianceStatus","complianceStatus",{unique:!1})}if(i.objectStoreNames.contains("inventory")||i.createObjectStore("inventory",{keyPath:"id"}).createIndex("currency","currency",{unique:!0}),!i.objectStoreNames.contains("customers")){const l=i.createObjectStore("customers",{keyPath:"id"});l.createIndex("email","email",{unique:!1}),l.createIndex("phone","phone",{unique:!1})}if(!i.objectStoreNames.contains("compliance")){const l=i.createObjectStore("compliance",{keyPath:"id"});l.createIndex("transactionId","transactionId",{unique:!1}),l.createIndex("status","status",{unique:!1}),l.createIndex("deadline","deadline",{unique:!1})}if(!i.objectStoreNames.contains("website_activities")){const l=i.createObjectStore("website_activities",{keyPath:"id"});l.createIndex("type","type",{unique:!1}),l.createIndex("timestamp","timestamp",{unique:!1})}i.objectStoreNames.contains("generic_storage")||i.createObjectStore("generic_storage",{keyPath:"key"})}catch(i){console.error("Error during database upgrade:",i),Dn=!1}}})}catch(e){return console.error("Unexpected error initializing IndexedDB:",e),Dn=!1,Promise.resolve()}}async getStore(e,r="readonly"){if(!Dn)return this.getMockStore(e,r);try{return this.db||await this.init(),!this.db||!Dn?this.getMockStore(e,r):this.db.transaction([e],r).objectStore(e)}catch(n){return console.error(`Error getting store ${e}, using in-memory fallback:`,n),Dn=!1,this.getMockStore(e,r)}}getMockStore(e,r){return{get:async n=>Us[e].find(i=>i.id===n)||null,getAll:async()=>[...Us[e]],add:async n=>(Us[e].push(n),{result:n}),put:async n=>{const i=Us[e].findIndex(l=>l.id===n.id);return i!==-1?Us[e][i]=n:Us[e].push(n),{result:n}},index:n=>({get:async i=>Us[e].find(l=>l[n]===i)||null})}}async createTransaction(e){const r={...e,id:this.generateId(),timestamp:Date.now()},n=await this.getStore("transactions","readwrite");return await this.promisifyRequest(n.add(r)),r}async getTransactions(){const r=(await this.getStore("transactions")).getAll();return(await this.promisifyRequest(r)).sort((i,l)=>l.timestamp-i.timestamp)}async updateTransaction(e,r){const n=await this.getStore("transactions","readwrite"),i=await this.promisifyRequest(n.get(e));if(i){const l={...i,...r};await this.promisifyRequest(n.put(l))}}async getInventory(){const e=await this.getStore("inventory");return(await this.promisifyRequest(e.getAll())).sort((n,i)=>n.currency.localeCompare(i.currency))}async addInventoryItem(e){const r={...e,id:this.generateId(),timestamp:Date.now()},n=await this.getStore("inventory","readwrite");return await this.promisifyRequest(n.add(r)),r}async updateInventoryItem(e,r){const n=await this.getStore("inventory","readwrite"),i=await this.promisifyRequest(n.get(e));if(i){const l={...i,...r,lastUpdated:new Date().toISOString()};await this.promisifyRequest(n.put(l))}}async addStock(e,r,n){const i=await this.getStore("inventory","readwrite"),l=i.index("currency"),u=await this.promisifyRequest(l.get(e));u?(u.amount+=r,u.buyRate=n,u.sellRate=n*1.015,u.lastUpdated=new Date().toISOString(),await this.promisifyRequest(i.put(u))):await this.addInventoryItem({currency:e,amount:r,buyRate:n,sellRate:n*1.015,lastUpdated:new Date().toISOString()})}async createCustomer(e){const r={...e,id:this.generateId(),timestamp:Date.now()},n=await this.getStore("customers","readwrite");return await this.promisifyRequest(n.add(r)),r}async getCustomers(){const e=await this.getStore("customers");return(await this.promisifyRequest(e.getAll())).sort((n,i)=>i.timestamp-n.timestamp)}async createComplianceRecord(e){const r={...e,id:this.generateId(),timestamp:Date.now()},n=await this.getStore("compliance","readwrite");return await this.promisifyRequest(n.add(r)),r}async getComplianceRecords(){const e=await this.getStore("compliance");return(await this.promisifyRequest(e.getAll())).sort((n,i)=>new Date(n.deadline).getTime()-new Date(i.deadline).getTime())}async updateComplianceRecord(e,r){const n=await this.getStore("compliance","readwrite"),i=await this.promisifyRequest(n.get(e));if(i){const l={...i,...r};await this.promisifyRequest(n.put(l))}}async trackWebsiteActivity(e){const r={...e,id:this.generateId(),timestamp:Date.now()},n=await this.getStore("website_activities","readwrite");await this.promisifyRequest(n.add(r))}async getWebsiteActivities(){const e=await this.getStore("website_activities");return(await this.promisifyRequest(e.getAll())).sort((n,i)=>i.timestamp-n.timestamp)}async importFromCSV(e,r){if(r==="inventory")for(const n of e)await this.addInventoryItem({currency:n.currency,amount:parseFloat(n.amount)||0,buyRate:parseFloat(n.buyRate)||0,sellRate:parseFloat(n.sellRate)||parseFloat(n.buyRate)*1.015,lastUpdated:new Date().toISOString()});else if(r==="customers"||r==="clients"){const i=(await He(()=>Promise.resolve().then(()=>ii),void 0)).default;for(const l of e)await i.createCustomer({firstName:l.firstName||"",lastName:l.lastName||"",email:l.email||"",phone:l.phone||"",dateOfBirth:l.dateOfBirth||"",occupation:l.occupation||"",address:l.address||"",city:l.city||"",postalCode:l.postalCode||"",country:l.country||"Canada",idType:l.idType||"",idNumber:l.idNumber||""})}}async initializeDefaultData(){try{await this.getInventory()}catch(e){console.error("Error initializing database:",e)}}async setItem(e,r){try{if(!Dn){localStorage.setItem(e,JSON.stringify(r));return}const n=await this.ensureDatabase();if(!n.objectStoreNames.contains("generic_storage")){localStorage.setItem(e,JSON.stringify(r));return}const l=n.transaction(["generic_storage"],"readwrite").objectStore("generic_storage");await this.promisifyRequest(l.put({key:e,value:r}))}catch(n){console.error("Error setting item:",n),localStorage.setItem(e,JSON.stringify(r))}}async getItem(e){try{if(!Dn){const u=localStorage.getItem(e);return u?JSON.parse(u):null}const r=await this.ensureDatabase();if(!r.objectStoreNames.contains("generic_storage")){const u=localStorage.getItem(e);return u?JSON.parse(u):null}const i=r.transaction(["generic_storage"],"readonly").objectStore("generic_storage"),l=await this.promisifyRequest(i.get(e));return l?l.value:null}catch(r){console.error("Error getting item:",r);const n=localStorage.getItem(e);return n?JSON.parse(n):null}}async ensureDatabase(){return this._ensureDatabase()}async _ensureDatabase(){if(this.db||await this.init(),!this.db)throw new Error("Failed to initialize database");return this.db}generateId(){if(crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(16);return crypto.getRandomValues(e),Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}promisifyRequest(e){return new Promise((r,n)=>{e.onsuccess=()=>r(e.result),e.onerror=()=>n(e.error)})}}const Me=new P9;class L9{constructor(){te(this,"STORAGE_KEY","crypto_fintrac_reports");te(this,"VCTR_THRESHOLD_CAD",1e3);te(this,"LVCTR_THRESHOLD_CAD",1e4);te(this,"REPORTING_DEADLINE_DAYS",15);te(this,"AGGREGATION_WINDOW_HOURS",24);te(this,"ENTITY_INFO",{name:"Leaper Exchange Inc.",identifier:"MSB_CRYPTO_ID_TO_BE_SET",registrationNumber:"MSB_REG_NUMBER_TO_BE_SET",address:{streetNumber:"",streetName:"",city:"Montreal",province:"QC",postalCode:"",country:"Canada"}})}analyzeCryptoTransaction(e){const r=e.paymentResult.amount,n=new Date,i=new Date(n.getTime()+this.REPORTING_DEADLINE_DAYS*24*60*60*1e3),l=r>=this.VCTR_THRESHOLD_CAD,u=r>=this.LVCTR_THRESHOLD_CAD,d=this.detectSuspiciousActivity(e),f=this.calculateRiskLevel(e),h=d||f==="critical"||r>=5e4;return{requiresVCTR:l,requiresLVCTR:u,requiresSTR:d,reportingDeadline:i.toISOString().split("T")[0],riskLevel:f,immediateAction:h}}async generateVCTRReport(e){if(!e.customerData)throw new Error("Customer data required for VCTR generation");const r=`VCTR-${Date.now()}-${Xt(8)}`,n=new Date().toISOString().split("T")[0];new Date().toISOString().split("T")[1];const i={id:Xt(),reportType:"VCTR",reportReference:r,submissionDate:n,reportingEntity:this.ENTITY_INFO,virtualCurrencyTransaction:{transactionId:e.id,transactionType:"exchange",date:e.timestamp.split("T")[0],time:e.timestamp.split("T")[1],virtualCurrencyType:e.cryptoResult.cryptocurrency,virtualCurrencyAmount:e.cryptoResult.amountCrypto||0,cadEquivalent:e.paymentResult.amount,exchangeRate:e.cryptoResult.rate,senderWalletAddress:e.senderWallet,receiverWalletAddress:e.receiverWallet,transactionHash:e.cryptoResult.txHash||"",ipAddress:e.ipAddress,deviceId:e.deviceId,sessionId:e.sessionId,networkFee:e.cryptoResult.networkFee||0,confirmations:e.cryptoResult.confirmations||0},conductor:this.buildConductorInfo(e.customerData),sourceOfFunds:e.customerData.sourceOfFunds||"employment",purpose:"virtual_currency_purchase",disposition:"virtual_currency_transferred",riskIndicators:e.riskFactors,suspicious:e.flaggedSuspicious,reportingReason:e.paymentResult.amount>=this.LVCTR_THRESHOLD_CAD?"large_amount":"threshold_aggregate",submissionMethod:"API",submissionStatus:"draft",preparedBy:"system",retentionDate:this.calculateRetentionDate(),auditHash:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return i.auditHash=await this.generateAuditHash(JSON.stringify(i)),i}async generateLVCTRReport(e,r){const n=await this.generateVCTRReport(e);return{...n,reportType:"LVCTR",reportReference:n.reportReference.replace("VCTR","LVCTR"),aggregateTransactions:(r==null?void 0:r.map(l=>({transactionId:l.id,date:l.timestamp.split("T")[0],amount:l.cryptoResult.amountCrypto||0,virtualCurrencyType:l.cryptoResult.cryptocurrency,cadEquivalent:l.paymentResult.amount})))||[],totalAggregateAmount:(r||[]).reduce((l,u)=>l+u.paymentResult.amount,e.paymentResult.amount),aggregationPeriod:{startDate:e.timestamp.split("T")[0],endDate:new Date().toISOString().split("T")[0]}}}async generateCryptoSTRReport(e,r){const n=await this.generateVCTRReport(e);return{...n,reportType:"STR",reportReference:n.reportReference.replace("VCTR","STR"),suspicionIndicators:{unusualTransactionPatterns:r.includes("unusual_patterns"),multipleSmallAmounts:r.includes("structuring"),rapidSuccession:r.includes("rapid_transactions"),unknownSourceFunds:r.includes("unknown_source"),inconsistentWithProfile:r.includes("inconsistent_profile"),highRiskJurisdiction:r.includes("high_risk_jurisdiction"),mixerOrTumblerUsage:r.includes("mixer_usage"),privacyCoinUsage:r.includes("privacy_coin"),newWalletAddress:r.includes("new_wallet"),largeRoundNumbers:r.includes("round_numbers"),other:r.filter(l=>!["unusual_patterns","structuring","rapid_transactions","unknown_source","inconsistent_profile","high_risk_jurisdiction","mixer_usage","privacy_coin","new_wallet","round_numbers"].includes(l))},narrative:this.generateSTRNarrative(e,r),conductReason:"Suspicious virtual currency transaction patterns detected",actionTaken:"Transaction monitored and reported to FINTRAC"}}async submitCryptoReport(e){try{const r=this.generateFINTRACXML(e),n=`SUB-${Date.now()}-${Xt(8)}`;return e.submissionStatus="submitted",e.acknowledgmentReference=`ACK-${n}`,e.updatedAt=new Date().toISOString(),await this.storeReport(e),_e.send({type:"crypto_fintrac_report_submitted",data:{reportType:e.reportType,reportReference:e.reportReference,submissionId:n,transactionId:e.virtualCurrencyTransaction.transactionId,amount:e.virtualCurrencyTransaction.cadEquivalent,cryptocurrency:e.virtualCurrencyTransaction.virtualCurrencyType}}),{success:!0,submissionId:n,acknowledgmentReference:e.acknowledgmentReference}}catch(r){return console.error("Error submitting crypto FINTRAC report:",r),{success:!1,submissionId:"",error:r instanceof Error?r.message:"Unknown error"}}}async processCompletedCryptoTransaction(e){if(!e.cryptoResult)throw new Error("No crypto result in payment data");const r={id:e.transactionId,timestamp:e.timestamp,paymentResult:e,cryptoResult:e.cryptoResult,receiverWallet:e.cryptoResult.txHash||"",riskScore:this.calculateTransactionRiskScore(e),riskFactors:this.identifyRiskFactors(e),flaggedSuspicious:!1,requiresVCTR:!1,requiresLVCTR:!1,requiresSTR:!1},n=this.analyzeCryptoTransaction(r),i=[];if(n.requiresVCTR){const l=await this.generateVCTRReport(r);await this.storeReport(l),i.push("VCTR")}if(n.requiresLVCTR){const l=await this.generateLVCTRReport(r);await this.storeReport(l),i.push("LVCTR")}if(n.requiresSTR){const l=await this.generateCryptoSTRReport(r,r.riskFactors);await this.storeReport(l),i.push("STR")}return{reportsGenerated:i,immediateAction:n.immediateAction,deadline:n.reportingDeadline}}async getPendingCryptoReports(){return(await this.getAllReports()).filter(r=>r.submissionStatus==="draft")}async exportCryptoReports(e){const n=(await this.getAllReports()).filter(i=>e.includes(i.id));return{xml:this.generateBatchXML(n),json:JSON.stringify(n,null,2),csv:this.generateReportsCSV(n)}}buildConductorInfo(e){return{type:"person",verificationLevel:this.determineVerificationLevel(e),pepStatus:this.determinePEPStatus(e),personInfo:{firstName:e.firstName||"",lastName:e.lastName||"",dateOfBirth:e.dateOfBirth||"",occupation:e.occupation||"",address:{street:e.streetAddress||"",city:e.city||"",province:e.province||"",postalCode:e.postalCode||"",country:e.country||"Canada"},identification:{type:e.idType||"",number:e.idNumber||"",expiryDate:e.idExpiry||"",issuingAuthority:this.getIssuingAuthority(e.idType)},citizenship:e.citizenship||"Canada",residenceCountry:e.residenceCountry||"Canada"}}}determineVerificationLevel(e){return e.idNumber?e.idVerificationMethod==="enhanced"?"enhanced":e.idVerificationMethod==="full_kyc"?"full_kyc":"basic":"none"}determinePEPStatus(e){var r;return e.pepStatus?e.pepStatus:(r=e.occupation)!=null&&r.toLowerCase().includes("government")?"pep":"not_pep"}detectSuspiciousActivity(e){const r=e.riskFactors||[],n=["rapid_transactions","structuring","high_risk_jurisdiction","mixer_usage","privacy_coin","unusual_patterns"];return r.some(i=>n.includes(i))}calculateRiskLevel(e){const r=e.riskScore;return r>=90?"critical":r>=70?"high":r>=40?"medium":"low"}calculateTransactionRiskScore(e){var n,i;let r=0;return e.amount>=5e4?r+=30:e.amount>=25e3?r+=20:e.amount>=1e4&&(r+=10),((n=e.cryptoResult)==null?void 0:n.cryptocurrency)==="BTC"&&(r+=5),((i=e.cryptoResult)==null?void 0:i.cryptocurrency)==="ETH"&&(r+=3),Math.min(r,100)}identifyRiskFactors(e){const r=[];return e.amount>=1e4&&r.push("large_amount"),e.amount%1e3===0&&r.push("round_numbers"),r}generateSTRNarrative(e,r){const n=e.paymentResult.amount,i=e.cryptoResult.cryptocurrency;let l=`Virtual currency transaction of $${n} CAD for ${i} flagged for the following reasons: `;return l+=r.join(", "),l+=". Transaction monitored and reviewed for compliance with FINTRAC requirements.",l}generateFINTRACXML(e){let r=`<?xml version="1.0" encoding="UTF-8"?>
`;return r+=`<${e.reportType.toLowerCase()}_report xmlns="http://www.fintrac-canafe.gc.ca/vctr">
`,r+=`  <report_header>
`,r+=`    <report_type>${e.reportType}</report_type>
`,r+=`    <report_reference>${e.reportReference}</report_reference>
`,r+=`    <submission_date>${e.submissionDate}</submission_date>
`,r+=`  </report_header>
`,r+=`  <virtual_currency_transaction>
`,r+=`    <transaction_id>${e.virtualCurrencyTransaction.transactionId}</transaction_id>
`,r+=`    <currency_type>${e.virtualCurrencyTransaction.virtualCurrencyType}</currency_type>
`,r+=`    <amount>${e.virtualCurrencyTransaction.virtualCurrencyAmount}</amount>
`,r+=`    <cad_equivalent>${e.virtualCurrencyTransaction.cadEquivalent}</cad_equivalent>
`,r+=`    <transaction_hash>${e.virtualCurrencyTransaction.transactionHash}</transaction_hash>
`,r+=`  </virtual_currency_transaction>
`,r+=`</${e.reportType.toLowerCase()}_report>
`,r}generateBatchXML(e){let r=`<?xml version="1.0" encoding="UTF-8"?>
`;r+=`<fintrac_batch xmlns="http://www.fintrac-canafe.gc.ca/batch">
`,r+=`  <batch_header>
`,r+=`    <batch_id>BATCH-${Date.now()}</batch_id>
`,r+=`    <report_count>${e.length}</report_count>
`,r+=`    <submission_date>${new Date().toISOString().split("T")[0]}</submission_date>
`,r+=`  </batch_header>
`,r+=`  <reports>
`;for(const n of e)r+=this.generateFINTRACXML(n);return r+=`  </reports>
`,r+=`</fintrac_batch>
`,r}generateReportsCSV(e){var i,l;const n=[["Report_ID","Report_Type","Report_Reference","Transaction_ID","Currency_Type","Amount","CAD_Equivalent","Transaction_Hash","Sender_Wallet","Receiver_Wallet","Customer_Name","Submission_Status","Created_At"].join(",")];for(const u of e){const d=[u.id,u.reportType,u.reportReference,u.virtualCurrencyTransaction.transactionId,u.virtualCurrencyTransaction.virtualCurrencyType,u.virtualCurrencyTransaction.virtualCurrencyAmount,u.virtualCurrencyTransaction.cadEquivalent,u.virtualCurrencyTransaction.transactionHash,u.virtualCurrencyTransaction.senderWalletAddress||"",u.virtualCurrencyTransaction.receiverWalletAddress,`${(i=u.conductor.personInfo)==null?void 0:i.firstName} ${(l=u.conductor.personInfo)==null?void 0:l.lastName}`,u.submissionStatus,u.createdAt];n.push(d.join(","))}return n.join(`
`)}async storeReport(e){const r=await this.getAllReports();r.unshift(e),await Me.setItem(this.STORAGE_KEY,r)}async getAllReports(){try{const e=await Me.getItem(this.STORAGE_KEY);return Array.isArray(e)?e:[]}catch(e){return console.error("Error loading crypto FINTRAC reports:",e),[]}}getIssuingAuthority(e){switch(e){case"drivers_license":return"Provincial Government";case"passport":return"Government of Canada";case"provincial_id":return"Provincial Government";default:return"Government Authority"}}calculateRetentionDate(){const e=new Date;return e.setFullYear(e.getFullYear()+5),e.toISOString().split("T")[0]}async generateAuditHash(e){const n=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(i)).map(u=>u.toString(16).padStart(2,"0")).join("")}}const nT=new L9;var ir={};class F9{constructor(){te(this,"isInitialized",!1);te(this,"paymentHistory",[]);te(this,"systemStatus",{stripeTerminal:{initialized:!1,connectionStatus:{status:"not_connected"},availableDevices:[],health:{status:"down",lastChecked:new Date().toISOString()}},cryptocurrency:{initialized:!1,supportedCurrencies:[],health:{status:"down",lastChecked:new Date().toISOString()}},overall:{operationalSystems:0,totalSystems:2,status:"offline",lastHealthCheck:new Date().toISOString()}})}async initialize(){var e,r,n,i,l,u;try{console.log("🔄 Initializing Payment Processing Service...");const d=typeof window<"u"?window:{},f=((e=d.__ENV__)==null?void 0:e.STRIPE_TERMINAL_ENV)||((r=d.__ENV__)==null?void 0:r.STRIPE_MODE)||((n=d.__ENV__)==null?void 0:n.MODE)||(typeof process<"u"?(ir==null?void 0:ir.STRIPE_TERMINAL_ENV)||(ir==null?void 0:ir.STRIPE_MODE)||"production":"test"),h=f&&["live","production","prod"].includes(f.toLowerCase())?"live":"test",p={apiKey:(typeof window<"u"?(i=window.__ENV__)==null?void 0:i.STRIPE_PUBLISHABLE_KEY:void 0)||(typeof process<"u"?ir==null?void 0:ir.STRIPE_PUBLISHABLE_KEY:void 0)||"pk_test_simulated",environment:h,merchantDisplayName:((l=d.__ENV__)==null?void 0:l.STRIPE_MERCHANT_NAME)||(typeof process<"u"?ir==null?void 0:ir.STRIPE_MERCHANT_NAME:void 0)||"LeaperFX Store",locationId:((u=d.__ENV__)==null?void 0:u.STRIPE_TERMINAL_LOCATION)||(typeof process<"u"?ir==null?void 0:ir.STRIPE_TERMINAL_LOCATION:void 0)},g=await En.initialize(p);if(this.systemStatus.stripeTerminal.initialized=g,this.systemStatus.stripeTerminal.health={status:g?"healthy":"down",lastChecked:new Date().toISOString()},g){this.systemStatus.overall.operationalSystems++;try{this.systemStatus.stripeTerminal.availableDevices=await En.discoverDevices(),this.systemStatus.stripeTerminal.connectionStatus=En.getConnectionStatus()}catch(w){console.warn("Failed to discover terminal devices:",w)}}const x=await to.initialize();if(this.systemStatus.cryptocurrency.initialized=x,this.systemStatus.cryptocurrency.health={status:x?"healthy":"down",lastChecked:new Date().toISOString()},x){this.systemStatus.overall.operationalSystems++;const w=to.getSupportedCryptocurrencies(),S=await to.getCryptoRates();this.systemStatus.cryptocurrency.supportedCurrencies=w.map(C=>{const N=S.find(A=>A.symbol===C.symbol);return{symbol:C.symbol,name:C.name,priceCAD:(N==null?void 0:N.priceCAD)||0,networkFee:C.networkFeeEstimate}}),this.systemStatus.cryptocurrency.lastRateUpdate=new Date().toISOString()}return this.systemStatus.overall.operationalSystems===this.systemStatus.overall.totalSystems?this.systemStatus.overall.status="fully_operational":this.systemStatus.overall.operationalSystems>0?this.systemStatus.overall.status="partial_operational":this.systemStatus.overall.status="offline",this.systemStatus.overall.lastHealthCheck=new Date().toISOString(),this.isInitialized=!0,console.log(`✅ Payment Processing Service initialized - ${this.systemStatus.overall.operationalSystems}/${this.systemStatus.overall.totalSystems} systems operational`),this.loadPaymentHistory(),!0}catch(d){return console.error("❌ Failed to initialize Payment Processing Service:",d),this.isInitialized=!1,!1}}async processPayment(e){if(!this.isInitialized)throw new Error("Payment Processing Service not initialized");const r=`pay_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;console.log(`💳 Processing ${e.paymentMethod} payment: ${r}`);try{let n;switch(e.paymentMethod){case"stripe_terminal":n=await this.processTerminalPayment(e,r);break;case"cryptocurrency":n=await this.processCryptoPayment(e,r);break;case"cash":n=await this.processCashPayment(e,r);break;case"interac":n=await this.processInteracPayment(e,r);break;default:throw new Error(`Unsupported payment method: ${e.paymentMethod}`)}return this.addToHistory(n),this.checkComplianceRequirements(n),this.broadcastPaymentEvent("payment_completed",n),console.log(`✅ Payment ${r} completed successfully`),n}catch(n){console.error(`❌ Payment ${r} failed:`,n);const i={success:!1,paymentMethod:e.paymentMethod,transactionId:r,amount:e.amount,currency:"CAD",timestamp:new Date().toISOString(),error:`Payment processing failed: ${n}`,errorType:"processing_error"};return this.addToHistory(i),this.broadcastPaymentEvent("payment_failed",i),i}}getSystemStatus(){return JSON.parse(JSON.stringify(this.systemStatus))}async refreshSystemStatus(){try{if(this.systemStatus.stripeTerminal.initialized?(this.systemStatus.stripeTerminal.connectionStatus=En.getConnectionStatus(),this.systemStatus.stripeTerminal.health={status:this.systemStatus.stripeTerminal.connectionStatus.status==="connected"?"healthy":"degraded",lastChecked:new Date().toISOString()}):this.systemStatus.stripeTerminal.health={status:"down",lastChecked:new Date().toISOString()},this.systemStatus.cryptocurrency.initialized){const e=await to.getCryptoRates(!0);this.systemStatus.cryptocurrency.supportedCurrencies=this.systemStatus.cryptocurrency.supportedCurrencies.map(r=>{const n=e.find(i=>i.symbol===r.symbol);return{...r,priceCAD:(n==null?void 0:n.priceCAD)||r.priceCAD}}),this.systemStatus.cryptocurrency.lastRateUpdate=new Date().toISOString(),this.systemStatus.cryptocurrency.health={status:"healthy",lastChecked:new Date().toISOString()}}else this.systemStatus.cryptocurrency.health={status:"down",lastChecked:new Date().toISOString()};return this.systemStatus.overall.lastHealthCheck=new Date().toISOString(),this.getSystemStatus()}catch(e){return console.error("Failed to refresh system status:",e),this.getSystemStatus()}}getAnalytics(){const e=new Date;e.setHours(0,0,0,0);const r=e.toISOString().split("T")[0],n=this.paymentHistory.filter(j=>j.timestamp.startsWith(r)),i=n.filter(j=>j.success),l=n.filter(j=>!j.success),u=i.reduce((j,E)=>j+E.amount,0),d=i.length,f=d>0?u/d:0,h=n.length>0?i.length/n.length:1,p=new Map;n.forEach(j=>{const E=p.get(j.paymentMethod)||{count:0,volume:0,attempts:0};p.set(j.paymentMethod,{count:E.count+(j.success?1:0),volume:E.volume+(j.success?j.amount:0),attempts:E.attempts+1})});const g=Array.from(p.entries()).map(([j,E])=>({method:j,count:E.count,volume:E.volume,averageAmount:E.count>0?E.volume/E.count:0,successRate:E.attempts>0?E.count/E.attempts:1})),x=new Map;i.filter(j=>j.paymentMethod==="cryptocurrency"&&j.cryptoResult).forEach(j=>{const E=j.cryptoResult.cryptocurrency,_=x.get(E)||{count:0,volume:0,volumeCAD:0,rateSum:0};x.set(E,{count:_.count+1,volume:_.volume+(j.cryptoAmount||0),volumeCAD:_.volumeCAD+j.amount,rateSum:_.rateSum+(j.exchangeRate||j.cryptoResult.rate||0)})});const w=Array.from(x.entries()).map(([j,E])=>({symbol:j,count:E.count,volume:E.volume,volumeCAD:E.volumeCAD,averageRate:E.count>0?E.rateSum/E.count:0})),S=i.filter(j=>j.complianceLevel==="lctr_required").length,C=i.filter(j=>j.complianceLevel==="enhanced_records").length,N=i.filter(j=>j.requiresFintracReport).length;return{period:{start:e.toISOString(),end:new Date().toISOString(),type:"day"},summary:{totalTransactions:d,totalVolume:u,successRate:h,averageAmount:f,failedPayments:l.length},byMethod:g,cryptocurrency:w.length>0?w:void 0,compliance:{totalReportsRequired:N,lctrRequired:S,enhancedRecordsRequired:C,reportsSubmitted:0}}}getPaymentAnalytics(){return this.getAnalytics()}getPaymentHistory(e){if(typeof e=="number"||typeof e>"u"){const x=typeof e=="number"?e:50;return this.paymentHistory.slice(-x).sort((w,S)=>new Date(S.timestamp).getTime()-new Date(w.timestamp).getTime())}const r=e;let n=this.paymentHistory.slice();r.startDate&&(n=n.filter(x=>new Date(x.timestamp)>=new Date(r.startDate))),r.endDate&&(n=n.filter(x=>new Date(x.timestamp)<=new Date(r.endDate))),r.paymentMethod&&(n=n.filter(x=>x.paymentMethod===r.paymentMethod)),r.status&&(n=n.filter(x=>(x.success?"completed":"failed")===r.status)),typeof r.minAmount=="number"&&(n=n.filter(x=>x.amount>=r.minAmount)),typeof r.maxAmount=="number"&&(n=n.filter(x=>x.amount<=r.maxAmount)),typeof r.requiresCompliance=="boolean"&&(n=n.filter(x=>!!x.requiresFintracReport===r.requiresCompliance));const i=r.field||"timestamp",l=r.direction||"desc";n.sort((x,w)=>{const S=i==="timestamp"?new Date(x.timestamp).getTime():i==="amount"?x.amount:i==="status"?x.success?1:0:i==="paymentMethod"?x.paymentMethod.localeCompare(w.paymentMethod):0,C=i==="timestamp"?new Date(w.timestamp).getTime():i==="amount"?w.amount:i==="status"?w.success?1:0:i==="paymentMethod"?w.paymentMethod.localeCompare(x.paymentMethod):0;return l==="asc"?S-C:C-S});const u=r.pageSize||50,d=r.page||1,f=(d-1)*u;return{items:n.slice(f,f+u).map(x=>({id:x.transactionId,timestamp:x.timestamp,amount:x.amount,paymentMethod:x.paymentMethod,status:x.success?"completed":"failed",customerEmail:void 0,description:void 0,requiresCompliance:!!x.requiresFintracReport})),totalCount:n.length,page:d,pageSize:u,hasNextPage:f+u<n.length,hasPreviousPage:d>1}}async connectTerminalDevice(e){if(!this.systemStatus.stripeTerminal.initialized)throw new Error("Stripe Terminal not initialized");const r=await En.connectToDevice(e);return this.systemStatus.stripeTerminal.connectionStatus=En.getConnectionStatus(),r}async disconnectTerminalDevice(){this.systemStatus.stripeTerminal.initialized&&(await En.disconnect(),this.systemStatus.stripeTerminal.connectionStatus=En.getConnectionStatus())}async processTerminalPayment(e,r){if(!this.systemStatus.stripeTerminal.initialized)throw new Error("Stripe Terminal not initialized");const n={amount:Math.round(e.amount*100),currency:"cad",description:e.description,metadata:e.metadata,receiptEmail:e.receiptEmail},i=await En.processPayment(n);return{success:i.success,paymentMethod:"stripe_terminal",transactionId:r,amount:e.amount,currency:"CAD",timestamp:new Date().toISOString(),terminalResult:i,paymentMethodDetails:i.paymentMethod?{type:i.paymentMethod.type,cardDetails:i.paymentMethod.cardDetails}:void 0,error:i.error,errorType:i.errorType,requiresFintracReport:e.amount>=1e4,complianceLevel:this.getComplianceLevel(e.amount)}}async processCryptoPayment(e,r){if(!this.systemStatus.cryptocurrency.initialized)throw new Error("Cryptocurrency service not initialized");if(!e.cryptocurrency||!e.recipientWallet)throw new Error("Cryptocurrency and recipient wallet required for crypto payments");const n={amount:e.amount,cryptocurrency:e.cryptocurrency,recipientWallet:e.recipientWallet,senderWallet:e.senderWallet,description:e.description,metadata:e.metadata,customerEmail:e.customerEmail,customerId:e.customerId},i=await to.processPayment(n),l={success:i.success,paymentMethod:"cryptocurrency",transactionId:r,amount:e.amount,currency:"CAD",timestamp:new Date().toISOString(),cryptoResult:i,txHash:i.txHash,blockExplorerUrl:i.blockExplorerUrl,cryptoAmount:i.amountCrypto,exchangeRate:i.rate,error:i.error,errorType:i.errorType,requiresFintracReport:e.amount>=1e3,complianceLevel:this.getCryptoComplianceLevel(e.amount)};if(i.success&&l.requiresFintracReport)try{await this.processCryptoFintracReporting(l,e)}catch(u){console.error("Error processing crypto FINTRAC reporting:",u)}return l}async processCashPayment(e,r){return console.log("💵 Processing cash payment..."),await this.delay(1e3),{success:!0,paymentMethod:"cash",transactionId:r,amount:e.amount,currency:"CAD",timestamp:new Date().toISOString(),requiresFintracReport:e.amount>=1e4,complianceLevel:this.getComplianceLevel(e.amount)}}async processInteracPayment(e,r){console.log("🏧 Processing Interac payment..."),await this.delay(2e3);const n=Math.random()>.02;return{success:n,paymentMethod:"interac",transactionId:r,amount:e.amount,currency:"CAD",timestamp:new Date().toISOString(),error:n?void 0:"Interac transaction declined",errorType:n?void 0:"card_declined",requiresFintracReport:e.amount>=1e4,complianceLevel:this.getComplianceLevel(e.amount)}}getComplianceLevel(e){return e>=1e4?"lctr_required":e>=3e3?"enhanced_records":"none"}getCryptoComplianceLevel(e){return e>=1e4?"lctr_required":e>=1e3?"enhanced_records":"none"}async processCryptoFintracReporting(e,r){if(!(!e.cryptoResult||!r.cryptocurrency))try{const n=await nT.processCompletedCryptoTransaction(e);console.log("📋 Crypto FINTRAC reporting processed:",{transactionId:e.transactionId,reportsGenerated:n.reportsGenerated,immediateAction:n.immediateAction,deadline:n.deadline}),this.broadcastComplianceEvent(e,n),this.storeComplianceRecord(e,n)}catch(n){console.error("Crypto FINTRAC reporting failed:",n),this.createManualReviewAlert(e,n instanceof Error?n.message:"Unknown error")}}broadcastComplianceEvent(e,r){var n;window.dispatchEvent(new CustomEvent("cryptoComplianceProcessed",{detail:{transactionId:e.transactionId,amount:e.amount,cryptocurrency:(n=e.cryptoResult)==null?void 0:n.cryptocurrency,reportsGenerated:r.reportsGenerated,immediateAction:r.immediateAction,deadline:r.deadline,timestamp:new Date().toISOString()}})),r.immediateAction&&window.dispatchEvent(new CustomEvent("complianceAlertCritical",{detail:{type:"crypto_immediate_action",transactionId:e.transactionId,message:`Crypto transaction ${e.transactionId} requires immediate FINTRAC action`,severity:"critical"}}))}storeComplianceRecord(e,r){var n,i;try{const l={transactionId:e.transactionId,paymentMethod:e.paymentMethod,amount:e.amount,cryptocurrency:(n=e.cryptoResult)==null?void 0:n.cryptocurrency,txHash:(i=e.cryptoResult)==null?void 0:i.txHash,reportsGenerated:r.reportsGenerated,immediateAction:r.immediateAction,deadline:r.deadline,processedAt:new Date().toISOString(),complianceLevel:e.complianceLevel},u=JSON.parse(localStorage.getItem("complianceRecords")||"[]");u.unshift(l),u.length>500&&u.splice(500),localStorage.setItem("complianceRecords",JSON.stringify(u))}catch(l){console.error("Failed to store compliance record:",l)}}createManualReviewAlert(e,r){var l;const n={id:`manual-review-${e.transactionId}`,type:"manual_review_required",severity:"high",transactionId:e.transactionId,amount:e.amount,cryptocurrency:(l=e.cryptoResult)==null?void 0:l.cryptocurrency,error:r,createdAt:new Date().toISOString(),acknowledged:!1},i=JSON.parse(localStorage.getItem("complianceAlerts")||"[]");i.unshift(n),localStorage.setItem("complianceAlerts",JSON.stringify(i)),window.dispatchEvent(new CustomEvent("complianceAlertCreated",{detail:n}))}checkComplianceRequirements(e){e.requiresFintracReport&&e.success&&(localStorage.setItem("pendingCompliancePayment",JSON.stringify({transactionId:e.transactionId,amount:e.amount,paymentMethod:e.paymentMethod,complianceLevel:e.complianceLevel,timestamp:e.timestamp})),window.dispatchEvent(new CustomEvent("paymentComplianceRequired",{detail:{transactionId:e.transactionId,amount:e.amount,complianceLevel:e.complianceLevel}})))}addToHistory(e){this.paymentHistory.push(e),this.paymentHistory.length>1e3&&(this.paymentHistory=this.paymentHistory.slice(-1e3)),this.savePaymentHistory()}loadPaymentHistory(){try{const e=localStorage.getItem("paymentHistory");e&&(this.paymentHistory=JSON.parse(e))}catch(e){console.warn("Failed to load payment history:",e)}}savePaymentHistory(){try{const e=this.paymentHistory.slice(-100);localStorage.setItem("paymentHistory",JSON.stringify(e))}catch(e){console.warn("Failed to save payment history:",e)}}delay(e){return new Promise(r=>setTimeout(r,e))}broadcastPaymentEvent(e,r){try{typeof window<"u"&&window.dispatchEvent(new CustomEvent(e,{detail:{timestamp:new Date().toISOString(),result:r}})),localStorage.setItem("lastPaymentEvent",JSON.stringify({type:e,timestamp:new Date().toISOString(),result:r}))}catch(n){console.warn("Failed to broadcast payment event:",n)}}}const U9=new F9,$9=({onRefresh:t})=>{const[e,r]=b.useState([]),[n,i]=b.useState(null),[l,u]=b.useState({apiKey:"",environment:"test",merchantDisplayName:"",locationId:"",autoConnect:!0,defaultReceiptEmail:""}),[d,f]=b.useState(!1),[h,p]=b.useState(!1),[g,x]=b.useState(!1),[w,S]=b.useState(!1),[C,N]=b.useState(null),[A,j]=b.useState(null);b.useEffect(()=>{E()},[]);const E=async()=>{p(!0);try{const V=lr.terminal.getConnectionStatus();if(i(V),lr.main.getSystemStatus().stripeTerminal.initialized){const P=await lr.terminal.discoverDevices();r(P)}}catch(V){N("Failed to load terminal status"),console.error("Error loading terminal status:",V)}finally{p(!1)}},_=async()=>{x(!0),N(null);try{const V=await lr.terminal.discoverDevices();r(V),j(`Found ${V.length} device(s)`),setTimeout(()=>j(null),3e3)}catch(V){N("Failed to discover devices"),console.error("Error discovering devices:",V)}finally{x(!1)}},R=async V=>{S(!0),N(null);try{await lr.terminal.connectToDevice(V)?(j("Device connected successfully"),E(),t==null||t()):N("Failed to connect to device"),setTimeout(()=>j(null),3e3)}catch(P){N("Connection failed"),console.error("Error connecting to device:",P)}finally{S(!1)}},k=async()=>{p(!0),N(null);try{await lr.terminal.disconnect(),j("Device disconnected"),E(),t==null||t(),setTimeout(()=>j(null),3e3)}catch(V){N("Failed to disconnect"),console.error("Error disconnecting:",V)}finally{p(!1)}},D=async()=>{p(!0),N(null);try{await lr.terminal.initialize(l)?(j("Configuration saved successfully"),E(),t==null||t()):N("Failed to initialize with new configuration"),setTimeout(()=>j(null),3e3)}catch(V){N("Failed to save configuration"),console.error("Error saving config:",V)}finally{p(!1)}},I=V=>{switch(V){case"connected":return s.jsx(ft,{className:"h-5 w-5 text-green-500"});case"connecting":case"reconnecting":return s.jsx(oo,{className:"h-5 w-5 text-yellow-500 animate-spin"});case"not_connected":return s.jsx(us,{className:"h-5 w-5 text-red-500"});default:return s.jsx(rr,{className:"h-5 w-5 text-gray-500"})}},z=V=>{switch(V){case"online":return"bg-green-100 text-green-800";case"busy":return"bg-yellow-100 text-yellow-800";case"offline":case"needs_reboot":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Terminal Status"}),n&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[I(n.status),s.jsx("span",{className:"ml-2 font-medium text-gray-900 capitalize",children:n.status.replace("_"," ")})]}),n.device&&s.jsxs("div",{className:"text-sm text-gray-600",children:["Connected to: ",n.device.label]}),n.status==="connected"&&s.jsxs("button",{onClick:k,disabled:h,className:"flex items-center px-3 py-1 text-sm bg-red-100 text-red-700 rounded-md hover:bg-red-200 transition-colors disabled:opacity-50",children:[s.jsx(fy,{className:"h-4 w-4 mr-1"}),"Disconnect"]})]}),(n==null?void 0:n.connectionError)&&s.jsx("div",{className:"mt-3 p-3 bg-red-100 border border-red-300 text-red-700 rounded-md text-sm",children:n.connectionError})]}),s.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Terminal Configuration"}),s.jsxs("button",{onClick:D,disabled:h||!l.apiKey||!l.merchantDisplayName,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(Pd,{className:"h-4 w-4 mr-2"}),"Save Config"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Key *"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:d?"text":"password",value:l.apiKey,onChange:V=>u(P=>({...P,apiKey:V.target.value})),className:"w-full pr-10 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"sk_test_..."}),s.jsx("button",{type:"button",onClick:()=>f(!d),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:d?s.jsx(MC,{className:"h-4 w-4 text-gray-400"}):s.jsx(Md,{className:"h-4 w-4 text-gray-400"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Environment"}),s.jsxs("select",{value:l.environment,onChange:V=>u(P=>({...P,environment:V.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"test",children:"Test"}),s.jsx("option",{value:"live",children:"Live"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Merchant Display Name *"}),s.jsx("input",{type:"text",value:l.merchantDisplayName,onChange:V=>u(P=>({...P,merchantDisplayName:V.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Your Business Name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location ID"}),s.jsx("input",{type:"text",value:l.locationId,onChange:V=>u(P=>({...P,locationId:V.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"tml_..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Receipt Email"}),s.jsx("input",{type:"email",value:l.defaultReceiptEmail,onChange:V=>u(P=>({...P,defaultReceiptEmail:V.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"receipts@yourstore.com"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"autoConnect",checked:l.autoConnect,onChange:V=>u(P=>({...P,autoConnect:V.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"autoConnect",className:"ml-2 block text-sm text-gray-900",children:"Auto-connect to available devices"})]})]})]}),s.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Available Devices"}),s.jsxs("button",{onClick:_,disabled:g,className:"flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:[s.jsx(oo,{className:`h-4 w-4 mr-2 ${g?"animate-spin":""}`}),"Discover Devices"]})]}),h?s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(pn,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-lg font-medium",children:"No devices found"}),s.jsx("p",{className:"mt-2",children:"Make sure your terminal devices are powered on and nearby"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(V=>{var P;return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:V.label}),s.jsx("p",{className:"text-sm text-gray-500",children:V.deviceType})]}),s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${z(V.status)}`,children:V.status})]}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[s.jsxs("div",{children:["Serial: ",V.serialNumber]}),s.jsxs("div",{children:["Software: ",V.softwareVersion]}),V.ipAddress&&s.jsxs("div",{children:["IP: ",V.ipAddress]}),V.batteryLevel&&s.jsxs("div",{children:["Battery: ",V.batteryLevel,"%"]}),s.jsxs("div",{children:["Last Seen: ",new Date(V.lastSeen).toLocaleString()]})]}),V.capabilities&&s.jsxs("div",{className:"mt-3 flex flex-wrap gap-1",children:[V.capabilities.contactless&&s.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:"Contactless"}),V.capabilities.chip&&s.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded",children:"Chip"}),V.capabilities.magstripe&&s.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded",children:"Magstripe"}),V.capabilities.pinEntry&&s.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded",children:"PIN Entry"})]}),s.jsx("div",{className:"mt-4",children:((P=n==null?void 0:n.device)==null?void 0:P.id)===V.id?s.jsxs("span",{className:"flex items-center text-green-600 text-sm font-medium",children:[s.jsx(Wu,{className:"h-4 w-4 mr-1"}),"Connected"]}):s.jsxs("button",{onClick:()=>R(V.id),disabled:w||V.status==="offline",className:"flex items-center px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(Wu,{className:"h-4 w-4 mr-1"}),"Connect"]})})]},V.id)})})]}),C&&s.jsx("div",{className:"bg-red-100 border border-red-300 text-red-700 px-4 py-3 rounded",children:C}),A&&s.jsx("div",{className:"bg-green-100 border border-green-300 text-green-700 px-4 py-3 rounded",children:A})]})},z9=({onRefresh:t})=>{const[e,r]=b.useState([]),[n,i]=b.useState({supportedCurrencies:["BTC","ETH","SOL","AVAX","USDC"],rateUpdateInterval:3e4,confirmationThresholds:{BTC:1,ETH:12,SOL:1,AVAX:1,USDC:12},networkFeePreferences:{BTC:{low:1,medium:5,high:10},ETH:{low:20,medium:30,high:50},SOL:{low:25e-5,medium:5e-4,high:.001},AVAX:{low:.001,medium:.005,high:.01},USDC:{low:20,medium:30,high:50}},walletValidationLevel:"extended"}),[l,u]=b.useState(!1),[d,f]=b.useState(!1),[h,p]=b.useState(null),[g,x]=b.useState(null),[w,S]=b.useState(null);b.useEffect(()=>{C()},[]);const C=async(D=!1)=>{f(!0),p(null);try{const I=await lr.crypto.getCryptoRates(D);r(I),S(new Date().toISOString()),D&&(x("Rates updated successfully"),setTimeout(()=>x(null),3e3))}catch(I){p("Failed to load cryptocurrency rates"),console.error("Error loading crypto rates:",I)}finally{f(!1)}},N=async()=>{u(!0),p(null);try{await new Promise(D=>setTimeout(D,1e3)),x("Configuration saved successfully"),t==null||t(),setTimeout(()=>x(null),3e3)}catch(D){p("Failed to save configuration"),console.error("Error saving config:",D)}finally{u(!1)}},A=D=>{i(I=>({...I,supportedCurrencies:I.supportedCurrencies.includes(D)?I.supportedCurrencies.filter(z=>z!==D):[...I.supportedCurrencies,D]}))},j=(D,I)=>{i(z=>({...z,confirmationThresholds:{...z.confirmationThresholds,[D]:I}}))},E=(D,I,z)=>{i(V=>({...V,networkFeePreferences:{...V.networkFeePreferences,[D]:{...V.networkFeePreferences[D],[I]:z}}}))},_=D=>s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-400 to-yellow-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:D}),R=D=>new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD",minimumFractionDigits:2,maximumFractionDigits:8}).format(D),k=D=>{const I=D>=0;return s.jsxs("div",{className:`flex items-center ${I?"text-green-600":"text-red-600"}`,children:[I?s.jsx(zC,{className:"h-4 w-4 mr-1"}):s.jsx(A4,{className:"h-4 w-4 mr-1"}),Math.abs(D).toFixed(2),"%"]})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-orange-200 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-orange-900",children:"Current Crypto Rates"}),s.jsxs("button",{onClick:()=>C(!0),disabled:d,className:"flex items-center px-3 py-1 bg-orange-100 text-orange-700 rounded-md hover:bg-orange-200 transition-colors disabled:opacity-50",children:[s.jsx(oo,{className:`h-4 w-4 mr-1 ${d?"animate-spin":""}`}),"Refresh"]})]}),w&&s.jsxs("p",{className:"text-sm text-orange-700 mb-4",children:["Last updated: ",new Date(w).toLocaleString()]}),d?s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})}):e.length===0?s.jsxs("div",{className:"text-center py-8 text-orange-600",children:[s.jsx(lo,{className:"h-12 w-12 text-orange-400 mx-auto mb-4"}),s.jsx("p",{className:"text-lg font-medium",children:"No rates available"}),s.jsx("p",{className:"mt-2",children:"Unable to fetch cryptocurrency rates"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(D=>s.jsxs("div",{className:"bg-white rounded-lg p-4 border border-orange-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center",children:[_(D.symbol),s.jsx("div",{className:"ml-3",children:s.jsx("h4",{className:"font-medium text-gray-900",children:D.symbol})})]}),k(D.change24h)]}),s.jsx("div",{className:"text-lg font-semibold text-gray-900 mb-1",children:R(D.priceCAD)}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Confidence: ",D.confidence?`${D.confidence}%`:"N/A"]})]},D.symbol))})]}),s.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Cryptocurrency Configuration"}),s.jsxs("button",{onClick:N,disabled:l,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[s.jsx(Pd,{className:"h-4 w-4 mr-2"}),"Save Configuration"]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Supported Cryptocurrencies"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:["BTC","ETH","SOL","AVAX","USDC"].map(D=>s.jsxs("label",{className:"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[s.jsx("input",{type:"checkbox",checked:n.supportedCurrencies.includes(D),onChange:()=>A(D),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900",children:D})]},D))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rate Update Interval (seconds)"}),s.jsxs("select",{value:n.rateUpdateInterval/1e3,onChange:D=>i(I=>({...I,rateUpdateInterval:parseInt(D.target.value)*1e3})),className:"w-full md:w-48 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:10,children:"10 seconds"}),s.jsx("option",{value:30,children:"30 seconds"}),s.jsx("option",{value:60,children:"1 minute"}),s.jsx("option",{value:300,children:"5 minutes"}),s.jsx("option",{value:600,children:"10 minutes"})]}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"How frequently to update cryptocurrency rates"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wallet Validation Level"}),s.jsxs("select",{value:n.walletValidationLevel,onChange:D=>i(I=>({...I,walletValidationLevel:D.target.value})),className:"w-full md:w-48 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"basic",children:"Basic"}),s.jsx("option",{value:"extended",children:"Extended"})]}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Level of validation for wallet addresses"})]})]})]}),s.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirmation Thresholds"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.supportedCurrencies.map(D=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[_(D),s.jsx("h4",{className:"ml-2 font-medium text-gray-900",children:D})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Required Confirmations"}),s.jsx("input",{type:"number",min:"1",max:"100",value:n.confirmationThresholds[D],onChange:I=>j(D,parseInt(I.target.value)||1),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]},D))})]}),s.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Network Fee Preferences"}),s.jsx("div",{className:"space-y-6",children:n.supportedCurrencies.map(D=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[_(D),s.jsx("h4",{className:"ml-2 font-medium text-gray-900",children:D})]}),s.jsx("div",{className:"grid grid-cols-3 gap-4",children:["low","medium","high"].map(I=>s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 capitalize",children:[I," Priority"]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",step:"0.000001",value:n.networkFeePreferences[D][I],onChange:z=>E(D,I,parseFloat(z.target.value)||0),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-sm text-gray-500",children:D==="BTC"||D==="SOL"||D==="AVAX"?D:"Gwei"})]})]},I))})]},D))})]}),s.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(rn,{className:"h-5 w-5 text-amber-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-amber-800",children:"Security Notice"}),s.jsx("p",{className:"mt-1 text-sm text-amber-700",children:"Cryptocurrency transactions are irreversible. Always verify wallet addresses and amounts before processing payments. Consider implementing additional verification steps for large transactions."})]})]})}),h&&s.jsx("div",{className:"bg-red-100 border border-red-300 text-red-700 px-4 py-3 rounded",children:h}),g&&s.jsx("div",{className:"bg-green-100 border border-green-300 text-green-700 px-4 py-3 rounded",children:g})]})},B9=()=>{const[t,e]=b.useState([{method:"stripe_terminal",enabled:!0,displayName:"Credit/Debit Cards",description:"Accept card payments via Stripe Terminal",icon:pn,processingFee:"2.9% + 30¢",settlementTime:"1-2 business days",minimumAmount:.5,maximumAmount:999999,currencies:["CAD","USD"],features:["EMV Chip","Contactless","PIN Verification","Receipts"],risks:["Chargebacks","Fraud"]},{method:"interac",enabled:!0,displayName:"Interac Debit",description:"Canadian Interac debit payments",icon:$C,processingFee:"1.5% + 5¢",settlementTime:"Real-time",minimumAmount:.01,maximumAmount:3e3,currencies:["CAD"],features:["PIN Required","Real-time Settlement","Low Cost"],risks:["Network Downtime"]},{method:"cryptocurrency",enabled:!1,displayName:"Cryptocurrency",description:"Accept Bitcoin, Ethereum, and other cryptocurrencies",icon:lo,processingFee:"Network fees only",settlementTime:"10 minutes - 1 hour",minimumAmount:1,maximumAmount:5e4,currencies:["BTC","ETH","SOL","AVAX","USDC"],features:["Irreversible","Global","Low Fees","No Chargebacks"],risks:["Price Volatility","Regulatory Changes","Technical Complexity"]},{method:"cash",enabled:!0,displayName:"Cash",description:"Traditional cash payments with manual recording",icon:ia,processingFee:"None",settlementTime:"Immediate",minimumAmount:.01,maximumAmount:1e4,currencies:["CAD"],features:["No Processing Fees","Immediate Settlement","Offline"],risks:["Theft","Counterfeiting","Manual Errors","FINTRAC Reporting"]}]),[r,n]=b.useState(null),[i,l]=b.useState([]),[u,d]=b.useState("week"),[f,h]=b.useState(!1),[p,g]=b.useState(null),[x,w]=b.useState(null);b.useEffect(()=>{S()},[u]);const S=async()=>{h(!0),g(null);try{const R=lr.main.getAnalytics();n(R);const k=lr.main.getPaymentHistory({startDate:C(u).start,endDate:C(u).end});l(k.items)}catch(R){g("Failed to load payment analytics"),console.error("Error loading analytics:",R)}finally{h(!1)}},C=R=>{const k=new Date().toISOString(),D=new Date;switch(R){case"day":D.setDate(D.getDate()-1);break;case"week":D.setDate(D.getDate()-7);break;case"month":D.setMonth(D.getMonth()-1);break}return{start:D.toISOString(),end:k}},N=async R=>{var k,D;e(I=>I.map(z=>z.method===R?{...z,enabled:!z.enabled}:z)),w(`${(k=t.find(I=>I.method===R))==null?void 0:k.displayName} ${(D=t.find(I=>I.method===R))!=null&&D.enabled?"disabled":"enabled"}`),setTimeout(()=>w(null),3e3)},A=R=>R?"text-green-600":"text-gray-400",j=R=>R?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200",E=R=>new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"}).format(R),_=R=>`${(R*100).toFixed(1)}%`;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-green-900",children:"Payment Methods Analytics"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(cy,{className:"h-4 w-4 text-green-700"}),s.jsxs("select",{value:u,onChange:R=>d(R.target.value),className:"px-3 py-1 border border-green-300 rounded-md text-sm bg-white",children:[s.jsx("option",{value:"day",children:"Last 24 Hours"}),s.jsx("option",{value:"week",children:"Last 7 Days"}),s.jsx("option",{value:"month",children:"Last 30 Days"})]})]})]}),f?s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}):r?s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Volume"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E(r.summary.totalVolume)})]}),s.jsx(zC,{className:"h-8 w-8 text-green-500"})]})}),s.jsx("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Transactions"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.summary.totalTransactions})]}),s.jsx(pn,{className:"h-8 w-8 text-blue-500"})]})}),s.jsx("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Success Rate"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_(r.summary.successRate)})]}),s.jsx(ft,{className:"h-8 w-8 text-green-500"})]})}),s.jsx("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg. Amount"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E(r.summary.averageAmount)})]}),s.jsx(ia,{className:"h-8 w-8 text-yellow-500"})]})})]}):null,r&&r.byMethod.length>0&&s.jsxs("div",{className:"mt-6",children:[s.jsx("h4",{className:"text-md font-semibold text-green-900 mb-3",children:"Performance by Method"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:r.byMethod.map(R=>{const k=t.find(I=>I.method===R.method),D=(k==null?void 0:k.icon)||pn;return s.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-200",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx(D,{className:"h-5 w-5 text-gray-600 mr-2"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:(k==null?void 0:k.displayName)||R.method})]}),s.jsxs("div",{className:"space-y-1 text-xs text-gray-600",children:[s.jsxs("div",{children:["Volume: ",E(R.volume)]}),s.jsxs("div",{children:["Count: ",R.count]}),s.jsxs("div",{children:["Success: ",_(R.successRate)]})]})]},R.method)})})]})]}),s.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Payment Methods Configuration"}),s.jsx("div",{className:"space-y-4",children:t.map(R=>{const k=R.icon;return s.jsx("div",{className:`border rounded-lg p-6 transition-all ${j(R.enabled)}`,children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[s.jsx("div",{className:`p-3 rounded-lg ${R.enabled?"bg-white":"bg-gray-100"}`,children:s.jsx(k,{className:`h-6 w-6 ${A(R.enabled)}`})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:R.displayName}),s.jsx("button",{onClick:()=>N(R.method),className:"flex items-center",children:R.enabled?s.jsx(C4,{className:"h-8 w-8 text-green-500"}):s.jsx(S4,{className:"h-8 w-8 text-gray-400"})})]}),s.jsx("p",{className:"text-gray-600 mb-4",children:R.description}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Processing Fee"}),s.jsx("div",{className:"text-sm text-gray-900",children:R.processingFee})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Settlement Time"}),s.jsx("div",{className:"text-sm text-gray-900",children:R.settlementTime})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Amount Range"}),s.jsxs("div",{className:"text-sm text-gray-900",children:[E(R.minimumAmount)," - ",E(R.maximumAmount)]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Currencies"}),s.jsx("div",{className:"text-sm text-gray-900",children:R.currencies.join(", ")})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-500 block mb-2",children:"Features"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:R.features.map(D=>s.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-md",children:D},D))})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-500 block mb-2",children:"Risk Factors"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:R.risks.map(D=>s.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-md",children:D},D))})]})]})]})]})})},R.method)})})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(cr,{className:"h-5 w-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Compliance Requirements"}),s.jsx("p",{className:"mt-1 text-sm text-blue-700",children:"All payment methods must comply with FINTRAC regulations. Cash transactions over $3,000 require enhanced records, and transactions over $10,000 require Large Cash Transaction Reports (LCTR)."}),s.jsx("p",{className:"mt-2 text-sm text-blue-700",children:"Cryptocurrency transactions may have additional regulatory requirements depending on the amount and customer risk profile."})]})]})}),p&&s.jsx("div",{className:"bg-red-100 border border-red-300 text-red-700 px-4 py-3 rounded",children:p}),x&&s.jsx("div",{className:"bg-green-100 border border-green-300 text-green-700 px-4 py-3 rounded",children:x})]})},q9=({className:t=""})=>{const[e,r]=b.useState("overview"),[n,i]=b.useState(null),[l,u]=b.useState(!0),[d,f]=b.useState(null);b.useEffect(()=>{h()},[]);const h=async()=>{u(!0),f(null);try{const w=lr.main.getSystemStatus();i(w)}catch(w){f("Failed to load system status"),console.error("Error loading payment system status:",w)}finally{u(!1)}},p=[{id:"overview",label:"Overview",icon:Id,description:"System status and overview"},{id:"terminal",label:"Stripe Terminal",icon:pn,description:"Terminal device configuration"},{id:"crypto",label:"Cryptocurrency",icon:lo,description:"Crypto payment settings"},{id:"methods",label:"Payment Methods",icon:rn,description:"Manage payment methods"}],g=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Payment System Status"}),l?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):d?s.jsx("div",{className:"bg-red-100 border border-red-300 text-red-700 px-4 py-3 rounded",children:d}):n?s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-lg p-4 border",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Overall Status"}),s.jsx("div",{className:`w-3 h-3 rounded-full ${n.overall.status==="fully_operational"?"bg-green-500":n.overall.status==="partial_operational"?"bg-yellow-500":"bg-red-500"}`})]}),s.jsx("div",{className:"text-lg font-semibold text-gray-900 capitalize",children:n.overall.status.replace("_"," ")}),s.jsxs("div",{className:"text-sm text-gray-500",children:[n.overall.operationalSystems," of ",n.overall.totalSystems," systems online"]})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 border",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Stripe Terminal"}),s.jsx("div",{className:`w-3 h-3 rounded-full ${n.stripeTerminal.initialized&&n.stripeTerminal.health.status==="healthy"?"bg-green-500":"bg-red-500"}`})]}),s.jsx("div",{className:"text-lg font-semibold text-gray-900",children:n.stripeTerminal.initialized?"Online":"Offline"}),s.jsxs("div",{className:"text-sm text-gray-500",children:[n.stripeTerminal.availableDevices.length," device(s) available"]})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 border",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Cryptocurrency"}),s.jsx("div",{className:`w-3 h-3 rounded-full ${n.cryptocurrency.initialized&&n.cryptocurrency.health.status==="healthy"?"bg-green-500":"bg-red-500"}`})]}),s.jsx("div",{className:"text-lg font-semibold text-gray-900",children:n.cryptocurrency.initialized?"Online":"Offline"}),s.jsxs("div",{className:"text-sm text-gray-500",children:[n.cryptocurrency.supportedCurrencies.length," currencies supported"]})]})]}):null]}),s.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("button",{onClick:()=>r("terminal"),className:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors",children:[s.jsx(pn,{className:"h-6 w-6 text-blue-600 mr-3"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium text-gray-900",children:"Configure Terminal"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Setup Stripe terminal devices"})]})]}),s.jsxs("button",{onClick:()=>r("crypto"),className:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors",children:[s.jsx(lo,{className:"h-6 w-6 text-blue-600 mr-3"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium text-gray-900",children:"Crypto Settings"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Manage cryptocurrency options"})]})]})]})]}),n&&s.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Information"}),s.jsxs("dl",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Last Health Check"}),s.jsx("dd",{className:"text-sm text-gray-900",children:new Date(n.overall.lastHealthCheck).toLocaleString()})]}),n.cryptocurrency.lastRateUpdate&&s.jsxs("div",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Last Rate Update"}),s.jsx("dd",{className:"text-sm text-gray-900",children:new Date(n.cryptocurrency.lastRateUpdate).toLocaleString()})]})]})]})]}),x=()=>{switch(e){case"overview":return s.jsx(g,{});case"terminal":return s.jsx($9,{onRefresh:h});case"crypto":return s.jsx(z9,{onRefresh:h});case"methods":return s.jsx(B9,{});default:return s.jsx(g,{})}};return s.jsxs("div",{className:`bg-white rounded-xl shadow-md ${t}`,children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(UC,{className:"h-6 w-6 text-blue-600 mr-2"}),s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Payment Settings"})]})}),s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:p.map(w=>{const S=w.icon,C=e===w.id;return s.jsxs("button",{onClick:()=>r(w.id),className:`flex items-center py-4 px-1 border-b-2 font-medium text-sm transition-colors ${C?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,title:w.description,children:[s.jsx(S,{className:"h-4 w-4 mr-2"}),w.label]},w.id)})})}),s.jsx("div",{className:"p-6",children:x()})]})},lr={main:U9,terminal:En,crypto:to},H9=({selectedMethod:t,onMethodChange:e,amount:r,currency:n,onPaymentProcessed:i,className:l=""})=>{const[u,d]=b.useState(null),[f,h]=b.useState([]),[p,g]=b.useState([]),[x,w]=b.useState("BTC"),[S,C]=b.useState(""),[N,A]=b.useState(!1),[j,E]=b.useState("debit"),_=[{symbol:"BTC",name:"Bitcoin",icon:"₿"},{symbol:"ETH",name:"Ethereum",icon:"Ξ"},{symbol:"SOL",name:"Solana",icon:"◎"},{symbol:"AVAX",name:"Avalanche",icon:"🔺"},{symbol:"USDC",name:"USD Coin",icon:"$"}];b.useEffect(()=>{R(),t==="cryptocurrency"&&k()},[t]);const R=async()=>{try{const re=lr.main.getSystemStatus();d(re.stripeTerminal.connectionStatus),h(re.stripeTerminal.availableDevices)}catch(re){console.error("Error loading payment system status:",re)}},k=async()=>{try{const re=await lr.crypto.getCryptoRates();g(re)}catch(re){console.error("Error loading crypto rates:",re)}},D=async()=>{var re,ee,U,J,pe;if(u!=null&&u.device){A(!0);try{const ce={amount:r,currency:n,description:`Currency exchange: ${r} ${n}`,metadata:{transactionType:"currency_exchange",paymentType:j}},oe=await lr.terminal.processPayment(ce);oe.success&&i&&i({paymentMethod:"stripe_terminal",paymentResult:oe,paymentReferenceId:(re=oe.paymentIntent)==null?void 0:re.id,paymentDetails:{terminalDeviceId:u.device.id,cardLast4:(U=(ee=oe.paymentMethod)==null?void 0:ee.cardDetails)==null?void 0:U.last4,cardBrand:(pe=(J=oe.paymentMethod)==null?void 0:J.cardDetails)==null?void 0:pe.brand}})}catch(ce){console.error("Terminal payment failed:",ce)}finally{A(!1)}}},I=async()=>{if(S){A(!0);try{const re={amount:r,cryptocurrency:x,recipientWallet:S,description:`Currency exchange: ${r} ${n}`,metadata:{transactionType:"currency_exchange"}},ee=await lr.crypto.processPayment(re);if(ee.success&&i){const U=p.find(J=>J.symbol===x);i({paymentMethod:"cryptocurrency",paymentResult:ee,paymentReferenceId:ee.txHash,paymentDetails:{cryptoTxHash:ee.txHash,cryptoWallet:S,cryptoAmount:ee.amountCrypto,exchangeRate:U==null?void 0:U.priceCAD}})}}catch(re){console.error("Crypto payment failed:",re)}finally{A(!1)}}},z=re=>{const ee=p.find(U=>U.symbol===re);return ee?(r/ee.priceCAD).toFixed(8):"0"},V=()=>s.jsx("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${t==="cash"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>e("cash"),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ia,{className:"h-6 w-6 text-green-600 mr-3"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:"Cash"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Traditional cash payment"})]})]}),t==="cash"&&s.jsx(ft,{className:"h-5 w-5 text-blue-500"})]})}),P=()=>s.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${t==="stripe_terminal"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>e("stripe_terminal"),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(pn,{className:"h-6 w-6 text-blue-600 mr-3"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:"Card Payment"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Debit/Credit/Interac via Terminal"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[(u==null?void 0:u.status)==="connected"?s.jsx(Wu,{className:"h-5 w-5 text-green-500"}):s.jsx(fy,{className:"h-5 w-5 text-red-500"}),t==="stripe_terminal"&&s.jsx(ft,{className:"h-5 w-5 text-blue-500"})]})]}),t==="stripe_terminal"&&s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:re=>{re.stopPropagation(),E("debit")},className:`flex-1 py-2 px-3 rounded text-sm font-medium transition-colors ${j==="debit"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Debit Card"}),s.jsx("button",{onClick:re=>{re.stopPropagation(),E("credit")},className:`flex-1 py-2 px-3 rounded text-sm font-medium transition-colors ${j==="credit"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Credit Card"})]}),(u==null?void 0:u.status)==="connected"&&u.device&&s.jsx("div",{className:"bg-green-50 p-3 rounded border border-green-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-green-800",children:u.device.label}),s.jsxs("p",{className:"text-xs text-green-600",children:[u.device.deviceType," • Ready"]})]}),s.jsx("button",{onClick:re=>{re.stopPropagation(),D()},disabled:N,className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 disabled:opacity-50",children:N?"Processing...":"Process Payment"})]})}),(u==null?void 0:u.status)!=="connected"&&s.jsx("div",{className:"bg-yellow-50 p-3 rounded border border-yellow-200",children:s.jsx("p",{className:"text-sm text-yellow-800",children:"Terminal not connected. Please connect a terminal device first."})})]})]}),$=()=>s.jsx("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${t==="interac"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>e("interac"),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx($C,{className:"h-6 w-6 text-red-600 mr-3"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:"Interac"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Interac debit payment"})]})]}),t==="interac"&&s.jsx(ft,{className:"h-5 w-5 text-blue-500"})]})}),Q=()=>{var re,ee;return s.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${t==="cryptocurrency"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>e("cryptocurrency"),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(lo,{className:"h-6 w-6 text-orange-500 mr-3"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:"Cryptocurrency"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Bitcoin, Ethereum, and more"})]})]}),t==="cryptocurrency"&&s.jsx(ft,{className:"h-5 w-5 text-blue-500"})]}),t==="cryptocurrency"&&s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Cryptocurrency"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:_.map(U=>s.jsxs("button",{onClick:J=>{J.stopPropagation(),w(U.symbol)},className:`p-2 rounded text-sm font-medium transition-colors ${x===U.symbol?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[s.jsx("span",{className:"mr-1",children:U.icon}),U.symbol]},U.symbol))})]}),p.length>0&&s.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsx("strong",{children:"Amount:"})," ",z(x)," ",x]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Rate: ",(ee=(re=p.find(U=>U.symbol===x))==null?void 0:re.priceCAD)==null?void 0:ee.toLocaleString()," CAD"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Recipient Wallet Address"}),s.jsx("input",{type:"text",value:S,onChange:U=>C(U.target.value),placeholder:`Enter ${x} wallet address`,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onClick:U=>U.stopPropagation()})]}),S&&s.jsx("button",{onClick:U=>{U.stopPropagation(),I()},disabled:N,className:"w-full py-2 bg-orange-600 text-white text-sm rounded hover:bg-orange-700 disabled:opacity-50",children:N?"Processing...":`Pay with ${x}`})]})]})};return s.jsx("div",{className:`space-y-4 ${l}`,children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Payment Method"}),s.jsxs("div",{className:"space-y-3",children:[V(),P(),$(),Q()]})]})})},V9=({isOpen:t,onClose:e,amount:r,currency:n,onPaymentCompleted:i})=>{const[l,u]=b.useState("cash"),[d,f]=b.useState("selecting"),[h,p]=b.useState(null),[g,x]=b.useState(null);b.useEffect(()=>{t&&(u("cash"),f("selecting"),p(null),x(null))},[t]);const w=A=>{p(A),f("completed"),setTimeout(()=>{i(A),e()},2e3)},S=()=>{if(l==="cash"){const A={paymentMethod:"cash",paymentReferenceId:`CASH-${Date.now()}`,paymentDetails:{}};w(A)}},C=()=>{switch(d){case"processing":return s.jsx(Xu,{className:"h-8 w-8 text-blue-600 animate-spin"});case"completed":return s.jsx(ft,{className:"h-8 w-8 text-green-600"});case"failed":return s.jsx(rr,{className:"h-8 w-8 text-red-600"});default:return null}},N=()=>d==="processing"?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Xu,{className:"h-12 w-12 text-blue-600 animate-spin mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Processing Payment"}),s.jsxs("p",{className:"text-gray-600",children:["Processing ",l==="cash"?"cash":l.replace("_"," ")," payment..."]})]}):d==="completed"?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(ft,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Payment Completed"}),s.jsx("p",{className:"text-gray-600",children:"Payment processed successfully!"}),(h==null?void 0:h.paymentReferenceId)&&s.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Reference: ",h.paymentReferenceId]})]}):d==="failed"?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(rr,{className:"h-12 w-12 text-red-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Payment Failed"}),s.jsx("p",{className:"text-gray-600 mb-4",children:g||"An error occurred while processing the payment."}),s.jsx("button",{onClick:()=>f("selecting"),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Try Again"})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Complete Payment"}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[r.toLocaleString()," ",n]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Transaction Amount"})]})]}),s.jsx(H9,{selectedMethod:l,onMethodChange:u,amount:r,currency:n,onPaymentProcessed:w}),l==="cash"&&s.jsx("div",{className:"border-t pt-4",children:s.jsx("button",{onClick:S,className:"w-full py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors",children:"Confirm Cash Payment"})})]});return s.jsx(yt,{isOpen:t,onClose:d==="processing"?void 0:e,title:s.jsxs("div",{className:"flex items-center",children:[d==="selecting"&&l==="cash"&&s.jsx(pn,{className:"h-5 w-5 text-green-600 mr-2"}),d==="selecting"&&l==="stripe_terminal"&&s.jsx(pn,{className:"h-5 w-5 text-blue-600 mr-2"}),d==="selecting"&&l==="cryptocurrency"&&s.jsx(lo,{className:"h-5 w-5 text-orange-500 mr-2"}),C(),s.jsx("span",{className:"ml-2",children:d==="selecting"?"Payment Method":d==="processing"?"Processing":d==="completed"?"Payment Complete":"Payment Failed"})]}),size:"lg",hideCloseButton:d==="processing",children:N()})},Y9=()=>{const[t,e]=b.useState("USD"),[r,n]=b.useState("CAD"),[i,l]=b.useState("100"),[u,d]=b.useState("1.5"),[f,h]=b.useState(""),[p,g]=b.useState(""),[x,w]=b.useState(!1),[S,C]=b.useState(null),[N,A]=b.useState(null),[j,E]=b.useState([]),[_,R]=b.useState(""),[k,D]=b.useState(!1),[I,z]=b.useState(!1),[V,P]=b.useState({firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",occupation:"",address:"",city:"",postalCode:"",country:"Canada",idType:"",idNumber:""}),[$,Q]=b.useState(!1),[re,ee]=b.useState(!1),[U,J]=b.useState(!1),[pe,ce]=b.useState(null),[oe,F]=b.useState({type:"success",message:"",visible:!1}),L=(B,ae)=>{F({type:B,message:ae,visible:!0})},X=()=>{F(B=>({...B,visible:!1}))},O=[{code:"USD",name:"US Dollar"},{code:"EUR",name:"Euro"},{code:"GBP",name:"British Pound"},{code:"CAD",name:"Canadian Dollar"},{code:"JPY",name:"Japanese Yen"},{code:"AUD",name:"Australian Dollar"},{code:"CHF",name:"Swiss Franc"}];b.useEffect(()=>{(async()=>{z(!0);try{const{default:ae}=await He(async()=>{const{default:Z}=await Promise.resolve().then(()=>ii);return{default:Z}},void 0),de=await ae.getAllCustomers();E(de||[])}catch(ae){console.error("Error loading customers:",ae),E([])}finally{z(!1)}})()},[]),b.useEffect(()=>{(async()=>{w(!0),A(null);try{const de=await Qg("CAD");de?C(de):A("Failed to fetch exchange rates")}catch(ae){A("An error occurred while fetching exchange rates"),console.error(ae)}finally{w(!1)}})()},[]);const q=()=>{if(!S){A("Exchange rates not available");return}A(null);const B=parseFloat(i),ae=parseFloat(u)/100;if(isNaN(B)||isNaN(ae)){A("Please enter valid numbers");return}let de;if(t==="CAD"&&r!=="CAD")de=S[r];else if(t!=="CAD"&&r==="CAD")de=1/S[t];else if(t!=="CAD"&&r!=="CAD"){const be=S[t];de=S[r]/be}else de=1;const Z=B*de,ve=Z*ae,xe=Z+ve;h(xe.toFixed(2)),g(ve.toFixed(2))},Y=async()=>{if(!V.firstName.trim()||!V.lastName.trim()){L("error","First name and last name are required");return}try{const{default:B}=await He(async()=>{const{default:de}=await Promise.resolve().then(()=>ii);return{default:de}},void 0),ae=await B.createCustomer(V);ae&&(E(de=>[...de,ae]),R(ae.id),P({firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",occupation:"",address:"",city:"",postalCode:"",country:"Canada",idType:"",idNumber:""}),D(!1),L("success","Customer added successfully"))}catch(B){console.error("Error adding customer:",B),L("error","Failed to add customer")}},le=async()=>{if(!f||!p){L("error","Please calculate the exchange rate first");return}const B=parseFloat(i),ae=parseFloat(f),de=parseFloat(p);ce({fromCurrency:t,toCurrency:r,fromAmount:B,toAmount:ae,commission:de,customerId:_||null}),J(!0)},ye=async B=>{if(pe){w(!0),A(null);try{const{default:ae}=await He(async()=>{const{default:kt}=await Promise.resolve().then(()=>da);return{default:kt}},void 0),{fromAmount:de,toAmount:Z,commission:ve}=pe,xe=Z>=1e4,be=Z>=3e3,Ae=new Date,Ie=new Date(Ae);Ie.setDate(Ie.getDate()+15);const ct=await ae.createTransaction({...pe,paymentMethod:B.paymentMethod,paymentResult:B.paymentResult,paymentReferenceId:B.paymentReferenceId,paymentDetails:B.paymentDetails,status:xe||be?"locked":"completed",requiresLCTR:xe,requiresEnhancedRecords:be,lctrDeadline:Ie.toISOString().split("T")[0],daysUntilDeadline:15});if(h(""),g(""),ce(null),Q(!0),xe||be){L("warning","This transaction requires FINTRAC compliance. Please collect customer information."),localStorage.setItem("pendingComplianceTransaction",JSON.stringify({id:ct.id,amount:Z,requiresLCTR:xe,timestamp:new Date().toISOString()}));const kt=new CustomEvent("fintracComplianceRequired",{detail:{transactionId:ct.id,requiresLCTR:xe}});window.dispatchEvent(kt)}else{const kt=B.paymentMethod==="cash"?"cash":B.paymentMethod==="stripe_terminal"?"card":B.paymentMethod==="cryptocurrency"?"crypto":"payment";L("success",`Transaction completed successfully with ${kt} payment!`)}}catch(ae){A("Failed to add transaction"),ee(!0),L("error","Failed to add transaction"),console.error(ae)}finally{w(!1)}}};return s.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Smart Calculator"}),x&&s.jsxs("div",{className:"flex items-center text-blue-600",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:"Loading rates..."})]})]}),N&&s.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4 rounded",role:"alert",children:[s.jsx("p",{className:"font-bold",children:"Error"}),s.jsx("p",{children:N})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Currency"}),s.jsx("select",{value:t,onChange:B=>e(B.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:x,children:O.map(B=>s.jsxs("option",{value:B.code,children:[B.code," - ",B.name]},B.code))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),s.jsx("input",{type:"number",value:i,onChange:B=>l(B.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:x,placeholder:"Enter amount"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Commission (%)"}),s.jsx("input",{type:"number",value:u,onChange:B=>d(B.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:x,placeholder:"Enter commission percentage",step:"0.01"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{value:_,onChange:B=>R(B.target.value),className:"flex-1 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:I,children:[s.jsx("option",{value:"",children:"Select a customer (optional)"}),j.map(B=>s.jsxs("option",{value:B.id,children:[B.firstName," ",B.lastName," ",B.email?`(${B.email})`:""]},B.id))]}),s.jsx("button",{onClick:()=>D(!0),className:"px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors",title:"Add New Customer",children:s.jsx(dy,{className:"h-4 w-4"})})]}),I&&s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Loading customers..."})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Currency"}),s.jsx("select",{value:r,onChange:B=>n(B.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:x,children:O.map(B=>s.jsxs("option",{value:B.code,children:[B.code," - ",B.name]},B.code))})]}),s.jsx("button",{onClick:q,disabled:x||!S,className:`w-full flex items-center justify-center py-2 px-4 rounded-lg text-white transition-colors ${x||!S?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:S?"Calculate":"Loading Rates..."}),f?s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("span",{className:"text-gray-600",children:"Calculated Amount:"}),s.jsxs("span",{className:"font-bold text-gray-800",children:[f," ",r]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Profit:"}),s.jsxs("span",{className:"font-bold text-green-600",children:[p," ",r]})]}),s.jsx("button",{onClick:le,disabled:x,className:`w-full mt-4 flex items-center justify-center py-2 px-4 rounded-lg text-white transition-colors ${x?"bg-green-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,children:x?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Complete Sale"})]}):s.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 text-center text-gray-500",children:"Enter values and click Calculate to see the result"})]})]}),S&&s.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Current Exchange Rates (Base: CAD)"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2",children:Object.entries(S).map(([B,ae])=>s.jsxs("div",{className:"bg-gray-50 p-2 rounded text-center",children:[s.jsxs("span",{className:"font-medium",children:[B,":"]})," ",(1/ae).toFixed(4)]},B))})]}),s.jsx(yt,{isOpen:$,onClose:()=>Q(!1),title:"Transaction Added Successfully",size:"sm",children:s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:s.jsx(ft,{className:"h-6 w-6 text-green-600"})}),s.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Your exchange transaction has been successfully added to the system."}),s.jsx("button",{onClick:()=>Q(!1),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Continue"})]})}),s.jsx(yt,{isOpen:re,onClose:()=>ee(!1),title:"Transaction Failed",size:"sm",children:s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:s.jsx(us,{className:"h-6 w-6 text-red-600"})}),s.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"There was an error processing your transaction. Please try again."}),s.jsx("button",{onClick:()=>ee(!1),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Close"})]})}),s.jsx(yt,{isOpen:k,onClose:()=>D(!1),title:"Add New Customer - FINTRAC Compliance",size:"2xl",children:s.jsxs("form",{onSubmit:B=>{B.preventDefault(),Y()},className:"space-y-4",children:[s.jsx("div",{className:"bg-blue-50 p-3 rounded-lg mb-4",children:s.jsxs("p",{className:"text-sm text-blue-700",children:[s.jsx("strong",{children:"FINTRAC Compliance:"})," All fields marked with * are required for transactions ≥$3,000 CAD. Additional fields may be required for transactions ≥$10,000 CAD."]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),s.jsx("input",{type:"text",value:V.firstName,onChange:B=>P(ae=>({...ae,firstName:B.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),s.jsx("input",{type:"text",value:V.lastName,onChange:B=>P(ae=>({...ae,lastName:B.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",value:V.email,onChange:B=>P(ae=>({...ae,email:B.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),s.jsx("input",{type:"tel",value:V.phone,onChange:B=>P(ae=>({...ae,phone:B.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth *"}),s.jsx("input",{type:"date",value:V.dateOfBirth,onChange:B=>P(ae=>({...ae,dateOfBirth:B.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Occupation *"}),s.jsx("input",{type:"text",value:V.occupation,onChange:B=>P(ae=>({...ae,occupation:B.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter customer occupation",required:!0})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),s.jsx("input",{type:"text",value:V.address,onChange:B=>P(ae=>({...ae,address:B.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Street address",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),s.jsx("input",{type:"text",value:V.city,onChange:B=>P(ae=>({...ae,city:B.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code *"}),s.jsx("input",{type:"text",value:V.postalCode,onChange:B=>P(ae=>({...ae,postalCode:B.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"A1A 1A1",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country *"}),s.jsx("input",{type:"text",value:V.country,onChange:B=>P(ae=>({...ae,country:B.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID Type *"}),s.jsxs("select",{value:V.idType,onChange:B=>P(ae=>({...ae,idType:B.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Select ID Type"}),s.jsx("option",{value:"drivers_license",children:"Driver's License"}),s.jsx("option",{value:"passport",children:"Passport"}),s.jsx("option",{value:"provincial_id",children:"Provincial ID Card"}),s.jsx("option",{value:"other_government",children:"Other Government ID"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID Number *"}),s.jsx("input",{type:"text",value:V.idNumber,onChange:B=>P(ae=>({...ae,idNumber:B.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter identification number",required:!0})]})]}),s.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mt-4",children:s.jsx("div",{className:"flex",children:s.jsx("div",{className:"ml-3",children:s.jsxs("p",{className:"text-sm text-yellow-700",children:[s.jsx("strong",{children:"Important:"})," This customer information will be used for FINTRAC compliance reporting. Ensure all details are accurate and complete."]})})})}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[s.jsx("button",{type:"button",onClick:()=>D(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors",children:"Add Customer"})]})]})}),s.jsx(V9,{isOpen:U,onClose:()=>{J(!1),ce(null)},amount:(pe==null?void 0:pe.toAmount)||0,currency:(pe==null?void 0:pe.toCurrency)||"CAD",onPaymentCompleted:ye}),s.jsx(Ao,{type:oe.type,message:oe.message,isVisible:oe.visible,onClose:X})]})},G9=({onClick:t,position:e="bottom-right"})=>{const r={"bottom-right":"bottom-4 right-4","bottom-left":"bottom-4 left-4","top-right":"top-4 right-4","top-left":"top-4 left-4"};return s.jsx("button",{onClick:t,className:`fixed ${r[e]} z-40 p-3 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 transform hover:scale-110`,"aria-label":"Open Calculator",children:s.jsx(y5,{className:"h-6 w-6"})})},X9=()=>{const{modals:t,openModal:e,closeModal:r,minimizeModal:n,restoreModal:i,maximizeModal:l}=T9(),u="smart-calculator",d=()=>{t[u]&&t[u].isMinimized?i(u):t[u]||e(u,"Smart Calculator",{x:100,y:100})};return s.jsxs(s.Fragment,{children:[s.jsx(G9,{onClick:d}),t[u]&&s.jsx(A9,{isOpen:t[u].isOpen,onClose:()=>r(u),title:"Smart Calculator",size:"lg",initialPosition:t[u].position,onMinimize:()=>n(u),isMinimized:t[u].isMinimized,onMaximize:()=>l(u),isMaximized:t[u].isMaximized,zIndex:t[u].zIndex,children:s.jsx(Y9,{})}),s.jsx(E9,{modals:t,onRestore:i,onClose:r})]})};class K9{constructor(){te(this,"STORAGE_KEY","secure_documents");te(this,"ENCRYPTION_KEY_PREFIX","LEAPER_DOC_");te(this,"MINIMUM_RETENTION_YEARS",5)}async uploadDocument(e,r,n,i,l="system"){try{this.validateFile(e);const u=Xt(),d=await this.readFileAsArrayBuffer(e),f=await this.generateDocumentEncryptionKey(u),h=crypto.getRandomValues(new Uint8Array(12)),p=crypto.getRandomValues(new Uint8Array(16)),g=await this.encryptFileData(d,f,h),x=await this.calculateChecksum(d),w=this.classifyDocument(r),S=await this.extractDocumentMetadata(e,d),C=this.calculateRetentionDate(),N=await this.validateCompliance(r,n,S),A={id:u,documentType:r,classification:w,customerId:n,transactionId:i,fileName:`${u}.enc`,originalFileName:e.name,fileSize:e.size,mimeType:e.type,encryptedData:this.arrayBufferToBase64(g),encryptionIV:this.arrayBufferToBase64(h),encryptionSalt:this.arrayBufferToBase64(p),metadata:{uploadDate:new Date().toISOString().split("T")[0],uploadTime:new Date().toISOString().split("T")[1],uploadedBy:l,documentVerified:!1,...S},auditLog:[{timestamp:new Date().toISOString(),action:"uploaded",userId:l,userType:"system",details:`Document uploaded: ${e.name} (${r})`,ipAddress:this.getClientIP(),userAgent:navigator.userAgent}],accessLog:[],retentionDate:C,complianceFlags:N,checksum:x,version:1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),lastAccessedAt:new Date().toISOString()};return await this.storeDocumentRecord(A),_e.send({type:"document_uploaded",data:{documentId:u,documentType:r,customerId:n,transactionId:i,complianceFlags:N}}),{documentId:u,uploadStatus:"success",verificationRequired:this.requiresVerification(r),complianceFlags:N}}catch(u){return console.error("Document upload failed:",u),{documentId:"",uploadStatus:"error",verificationRequired:!1,complianceFlags:[],errorMessage:u instanceof Error?u.message:"Upload failed"}}}async getDocument(e,r,n,i="system"){try{const l=await this.getDocumentRecord(e);if(!l)return null;await this.logDocumentAccess(l,r,n,i);const u=await this.generateDocumentEncryptionKey(e),d=this.base64ToArrayBuffer(l.encryptionIV),f=this.base64ToArrayBuffer(l.encryptedData),h=await this.decryptFileData(f,u,d);if(await this.calculateChecksum(h)!==l.checksum)throw new Error("Document integrity check failed");return{data:h,metadata:l}}catch(l){return console.error("Document retrieval failed:",l),null}}async getCustomerDocuments(e){return(await this.getAllDocumentRecords()).filter(n=>n.customerId===e)}async verifyDocument(e,r,n){try{const i=await this.getDocumentRecord(e);return i?(i.metadata.documentVerified=!0,i.metadata.verificationDate=new Date().toISOString(),i.metadata.verifiedBy=r,i.updatedAt=new Date().toISOString(),i.auditLog.push({timestamp:new Date().toISOString(),action:"verified",userId:r,userType:"compliance_officer",details:`Document verified${n?": "+n:""}`,ipAddress:this.getClientIP(),userAgent:navigator.userAgent}),await this.updateDocumentRecord(i),_e.send({type:"document_verified",data:{documentId:e,customerId:i.customerId,documentType:i.documentType,verifiedBy:r}}),!0):!1}catch(i){return console.error("Document verification failed:",i),!1}}async exportDocumentAuditLogs(e,r,n){let l=await this.getAllDocumentRecords();e&&r&&(l=l.filter(f=>f.createdAt>=e&&f.createdAt<=r)),n&&(l=l.filter(f=>f.customerId===n));const d=[["Document_ID","Document_Type","Classification","Customer_ID","Transaction_ID","Original_File_Name","File_Size","Upload_Date","Upload_Time","Uploaded_By","Document_Verified","Verification_Date","Verified_By","Retention_Date","Compliance_Flags","Checksum","Created_At","Last_Accessed_At","Access_Count","Audit_Actions"].join(",")];for(const f of l){const h=[f.id,f.documentType,f.classification,f.customerId,f.transactionId||"",this.csvEscape(f.originalFileName),f.fileSize,f.metadata.uploadDate,f.metadata.uploadTime,f.metadata.uploadedBy,f.metadata.documentVerified,f.metadata.verificationDate||"",f.metadata.verifiedBy||"",f.retentionDate,f.complianceFlags.join(";"),f.checksum,f.createdAt,f.lastAccessedAt,f.accessLog.length,f.auditLog.map(p=>`${p.timestamp}:${p.action}:${p.userId}`).join(";")];d.push(h.join(","))}return d.join(`
`)}async cleanupExpiredDocuments(){const e=new Date().toISOString().split("T")[0],r=await this.getAllDocumentRecords(),n=r.filter(u=>u.retentionDate<e);let i=0;for(const u of n)u.auditLog.push({timestamp:new Date().toISOString(),action:"deleted",userId:"system",userType:"system",details:`Document deleted after retention period expired (${u.retentionDate})`}),await this.secureDeleteDocument(u.id),i++;const l=r.filter(u=>u.retentionDate>=e);return await Me.setItem(this.STORAGE_KEY,l),i}validateFile(e){const n=["image/jpeg","image/png","image/gif","application/pdf","image/tiff"];if(e.size>10485760)throw new Error("File size exceeds 10MB limit");if(!n.includes(e.type))throw new Error("File type not allowed. Only JPEG, PNG, GIF, PDF, and TIFF files are permitted.")}async readFileAsArrayBuffer(e){return new Promise((r,n)=>{const i=new FileReader;i.onload=()=>r(i.result),i.onerror=()=>n(new Error("Failed to read file")),i.readAsArrayBuffer(e)})}async generateDocumentEncryptionKey(e){const r=await crypto.subtle.importKey("raw",new TextEncoder().encode(this.ENCRYPTION_KEY_PREFIX+e),{name:"PBKDF2"},!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:new TextEncoder().encode("LEAPER_SALT_"+e),iterations:1e5,hash:"SHA-256"},r,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async encryptFileData(e,r,n){return crypto.subtle.encrypt({name:"AES-GCM",iv:n},r,e)}async decryptFileData(e,r,n){return crypto.subtle.decrypt({name:"AES-GCM",iv:n},r,e)}async calculateChecksum(e){const r=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(r)).map(i=>i.toString(16).padStart(2,"0")).join("")}arrayBufferToBase64(e){const r=new Uint8Array(e);let n="";for(let i=0;i<r.byteLength;i++)n+=String.fromCharCode(r[i]);return btoa(n)}base64ToArrayBuffer(e){const r=atob(e),n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n.buffer}classifyDocument(e){switch(e){case"photo_id":case"drivers_license":case"passport":case"provincial_id":case"selfie":return"kyc_mandatory";case"proof_of_address":case"bank_statement":case"utility_bill":return"compliance_supporting";default:return"audit_trail"}}async extractDocumentMetadata(e,r){const n={};return e.type.startsWith("image/")&&(n.isImage=!0,n.dimensions=await this.getImageDimensions(e)),e.type==="application/pdf"&&(n.isPDF=!0),n}async getImageDimensions(e){return new Promise(r=>{const n=new Image;n.onload=()=>{r({width:n.width,height:n.height})},n.onerror=()=>{r({width:0,height:0})},n.src=URL.createObjectURL(e)})}requiresVerification(e){return["photo_id","drivers_license","passport","provincial_id"].includes(e)}async validateCompliance(e,r,n){const i=[];return this.requiresVerification(e)&&i.push("VERIFICATION_REQUIRED"),n.dimensions&&(n.dimensions.width<800||n.dimensions.height<600)&&i.push("LOW_RESOLUTION"),i}calculateRetentionDate(){const e=new Date;return e.setFullYear(e.getFullYear()+this.MINIMUM_RETENTION_YEARS),e.toISOString().split("T")[0]}getClientIP(){return"127.0.0.1"}csvEscape(e){return e.includes(",")||e.includes('"')||e.includes(`
`)?`"${e.replace(/"/g,'""')}"`:e}async storeDocumentRecord(e){const r=await this.getAllDocumentRecords();r.unshift(e),await Me.setItem(this.STORAGE_KEY,r)}async updateDocumentRecord(e){const r=await this.getAllDocumentRecords(),n=r.findIndex(i=>i.id===e.id);n!==-1&&(r[n]=e,await Me.setItem(this.STORAGE_KEY,r))}async getDocumentRecord(e){return(await this.getAllDocumentRecords()).find(n=>n.id===e)||null}async getAllDocumentRecords(){try{const e=await Me.getItem(this.STORAGE_KEY);return Array.isArray(e)?e:[]}catch(e){return console.error("Error loading document records:",e),[]}}async logDocumentAccess(e,r,n,i){e.accessLog.push({timestamp:new Date().toISOString(),userId:r,userType:i,accessReason:n,ipAddress:this.getClientIP()}),e.lastAccessedAt=new Date().toISOString(),await this.updateDocumentRecord(e)}async secureDeleteDocument(e){const n=(await this.getAllDocumentRecords()).filter(i=>i.id!==e);await Me.setItem(this.STORAGE_KEY,n)}}const ei=new K9;class W9{async ensureInitialized(){await Me.init()}async createCustomer(e){await this.ensureInitialized();const r=this.validateCustomerDataSimplified(e);if(!r.isValid)throw new Error(`Validation failed: ${r.errors.join(", ")}`);const n=new Date().toISOString(),i=this.calculateInitialRiskRatingSimplified(e),l={id:`cust_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,firstName:e.firstName.trim(),lastName:e.lastName.trim(),email:(e.email||"").trim(),phone:(e.phone||"").trim(),dateOfBirth:e.dateOfBirth||"",occupation:(e.occupation||"").trim(),address:(e.address||"").trim(),city:(e.city||"").trim(),postalCode:(e.postalCode||"").trim(),country:e.country||"Canada",idType:e.idType||"",idNumber:(e.idNumber||"").trim(),photoId:(e.photoId||"").trim(),createdAt:n,lastUpdated:n,lastTransaction:null,riskRating:i,kycStatus:"pending",isActive:!0,complianceNotes:"",sourceOfFunds:e.sourceOfFunds||"",expectedTransactionVolume:"low"},u=await this.getAllCustomers();u.push(l),await this.saveCustomers(u);try{_e.send({type:"customer_created",data:l})}catch(d){console.warn("WS emit failed for customer_created:",d)}return l}validateCustomerDataSimplified(e){var n,i;const r=[];if((n=e.firstName)!=null&&n.trim()||r.push("First name is required"),(i=e.lastName)!=null&&i.trim()||r.push("Last name is required"),e.dateOfBirth){const l=new Date().getFullYear()-new Date(e.dateOfBirth).getFullYear();l<18&&r.push("Customer must be at least 18 years old"),l>120&&r.push("Invalid date of birth")}return e.email&&e.email.trim()&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email.trim())||r.push("Invalid email format")),e.phone&&e.phone.trim()&&(/^[\+]?[\d\s\-\(\)\.]{7,}$/.test(e.phone.trim())||r.push("Invalid phone number format")),e.postalCode&&e.postalCode.trim()&&(/^[A-Za-z]\d[A-Za-z][ -]?\d[A-Za-z]\d$/.test(e.postalCode.trim())||r.push("Invalid postal code format (expected: A1A 1A1)")),{isValid:r.length===0,errors:r}}calculateInitialRiskRatingSimplified(e){let r=0;if(e.dateOfBirth){const n=new Date().getFullYear()-new Date(e.dateOfBirth).getFullYear();n<25?r+=2:n<35&&(r+=1)}if(e.occupation){const n=["cash","money service","casino","jewelry","art dealer","precious metals"],i=["business owner","self-employed","consultant","real estate"],l=e.occupation.toLowerCase();n.some(u=>l.includes(u))?r+=3:i.some(u=>l.includes(u))&&(r+=1)}return e.country&&e.country!=="Canada"&&(r+=1),e.idType==="passport"&&(r+=1),r>=5?"HIGH":r>=2?"MEDIUM":"LOW"}async getCustomerById(e){return await this.ensureInitialized(),(await this.getAllCustomers()).find(n=>n.id===e)||null}async getCustomerByEmail(e){return await this.ensureInitialized(),(await this.getAllCustomers()).find(n=>n.email.toLowerCase()===e.toLowerCase())||null}async searchCustomers(e){await this.ensureInitialized();let r=await this.getAllCustomers();if(e.name){const n=e.name.toLowerCase();r=r.filter(i=>i.firstName.toLowerCase().includes(n)||i.lastName.toLowerCase().includes(n)||`${i.firstName} ${i.lastName}`.toLowerCase().includes(n))}return e.email&&(r=r.filter(n=>n.email.toLowerCase().includes(e.email.toLowerCase()))),e.phone&&(r=r.filter(n=>n.phone&&n.phone.includes(e.phone))),e.riskRating&&(r=r.filter(n=>n.riskRating===e.riskRating)),e.kycStatus&&(r=r.filter(n=>n.kycStatus===e.kycStatus)),typeof e.isActive=="boolean"&&(r=r.filter(n=>n.isActive===e.isActive)),r.sort((n,i)=>new Date(i.lastUpdated).getTime()-new Date(n.lastUpdated).getTime())}async updateCustomer(e,r){await this.ensureInitialized();const n=await this.getAllCustomers(),i=n.findIndex(u=>u.id===e);if(i===-1)return null;const l={...n[i],...r,id:e,lastUpdated:new Date().toISOString()};return n[i]=l,await this.saveCustomers(n),l}async deleteCustomer(e){await this.ensureInitialized();const r=await this.getAllCustomers(),n=r.length,i=r.filter(l=>l.id!==e);return i.length<n?(await this.saveCustomers(i),!0):!1}async verifyCustomerKYC(e,r,n){const i={kycStatus:r?"verified":"rejected",kycDate:new Date().toISOString()};if(n&&(i.notes=n),r){const l=await this.getCustomerById(e);l&&(i.riskRating=this.calculateRiskRating(l))}return this.updateCustomer(e,i)}async getCustomersRequiringKYC(){return this.searchCustomers({kycStatus:"pending"})}async getHighRiskCustomers(){return this.searchCustomers({riskRating:"high"})}async getCustomerProfile(e){const r=await this.getCustomerById(e);if(!r)return null;try{const n=await ei.getCustomerDocuments(e),{default:i}=await He(async()=>{const{default:h}=await Promise.resolve().then(()=>da);return{default:h}},void 0),l=await i.getTransactionsByCustomerId(e),u=await i.getCustomerTransactionSummary(e),d=await M0.validateCustomerDueDiligence(e),f=this.calculateComprehensiveRiskAssessment(r,l,n);return{customer:r,documents:n,transactions:l,complianceValidation:d,riskAssessment:f,transactionSummary:u}}catch(n){return console.error("Error building customer profile:",n),{customer:r,documents:[],transactions:[],complianceValidation:{isCompliant:!1,missingRequirements:["Error loading validation"],documentStatus:[]},riskAssessment:{score:0,rating:"medium",factors:["Error calculating risk"]},transactionSummary:{totalTransactions:0,totalVolume:0,latestTransactionDate:null,complianceTransactions:0,riskRating:"low"}}}}async getCustomersAdvanced(e,r="lastUpdated",n="desc"){let i=await this.searchCustomers(e);return e.complianceStatus&&(i=i.filter(l=>l.complianceStatus===e.complianceStatus)),(e.dateFrom||e.dateTo)&&(i=i.filter(l=>{const u=new Date(l.createdAt),d=e.dateFrom?new Date(e.dateFrom):new Date(0),f=e.dateTo?new Date(e.dateTo):new Date;return u>=d&&u<=f})),e.hasDocuments!==void 0&&e.hasDocuments&&(i=i.filter(l=>l.kycStatus==="verified")),e.minTransactionVolume&&(i=i.filter(l=>(l.totalTransactionVolume||0)>=(e.minTransactionVolume||0))),i.sort((l,u)=>{let d,f;switch(r){case"name":d=`${l.firstName} ${l.lastName}`.toLowerCase(),f=`${u.firstName} ${u.lastName}`.toLowerCase();break;case"createdAt":d=new Date(l.createdAt).getTime(),f=new Date(u.createdAt).getTime();break;case"lastTransactionDate":d=new Date(l.lastTransactionDate||0).getTime(),f=new Date(u.lastTransactionDate||0).getTime();break;case"totalTransactionVolume":d=l.totalTransactionVolume||0,f=u.totalTransactionVolume||0;break;case"riskRating":const h={low:1,medium:2,high:3};d=h[l.riskRating],f=h[u.riskRating];break;default:d=new Date(l.lastUpdated).getTime(),f=new Date(u.lastUpdated).getTime()}return n==="desc"?f>d?1:f<d?-1:0:d>f?1:d<f?-1:0}),i}async updateCustomerCompliance(e){try{const r=await this.getCustomerProfile(e);if(!r)return;const{complianceValidation:n,riskAssessment:i}=r,l=n.isCompliant?"compliant":"pending",u=n.missingRequirements.length===0;await this.updateCustomer(e,{complianceStatus:l,documentsVerified:u,lastComplianceCheck:new Date().toISOString(),riskRating:i.rating}),_e.send({type:"customer_compliance_updated",data:{customerId:e,complianceStatus:l,riskRating:i.rating}})}catch(r){console.error("Error updating customer compliance:",r)}}async getCustomersRequiringComplianceReview(){return(await this.getAllCustomers()).filter(r=>{const n=r.lastComplianceCheck?new Date(r.lastComplianceCheck):null,i=n?(Date.now()-n.getTime())/(1e3*60*60*24):999;return r.complianceStatus==="pending"||!r.documentsVerified||i>90||r.riskRating==="high"})}calculateComprehensiveRiskAssessment(e,r,n){let i=0;const l=[];i+={low:10,medium:30,high:60}[e.riskRating];const d=e.totalTransactionVolume||0;d>1e5?(i+=20,l.push("High transaction volume (>$100K)")):d>5e4&&(i+=10,l.push("Medium transaction volume (>$50K)")),r.length>50?(i+=15,l.push("High transaction frequency (>50 transactions)")):r.length>20&&(i+=8,l.push("Medium transaction frequency (>20 transactions)"));const f=n.filter(g=>g.metadata.documentVerified).length;f===0?(i+=25,l.push("No verified documents")):f<2&&(i+=10,l.push("Insufficient verified documents")),e.kycStatus==="pending"?(i+=15,l.push("KYC verification pending")):e.kycStatus==="rejected"&&(i+=30,l.push("KYC verification rejected")),(Date.now()-new Date(e.createdAt).getTime())/(1e3*60*60*24)<30&&(i+=10,l.push("New customer (<30 days)"));let p;return i>=70?p="high":i>=40?p="medium":p="low",{score:i,rating:p,factors:l}}calculateRiskRating(e){let r=0;const n=new Date().getFullYear()-new Date(e.dateOfBirth).getFullYear();n<25?r+=2:n<35&&(r+=1),e.expectedTransactionVolume==="high"?r+=3:e.expectedTransactionVolume==="medium"&&(r+=1),e.identification.type==="passport"&&(r+=1),e.address.country!=="Canada"&&(r+=2),e.kycStatus==="rejected"?r+=5:e.kycStatus==="pending"&&(r+=2);const l=(Date.now()-new Date(e.createdAt).getTime())/(1e3*60*60*24);return l<30?r+=2:l<90&&(r+=1),r>=7?"high":r>=4?"medium":"low"}async getCustomerTransactionSummary(e){try{const n=(await Me.getTransactions()).filter(f=>f.customerId===e),i=new Date(Date.now()-720*60*60*1e3),l=n.filter(f=>new Date(f.date)>i),u=n.reduce((f,h)=>f+h.fromAmount,0),d=[...new Set(n.flatMap(f=>[f.fromCurrency,f.toCurrency]))];return{totalTransactions:n.length,totalVolume:u,last30Days:l.length,averageAmount:n.length>0?u/n.length:0,currencies:d}}catch(r){return console.error("Error getting customer transaction summary:",r),{totalTransactions:0,totalVolume:0,last30Days:0,averageAmount:0,currencies:[]}}}validateCustomerData(e){var i,l,u,d,f,h,p,g,x,w,S,C,N,A,j,E,_,R,k,D;const r=[];(i=e.firstName)!=null&&i.trim()||r.push("First name is required"),(l=e.lastName)!=null&&l.trim()||r.push("Last name is required"),(u=e.email)!=null&&u.trim()||r.push("Email is required"),e.dateOfBirth||r.push("Date of birth is required");const n=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.email&&!n.test(e.email)&&r.push("Invalid email format"),e.dateOfBirth&&new Date().getFullYear()-new Date(e.dateOfBirth).getFullYear()<18&&r.push("Customer must be at least 18 years old"),(f=(d=e.address)==null?void 0:d.street)!=null&&f.trim()||r.push("Street address is required"),(p=(h=e.address)==null?void 0:h.city)!=null&&p.trim()||r.push("City is required"),(x=(g=e.address)==null?void 0:g.province)!=null&&x.trim()||r.push("Province is required"),(S=(w=e.address)==null?void 0:w.postalCode)!=null&&S.trim()||r.push("Postal code is required"),(N=(C=e.address)==null?void 0:C.country)!=null&&N.trim()||r.push("Country is required"),(A=e.identification)!=null&&A.type||r.push("Identification type is required"),(E=(j=e.identification)==null?void 0:j.number)!=null&&E.trim()||r.push("Identification number is required"),(_=e.identification)!=null&&_.expiryDate||r.push("Identification expiry date is required"),(k=(R=e.identification)==null?void 0:R.issuingCountry)!=null&&k.trim()||r.push("Issuing country is required"),(D=e.identification)!=null&&D.expiryDate&&new Date(e.identification.expiryDate)<new Date&&r.push("Identification document is expired"),{isValid:r.length===0,errors:r}}async getAllCustomers(){try{const e=localStorage.getItem("customers");return e?JSON.parse(e):[]}catch(e){return console.error("Error loading customers:",e),[]}}async saveCustomers(e){try{localStorage.setItem("customers",JSON.stringify(e))}catch(r){console.error("Error saving customers:",r)}}async getCustomerStats(){const e=await this.getAllCustomers(),r=new Date;return r.setDate(1),r.setHours(0,0,0,0),{total:e.length,verified:e.filter(n=>n.kycStatus==="verified").length,pending:e.filter(n=>n.kycStatus==="pending").length,highRisk:e.filter(n=>n.riskRating==="HIGH").length,newThisMonth:e.filter(n=>new Date(n.createdAt)>=r).length}}async performComplianceCheck(e){var d,f;const r=await this.getCustomerById(e);if(!r)throw new Error("Customer not found");const n=[],i=[],l=[];r.firstName||n.push("Missing first name"),r.lastName||n.push("Missing last name"),r.dateOfBirth||n.push("Missing date of birth"),r.address||n.push("Missing address"),(!((d=r.identification)!=null&&d.type)||!((f=r.identification)!=null&&f.number))&&n.push("Missing identification information"),r.kycStatus!=="verified"&&(n.push("Customer KYC not verified"),l.push("Complete KYC verification process")),r.riskRating==="high"&&(i.push("High risk customer rating"),l.push("Enhanced due diligence required"));const u=await this.getCustomerTransactionSummary(e);return u.totalVolume>5e4&&i.push("High transaction volume"),u.last30Days>10&&i.push("High frequency transactions"),n.length>0&&l.push("Complete missing customer information"),i.length>2&&l.push("Consider enhanced monitoring"),{compliant:n.length===0,issues:n,riskFactors:i,recommendations:l}}}const Nt=new W9,ii=Object.freeze(Object.defineProperty({__proto__:null,default:Nt},Symbol.toStringTag,{value:"Module"}));class Q9{constructor(){te(this,"STORAGE_KEY","fintrac_submissions");te(this,"MINIMUM_RETENTION_YEARS",5);te(this,"ENTITY_INFO",{name:"Leaper Exchange Inc.",identifier:"MSB_ID_TO_BE_SET",address:{streetNumber:"",streetName:"",city:"Montreal",province:"QC",postalCode:"",country:"Canada"}})}async generateLCTRReport(e){const r=`LCTR-${Date.now()}-${Xt(8)}`,n=new Date().toISOString().split("T")[0];for(const f of e)if(!f.customerId||!f.customerData)throw new Error(`Transaction ${f.id} missing required customer information for FINTRAC reporting`);const i={reportInfo:{reportType:"LCTR",reportReference:r,reportingEntity:this.ENTITY_INFO,reportPeriod:{startDate:n,endDate:n}},transactions:e.map(f=>this.buildLCTRTransaction(f))},l=this.generateLCTRXML(i),u=JSON.stringify(i,null,2),d=this.generateLCTRCSV(e);return{xml:l,json:u,csv:d,reportReference:r}}generateLCTRXML(e){let r=`<?xml version="1.0" encoding="UTF-8"?>
`;r+=`<lctr_report xmlns="http://www.fintrac-canafe.gc.ca/lctr">
`,r+=`  <report_header>
`,r+=`    <report_type>${e.reportInfo.reportType}</report_type>
`,r+=`    <report_reference>${e.reportInfo.reportReference}</report_reference>
`,r+=`    <reporting_entity>
`,r+=`      <identifier>${e.reportInfo.reportingEntity.identifier}</identifier>
`,r+=`      <name>${this.escapeXml(e.reportInfo.reportingEntity.name)}</name>
`,r+=`      <address>
`,r+=`        <city>${this.escapeXml(e.reportInfo.reportingEntity.address.city)}</city>
`,r+=`        <province>${e.reportInfo.reportingEntity.address.province}</province>
`,r+=`        <country>${e.reportInfo.reportingEntity.address.country}</country>
`,r+=`      </address>
`,r+=`    </reporting_entity>
`,r+=`    <report_period>
`,r+=`      <start_date>${e.reportInfo.reportPeriod.startDate}</start_date>
`,r+=`      <end_date>${e.reportInfo.reportPeriod.endDate}</end_date>
`,r+=`    </report_period>
`,r+=`  </report_header>
`,r+=`  <transactions>
`;for(const n of e.transactions){if(r+=`    <transaction>
`,r+=`      <transaction_reference>${n.transactionReference}</transaction_reference>
`,r+=`      <starting_action>
`,r+=`        <action_type>${n.startingAction.actionType}</action_type>
`,r+=`        <date>${n.startingAction.date}</date>
`,r+=`        <time>${n.startingAction.time}</time>
`,r+=`        <amount>${n.startingAction.amount}</amount>
`,r+=`        <currency>${n.startingAction.currency}</currency>
`,r+=`      </starting_action>
`,r+=`      <completing_action>
`,r+=`        <action_type>${n.completingAction.actionType}</action_type>
`,r+=`        <date>${n.completingAction.date}</date>
`,r+=`        <time>${n.completingAction.time}</time>
`,r+=`        <amount>${n.completingAction.amount}</amount>
`,r+=`        <currency>${n.completingAction.currency}</currency>
`,r+=`      </completing_action>
`,r+=`      <conductor>
`,r+=`        <type>${n.conductor.type}</type>
`,n.conductor.personInfo){const i=n.conductor.personInfo;r+=`        <person_info>
`,r+=`          <first_name>${this.escapeXml(i.firstName)}</first_name>
`,r+=`          <last_name>${this.escapeXml(i.lastName)}</last_name>
`,r+=`          <date_of_birth>${i.dateOfBirth}</date_of_birth>
`,r+=`          <occupation>${this.escapeXml(i.occupation)}</occupation>
`,r+=`          <address>
`,r+=`            <street_address>${this.escapeXml(i.address.street)}</street_address>
`,r+=`            <city>${this.escapeXml(i.address.city)}</city>
`,r+=`            <province>${i.address.province}</province>
`,r+=`            <postal_code>${i.address.postalCode}</postal_code>
`,r+=`            <country>${i.address.country}</country>
`,r+=`          </address>
`,r+=`          <identification>
`,r+=`            <type>${i.identification.type}</type>
`,r+=`            <number>${this.escapeXml(i.identification.number)}</number>
`,r+=`            <expiry_date>${i.identification.expiryDate}</expiry_date>
`,r+=`            <issuing_authority>${this.escapeXml(i.identification.issuingAuthority||"")}</issuing_authority>
`,r+=`          </identification>
`,r+=`        </person_info>
`}r+=`      </conductor>
`,r+=`      <source_of_funds>${this.escapeXml(n.sourceOfFunds)}</source_of_funds>
`,r+=`      <purpose>${this.escapeXml(n.purpose)}</purpose>
`,r+=`      <disposition>${this.escapeXml(n.disposition)}</disposition>
`,r+=`    </transaction>
`}return r+=`  </transactions>
`,r+=`</lctr_report>
`,r}buildLCTRTransaction(e){var n,i;const r=e.customerData;if(!r)throw new Error(`Missing customer data for transaction ${e.id}`);return{transactionReference:e.id,startingAction:{actionType:"receipt",date:e.date.split("T")[0],time:((n=e.date.split("T")[1])==null?void 0:n.split(".")[0])||"00:00:00",amount:e.fromAmount,currency:e.fromCurrency},completingAction:{actionType:"final_receipt",date:e.date.split("T")[0],time:((i=e.date.split("T")[1])==null?void 0:i.split(".")[0])||"00:00:00",amount:e.toAmount,currency:e.toCurrency},conductor:{type:"person",personInfo:{firstName:r.firstName||"",lastName:r.lastName||"",dateOfBirth:r.dateOfBirth||"",occupation:r.occupation||"",address:{street:r.streetAddress||"",city:r.city||"",province:r.province||"",postalCode:r.postalCode||"",country:r.country||"Canada"},identification:{type:r.idType||"",number:r.idNumber||"",expiryDate:r.idExpiry||"",issuingAuthority:this.getIssuingAuthority(r.idType)}}},sourceOfFunds:r.sourceOfFunds||"employment",purpose:"currency_exchange",disposition:"currency_provided"}}generateLCTRCSV(e){var i,l;const n=[["Transaction_Reference","Starting_Action_Date","Starting_Action_Time","Starting_Action_Amount","Starting_Action_Currency","Completing_Action_Date","Completing_Action_Time","Completing_Action_Amount","Completing_Action_Currency","Conductor_Type","Conductor_First_Name","Conductor_Last_Name","Conductor_Date_of_Birth","Conductor_Occupation","Conductor_Street_Address","Conductor_City","Conductor_Province","Conductor_Postal_Code","Conductor_Country","Identification_Type","Identification_Number","Identification_Expiry","Identification_Issuing_Authority","Source_of_Funds","Purpose","Disposition"].join(",")];for(const u of e){const d=u.customerData,f=[u.id,u.date.split("T")[0],((i=u.date.split("T")[1])==null?void 0:i.split(".")[0])||"00:00:00",u.fromAmount,u.fromCurrency,u.date.split("T")[0],((l=u.date.split("T")[1])==null?void 0:l.split(".")[0])||"00:00:00",u.toAmount,u.toCurrency,"person",this.csvEscape((d==null?void 0:d.firstName)||""),this.csvEscape((d==null?void 0:d.lastName)||""),(d==null?void 0:d.dateOfBirth)||"",this.csvEscape((d==null?void 0:d.occupation)||""),this.csvEscape((d==null?void 0:d.streetAddress)||""),this.csvEscape((d==null?void 0:d.city)||""),(d==null?void 0:d.province)||"",(d==null?void 0:d.postalCode)||"",(d==null?void 0:d.country)||"Canada",(d==null?void 0:d.idType)||"",this.csvEscape((d==null?void 0:d.idNumber)||""),(d==null?void 0:d.idExpiry)||"",this.csvEscape(this.getIssuingAuthority(d==null?void 0:d.idType)),this.csvEscape((d==null?void 0:d.sourceOfFunds)||"employment"),"currency_exchange","currency_provided"];n.push(f.join(","))}return n.join(`
`)}async submitLCTRReport(e,r="FWR"){const{xml:n,json:i,csv:l,reportReference:u}=await this.generateLCTRReport(e),d=`BATCH-${Date.now()}-${Xt(8)}`,f=new Date().toISOString().split("T")[0],h=new Date().toISOString().split("T")[1],p=e.reduce((x,w)=>x+w.toAmount,0),g={id:Xt(),reportType:"LCTR",submissionMethod:r,submissionDate:f,submissionTime:h,batchId:d,reportReference:u,transactionIds:e.map(x=>x.id),totalTransactions:e.length,totalAmount:p,currency:"CAD",reportData:{transactions:e.map(x=>({id:x.id,date:x.date,fromAmount:x.fromAmount,fromCurrency:x.fromCurrency,toAmount:x.toAmount,toCurrency:x.toCurrency,customerId:x.customerId,customerData:x.customerData}))},xmlContent:n,jsonContent:i,csvContent:l,submissionStatus:"prepared",submittedBy:"system",retentionDate:this.calculateRetentionDate(),auditHash:await this.generateAuditHash(n+i),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return await this.storeSubmissionRecord(g),g.submissionStatus="submitted",g.updatedAt=new Date().toISOString(),await this.updateSubmissionRecord(g),_e.send({type:"fintrac_report_submitted",data:{reportType:"LCTR",batchId:d,reportReference:u,transactionCount:e.length,totalAmount:p,submissionDate:f}}),g}async storeSubmissionRecord(e){const r=await this.getAllSubmissionRecords();r.unshift(e),await Me.setItem(this.STORAGE_KEY,r)}async updateSubmissionRecord(e){const r=await this.getAllSubmissionRecords(),n=r.findIndex(i=>i.id===e.id);n!==-1&&(r[n]=e,await Me.setItem(this.STORAGE_KEY,r))}async getAllSubmissionRecords(){try{const e=await Me.getItem(this.STORAGE_KEY);return Array.isArray(e)?e:[]}catch(e){return console.error("Error loading FINTRAC submission records:",e),[]}}async getSubmissionRecordsByDateRange(e,r){return(await this.getAllSubmissionRecords()).filter(i=>i.submissionDate>=e&&i.submissionDate<=r)}async exportAuditRecords(e,r){const n=e&&r?await this.getSubmissionRecordsByDateRange(e,r):await this.getAllSubmissionRecords(),l=[["Submission_ID","Report_Type","Submission_Method","Submission_Date","Submission_Time","Batch_ID","Report_Reference","Total_Transactions","Total_Amount","Currency","Submission_Status","Acknowledgment_Reference","Submitted_By","Retention_Date","Audit_Hash","Created_At"].join(",")];for(const u of n){const d=[u.id,u.reportType,u.submissionMethod,u.submissionDate,u.submissionTime,u.batchId,u.reportReference,u.totalTransactions,u.totalAmount,u.currency,u.submissionStatus,u.acknowledgmentReference||"",u.submittedBy,u.retentionDate,u.auditHash,u.createdAt];l.push(d.join(","))}return l.join(`
`)}async submitVCTRReport(e){const r=`VCTR-BATCH-${Date.now()}-${Xt(8)}`,n=new Date().toISOString().split("T")[0],i=new Date().toISOString().split("T")[1],l=this.generateVCTRXML(e),u=JSON.stringify(e,null,2),d=this.generateVCTRCSV([e]),f={id:Xt(),reportType:"VCTR",submissionMethod:e.submissionMethod,submissionDate:n,submissionTime:i,batchId:r,reportReference:e.reportReference,transactionIds:[e.transactionId],totalTransactions:1,totalAmount:e.cadEquivalent,currency:"CAD",reportData:e,isCryptoReport:!0,cryptocurrencyTypes:[e.virtualCurrencyType],totalCryptoAmount:e.virtualCurrencyAmount,walletAddresses:[...e.senderWalletAddress?[{address:e.senderWalletAddress,type:e.virtualCurrencyType,role:"sender"}]:[],{address:e.receiverWalletAddress,type:e.virtualCurrencyType,role:"receiver"}],transactionHashes:[e.transactionHash],xmlContent:l,jsonContent:u,csvContent:d,submissionStatus:"prepared",submittedBy:e.preparedBy,retentionDate:this.calculateRetentionDate(),auditHash:await this.generateAuditHash(l+u),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return await this.storeSubmissionRecord(f),f.submissionStatus="submitted",f.acknowledgmentReference=`VCTR-ACK-${Date.now()}`,f.updatedAt=new Date().toISOString(),await this.updateSubmissionRecord(f),_e.send({type:"vctr_report_submitted",data:{reportType:"VCTR",batchId:r,reportReference:e.reportReference,transactionId:e.transactionId,cryptocurrency:e.virtualCurrencyType,amount:e.cadEquivalent,submissionDate:n}}),f}async submitLVCTRReport(e){const r=`LVCTR-BATCH-${Date.now()}-${Xt(8)}`,n=new Date().toISOString().split("T")[0],i=new Date().toISOString().split("T")[1],l=this.generateLVCTRXML(e),u=JSON.stringify(e,null,2),d=this.generateVCTRCSV([e]),f={id:Xt(),reportType:"LVCTR",submissionMethod:e.submissionMethod,submissionDate:n,submissionTime:i,batchId:r,reportReference:e.reportReference,transactionIds:[e.transactionId,...e.aggregateTransactions.map(h=>h.transactionId)],totalTransactions:1+e.aggregateTransactions.length,totalAmount:e.totalAggregateAmount,currency:"CAD",reportData:e,isCryptoReport:!0,cryptocurrencyTypes:Array.from(new Set([e.virtualCurrencyType,...e.aggregateTransactions.map(h=>h.virtualCurrencyType)])),totalCryptoAmount:e.virtualCurrencyAmount+e.aggregateTransactions.reduce((h,p)=>h+p.amount,0),walletAddresses:[...e.senderWalletAddress?[{address:e.senderWalletAddress,type:e.virtualCurrencyType,role:"sender"}]:[],{address:e.receiverWalletAddress,type:e.virtualCurrencyType,role:"receiver"}],transactionHashes:[e.transactionHash],xmlContent:l,jsonContent:u,csvContent:d,submissionStatus:"prepared",submittedBy:e.preparedBy,retentionDate:this.calculateRetentionDate(),auditHash:await this.generateAuditHash(l+u),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return await this.storeSubmissionRecord(f),f.submissionStatus="submitted",f.acknowledgmentReference=`LVCTR-ACK-${Date.now()}`,f.updatedAt=new Date().toISOString(),await this.updateSubmissionRecord(f),_e.send({type:"lvctr_report_submitted",data:{reportType:"LVCTR",batchId:r,reportReference:e.reportReference,transactionCount:f.totalTransactions,totalAmount:e.totalAggregateAmount,cryptocurrency:e.virtualCurrencyType,submissionDate:n}}),f}async getCryptoSubmissionRecords(){return(await this.getAllSubmissionRecords()).filter(r=>r.isCryptoReport===!0)}async getPendingCryptoReports(){return await nT.getPendingCryptoReports()}async exportCryptoAuditRecords(e,r){var d,f,h;const n=await this.getCryptoSubmissionRecords(),i=e&&r?n.filter(p=>p.submissionDate>=e&&p.submissionDate<=r):n,u=[["Submission_ID","Report_Type","Report_Reference","Cryptocurrencies","Total_Crypto_Amount","CAD_Equivalent","Transaction_Hashes","Wallet_Addresses","Submission_Date","Submission_Status","Acknowledgment_Reference"].join(",")];for(const p of i){const g=[p.id,p.reportType,p.reportReference,((d=p.cryptocurrencyTypes)==null?void 0:d.join(";"))||"",p.totalCryptoAmount||0,p.totalAmount,((f=p.transactionHashes)==null?void 0:f.join(";"))||"",((h=p.walletAddresses)==null?void 0:h.map(x=>`${x.address}(${x.role})`).join(";"))||"",p.submissionDate,p.submissionStatus,p.acknowledgmentReference||""];u.push(g.join(","))}return u.join(`
`)}generateVCTRXML(e){let r=`<?xml version="1.0" encoding="UTF-8"?>
`;return r+=`<vctr_report xmlns="http://www.fintrac-canafe.gc.ca/vctr">
`,r+=`  <report_header>
`,r+=`    <report_type>VCTR</report_type>
`,r+=`    <report_reference>${e.reportReference}</report_reference>
`,r+=`    <submission_date>${e.submissionDate}</submission_date>
`,r+=`  </report_header>
`,r+=`  <virtual_currency_transaction>
`,r+=`    <transaction_id>${e.transactionId}</transaction_id>
`,r+=`    <currency_type>${e.virtualCurrencyType}</currency_type>
`,r+=`    <amount>${e.virtualCurrencyAmount}</amount>
`,r+=`    <cad_equivalent>${e.cadEquivalent}</cad_equivalent>
`,r+=`    <exchange_rate>${e.exchangeRate}</exchange_rate>
`,r+=`    <transaction_hash>${this.escapeXml(e.transactionHash)}</transaction_hash>
`,r+=`    <receiver_wallet>${this.escapeXml(e.receiverWalletAddress)}</receiver_wallet>
`,e.senderWalletAddress&&(r+=`    <sender_wallet>${this.escapeXml(e.senderWalletAddress)}</sender_wallet>
`),e.ipAddress&&(r+=`    <ip_address>${e.ipAddress}</ip_address>
`),r+=`    <network_fee>${e.networkFee}</network_fee>
`,r+=`    <confirmations>${e.confirmations}</confirmations>
`,r+=`  </virtual_currency_transaction>
`,r+=`</vctr_report>
`,r}generateLVCTRXML(e){let r=this.generateVCTRXML(e);r=r.replace("</vctr_report>",""),r+=`  <aggregate_transactions>
`,r+=`    <aggregation_period>
`,r+=`      <start_date>${e.aggregationPeriod.startDate}</start_date>
`,r+=`      <end_date>${e.aggregationPeriod.endDate}</end_date>
`,r+=`    </aggregation_period>
`,r+=`    <total_aggregate_amount>${e.totalAggregateAmount}</total_aggregate_amount>
`;for(const n of e.aggregateTransactions)r+=`    <related_transaction>
`,r+=`      <transaction_id>${n.transactionId}</transaction_id>
`,r+=`      <date>${n.date}</date>
`,r+=`      <amount>${n.amount}</amount>
`,r+=`      <currency_type>${n.virtualCurrencyType}</currency_type>
`,r+=`      <cad_equivalent>${n.cadEquivalent}</cad_equivalent>
`,r+=`    </related_transaction>
`;return r+=`  </aggregate_transactions>
`,r+=`</lvctr_report>
`,r}generateVCTRCSV(e){const n=[["Report_Reference","Transaction_ID","Currency_Type","Crypto_Amount","CAD_Equivalent","Exchange_Rate","Transaction_Hash","Sender_Wallet","Receiver_Wallet","Network_Fee","Confirmations","IP_Address","Device_ID","Customer_ID","Verification_Level","Risk_Score","Suspicious","Submission_Date"].join(",")];for(const i of e){const l=[i.reportReference,i.transactionId,i.virtualCurrencyType,i.virtualCurrencyAmount,i.cadEquivalent,i.exchangeRate,this.csvEscape(i.transactionHash),this.csvEscape(i.senderWalletAddress||""),this.csvEscape(i.receiverWalletAddress),i.networkFee,i.confirmations,i.ipAddress||"",i.deviceId||"",i.customerId,i.verificationLevel,i.riskScore,i.suspicious,i.submissionDate];n.push(l.join(","))}return n.join(`
`)}escapeXml(e){return e.replace(/[<>&'"]/g,r=>{switch(r){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return r}})}csvEscape(e){return e.includes(",")||e.includes('"')||e.includes(`
`)?`"${e.replace(/"/g,'""')}"`:e}getIssuingAuthority(e){switch(e){case"drivers_license":return"Provincial Government";case"passport":return"Government of Canada";case"provincial_id":return"Provincial Government";default:return"Government Authority"}}calculateRetentionDate(){const e=new Date;return e.setFullYear(e.getFullYear()+this.MINIMUM_RETENTION_YEARS),e.toISOString().split("T")[0]}async generateAuditHash(e){const n=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(i)).map(u=>u.toString(16).padStart(2,"0")).join("")}}const qs=new Q9;var Z9={};class J9{constructor(){te(this,"LCTR_THRESHOLD_CAD",1e4);te(this,"ENHANCED_RECORDS_THRESHOLD_CAD",3e3);te(this,"LCTR_DEADLINE_DAYS",15);te(this,"STR_DEADLINE_DAYS",30);te(this,"RECORD_RETENTION_YEARS",5)}async validateTransaction(e){const r=this.convertToCad(e.amount,e.currency),n={isCompliant:!0,complianceLevel:"none",requiredActions:[],mandatoryFields:[],missingDocuments:[],deadlines:{recordRetentionDate:this.calculateRetentionDate()},riskFactors:[],regulatoryFlags:[]};return n.complianceLevel=this.determineComplianceLevel(r,e.paymentMethod),await this.validateCustomerRequirements(e,n),await this.validateDocumentRequirements(e,n),this.validateSuspiciousActivityIndicators(e,n),this.validateRecordKeepingRequirements(e,n),this.setComplianceDeadlines(e,n),n.isCompliant=n.requiredActions.length===0,n}async validateMSBRegistration(){const e=[],r=[];return Z9.FINTRAC_MSB_ID||localStorage.getItem("fintrac_msb_id")||(e.push("FINTRAC MSB registration ID not configured"),r.push("Set FINTRAC_MSB_ID environment variable or configure in settings")),localStorage.getItem("quebec_msb_license")||(e.push("Quebec MSB license not configured"),r.push("Obtain and configure Quebec Money Services Business license")),localStorage.getItem("compliance_officer")||(e.push("Compliance officer not designated"),r.push("Designate a compliance officer as required by FINTRAC")),{isValid:e.length===0,issues:e,recommendations:r}}async validateCustomerDueDiligence(e){const r=[],n=[];try{const i=await Nt.getCustomerById(e);if(!i)return{isCompliant:!1,missingRequirements:["Customer record not found"],documentStatus:[]};const l=["firstName","lastName","dateOfBirth","address","identification"];for(const f of l)this.hasValidValue(i,f)||r.push(`Missing required field: ${f}`);if(i.identification){const f=i.identification;(!f.type||!f.number||!f.expiryDate)&&r.push("Incomplete identification information"),f.expiryDate&&new Date(f.expiryDate)<new Date&&r.push("Identification document has expired")}const u=await ei.getCustomerDocuments(e),d=["photo_id","proof_of_address"];for(const f of d){const h=u.find(p=>p.documentType===f);h?h.metadata.documentVerified||n.push(`Document pending verification: ${f}`):r.push(`Missing mandatory document: ${f}`)}return{isCompliant:r.length===0,missingRequirements:r,documentStatus:n}}catch(i){return console.error("Error validating customer due diligence:",i),{isCompliant:!1,missingRequirements:["Error accessing customer data"],documentStatus:[]}}}async generateComplianceReport(e,r){try{const n=await qs.getSubmissionRecordsByDateRange(e,r);await ei.exportDocumentAuditLogs(e,r);const i=[];return n.forEach(l=>{const u=new Date(l.submissionDate),d=new Date(l.createdAt),f=Math.ceil((u.getTime()-d.getTime())/(1e3*60*60*24));f>this.LCTR_DEADLINE_DAYS&&i.push({type:"late_submission",reportReference:l.reportReference,daysPastDeadline:f-this.LCTR_DEADLINE_DAYS,severity:"high"})}),{summary:{reportPeriod:{startDate:e,endDate:r},totalSubmissions:n.length,totalTransactions:n.reduce((l,u)=>l+u.totalTransactions,0),totalAmount:n.reduce((l,u)=>l+u.totalAmount,0),violationsFound:i.length,complianceScore:i.length===0?100:Math.max(0,100-i.length*10)},transactions:n.flatMap(l=>l.reportData.transactions||[]),submissions:n,documents:[],violations:i}}catch(n){throw console.error("Error generating compliance report:",n),new Error("Failed to generate compliance report")}}determineComplianceLevel(e,r){const n=r.toLowerCase().includes("cash");return e>=this.LCTR_THRESHOLD_CAD&&n?"lctr_required":e>=this.ENHANCED_RECORDS_THRESHOLD_CAD?"enhanced_records":"basic_records"}async validateCustomerRequirements(e,r){if(!e.customerId){r.requiredActions.push("Customer identification required"),r.mandatoryFields.push("customerId");return}try{const n=await Nt.getCustomerById(e.customerId);if(!n){r.requiredActions.push("Customer record not found");return}const i=this.getRequiredCustomerFields(r.complianceLevel);for(const l of i)this.hasValidValue(n,l)||(r.mandatoryFields.push(l),r.requiredActions.push(`Missing required customer field: ${l}`));n.identification&&new Date(n.identification.expiryDate)<new Date&&r.requiredActions.push("Customer identification has expired")}catch{r.requiredActions.push("Error validating customer information")}}async validateDocumentRequirements(e,r){if(e.customerId)try{const n=await ei.getCustomerDocuments(e.customerId),i=this.getRequiredDocuments(r.complianceLevel);for(const l of i){const u=n.find(d=>d.documentType===l);u?u.metadata.documentVerified||r.requiredActions.push(`Document requires verification: ${l}`):(r.missingDocuments.push(l),r.requiredActions.push(`Missing required document: ${l}`))}}catch{r.requiredActions.push("Error validating document requirements")}}validateSuspiciousActivityIndicators(e,r){var i;const n=[{condition:e.amount===9999.99||e.amount===9999,message:"Amount appears to be structured to avoid reporting threshold"},{condition:e.sourceOfFunds==="gift"&&e.amount>5e4,message:"Large gift transaction may require additional scrutiny"},{condition:e.thirdPartyInvolved&&!((i=e.customerData)!=null&&i.thirdPartyName),message:"Third party transaction missing third party details"},{condition:e.country&&this.isHighRiskCountry(e.country),message:`Transaction involves high-risk country: ${e.country}`}];for(const l of n)l.condition&&(r.riskFactors.push(l.message),r.regulatoryFlags.push("SUSPICIOUS_ACTIVITY_REVIEW"))}validateRecordKeepingRequirements(e,r){const n=["transaction_receipt","customer_identification_record"];(r.complianceLevel==="enhanced_records"||r.complianceLevel==="lctr_required")&&n.push("source_of_funds_verification","purpose_of_transaction","beneficial_ownership_information");for(const i of n)r.requiredActions.push(`Ensure ${i} is properly documented and retained`)}setComplianceDeadlines(e,r){const n=new Date(e.date);if(r.complianceLevel==="lctr_required"){const i=new Date(n);i.setDate(i.getDate()+this.LCTR_DEADLINE_DAYS),r.deadlines.lctrDeadline=i.toISOString().split("T")[0]}if(r.riskFactors.length>0){const i=new Date(n);i.setDate(i.getDate()+this.STR_DEADLINE_DAYS),r.deadlines.strDeadline=i.toISOString().split("T")[0]}}getRequiredCustomerFields(e){const r=["firstName","lastName","dateOfBirth","address"];return e==="enhanced_records"||e==="lctr_required"?[...r,"occupation","sourceOfFunds","identification.type","identification.number","identification.expiryDate"]:r}getRequiredDocuments(e){const r=["photo_id"];return e==="enhanced_records"||e==="lctr_required"?[...r,"proof_of_address","selfie"]:r}convertToCad(e,r){return r==="CAD"?e:e*({USD:1.35,EUR:1.45,GBP:1.7,JPY:.009,AUD:.95,CHF:1.47}[r]||1)}isHighRiskCountry(e){return["afghanistan","iran","north korea","syria","russia","belarus"].includes(e.toLowerCase())}hasValidValue(e,r){const n=r.split(".");let i=e;for(const l of n){if(!i||typeof i!="object")return!1;i=i[l]}return i!=null&&(typeof i!="string"||i.trim()!=="")}calculateRetentionDate(){const e=new Date;return e.setFullYear(e.getFullYear()+this.RECORD_RETENTION_YEARS),e.toISOString().split("T")[0]}}const M0=new J9;class eB{async ensureInitialized(){await Me.init()}mapDBTransactionToTransaction(e){const r=e.lctrDeadline?Math.ceil((new Date(e.lctrDeadline).getTime()-Date.now())/864e5):void 0;return{id:e.id,date:e.date,fromCurrency:e.fromCurrency,toCurrency:e.toCurrency,fromAmount:e.fromAmount,toAmount:e.toAmount,commission:e.commission,profit:e.profit,status:e.status,customerId:e.customerId,paymentMethod:e.paymentMethod||"cash",paymentResult:e.paymentResult,paymentReferenceId:e.paymentReferenceId,paymentDetails:e.paymentDetails,requiresLCTR:e.complianceStatus==="lctr_required",requiresEnhancedRecords:e.complianceStatus==="enhanced_records",lctrDeadline:e.lctrDeadline,daysUntilDeadline:r,riskScore:e.riskScore,complianceStatus:e.complianceStatus}}async getTransactions(){return await this.ensureInitialized(),(await Me.getTransactions()).map(r=>this.mapDBTransactionToTransaction(r))}async getTransactionById(e){await this.ensureInitialized();const n=(await Me.getTransactions()).find(i=>i.id===e);return n?this.mapDBTransactionToTransaction(n):null}async createTransaction(e){await this.ensureInitialized();const r=new Date,n=this.checkComplianceRequirements(e.fromAmount,e.fromCurrency),i={transactionId:"temp",amount:e.toAmount,currency:e.toCurrency,customerId:e.customerId??void 0,paymentMethod:e.paymentMethod||"cash",conductorType:"individual",thirdPartyInvolved:!1,country:"Canada",date:r.toISOString()},l=await Me.createTransaction({date:r.toISOString().slice(0,16).replace("T"," "),fromCurrency:e.fromCurrency,toCurrency:e.toCurrency,fromAmount:e.fromAmount,toAmount:e.toAmount,commission:e.commission,profit:e.commission,status:n.requiresLCTR?"locked":"completed",complianceStatus:n.requiresLCTR?"lctr_required":n.requiresEnhancedRecords?"enhanced_records":"none",lctrDeadline:n.requiresLCTR?new Date(Date.now()+360*60*60*1e3).toISOString():void 0,customerId:e.customerId||void 0,paymentMethod:e.paymentMethod,paymentResult:e.paymentResult,paymentReferenceId:e.paymentReferenceId,paymentDetails:e.paymentDetails});if(n.requiresLCTR||n.requiresEnhancedRecords)try{i.transactionId=l.id;const d=await M0.validateTransaction(i);if(!d.isCompliant){const f=(()=>{switch(d.complianceLevel){case"basic_records":return"enhanced_records";case"enhanced_records":case"lctr_required":case"completed":case"none":return d.complianceLevel;default:return"none"}})();await this.updateTransaction(l.id,{riskFactors:d.riskFactors,complianceStatus:f})}}catch(d){console.warn("FINTRAC validation failed:",d)}(n.requiresLCTR||n.requiresEnhancedRecords)&&(localStorage.setItem("pendingComplianceTransaction",JSON.stringify({id:l.id,timestamp:new Date().toISOString()})),window.dispatchEvent(new CustomEvent("fintracComplianceRequired",{detail:{transactionId:l.id,requiresLCTR:n.requiresLCTR}})));const u=this.mapDBTransactionToTransaction(l);try{const{default:d}=await He(async()=>{const{default:f}=await Promise.resolve().then(()=>Rd);return{default:f}},void 0);d.send({type:"transaction_created",data:u})}catch(d){console.warn("WebSocket broadcast failed for transaction creation:",d)}return u}async updateTransaction(e,r){await this.ensureInitialized();const n=await this.getTransactionById(e);if(!n)return null;let i=n.complianceStatus;r.requiresLCTR===!0?i="lctr_required":r.requiresEnhancedRecords===!0?i="enhanced_records":typeof r.complianceStatus<"u"&&(i=r.complianceStatus);const l={...r,complianceStatus:i};await Me.updateTransaction(e,l);const u=await this.getTransactionById(e);try{const{default:d}=await He(async()=>{const{default:f}=await Promise.resolve().then(()=>Rd);return{default:f}},void 0);u&&d.send({type:"transaction_updated",data:u})}catch(d){console.warn("WebSocket broadcast failed for transaction update:",d)}return u}async getTransactionsByDateRange(e,r){return await this.ensureInitialized(),(await this.getTransactions()).filter(i=>{const l=new Date(i.date),u=new Date(e),d=new Date(r);return l>=u&&l<=d})}async getTodaysTransactions(){const e=new Date().toISOString().split("T")[0],r=new Date(Date.now()+1440*60*1e3).toISOString().split("T")[0];return this.getTransactionsByDateRange(e,r)}async getComplianceTransactions(){return await this.ensureInitialized(),(await this.getTransactions()).filter(r=>r.complianceStatus==="lctr_required"||r.complianceStatus==="enhanced_records")}async getFintracComplianceTransactions(){return this.getComplianceTransactions()}async getTransactionWithDetails(e){const r=await this.getTransactionById(e);if(!r)return null;const n={...r};if(r.customerId)try{const{default:i}=await He(async()=>{const{default:l}=await Promise.resolve().then(()=>ii);return{default:l}},void 0);n.customerData=await i.getCustomerById(r.customerId),n.documents=await ei.getCustomerDocuments(r.customerId)}catch(i){console.warn("Error loading customer details:",i)}return n}async linkCustomerToTransaction(e,r){await this.ensureInitialized();try{if(!await this.getTransactionById(e))throw new Error("Transaction not found");return await this.updateTransaction(e,{customerId:r})}catch(n){throw console.error("Error linking customer to transaction:",n),n}}async getTransactionsWithoutCustomers(){return await this.ensureInitialized(),(await this.getTransactions()).filter(r=>!r.customerId)}async getTransactionsByCustomerId(e){return await this.ensureInitialized(),(await this.getTransactions()).filter(n=>n.customerId===e).sort((n,i)=>new Date(i.date).getTime()-new Date(n.date).getTime())}async getCustomerLatestTransaction(e){const r=await this.getTransactionsByCustomerId(e);return r.length>0?r[0]:null}async getCustomerTransactionSummary(e){const r=await this.getTransactionsByCustomerId(e),n={totalTransactions:r.length,totalVolume:r.reduce((i,l)=>i+l.toAmount,0),latestTransactionDate:r.length>0?r[0].date:null,complianceTransactions:r.filter(i=>i.complianceStatus==="lctr_required"||i.complianceStatus==="enhanced_records").length,riskRating:"low"};return n.totalVolume>1e5||n.complianceTransactions>5?n.riskRating="high":(n.totalVolume>5e4||n.complianceTransactions>2)&&(n.riskRating="medium"),n}checkComplianceRequirements(e,r){let n=e;return r!=="CAD"&&(n=e*({USD:1.35,EUR:1.45,GBP:1.7,JPY:.009,AUD:.95,CHF:1.47}[r]||1)),{requiresLCTR:n>=1e4,requiresEnhancedRecords:n>=3e3}}async getDailyAnalytics(){await this.ensureInitialized();const e=await this.getTransactions(),r={};return e.forEach(n=>{const i=n.date.split(" ")[0];r[i]||(r[i]={volume:0,transactions:0,profit:0}),r[i].volume+=n.toAmount,r[i].transactions+=1,r[i].profit+=n.profit}),Object.entries(r).map(([n,i])=>({date:n,...i})).sort((n,i)=>new Date(n.date).getTime()-new Date(i.date).getTime())}async getCurrencyPerformance(){await this.ensureInitialized();const e=await this.getTransactions(),r={};return e.forEach(n=>{const i=n.toCurrency;r[i]||(r[i]={transactions:0,volume:0,profit:0}),r[i].transactions+=1,r[i].volume+=n.toAmount,r[i].profit+=n.profit}),Object.entries(r).map(([n,i])=>({currency:n,...i})).sort((n,i)=>i.volume-n.volume)}}const ua=new eB,da=Object.freeze(Object.defineProperty({__proto__:null,default:ua},Symbol.toStringTag,{value:"Module"}));class tB{async ensureInitialized(){await Me.init(),await Me.initializeDefaultData()}mapDBInventoryToInventory(e){return{id:e.id,currency:e.currency,amount:e.amount,buyRate:e.buyRate,sellRate:e.sellRate,lastUpdated:e.lastUpdated}}async getInventory(){return await this.ensureInitialized(),(await Me.getInventory()).map(r=>this.mapDBInventoryToInventory(r))}async addStock(e){await this.ensureInitialized(),await Me.addStock(e.currency,e.amount,e.buyRate)}async updateInventoryItem(e,r){await this.ensureInitialized(),await Me.updateInventoryItem(e,{...r,lastUpdated:new Date().toISOString()})}async getInventoryByCurrency(e){return(await this.getInventory()).find(n=>n.currency===e)||null}async checkInventoryAvailability(e,r){const n=await this.getInventoryByCurrency(e);return n?n.amount>=r:!1}async reserveInventory(e,r){const n=await this.getInventoryByCurrency(e);return!n||n.amount<r?!1:(await this.updateInventoryItem(n.id,{amount:n.amount-r}),!0)}async getLowInventoryAlerts(){return(await this.getInventory()).filter(r=>r.amount<1e3)}async getInventoryStats(){const e=await this.getInventory(),r=await this.getLowInventoryAlerts(),n=e.reduce((l,u)=>{const d=u.amount*u.sellRate;return l+d},0),i=e.length>0?Math.max(...e.map(l=>new Date(l.lastUpdated).getTime())):Date.now();return{totalCurrencies:e.length,totalValue:Math.round(n),lowStockCount:r.length,lastUpdated:new Date(i).toISOString()}}}const Rl=new tB,ro=Object.freeze(Object.defineProperty({__proto__:null,default:Rl},Symbol.toStringTag,{value:"Module"}));class rB{constructor(){te(this,"rateLocks",[]);te(this,"rateAlerts",[]);te(this,"websiteOrders",[]);te(this,"websiteMetrics",{visitors:0,pageViews:0,calculatorUses:0,rateLocks:0,rateAlerts:0,conversionRate:0});this.initializeSampleData(),this.startExpirationChecker()}initializeSampleData(){const e=new Date,r=new Date(e);r.setDate(r.getDate()+1),this.rateLocks=[{id:"rl-001",fromCurrency:"USD",toCurrency:"CAD",amount:5e3,rate:1.35,customerEmail:"john.doe@example.com",customerPhone:"(514) 555-0123",createdAt:new Date(e.getTime()-7200*1e3).toISOString(),expiresAt:r.toISOString(),status:"active"},{id:"rl-002",fromCurrency:"EUR",toCurrency:"CAD",amount:3e3,rate:1.52,customerEmail:"jane.smith@example.com",createdAt:new Date(e.getTime()-1440*60*1e3).toISOString(),expiresAt:new Date(e.getTime()+8640*60*1e3).toISOString(),status:"active"}],this.rateAlerts=[{id:"ra-001",fromCurrency:"USD",toCurrency:"CAD",targetRate:1.38,amount:1e4,customerEmail:"michael.brown@example.com",customerPhone:"(514) 555-0456",createdAt:new Date(e.getTime()-4320*60*1e3).toISOString(),status:"active"},{id:"ra-002",fromCurrency:"GBP",toCurrency:"CAD",targetRate:1.85,customerEmail:"sarah.wilson@example.com",createdAt:new Date(e.getTime()-7200*60*1e3).toISOString(),status:"triggered",triggeredAt:new Date(e.getTime()-1440*60*1e3).toISOString()}],this.websiteOrders=[{id:"wo-001",type:"rate_lock",rateLockId:"rl-001",customerEmail:"john.doe@example.com",customerPhone:"(514) 555-0123",createdAt:new Date(e.getTime()-7200*1e3).toISOString(),status:"pending"},{id:"wo-002",type:"rate_alert",rateAlertId:"ra-001",customerEmail:"michael.brown@example.com",customerPhone:"(514) 555-0456",createdAt:new Date(e.getTime()-4320*60*1e3).toISOString(),status:"pending"}],this.websiteMetrics={visitors:1250,pageViews:3750,calculatorUses:875,rateLocks:42,rateAlerts:68,conversionRate:8.8}}startExpirationChecker(){setInterval(()=>{const e=new Date;this.rateLocks.forEach(r=>{r.status==="active"&&new Date(r.expiresAt)<e&&this.expireRateLock(r.id)})},3600*1e3)}getRateLocks(){return new Promise(e=>{setTimeout(()=>{e([...this.rateLocks])},500)})}getRateLockById(e){return new Promise(r=>{setTimeout(()=>{const n=this.rateLocks.find(i=>i.id===e);r(n||null)},300)})}createRateLock(e){return new Promise(async r=>{setTimeout(async()=>{const n=new Date,i={id:`rl-${Date.now()}`,...e,createdAt:n.toISOString(),status:"active"};this.rateLocks.push(i);const l={id:`wo-${Date.now()}`,type:"rate_lock",rateLockId:i.id,customerEmail:i.customerEmail,customerPhone:i.customerPhone,createdAt:n.toISOString(),status:"pending"};this.websiteOrders.push(l),this.websiteMetrics.rateLocks++,this.updateConversionRate();try{await this.reserveInventoryForRateLock(i)}catch(u){console.error("Error reserving inventory:",u)}_e.send({type:"rate_lock_created",data:{id:i.id,fromCurrency:i.fromCurrency,toCurrency:i.toCurrency,amount:i.amount,rate:i.rate,expiresAt:i.expiresAt}}),r(i)},800)})}async reserveInventoryForRateLock(e){const r=await Rl.getInventoryByCurrency(e.toCurrency);if(!r)throw new Error(`Inventory item for ${e.toCurrency} not found`);if(r.amount<e.amount)throw new Error(`Not enough ${e.toCurrency} in inventory`);await Rl.updateInventoryItem(r.id,{amount:r.amount-e.amount}),_e.send({type:"inventory_update",data:{currency:e.toCurrency,amount:e.amount,action:"reserve",reason:`Rate lock ${e.id}`}})}async releaseReservedInventory(e){const r=await Rl.getInventoryByCurrency(e.toCurrency);if(!r)throw new Error(`Inventory item for ${e.toCurrency} not found`);await Rl.updateInventoryItem(r.id,{amount:r.amount+e.amount}),_e.send({type:"inventory_update",data:{currency:e.toCurrency,amount:e.amount,action:"release",reason:`Rate lock ${e.id} ${e.status}`}})}completeRateLock(e){return new Promise(async(r,n)=>{setTimeout(async()=>{const i=this.rateLocks.findIndex(u=>u.id===e);if(i===-1){n(new Error(`Rate lock with ID ${e} not found`));return}const l=this.rateLocks[i];if(l.status!=="active"){n(new Error(`Rate lock with ID ${e} is not active`));return}try{const u=await ua.createTransaction({fromCurrency:l.fromCurrency,toCurrency:l.toCurrency,fromAmount:l.amount,toAmount:l.amount*l.rate,commission:l.amount*l.rate*.015}),d={...l,status:"completed",transactionId:u.id};this.rateLocks[i]=d;const f=this.websiteOrders.findIndex(h=>h.type==="rate_lock"&&h.rateLockId===e);f!==-1&&(this.websiteOrders[f]={...this.websiteOrders[f],status:"completed",transactionId:u.id}),_e.send({type:"rate_lock_completed",data:{id:d.id,transactionId:u.id}}),r(d)}catch(u){n(u)}},800)})}expireRateLock(e){return new Promise(async(r,n)=>{const i=this.rateLocks.findIndex(u=>u.id===e);if(i===-1){n(new Error(`Rate lock with ID ${e} not found`));return}const l=this.rateLocks[i];if(l.status!=="active"){n(new Error(`Rate lock with ID ${e} is not active`));return}try{await this.releaseReservedInventory(l);const u={...l,status:"expired"};this.rateLocks[i]=u;const d=this.websiteOrders.findIndex(f=>f.type==="rate_lock"&&f.rateLockId===e);d!==-1&&(this.websiteOrders[d]={...this.websiteOrders[d],status:"cancelled"}),_e.send({type:"rate_lock_expired",data:{id:u.id}}),r(u)}catch(u){n(u)}})}cancelRateLock(e){return new Promise(async(r,n)=>{setTimeout(async()=>{const i=this.rateLocks.findIndex(u=>u.id===e);if(i===-1){n(new Error(`Rate lock with ID ${e} not found`));return}const l=this.rateLocks[i];if(l.status!=="active"){n(new Error(`Rate lock with ID ${e} is not active`));return}try{await this.releaseReservedInventory(l);const u={...l,status:"cancelled"};this.rateLocks[i]=u;const d=this.websiteOrders.findIndex(f=>f.type==="rate_lock"&&f.rateLockId===e);d!==-1&&(this.websiteOrders[d]={...this.websiteOrders[d],status:"cancelled"}),_e.send({type:"rate_lock_cancelled",data:{id:u.id}}),r(u)}catch(u){n(u)}},800)})}getRateAlerts(){return new Promise(e=>{setTimeout(()=>{e([...this.rateAlerts])},500)})}getRateAlertById(e){return new Promise(r=>{setTimeout(()=>{const n=this.rateAlerts.find(i=>i.id===e);r(n||null)},300)})}createRateAlert(e){return new Promise(r=>{setTimeout(()=>{const n=new Date,i={id:`ra-${Date.now()}`,...e,createdAt:n.toISOString(),status:"active"};this.rateAlerts.push(i);const l={id:`wo-${Date.now()}`,type:"rate_alert",rateAlertId:i.id,customerEmail:i.customerEmail,customerPhone:i.customerPhone,createdAt:n.toISOString(),status:"pending"};this.websiteOrders.push(l),this.websiteMetrics.rateAlerts++,this.updateConversionRate(),_e.send({type:"rate_alert_set",data:{id:i.id,fromCurrency:i.fromCurrency,toCurrency:i.toCurrency,targetRate:i.targetRate,amount:i.amount}}),r(i)},800)})}triggerRateAlert(e){return new Promise((r,n)=>{setTimeout(()=>{const i=this.rateAlerts.findIndex(d=>d.id===e);if(i===-1){n(new Error(`Rate alert with ID ${e} not found`));return}const l=this.rateAlerts[i];if(l.status!=="active"){n(new Error(`Rate alert with ID ${e} is not active`));return}const u={...l,status:"triggered",triggeredAt:new Date().toISOString()};this.rateAlerts[i]=u,_e.send({type:"rate_alert_triggered",data:{id:u.id,fromCurrency:u.fromCurrency,toCurrency:u.toCurrency,targetRate:u.targetRate,customerEmail:u.customerEmail}}),r(u)},800)})}getWebsiteOrders(){return new Promise(e=>{setTimeout(()=>{e([...this.websiteOrders])},500)})}getWebsiteOrderById(e){return new Promise(r=>{setTimeout(()=>{const n=this.websiteOrders.find(i=>i.id===e);r(n||null)},300)})}getWebsiteMetrics(){return new Promise(e=>{setTimeout(()=>{e({...this.websiteMetrics})},500)})}trackVisitor(){this.websiteMetrics.visitors++,this.updateConversionRate()}trackPageView(){this.websiteMetrics.pageViews++}trackCalculatorUse(){this.websiteMetrics.calculatorUses++,this.updateConversionRate()}updateConversionRate(){const e=this.websiteMetrics.rateLocks+this.websiteMetrics.rateAlerts,r=this.websiteMetrics.visitors;r>0&&(this.websiteMetrics.conversionRate=e/r*100)}}const Sr=new rB,nB=({onViewRateLock:t,onViewRateAlert:e})=>{const[r,n]=b.useState([]),[i,l]=b.useState(!1),[u,d]=b.useState(0);b.useEffect(()=>{(async()=>{try{const j=(await Sr.getRateLocks()).filter(I=>I.status==="active"),_=(await Sr.getRateAlerts()).filter(I=>I.status==="active"),R=j.map(I=>({id:`notification-${I.id}`,type:"rate_lock",title:"Rate Lock Active",message:`${I.fromCurrency}/${I.toCurrency} locked at ${I.rate} for ${I.amount} ${I.fromCurrency}`,timestamp:I.createdAt,priority:"high",read:!1,data:I})),k=_.map(I=>({id:`notification-${I.id}`,type:"rate_alert",title:"Rate Alert Active",message:`Alert for ${I.fromCurrency}/${I.toCurrency} at ${I.targetRate}`,timestamp:I.createdAt,priority:"medium",read:!1,data:I})),D=[...R,...k];D.sort((I,z)=>new Date(z.timestamp).getTime()-new Date(I.timestamp).getTime()),n(D),d(D.length)}catch(A){console.error("Error loading notifications:",A)}})()},[]),b.useEffect(()=>{const N=j=>{switch(j.type){case"rate_lock_created":f({id:`notification-${j.data.id}`,type:"rate_lock",title:"New Rate Lock",message:`${j.data.fromCurrency}/${j.data.toCurrency} locked at ${j.data.rate} for ${j.data.amount} ${j.data.fromCurrency}`,timestamp:j.timestamp,priority:"high",read:!1,data:j.data});break;case"rate_lock_completed":f({id:`notification-completed-${j.data.id}`,type:"rate_lock",title:"Rate Lock Completed",message:`Rate lock ${j.data.id} has been completed`,timestamp:j.timestamp,priority:"medium",read:!1,data:j.data});break;case"rate_lock_expired":f({id:`notification-expired-${j.data.id}`,type:"rate_lock",title:"Rate Lock Expired",message:`Rate lock ${j.data.id} has expired`,timestamp:j.timestamp,priority:"medium",read:!1,data:j.data});break;case"rate_alert_set":f({id:`notification-${j.data.id}`,type:"rate_alert",title:"New Rate Alert",message:`Alert set for ${j.data.fromCurrency}/${j.data.toCurrency} at ${j.data.targetRate}`,timestamp:j.timestamp,priority:"medium",read:!1,data:j.data});break;case"rate_alert_triggered":f({id:`notification-triggered-${j.data.id}`,type:"rate_alert",title:"Rate Alert Triggered!",message:`${j.data.fromCurrency}/${j.data.toCurrency} has reached ${j.data.targetRate}`,timestamp:j.timestamp,priority:"urgent",read:!1,data:j.data});break}},A=_e.subscribe(N);return()=>{A()}},[]);const f=N=>{n(A=>[N,...A]),d(A=>A+1)},h=N=>{n(A=>A.map(j=>j.id===N?{...j,read:!0}:j)),d(A=>Math.max(0,A-1))},p=()=>{n(N=>N.map(A=>({...A,read:!0}))),d(0)},g=N=>{n(A=>{const j=A.find(_=>_.id===N),E=A.filter(_=>_.id!==N);return j&&!j.read&&d(_=>Math.max(0,_-1)),E})},x=N=>{h(N.id),N.type==="rate_lock"&&t?t(N.data.id):N.type==="rate_alert"&&e&&e(N.data.id)},w=N=>{const A=new Date(N),E=new Date().getTime()-A.getTime(),_=Math.floor(E/(1e3*60)),R=Math.floor(E/(1e3*60*60)),k=Math.floor(E/(1e3*60*60*24));return _<60?`${_} min${_!==1?"s":""} ago`:R<24?`${R} hour${R!==1?"s":""} ago`:k<7?`${k} day${k!==1?"s":""} ago`:A.toLocaleDateString()},S=N=>{switch(N.type){case"rate_lock":return s.jsx(io,{className:"h-5 w-5 text-blue-500"});case"rate_alert":return s.jsx(cr,{className:"h-5 w-5 text-yellow-500"});case"website_order":return s.jsx(ia,{className:"h-5 w-5 text-green-500"});default:return s.jsx(Xs,{className:"h-5 w-5 text-gray-500"})}},C=N=>{if(N.read)return"bg-gray-50";switch(N.priority){case"urgent":return"bg-red-50";case"high":return"bg-yellow-50";case"medium":return"bg-blue-50";case"low":return"bg-gray-50";default:return"bg-gray-50"}};return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>l(!i),className:"relative p-2 text-gray-600 hover:text-gray-900 focus:outline-none",children:[s.jsx(Xs,{className:"h-6 w-6"}),u>0&&s.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full",children:u})]}),i&&s.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg overflow-hidden z-50",children:[s.jsxs("div",{className:"p-3 bg-gray-100 border-b border-gray-200 flex justify-between items-center",children:[s.jsx("h3",{className:"font-semibold text-gray-700",children:"Notifications"}),s.jsx("div",{className:"flex space-x-2",children:s.jsx("button",{onClick:p,className:"text-xs text-blue-600 hover:text-blue-800",children:"Mark all as read"})})]}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:r.length===0?s.jsx("div",{className:"p-4 text-center text-gray-500",children:s.jsx("p",{children:"No notifications"})}):s.jsx("div",{children:r.map(N=>s.jsxs("div",{className:`p-3 border-b border-gray-100 ${C(N)} hover:bg-gray-100 transition-colors`,children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("div",{className:"flex-1 cursor-pointer",onClick:()=>x(N),children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 mt-0.5 mr-2",children:S(N)}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:N.title}),s.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:N.message}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center",children:[s.jsx(is,{className:"h-3 w-3 mr-1"}),w(N.timestamp)]})]})]})}),s.jsx("button",{onClick:()=>g(N.id),className:"ml-2 text-gray-400 hover:text-gray-600",children:s.jsx(Ir,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"mt-2 flex justify-end space-x-2",children:[N.type==="rate_lock"&&s.jsxs("button",{onClick:()=>x(N),className:"text-xs px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center",children:[s.jsx(pg,{className:"h-3 w-3 mr-1"}),"View Details"]}),N.type==="rate_alert"&&s.jsxs("button",{onClick:()=>x(N),className:"text-xs px-2 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700 flex items-center",children:[s.jsx(pg,{className:"h-3 w-3 mr-1"}),"View Alert"]})]})]},N.id))})}),s.jsx("div",{className:"p-2 bg-gray-100 border-t border-gray-200 text-center",children:s.jsx("button",{onClick:()=>l(!1),className:"text-xs text-gray-600 hover:text-gray-800",children:"Close"})})]})]})},aB=({isOpen:t,onClose:e,rateLock:r,onComplete:n,onCancel:i})=>{if(!r)return null;const l=f=>new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),u=f=>{const h=new Date,g=new Date(f).getTime()-h.getTime();if(g<=0)return"Expired";const x=Math.floor(g/(1e3*60*60*24)),w=Math.floor(g%(1e3*60*60*24)/(1e3*60*60));if(x>0)return`${x}d ${w}h`;{const S=Math.floor(g%36e5/6e4);return`${w}h ${S}m`}},d=r.amount*r.rate;return s.jsx(yt,{isOpen:t,onClose:e,title:"Rate Lock Details",size:"lg",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(io,{className:"h-5 w-5 text-blue-500 mr-2"}),s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Rate Lock #",r.id]})]}),s.jsx("div",{children:s.jsx("span",{className:`px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${r.status==="active"?"bg-green-100 text-green-800":r.status==="completed"?"bg-blue-100 text-blue-800":r.status==="expired"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:r.status.charAt(0).toUpperCase()+r.status.slice(1)})})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-3",children:"Customer Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx(Xl,{className:"h-5 w-5 text-gray-400 mr-2 mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Email"}),s.jsx("div",{className:"text-sm text-gray-600",children:r.customerEmail})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx(uy,{className:"h-5 w-5 text-gray-400 mr-2 mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Phone"}),s.jsx("div",{className:"text-sm text-gray-600",children:r.customerPhone||"Not provided"})]})]})]})]}),s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-3",children:"Exchange Details"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"From"}),s.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:[r.amount," ",r.fromCurrency]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"To"}),s.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:[d.toFixed(2)," ",r.toCurrency]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Rate"}),s.jsx("div",{className:"text-lg font-semibold text-blue-600",children:r.rate})]})]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-3",children:"Timing Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx(RC,{className:"h-5 w-5 text-gray-400 mr-2 mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Created"}),s.jsx("div",{className:"text-sm text-gray-600",children:l(r.createdAt)})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx(is,{className:"h-5 w-5 text-gray-400 mr-2 mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Expires"}),s.jsxs("div",{className:"text-sm text-gray-600",children:[l(r.expiresAt),r.status==="active"&&s.jsxs("span",{className:"ml-2 text-blue-600 font-medium",children:["(",u(r.expiresAt)," remaining)"]})]})]})]})]})]}),r.status==="completed"&&r.transactionId&&s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-3",children:"Transaction Information"}),s.jsxs("div",{className:"flex items-start",children:[s.jsx(ia,{className:"h-5 w-5 text-green-500 mr-2 mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Transaction ID"}),s.jsxs("div",{className:"text-sm text-gray-600",children:["#",r.transactionId]})]})]})]}),r.status==="active"&&s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-4 border-t border-gray-200",children:[s.jsxs("button",{onClick:()=>n(r.id),className:"flex-1 inline-flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[s.jsx(ft,{className:"h-5 w-5 mr-2"}),"Complete Exchange"]}),s.jsxs("button",{onClick:()=>i(r.id),className:"flex-1 inline-flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[s.jsx(us,{className:"h-5 w-5 mr-2"}),"Cancel Rate Lock"]})]})]})})},sB=({isOpen:t,onClose:e,rateAlert:r,onTrigger:n})=>{if(!r)return null;const i=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return s.jsx(yt,{isOpen:t,onClose:e,title:"Rate Alert Details",size:"lg",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Xs,{className:"h-5 w-5 text-yellow-500 mr-2"}),s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Rate Alert #",r.id]})]}),s.jsx("div",{children:s.jsx("span",{className:`px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${r.status==="active"?"bg-green-100 text-green-800":r.status==="triggered"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:r.status.charAt(0).toUpperCase()+r.status.slice(1)})})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-3",children:"Customer Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx(Xl,{className:"h-5 w-5 text-gray-400 mr-2 mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Email"}),s.jsx("div",{className:"text-sm text-gray-600",children:r.customerEmail})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx(uy,{className:"h-5 w-5 text-gray-400 mr-2 mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Phone"}),s.jsx("div",{className:"text-sm text-gray-600",children:r.customerPhone||"Not provided"})]})]})]})]}),s.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-3",children:"Alert Details"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Exchange"}),s.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:[r.fromCurrency," → ",r.toCurrency]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Target Rate"}),s.jsx("div",{className:"text-lg font-semibold text-yellow-600",children:r.targetRate})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Amount"}),s.jsx("div",{className:"text-lg font-semibold text-gray-900",children:r.amount?`${r.amount} ${r.fromCurrency}`:"Not specified"})]})]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-3",children:"Timing Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx(RC,{className:"h-5 w-5 text-gray-400 mr-2 mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Created"}),s.jsx("div",{className:"text-sm text-gray-600",children:i(r.createdAt)})]})]}),r.status==="triggered"&&r.triggeredAt&&s.jsxs("div",{className:"flex items-start",children:[s.jsx(cr,{className:"h-5 w-5 text-yellow-500 mr-2 mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Triggered"}),s.jsx("div",{className:"text-sm text-gray-600",children:i(r.triggeredAt)})]})]})]})]}),s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-3",children:"Current Market Information"}),s.jsxs("div",{className:"flex items-start",children:[s.jsx(b4,{className:"h-5 w-5 text-blue-500 mr-2 mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Current Market Rate"}),s.jsxs("div",{className:"text-sm text-gray-600",children:["1 ",r.fromCurrency," = 1.3450 ",r.toCurrency,s.jsxs("span",{className:"ml-2 text-sm text-yellow-600 font-medium",children:["(Target: ",r.targetRate,")"]})]})]})]})]}),r.status==="active"&&n&&s.jsx("div",{className:"flex flex-col sm:flex-row gap-4 pt-4 border-t border-gray-200",children:s.jsxs("button",{onClick:()=>n(r.id),className:"flex-1 inline-flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-yellow-600 hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500",children:[s.jsx(cr,{className:"h-5 w-5 mr-2"}),"Trigger Alert"]})}),r.status==="triggered"&&s.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-r-md",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(cr,{className:"h-5 w-5 text-yellow-400"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Notification Sent to Customer"}),s.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:s.jsxs("p",{children:["Your rate alert for ",r.fromCurrency,"/",r.toCurrency," at ",r.targetRate," has been triggered! Please visit our store or contact us to take advantage of this rate."]})})]})]})})]})})},iB=({isOpen:t,onClose:e})=>{const[r,n]=b.useState(""),[i,l]=b.useState(!1),[u,d]=b.useState(!1),[f,h]=b.useState(""),[p,g]=b.useState({storeQRCode:"",defaultCommission:"1.5",autoBackup:!0,complianceAlerts:!0,lowInventoryThreshold:"1000"}),x=async A=>{const E=new TextEncoder().encode(A+"leaperfx_settings_salt_2024"),_=await crypto.subtle.digest("SHA-256",E);return Array.from(new Uint8Array(_)).map(k=>k.toString(16).padStart(2,"0")).join("")},w="7e9f2c4b8d6a1e5c3f9b2d8e4a7c1f6b9d2e5a8c1f4b7e0d3a6c9f2e5b8d1a4c7f",S=async A=>{A.preventDefault();try{r==="LeaperFx2024!"||await x(r)===w?(l(!0),h("")):(h("Incorrect password"),n(""))}catch(j){console.error("Authentication error:",j),h("Authentication failed. Please try again."),n("")}},C=()=>{localStorage.setItem("ownerSettings",JSON.stringify(p)),e(),l(!1),n("")},N=()=>{e(),l(!1),n(""),h("")};return cs.useEffect(()=>{const A=localStorage.getItem("ownerSettings");A&&g(JSON.parse(A))},[]),i?s.jsx(yt,{isOpen:t,onClose:N,title:"Owner Settings",size:"lg",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Store QR Code URL"}),s.jsx("input",{type:"url",value:p.storeQRCode,onChange:A=>g({...p,storeQRCode:A.target.value}),placeholder:"https://your-store-url.com",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"URL that customers will be directed to when scanning your store QR code"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Commission Rate (%)"}),s.jsx("input",{type:"number",value:p.defaultCommission,onChange:A=>g({...p,defaultCommission:A.target.value}),step:"0.1",min:"0",max:"10",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Low Inventory Alert Threshold"}),s.jsx("input",{type:"number",value:p.lowInventoryThreshold,onChange:A=>g({...p,lowInventoryThreshold:A.target.value}),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Alert when currency inventory falls below this amount"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Auto Backup"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Automatically backup data daily"})]}),s.jsx("button",{type:"button",onClick:()=>g({...p,autoBackup:!p.autoBackup}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${p.autoBackup?"bg-blue-600":"bg-gray-200"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${p.autoBackup?"translate-x-6":"translate-x-1"}`})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"FINTRAC Compliance Alerts"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Receive alerts for compliance deadlines"})]}),s.jsx("button",{type:"button",onClick:()=>g({...p,complianceAlerts:!p.complianceAlerts}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${p.complianceAlerts?"bg-blue-600":"bg-gray-200"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${p.complianceAlerts?"translate-x-6":"translate-x-1"}`})})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),s.jsxs("button",{onClick:C,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center",children:[s.jsx(Pd,{className:"h-4 w-4 mr-2"}),"Save Settings"]})]})]})}):s.jsx(yt,{isOpen:t,onClose:N,title:"Owner Settings Access",size:"sm",children:s.jsxs("form",{onSubmit:S,className:"space-y-4",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 mb-4",children:s.jsx(rn,{className:"h-6 w-6 text-yellow-600"})}),s.jsx("p",{className:"text-sm text-gray-600",children:"Enter owner password to access settings"})]}),f&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:f}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:u?"text":"password",value:r,onChange:A=>n(A.target.value),placeholder:"Enter password",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-10",required:!0,autoFocus:!0}),s.jsx("button",{type:"button",onClick:()=>d(!u),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:u?s.jsx(MC,{className:"h-4 w-4 text-gray-400"}):s.jsx(Md,{className:"h-4 w-4 text-gray-400"})})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"button",onClick:N,className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Access Settings"})]})]})})},oB=({onRateUpdate:t})=>{const[e,r]=b.useState([]),[n,i]=b.useState(!0),[l,u]=b.useState(null),[d,f]=b.useState(null),[h,p]=b.useState(""),[g,x]=b.useState(""),[w,S]=b.useState(!1),[C,N]=b.useState(!1),[A,j]=b.useState(!1),[E,_]=b.useState({type:"success",message:"",visible:!1}),R=($,Q)=>{_({type:$,message:Q,visible:!0})},k=()=>{_($=>({...$,visible:!1}))};b.useEffect(()=>{(async()=>{i(!0),u(null);try{const{default:Q}=await He(async()=>{const{default:U}=await Promise.resolve().then(()=>ro);return{default:U}},void 0),ee=(await Q.getInventory()).map(U=>({currency:U.currency,buyRate:U.buyRate,sellRate:U.sellRate,lastUpdated:U.lastUpdated||new Date().toISOString().split("T")[0]}));r(ee)}catch(Q){u("Failed to fetch currency rates"),console.error(Q)}finally{i(!1)}})()},[]);const D=$=>{f($),p($.buyRate.toString()),x($.sellRate.toString())},I=()=>{f(null),p(""),x("")},z=()=>{const $=parseFloat(h),Q=parseFloat(g);return isNaN($)||isNaN(Q)?(R("error","Please enter valid numbers"),!1):$>=Q?(R("error","Sell rate must be higher than buy rate"),!1):!0},V=()=>{d&&z()&&S(!0)},P=async()=>{if(d){i(!0),u(null);try{const $=parseFloat(h),Q=parseFloat(g);await t(d.currency,$,Q);const re=e.map(ee=>ee.currency===d.currency?{...ee,buyRate:$,sellRate:Q,lastUpdated:new Date().toISOString().split("T")[0]}:ee);r(re),f(null),p(""),x(""),N(!0),R("success",`Successfully updated ${d.currency} rates`)}catch($){u("Failed to update rate"),j(!0),R("error","Failed to update currency rate"),console.error($)}finally{i(!1),S(!1)}}};return s.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Currency Rate Management"}),l&&s.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4 rounded",role:"alert",children:[s.jsx("p",{className:"font-bold",children:"Error"}),s.jsx("p",{children:l})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Currency"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Buy Rate"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sell Rate"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Updated"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n&&e.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-4 text-center",children:s.jsxs("div",{className:"flex justify-center items-center",children:[s.jsxs("svg",{className:"animate-spin h-5 w-5 text-blue-600 mr-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading rates..."]})})}):e.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"No currency rates available"})}):e.map($=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:$.currency}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(d==null?void 0:d.currency)===$.currency?s.jsx("input",{type:"number",value:h,onChange:Q=>p(Q.target.value),className:"w-24 p-1 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",step:"0.0001"}):$.buyRate.toFixed(4)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(d==null?void 0:d.currency)===$.currency?s.jsx("input",{type:"number",value:g,onChange:Q=>x(Q.target.value),className:"w-24 p-1 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",step:"0.0001"}):$.sellRate.toFixed(4)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:$.lastUpdated}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(d==null?void 0:d.currency)===$.currency?s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:V,disabled:n,className:"p-1 text-green-600 hover:text-green-900",title:"Save",children:s.jsx(Pd,{className:"h-5 w-5"})}),s.jsx("button",{onClick:I,className:"p-1 text-gray-600 hover:text-gray-900",title:"Cancel",children:s.jsx(Ir,{className:"h-5 w-5"})})]}):s.jsx("button",{onClick:()=>D($),className:"p-1 text-blue-600 hover:text-blue-900",title:"Edit",children:s.jsx(FC,{className:"h-5 w-5"})})})]},$.currency))})]})}),s.jsx(rT,{isOpen:w,onClose:()=>S(!1),onConfirm:P,title:"Confirm Rate Update",message:`Are you sure you want to update ${d==null?void 0:d.currency} rates? This will affect all future transactions.`,confirmText:"Update Rates",cancelText:"Cancel",type:"warning"}),s.jsx(yt,{isOpen:C,onClose:()=>N(!1),title:"Rates Updated Successfully",size:"sm",children:s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:s.jsx(ft,{className:"h-6 w-6 text-green-600"})}),s.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"The currency rates have been successfully updated."}),s.jsx("button",{onClick:()=>N(!1),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Continue"})]})}),s.jsx(yt,{isOpen:A,onClose:()=>j(!1),title:"Failed to Update Rates",size:"sm",children:s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:s.jsx(us,{className:"h-6 w-6 text-red-600"})}),s.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"There was an error updating the currency rates. Please try again."}),s.jsx("button",{onClick:()=>j(!1),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Close"})]})}),s.jsx(Ao,{type:E.type,message:E.message,isVisible:E.visible,onClose:k})]})},aT=({type:t,onImportComplete:e})=>{const[r,n]=b.useState(!1),[i,l]=b.useState(null),u=x=>/^[=@]/.test(x.trim())?"'"+x:x.replace(/<script[^>]*>.*?<\/script>/gi,"").replace(/<[^>]*>/g,"").replace(/javascript:/gi,"").replace(/vbscript:/gi,"").replace(/on\w+\s*=/gi,"").trim(),d=x=>{const S=x.replace(/[\r\n]+/g,`
`).trim().split(`
`).filter(E=>E.trim());if(S.length<2)return[];const C=S[0].split(",").map(E=>{const _=E.trim().replace(/"/g,"");return u(_)}),N=/^[a-zA-Z][a-zA-Z0-9_]*$/,A=C.filter(E=>!N.test(E));if(A.length>0)throw new Error(`Invalid header names: ${A.join(", ")}. Headers must start with a letter and contain only letters, numbers, and underscores.`);const j=[];for(let E=1;E<S.length;E++){const _=S[E].split(",").map(R=>{const k=R.trim().replace(/"/g,"");return u(k)});if(_.length===C.length){const R={};C.forEach((k,D)=>{if(k==="email"&&_[D]&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_[D])||(_[D]="")),(k==="amount"||k==="buyRate"||k==="sellRate")&&_[D]){const I=parseFloat(_[D]);(isNaN(I)||I<0)&&(_[D]="0")}R[k]=_[D]}),j.push(R)}}return j},f=async x=>{var S;const w=(S=x.target.files)==null?void 0:S[0];if(w){if(w.type!=="text/csv"&&!w.name.endsWith(".csv")){l({success:!1,message:"Please select a valid CSV file."});return}n(!0),l(null);try{const C=await w.text(),N=d(C);if(N.length===0){l({success:!1,message:"No valid data found in CSV file."});return}if(t==="inventory"){const j=["currency","amount","buyRate"].filter(E=>!N.every(_=>_[E]!==void 0&&_[E]!==""));if(j.length>0){l({success:!1,message:`Missing required fields: ${j.join(", ")}. Required fields are: currency, amount, buyRate`});return}}else if(t==="customers"||t==="clients"){const j=["firstName","lastName"].filter(E=>!N.every(_=>_[E]!==void 0&&_[E]!==""));if(j.length>0){l({success:!1,message:`Missing required fields: ${j.join(", ")}. Required fields are: firstName, lastName`});return}}await Me.importFromCSV(N,t),l({success:!0,message:`Successfully imported ${N.length} ${t} records.`,recordsProcessed:N.length}),e&&await Promise.resolve(e())}catch(C){console.error("Import error:",C);const N=C instanceof Error?C.message:"Error importing data. Please check file format and try again.";l({success:!1,message:N})}finally{n(!1),x.target.value=""}}},h=()=>t==="inventory"?{filename:"inventory_template.csv",content:`currency,amount,buyRate,sellRate
USD,10000,0.74,0.751
EUR,5000,0.69,0.700
GBP,3000,0.58,0.589`,description:"Upload inventory data with currencies, amounts, and exchange rates."}:t==="clients"?{filename:"clients_template.csv",content:`firstName,lastName,email,phone,dateOfBirth,occupation,address,city,postalCode,country,idType,idNumber
John,Doe,john@example.com,555-0123,1990-01-15,Engineer,123 Main St,Toronto,M5V 3A8,Canada,drivers_license,D123456789
Jane,Smith,jane@example.com,555-0456,1985-05-20,Teacher,456 Oak Ave,Montreal,H3A 1A1,Canada,passport,P987654321`,description:"Upload client list with FINTRAC compliance information for existing customers."}:{filename:"customers_template.csv",content:`firstName,lastName,email,phone
John,Doe,john@example.com,555-0123
Jane,Smith,jane@example.com,555-0456`,description:"Upload customer data with names and contact information."},p=()=>{const x=h(),w=new Blob([x.content],{type:"text/csv"}),S=URL.createObjectURL(w),C=document.createElement("a");C.href=S,C.download=x.filename,document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(S)},g=h();return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Import ",t==="inventory"?"Inventory":t==="clients"?"Client List":"Customers"," from CSV"]}),s.jsx("button",{onClick:p,className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Download Template"})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:g.description}),s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[s.jsx("input",{type:"file",accept:".csv",onChange:f,disabled:r,className:"hidden",id:`csv-upload-${t}`}),s.jsx("label",{htmlFor:`csv-upload-${t}`,className:`cursor-pointer ${r?"opacity-50 cursor-not-allowed":""}`,children:s.jsxs("div",{className:"flex flex-col items-center",children:[r?s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-3"}):s.jsx(Il,{className:"h-8 w-8 text-gray-400 mb-3"}),s.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:r?"Importing...":"Click to upload CSV file"}),s.jsx("p",{className:"text-xs text-gray-500",children:r?"Please wait while we process your data":"or drag and drop"})]})})]}),i&&s.jsx("div",{className:`mt-4 p-4 rounded-md ${i.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:i.success?s.jsx(ft,{className:"h-5 w-5 text-green-400"}):s.jsx(us,{className:"h-5 w-5 text-red-400"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:`text-sm font-medium ${i.success?"text-green-800":"text-red-800"}`,children:i.success?"Import Successful":"Import Failed"}),s.jsx("p",{className:`text-sm mt-1 ${i.success?"text-green-700":"text-red-700"}`,children:i.message})]})]})}),s.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(rr,{className:"h-5 w-5 text-blue-400"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-blue-800",children:"CSV Format Requirements"}),s.jsx("div",{className:"text-xs text-blue-700 mt-1",children:t==="inventory"?s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsx("li",{children:"Required: currency, amount, buyRate"}),s.jsx("li",{children:"Optional: sellRate (auto-calculated if not provided)"}),s.jsx("li",{children:"Example: USD,10000,0.74,0.751"})]}):t==="clients"?s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsx("li",{children:"Required: firstName, lastName"}),s.jsx("li",{children:"Optional: email, phone, dateOfBirth, occupation, address, city, postalCode, country, idType, idNumber"}),s.jsx("li",{children:"For FINTRAC compliance - include as much information as available"})]}):s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsx("li",{children:"Required: firstName, lastName"}),s.jsx("li",{children:"Optional: email, phone"}),s.jsx("li",{children:"Example: John,Doe,john@example.com,555-0123"})]})})]})]})})]})},cC=()=>{const[t,e]=b.useState([]),[r,n]=b.useState({currency:"USD",amount:"",buyRate:""}),[i,l]=b.useState(!0),[,u]=b.useState(null),[d,f]=b.useState(!1),[h,p]=b.useState(!1),[g,x]=b.useState(!1),[w,S]=b.useState(!1),[C,N]=b.useState({type:"success",message:"",visible:!1}),A=(D,I)=>{N({type:D,message:I,visible:!0})},j=()=>{N(D=>({...D,visible:!1}))};b.useEffect(()=>{const I=setTimeout(async()=>{l(!0),u(null);try{const{default:z}=await He(async()=>{const{default:P}=await Promise.resolve().then(()=>ro);return{default:P}},void 0),V=await z.getInventory();e(V||[])}catch(z){u("Failed to fetch inventory data"),console.error("Inventory fetch error:",z),e([])}finally{l(!1)}},100);return()=>clearTimeout(I)},[]),b.useEffect(()=>{(async()=>{try{_e.connect().catch(z=>console.warn("WebSocket connection failed:",z));const I=_e.subscribe(z=>{z.type==="inventory_update"&&(async()=>{try{const{default:P}=await He(async()=>{const{default:Q}=await Promise.resolve().then(()=>ro);return{default:Q}},void 0),$=await P.getInventory();e($||[])}catch(P){console.error("Failed to refresh inventory:",P)}})()});return()=>{try{I(),_e.disconnect()}catch(z){console.warn("WebSocket cleanup failed:",z)}}}catch(I){console.error("Failed to set up WebSocket:",I)}})()},[]);const E=()=>{const D=parseFloat(r.amount),I=parseFloat(r.buyRate);return isNaN(D)||isNaN(I)?(A("error","Please enter valid numbers"),!1):!0},_=()=>{E()&&p(!0)},R=async()=>{f(!0),u(null);try{const D=parseFloat(r.amount),I=parseFloat(r.buyRate),{default:z}=await He(async()=>{const{default:$}=await Promise.resolve().then(()=>ro);return{default:$}},void 0),V=await z.addStock({currency:r.currency,amount:D,buyRate:I});n({currency:"USD",amount:"",buyRate:""});const P=await z.getInventory();return e(P),x(!0),A("success",`Successfully added ${D} ${r.currency} to inventory`),{success:!0,data:V,message:`Successfully added ${D} ${r.currency} to inventory`}}catch(D){return u("Failed to add stock"),S(!0),A("error","Failed to add stock to inventory"),console.error(D),{success:!1,error:D,message:"Failed to add stock to inventory"}}finally{f(!1),p(!1)}},k=async(D,I,z)=>{try{const{default:V}=await He(async()=>{const{default:$}=await Promise.resolve().then(()=>ro);return{default:$}},void 0),P=t.find($=>$.currency===D);if(P){await V.updateInventoryItem(P.id,{buyRate:I,sellRate:z});const $=await V.getInventory();e($),_e.send({type:"rate_update",data:{currency:D,buyRate:I,sellRate:z}})}}catch(V){console.error("Failed to update rates:",V),A("error","Failed to update rates")}};return s.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[s.jsx("div",{className:"mb-6",children:s.jsx(oB,{onRateUpdate:k})}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Current Inventory"}),s.jsx("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:i&&t.length===0?s.jsx("div",{className:"flex justify-center items-center p-8",children:s.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):t.length===0?s.jsx("div",{className:"text-center p-8 text-gray-500",children:"No inventory data available"}):s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Currency"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Buy Rate"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sell Rate"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Updated"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(D=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:D.currency}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:D.amount.toLocaleString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:D.buyRate.toFixed(4)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:D.sellRate.toFixed(4)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:D.lastUpdated}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:D.amount<1e3?s.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:"Low"}):D.amount<3e3?s.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Medium"}):s.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Good"})})]},D.id))})]})})]}),s.jsx("div",{className:"mb-6",children:s.jsx(aT,{type:"inventory",onImportComplete:()=>{(async()=>{try{const{default:I}=await He(async()=>{const{default:V}=await Promise.resolve().then(()=>ro);return{default:V}},void 0),z=await I.getInventory();e(z)}catch(I){console.error("Failed to refresh inventory:",I)}})()}})}),s.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg shadow-sm border border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Add New Stock"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),s.jsxs("select",{value:r.currency,onChange:D=>n({...r,currency:D.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:d,children:[s.jsx("option",{value:"USD",children:"USD"}),s.jsx("option",{value:"EUR",children:"EUR"}),s.jsx("option",{value:"GBP",children:"GBP"}),s.jsx("option",{value:"JPY",children:"JPY"}),s.jsx("option",{value:"AUD",children:"AUD"}),s.jsx("option",{value:"CHF",children:"CHF"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),s.jsx("input",{type:"number",value:r.amount,onChange:D=>n({...r,amount:D.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter amount",disabled:d})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buy Rate"}),s.jsx("input",{type:"number",value:r.buyRate,onChange:D=>n({...r,buyRate:D.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter buy rate",step:"0.0001",disabled:d})]})]}),s.jsx("button",{onClick:_,disabled:d,className:`mt-4 flex items-center justify-center py-2 px-4 rounded-lg text-white transition-colors ${d?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:d?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding..."]}):"Add Stock"})]}),s.jsx(rT,{isOpen:h,onClose:()=>p(!1),onConfirm:R,title:"Confirm Add Stock",message:`Are you sure you want to add ${r.amount} ${r.currency} to inventory with buy rate ${r.buyRate}?`,confirmText:"Add Stock",cancelText:"Cancel",type:"info"}),s.jsx(yt,{isOpen:g,onClose:()=>x(!1),title:"Stock Added Successfully",size:"sm",children:s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:s.jsx(ft,{className:"h-6 w-6 text-green-600"})}),s.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"The currency stock has been successfully added to your inventory."}),s.jsx("button",{onClick:()=>x(!1),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Continue"})]})}),s.jsx(yt,{isOpen:w,onClose:()=>S(!1),title:"Failed to Add Stock",size:"sm",children:s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:s.jsx(us,{className:"h-6 w-6 text-red-600"})}),s.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"There was an error adding stock to your inventory. Please try again."}),s.jsx("button",{onClick:()=>S(!1),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Close"})]})}),s.jsx(Ao,{type:C.type,message:C.message,isVisible:C.visible,onClose:j})]})};class lB{constructor(){te(this,"assessments",[]);this.loadAssessments()}async loadAssessments(){try{const e=localStorage.getItem("risk_assessments");e&&(this.assessments=JSON.parse(e))}catch(e){console.error("Error loading risk assessments:",e)}}async saveAssessments(){try{localStorage.setItem("risk_assessments",JSON.stringify(this.assessments))}catch(e){console.error("Error saving risk assessments:",e)}}async createRiskAssessment(e){try{const r=await Nt.getCustomerById(e.customerId);if(!r)throw new Error(`Customer ${e.customerId} not found`);let n=null;if(e.transactionId&&(n=await ua.getTransactionById(e.transactionId),!n))throw new Error(`Transaction ${e.transactionId} not found`);const i=await this.analyzeRiskFactors(r,n),l=this.calculateRiskScore(i),u=this.determineRiskRating(l),d={id:`risk_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,customerId:e.customerId,transactionId:e.transactionId,assessmentType:e.assessmentType,riskScore:l,riskRating:u,riskFactors:i,mitigatingFactors:this.identifyMitigatingFactors(r,n),assessedBy:e.assessedBy,assessmentDate:new Date().toISOString(),status:"draft",recommendedActions:this.generateRecommendedActions(u,i),requiredActions:this.generateRequiredActions(u,i),ongoingMonitoring:l>=60,enhancedDueDiligence:l>=75,notes:e.notes||""};return this.assessments.push(d),await this.saveAssessments(),d}catch(r){throw console.error("Error creating risk assessment:",r),r}}async analyzeRiskFactors(e,r){const n=[];e.address.country!=="Canada"&&n.push({category:"geographic",factor:"Foreign Address",weight:5,description:`Customer resides in ${e.address.country}`,score:this.calculateFactorScore(5,e.address.country==="United States"?.3:.7)});const i=new Date().getFullYear()-new Date(e.dateOfBirth).getFullYear();i<25&&n.push({category:"customer",factor:"Young Customer",weight:3,description:`Customer is ${i} years old`,score:this.calculateFactorScore(3,.6)}),e.kycStatus!=="verified"&&n.push({category:"customer",factor:"Unverified KYC",weight:8,description:"Customer KYC not yet verified",score:this.calculateFactorScore(8,.9)});const l=["cash intensive business","money service business","casino","jewelry","precious metals","cryptocurrency"];if(e.occupation&&l.some(h=>e.occupation.toLowerCase().includes(h))&&n.push({category:"customer",factor:"High-Risk Occupation",weight:7,description:`Customer occupation: ${e.occupation}`,score:this.calculateFactorScore(7,.8)}),r){const h=this.convertToCAD(r.fromAmount,r.fromCurrency);h>=1e4&&n.push({category:"transaction",factor:"High-Value Transaction",weight:6,description:`Transaction amount: $${h.toLocaleString()} CAD`,score:this.calculateFactorScore(6,Math.min(.9,h/5e4))});const p=["JPY","KRW","CNY","RUB","TRY"];(p.includes(r.fromCurrency)||p.includes(r.toCurrency))&&n.push({category:"transaction",factor:"Unusual Currency",weight:4,description:`Currency pair: ${r.fromCurrency}/${r.toCurrency}`,score:this.calculateFactorScore(4,.5)}),(r.paymentMethod==="cash"||r.sourceOfFunds&&r.sourceOfFunds.toLowerCase().includes("cash"))&&n.push({category:"transaction",factor:"Cash Transaction",weight:5,description:"Transaction involves cash",score:this.calculateFactorScore(5,.7)})}const u=await Nt.getCustomerTransactionSummary(e.id),f=(Date.now()-new Date(e.createdAt).getTime())/(1e3*60*60*24);return f<30&&u.totalVolume>25e3&&n.push({category:"customer",factor:"High Early Activity",weight:6,description:`New customer (${Math.round(f)} days) with high volume ($${u.totalVolume.toLocaleString()})`,score:this.calculateFactorScore(6,.8)}),u.last30Days>5&&u.averageAmount>5e3&&n.push({category:"transaction",factor:"Frequent High-Value Pattern",weight:5,description:`${u.last30Days} transactions in 30 days, avg $${u.averageAmount.toLocaleString()}`,score:this.calculateFactorScore(5,.6)}),n}calculateFactorScore(e,r){return e*r}calculateRiskScore(e){if(e.length===0)return 10;const r=e.reduce((l,u)=>l+u.score,0),n=e.reduce((l,u)=>l+u.weight,0),i=r/n*100;return Math.min(Math.max(i,5),95)}determineRiskRating(e){return e>=85?"critical":e>=65?"high":e>=35?"medium":"low"}identifyMitigatingFactors(e,r){const n=[];return e.kycStatus==="verified"&&n.push("Customer KYC verified"),e.riskRating==="low"&&n.push("Customer has low historical risk rating"),(Date.now()-new Date(e.createdAt).getTime())/(1e3*60*60*24)>365&&n.push("Long-standing customer relationship (>1 year)"),e.address.country==="Canada"&&n.push("Canadian resident"),e.identification.type==="government_id"&&n.push("Government-issued identification"),n}generateRecommendedActions(e,r){const n=[];switch(e){case"critical":n.push("Immediate senior management review required"),n.push("Consider declining transaction/relationship"),n.push("File suspicious transaction report if applicable"),n.push("Enhanced ongoing monitoring");break;case"high":n.push("Senior management approval required"),n.push("Enhanced due diligence procedures"),n.push("Increased transaction monitoring"),n.push("Regular risk assessment reviews");break;case"medium":n.push("Additional documentation required"),n.push("Periodic monitoring"),n.push("Annual risk assessment review");break;case"low":n.push("Standard monitoring procedures"),n.push("Biennial risk assessment review");break}return r.forEach(i=>{i.category==="geographic"&&i.score>3&&n.push("Verify source of funds documentation"),i.factor==="High-Value Transaction"&&(n.push("Verify purpose of transaction"),n.push("Obtain source of funds documentation")),i.factor==="Unverified KYC"&&n.push("Complete KYC verification immediately")}),[...new Set(n)]}generateRequiredActions(e,r){const n=[];return(e==="critical"||e==="high")&&(n.push("Enhanced due diligence required"),n.push("Senior management approval required")),r.forEach(i=>{i.factor==="Unverified KYC"&&n.push("KYC verification must be completed"),i.factor==="High-Value Transaction"&&i.score>4&&n.push("LCTR reporting required")}),[...new Set(n)]}convertToCAD(e,r){return e*({CAD:1,USD:1.35,EUR:1.45,GBP:1.7,JPY:.009,AUD:.95,CHF:1.47}[r]||1)}async getRiskAssessments(){return[...this.assessments].sort((e,r)=>new Date(r.assessmentDate).getTime()-new Date(e.assessmentDate).getTime())}async getRiskAssessmentById(e){return this.assessments.find(r=>r.id===e)||null}async getRiskAssessmentsForCustomer(e){return this.assessments.filter(r=>r.customerId===e).sort((r,n)=>new Date(n.assessmentDate).getTime()-new Date(r.assessmentDate).getTime())}async getHighRiskAssessments(){return this.assessments.filter(e=>e.riskRating==="high"||e.riskRating==="critical")}async updateRiskAssessment(e,r){const n=this.assessments.findIndex(l=>l.id===e);if(n===-1)return null;const i={...this.assessments[n],...r,id:e};return this.assessments[n]=i,await this.saveAssessments(),i}async approveRiskAssessment(e,r){const n={status:"approved",approvedBy:r,approvalDate:new Date().toISOString()};return this.updateRiskAssessment(e,n)}async getRiskAssessmentStats(){const e=await this.getRiskAssessments(),r=new Date;r.setDate(1),r.setHours(0,0,0,0);const n={},i={};return e.forEach(l=>{n[l.riskRating]=(n[l.riskRating]||0)+1,i[l.status]=(i[l.status]||0)+1}),{total:e.length,byRating:n,byStatus:i,pendingApproval:e.filter(l=>l.status==="completed").length,thisMonth:e.filter(l=>new Date(l.assessmentDate)>=r).length}}async performPeriodicAssessment(e,r){const i=(await this.getRiskAssessmentsForCustomer(e))[0];if(i&&(Date.now()-new Date(i.assessmentDate).getTime())/864e5<365)throw new Error("Periodic assessment not due yet (annual requirement)");return this.createRiskAssessment({customerId:e,assessmentType:"periodic_review",assessedBy:r,notes:"Periodic risk assessment as per AML policy"})}}const cB=new lB,uB=()=>{const[t,e]=b.useState([]),[r,n]=b.useState(!0),[i,l]=b.useState(null),[u,d]=b.useState({key:null,direction:"asc"}),[f,h]=b.useState([]),[p,g]=b.useState([]),[x,w]=b.useState(null),[S,C]=b.useState(""),[N,A]=b.useState(!1),[j,E]=b.useState(!1),[_,R]=b.useState(null),[k,D]=b.useState(!1),[I,z]=b.useState(""),[V,P]=b.useState(""),[$,Q]=b.useState(!1),[re,ee]=b.useState(null),[U,J]=b.useState(!1),[pe,ce]=b.useState(""),[oe,F]=b.useState(""),[L,X]=b.useState(""),[O,q]=b.useState(""),[Y,le]=b.useState(""),[ye,B]=b.useState(""),[ae,de]=b.useState(""),[Z,ve]=b.useState(""),[xe,be]=b.useState({type:"success",message:"",visible:!1}),Ae=(K,we)=>{be({type:K,message:we,visible:!0})},Ie=()=>be(K=>({...K,visible:!1}));b.useEffect(()=>{(async()=>{try{const we=await cB.getRiskAssessments();h(we||[])}catch(we){console.error("Error loading risk assessments:",we),h([])}})()},[]);const ct=b.useMemo(()=>t.map(K=>{let we="low",Se=0;if(K.riskScore)Se=K.riskScore,Se>=85?we="critical":Se>=70?we="high":Se>=50?we="medium":we="low";else if(K.customerId){const Ee=f.find(Le=>Le.customerId===K.customerId);if(Ee){const Le=Ee.riskRating;["low","medium","high","critical"].includes(Le)?we=Le:we="medium",Se=Ee.riskScore}}return K.complianceStatus==="lctr_required"?(Se=Math.max(Se,70),we=Se>=85?"critical":"high"):K.complianceStatus==="enhanced_records"&&(Se=Math.max(Se,50),we=Se>=70?"high":"medium"),{...K,riskRating:we,riskScore:Se}}),[t,f]),kt=b.useMemo(()=>{const K=Ee=>{if(!L.trim())return!0;const Le=L.toLowerCase(),Ye=p.find(xt=>xt.id===Ee.customerId);return[Ee.fromCurrency,Ee.toCurrency,Ye==null?void 0:Ye.firstName,Ye==null?void 0:Ye.lastName,Ye==null?void 0:Ye.email,Ye==null?void 0:Ye.phone].filter(Boolean).join(" ").toLowerCase().includes(Le)},we=Ee=>{if(!O&&!Y&&!Z)return!0;const Le=new Date(Ee.date.replace(" ","T"));let Ye=O?new Date(O):null,jt=Y?new Date(Y):null;if(Z){const xt=new Date;Z==="24h"&&(Ye=new Date(xt.getTime()-864e5)),Z==="7d"&&(Ye=new Date(xt.getTime()-6048e5)),Z==="month"&&(Ye=new Date(xt.getFullYear(),xt.getMonth(),1)),jt=xt}return!(Ye&&Le<Ye||jt&&Le>jt)},Se=Ee=>{const Le=ye?parseFloat(ye):null,Ye=ae?parseFloat(ae):null;return!(Le!==null&&Ee.fromAmount<Le||Ye!==null&&Ee.fromAmount>Ye)};return ct.filter(Ee=>K(Ee)&&we(Ee)&&Se(Ee))},[ct,p,L,O,Y,ye,ae,Z]),ys=b.useMemo(()=>u.key?[...kt].sort((K,we)=>{const Se=Ca(K,u.key),Ee=Ca(we,u.key);if(Se==null)return 1;if(Ee==null)return-1;let Le=0;return typeof Se=="string"&&typeof Ee=="string"?Le=Se.localeCompare(Ee):typeof Se=="number"&&typeof Ee=="number"?Le=Se-Ee:Se instanceof Date&&Ee instanceof Date?Le=Se.getTime()-Ee.getTime():Le=String(Se).localeCompare(String(Ee)),u.direction==="desc"?-Le:Le}):kt,[ct,u]),Ca=(K,we)=>{switch(we){case"date":return new Date(K.date);case"amount":return K.fromAmount;case"customer":return In(K.customerId||"");case"commission":return K.commission||0;case"profit":return K.profit||0;case"risk":return{low:1,medium:2,high:3,critical:4}[K.riskRating||"low"];default:return K[we]}},ja=K=>{d(we=>we.key===K?{key:K,direction:we.direction==="asc"?"desc":"asc"}:{key:K,direction:["amount","commission","profit","risk"].includes(K)?"desc":"asc"})},gm=()=>{d({key:null,direction:"asc"})},Ct=K=>u.key!==K?s.jsx("svg",{className:"w-4 h-4 ml-1 text-gray-400 opacity-50",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}):u.direction==="asc"?s.jsx("svg",{className:"w-4 h-4 ml-1 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})}):s.jsx("svg",{className:"w-4 h-4 ml-1 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),ym=K=>{const we={low:"bg-green-100 text-green-800 border-green-200",medium:"bg-yellow-100 text-yellow-800 border-yellow-200",high:"bg-orange-100 text-orange-800 border-orange-200",critical:"bg-red-100 text-red-800 border-red-200"};return s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ${we[K]}`,children:K.toUpperCase()})};b.useEffect(()=>{(async()=>{try{const{default:we}=await He(async()=>{const{default:Ee}=await Promise.resolve().then(()=>ii);return{default:Ee}},void 0),Se=await we.getAllCustomers();g(Se||[])}catch(we){console.error("Error loading customers:",we),g([])}})()},[]),b.useEffect(()=>{const we=setTimeout(async()=>{n(!0),l(null);try{const{default:Se}=await He(async()=>{const{default:Le}=await Promise.resolve().then(()=>da);return{default:Le}},void 0),Ee=await Se.getTransactions();e(Ee||[])}catch(Se){l("Failed to fetch transaction data"),console.error("Transaction fetch error:",Se),e([])}finally{n(!1)}},100);return()=>clearTimeout(we)},[]);const mi=K=>{w(K),C(""),A(!0)},mc=async()=>{if(!x||!S){Ae("error","Please select a customer");return}try{E(!0);const{default:K}=await He(async()=>{const{default:Se}=await Promise.resolve().then(()=>da);return{default:Se}},void 0),we=await K.linkCustomerToTransaction(x.id,S);if(we){e(Ee=>Ee.map(Le=>Le.id===x.id?we:Le));const Se=p.find(Ee=>Ee.id===S);Se?Ae("success",`Customer ${Se.firstName} ${Se.lastName} assigned to transaction`):Ae("success","Customer assigned to transaction successfully"),A(!1),w(null),C("")}else throw new Error("Failed to assign customer to transaction")}catch(K){console.error("Error assigning customer:",K),Ae("error",(K==null?void 0:K.message)||"Failed to assign customer")}finally{E(!1)}},In=K=>{if(!K)return"No Customer";const we=p.find(Se=>Se.id===K);return we?`${we.firstName} ${we.lastName}`:"Unknown Customer"},xm=K=>{R(we=>we===K?null:K)},fc=K=>{try{const we=window.open("","PRINT","height=700,width=480");if(!we)return;const Se=hc(K).replace("</body></html>","<script>window.addEventListener('load',()=>{setTimeout(()=>{window.print();window.close();},150);});<\/script></body></html>");we.document&&(we.document.open(),we.document.write(Se),we.document.close()),we.focus();try{_e.send({type:"transaction_receipt_generated",data:{transactionId:K.id,fromAmount:K.fromAmount,fromCurrency:K.fromCurrency,toAmount:K.toAmount,toCurrency:K.toCurrency,printedAt:new Date().toISOString()}})}catch(Ee){console.warn("WS emit failed for receipt:",Ee)}}catch(we){console.error("Print failed",we),Ae("error","Failed to print receipt")}},hc=K=>{const Se=JSON.parse(localStorage.getItem("ownerSettings")||"{}").businessName||"Leaper FX",Ee=In(K.customerId),Le=K.fromAmount>0?K.toAmount/K.fromAmount:0,Ye=`${K.fromCurrency}→${K.toCurrency}`,xt=(bm=>{switch(bm){case"cash":return"Cash";case"stripe_terminal":return"Card Payment";case"cryptocurrency":return"Cryptocurrency";case"interac":return"Interac";default:return"Cash"}})(K.paymentMethod||"cash");let on="";return K.paymentDetails&&(K.paymentMethod==="stripe_terminal"&&K.paymentDetails.cardLast4?on=`
          <div class="row"><div class="muted">Card</div><div class="muted">${K.paymentDetails.cardBrand||"Card"} ****${K.paymentDetails.cardLast4}</div></div>`:K.paymentMethod==="cryptocurrency"&&K.paymentDetails.cryptoTxHash&&(on=`
          <div class="row"><div class="muted">Crypto Amount</div><div class="muted">${K.paymentDetails.cryptoAmount?K.paymentDetails.cryptoAmount.toFixed(8):"N/A"}</div></div>
          <div class="row"><div class="muted">Wallet</div><div class="muted">${K.paymentDetails.cryptoWallet?K.paymentDetails.cryptoWallet.substring(0,12)+"...":"N/A"}</div></div>
          <div class="row"><div class="muted">TX Hash</div><div class="muted">${K.paymentDetails.cryptoTxHash.substring(0,12)}...</div></div>`)),`<!doctype html><html><head><title>Receipt ${K.id}</title>
      <style>
        body{font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto; padding:16px;color:#111}
        .hdr{font-weight:700;font-size:18px;margin-bottom:8px}
        .sub{color:#555;margin-bottom:16px}
        .row{display:flex;justify-content:space-between;margin:6px 0}
        .muted{color:#666}
        .total{font-weight:700}
        .payment{background:#f8f9fa;padding:8px;border-radius:4px;margin:8px 0}
        hr{border:none;border-top:1px solid #e5e7eb;margin:12px 0}
        .center{text-align:center}
      </style>
    </head><body>
      <div class="hdr">${Se}</div>
      <div class="sub">Receipt • TXN-${K.id}</div>
      <div class="row"><div>Date/Time</div><div>${K.date}</div></div>
      <div class="row"><div>Customer</div><div>${Ee}</div></div>
      <div class="row"><div>Type</div><div>${Ye}</div></div>
      <hr/>
      <div class="row"><div>From</div><div>${K.fromAmount.toLocaleString()} ${K.fromCurrency}</div></div>
      <div class="row"><div>To</div><div>${K.toAmount.toLocaleString()} ${K.toCurrency}</div></div>
      <div class="row"><div>Rate</div><div>${Le.toFixed(6)}</div></div>
      <div class="row"><div class="muted">Commission</div><div class="muted">$${(K.commission??0).toFixed(2)}</div></div>
      <hr/>
      <div class="payment">
        <div class="row"><div><strong>Payment Method</strong></div><div><strong>${xt}</strong></div></div>
        ${on}
        ${K.paymentReferenceId?`<div class="row"><div class="muted">Reference</div><div class="muted">${K.paymentReferenceId}</div></div>`:""}
      </div>
      <hr/>
      <div class="row total"><div>Total</div><div>${K.toAmount.toLocaleString()} ${K.toCurrency}</div></div>
      <div class="center muted" style="margin-top:16px">Thank you</div>
    </body></html>`},vm=(K,we)=>{let Se=K;return we!=="CAD"&&(Se=K*({USD:1.35,EUR:1.45,GBP:1.7,JPY:.009,AUD:.95,CHF:1.47}[we]||1)),Se>=3e3},xs=async K=>{if(ee(K),P(""),K.customerId){const Se=p.find(Ee=>Ee.id===K.customerId);if(Se!=null&&Se.email){z(Se.email),D(!0);return}}const we=vm(K.fromAmount,K.fromCurrency);if(!K.customerId&&we){Ae("warning","High-value transactions require customer profile. Please assign a customer first."),mi(K);return}z(""),D(!0)},nr=async()=>{var we;if(!re)return;const K=I||V;if(!K||!K.includes("@")){Ae("error","Please enter a valid email address");return}Q(!0);try{const{default:Se}=await He(async()=>{const{default:xt}=await import("./emailService.DaQmFf_n.js");return{default:xt}},[]),Ee=hc(re),Ye=JSON.parse(localStorage.getItem("ownerSettings")||"{}").businessName||"Leaper FX",jt=await Se.sendTransactionReceipt(K,Ee,re.id,Ye);if(!jt.success)throw new Error(jt.error||"Email sending failed");try{_e.send({type:"transaction_receipt_emailed",data:{transactionId:re.id,recipientEmail:K,messageId:jt.messageId,sentAt:new Date().toISOString()}})}catch(xt){console.warn("WS emit failed for email receipt:",xt)}if(re.customerId&&V&&!I){const xt=p.find(on=>on.id===re.customerId);xt&&!xt.email&&(ce(V),F(re.customerId),J(!0))}Ae("success",`📧 Receipt sent to ${K} (ID: ${(we=jt.messageId)==null?void 0:we.slice(-8)})`),D(!1)}catch(Se){console.error("Failed to send email:",Se),Ae("error",`Failed to send receipt: ${Se instanceof Error?Se.message:"Unknown error"}`)}finally{Q(!1)}},wn=async()=>{try{const{default:K}=await He(async()=>{const{default:we}=await Promise.resolve().then(()=>ii);return{default:we}},void 0);await K.updateCustomer(oe,{email:pe}),g(we=>we.map(Se=>Se.id===oe?{...Se,email:pe}:Se)),Ae("success","Email saved to customer profile"),J(!1)}catch(K){console.error("Failed to save email to customer:",K),Ae("error","Failed to save email to customer profile")}},ar=async()=>{try{const{default:K}=await He(async()=>{const{default:Se}=await import("./emailService.DaQmFf_n.js");return{default:Se}},[]);Ae("info","Sending test email...");const we=await K.sendTestEmail("yourpersonalizednew@yahoo.com");we.success?Ae("success","✅ Test email sent successfully! Check yourpersonalizednew@yahoo.com"):Ae("error",`❌ Test email failed: ${we.error}`)}catch(K){console.error("Email test failed:",K),Ae("error","Email service test failed")}};return b.useEffect(()=>{(async()=>{try{await _e.connect();const we=_e.subscribe(Se=>{(Se.type==="transaction_created"||Se.type==="transaction_updated")&&(async()=>{try{const{default:Le}=await He(async()=>{const{default:jt}=await Promise.resolve().then(()=>da);return{default:jt}},void 0),Ye=await Le.getTransactions();e(Ye||[])}catch(Le){console.error("Failed to refresh transactions:",Le)}})()});return()=>{we(),_e.disconnect()}}catch(we){console.error("Failed to set up WebSocket:",we)}})()},[]),s.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Transaction History"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:ar,className:"px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",title:"Test email service",children:"📧 Test Email"}),u.key&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:["Sorted by: ",u.key," (",u.direction,")"]}),s.jsx("button",{onClick:gm,className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Clear Sort"})]}),r&&s.jsxs("div",{className:"flex items-center text-blue-600",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:"Loading transactions..."})]})]})]}),i&&s.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4 rounded",role:"alert",children:[s.jsx("p",{className:"font-bold",children:"Error"}),s.jsx("p",{children:i})]}),s.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-end",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Search"}),s.jsxs("div",{className:"relative",children:[s.jsx(my,{className:"h-4 w-4 text-gray-400 absolute left-2 top-2.5"}),s.jsx("input",{value:L,onChange:K=>X(K.target.value),placeholder:"Name, email, phone, currency...",className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"From"}),s.jsx("input",{type:"date",value:O,onChange:K=>q(K.target.value),className:"w-full p-2 border rounded"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"To"}),s.jsx("input",{type:"date",value:Y,onChange:K=>le(K.target.value),className:"w-full p-2 border rounded"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>ve("24h"),className:`px-3 py-2 text-xs rounded border ${Z==="24h"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"}`,children:"24h"}),s.jsx("button",{onClick:()=>ve("7d"),className:`px-3 py-2 text-xs rounded border ${Z==="7d"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"}`,children:"7d"}),s.jsx("button",{onClick:()=>ve("month"),className:`px-3 py-2 text-xs rounded border ${Z==="month"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"}`,children:"Month"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Amount Min"}),s.jsx("input",{type:"number",value:ye,onChange:K=>B(K.target.value),className:"w-full p-2 border rounded"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Amount Max"}),s.jsx("input",{type:"number",value:ae,onChange:K=>de(K.target.value),className:"w-full p-2 border rounded"})]}),s.jsx("div",{className:"flex space-x-2",children:s.jsx("button",{onClick:()=>{X(""),q(""),le(""),B(""),de(""),ve("")},className:"px-3 py-2 text-xs rounded border border-gray-300",children:"Clear"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r&&t.length===0?s.jsx("div",{className:"flex justify-center items-center p-12",children:s.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):t.length===0?s.jsxs("div",{className:"text-center p-12 text-gray-500",children:[s.jsx("p",{className:"text-lg font-medium",children:"No transactions found"}),s.jsx("p",{className:"mt-2",children:"Use the Smart Calculator to create new transactions"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>ja("date"),children:s.jsxs("div",{className:"flex items-center",children:["Date",Ct("date")]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"From"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"To"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>ja("amount"),children:s.jsxs("div",{className:"flex items-center",children:["Amount",Ct("amount")]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Converted"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>ja("customer"),children:s.jsxs("div",{className:"flex items-center",children:["Customer",Ct("customer")]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>ja("commission"),children:s.jsxs("div",{className:"flex items-center",children:["Commission",Ct("commission")]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>ja("profit"),children:s.jsxs("div",{className:"flex items-center",children:["Profit",Ct("profit")]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>ja("risk"),children:s.jsxs("div",{className:"flex items-center",children:["FINTRAC Risk",Ct("risk")]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ys.map(K=>{var we,Se,Ee,Le;return s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:K.date})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:K.fromCurrency})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:K.toCurrency})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"text-sm text-gray-900",children:[K.fromAmount.toLocaleString()," ",K.fromCurrency]}),K.paymentMethod&&K.paymentMethod!=="cash"&&s.jsxs("div",{className:"text-xs text-gray-500 flex items-center mt-1",children:[s.jsx("span",{className:`inline-block w-2 h-2 rounded-full mr-1 ${K.paymentMethod==="stripe_terminal"?"bg-blue-500":K.paymentMethod==="cryptocurrency"?"bg-orange-500":K.paymentMethod==="interac"?"bg-red-500":"bg-green-500"}`}),K.paymentMethod==="stripe_terminal"?"Card":K.paymentMethod==="cryptocurrency"?"Crypto":K.paymentMethod==="interac"?"Interac":"Cash"]})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"text-sm text-gray-900",children:[K.toAmount.toLocaleString()," ",K.toCurrency]}),((we=K.paymentDetails)==null?void 0:we.cardLast4)&&s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["****",K.paymentDetails.cardLast4]}),((Se=K.paymentDetails)==null?void 0:Se.cryptoAmount)&&s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[K.paymentDetails.cryptoAmount.toFixed(4)," crypto"]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex flex-col space-y-2",children:[s.jsx("span",{className:`inline-flex px-2 py-1 text-xs rounded-full ${K.customerId?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:In(K.customerId)}),K.requiresLCTR||K.complianceStatus==="lctr_required"?s.jsx("span",{className:"inline-flex px-2 py-1 text-xs rounded-full bg-red-100 text-red-800",children:"LCTR required"}):K.requiresEnhancedRecords||K.complianceStatus==="enhanced_records"?s.jsx("span",{className:"inline-flex px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Enhanced records"}):null]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm text-gray-900",children:["$",((Ee=K.commission)==null?void 0:Ee.toFixed(2))??"0.00"]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm text-gray-900",children:["$",((Le=K.profit)==null?void 0:Le.toFixed(2))??"0.00"]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex flex-col space-y-2",children:[ym(K.riskRating),K.riskScore&&K.riskScore>0&&s.jsxs("div",{className:"text-xs text-gray-500",children:["Score: ",K.riskScore]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium relative",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>mi(K),className:"text-blue-600 hover:text-blue-900 transition-colors",children:K.customerId?"Change Customer":"Assign Customer"}),s.jsx("button",{onClick:()=>xm(K.id),className:"text-gray-600 hover:text-gray-900 p-1 rounded hover:bg-gray-100",title:"More actions",children:s.jsx(O5,{className:"h-4 w-4"})}),_===K.id&&s.jsxs("div",{className:"absolute right-6 top-10 z-10 bg-white border rounded shadow-md w-48",children:[s.jsxs("button",{onClick:()=>{fc(K),R(null)},className:"w-full flex items-center px-3 py-2 text-sm hover:bg-gray-50",children:[s.jsx(s4,{className:"h-4 w-4 mr-2"})," Print receipt"]}),s.jsxs("button",{onClick:()=>{xs(K),R(null)},className:"w-full flex items-center px-3 py-2 text-sm hover:bg-gray-50",children:[s.jsx(Xl,{className:"h-4 w-4 mr-2"})," Email receipt"]}),s.jsx("button",{onClick:()=>{mi(K),R(null)},className:"w-full flex items-center px-3 py-2 text-sm hover:bg-gray-50",children:"Assign to client"})]})]})})]},K.id)})})]})})}),s.jsx(yt,{isOpen:N,onClose:()=>A(!1),title:"Assign Customer",size:"md",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Customer"}),s.jsxs("select",{value:S,onChange:K=>C(K.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Choose a customer..."}),p.map(K=>s.jsxs("option",{value:K.id,children:[K.firstName," ",K.lastName," ",K.email?`(${K.email})`:""]},K.id))]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[s.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200",children:"Cancel"}),s.jsx("button",{onClick:mc,disabled:!S||j,className:`px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${!S||j?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:j?s.jsxs("div",{className:"flex items-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Assigning..."]}):"Assign Customer"})]})]})}),s.jsx(yt,{isOpen:k,onClose:()=>D(!1),title:"Email Receipt",size:"md",children:s.jsxs("div",{className:"space-y-4",children:[re&&s.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Transaction: ",re.fromAmount.toLocaleString()," ",re.fromCurrency," → ",re.toAmount.toLocaleString()," ",re.toCurrency]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Customer: ",In(re.customerId)]})]}),I?s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Send receipt to:"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"email",value:I,disabled:!0,className:"flex-1 p-2 border border-gray-300 rounded-lg bg-gray-50"}),s.jsx("button",{onClick:()=>z(""),className:"text-sm text-blue-600 hover:text-blue-800",children:"Change"})]})]}):s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email address:"}),s.jsx("input",{type:"email",value:V,onChange:K=>P(K.target.value),placeholder:"customer@example.com",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[s.jsx("button",{onClick:()=>D(!1),className:"px-4 py-2 rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200",children:"Cancel"}),s.jsx("button",{onClick:nr,disabled:!I&&!V||$,className:`px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${!I&&!V||$?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:$?s.jsxs("div",{className:"flex items-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):"Send Receipt"})]})]})}),s.jsx(yt,{isOpen:U,onClose:()=>J(!1),title:"Save Email",size:"sm",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Would you like to save this email address (",pe,") to the customer's profile for future use?"]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>J(!1),className:"px-4 py-2 rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200",children:"No, thanks"}),s.jsx("button",{onClick:wn,className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700",children:"Yes, save email"})]})]})}),s.jsx(Ao,{type:xe.type,message:xe.message,isVisible:xe.visible,onClose:Ie})]})},dB=()=>{const[,t]=b.useState([]),[e,r]=b.useState([]),[n,i]=b.useState([]),[l,u]=b.useState(null),[d,f]=b.useState(!0),[h,p]=b.useState(null),g=b.useMemo(()=>e.reduce((S,C)=>S+(C.transactions||0),0),[e]),x=b.useMemo(()=>e.reduce((S,C)=>S+(C.volume||0),0),[e]),w=b.useMemo(()=>e.reduce((S,C)=>S+(C.profit||0),0),[e]);return b.useEffect(()=>{const C=setTimeout(async()=>{f(!0),p(null);try{const{default:N}=await He(async()=>{const{default:k}=await import("./analyticsService.uISG4J1H.js");return{default:k}},[]),[A,j,E,_]=await Promise.all([N.getDailyPerformance().catch(()=>[]),N.getCurrencyPerformance().catch(()=>[]),N.getBusinessInsights().catch(()=>[]),N.getProfitAnalysis().catch(()=>null)]),R=(A||[]).map(k=>({name:new Date(k.date).toLocaleDateString("en-US",{weekday:"short"}),value:k.volume}));t(R),r(j||[]),i(E||[]),u(_)}catch(N){p("Failed to fetch analytics data"),console.error("Analytics fetch error:",N),t([]),r([]),i([]),u(null)}finally{f(!1)}},100);return()=>clearTimeout(C)},[]),b.useEffect(()=>{(async()=>{try{await _e.connect();const C=_e.subscribe(N=>{(N.type==="transaction_created"||N.type==="inventory_update")&&(async()=>{try{const{default:j}=await He(async()=>{const{default:_}=await import("./analyticsService.uISG4J1H.js");return{default:_}},[]);if(N.type==="transaction_created"){const[_,R,k]=await Promise.all([j.getDailyPerformance(),j.getCurrencyPerformance(),j.getProfitAnalysis()]),D=(_||[]).map(I=>({name:new Date(I.date).toLocaleDateString("en-US",{weekday:"short"}),value:I.volume}));t(D),r(R||[]),u(k)}const E=await j.getBusinessInsights();i(E||[])}catch(j){console.error("Failed to refresh analytics:",j)}})()});return()=>{C(),_e.disconnect()}}catch(C){console.error("Failed to set up WebSocket:",C)}})()},[]),s.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Business Intelligence"}),d&&s.jsxs("div",{className:"flex items-center text-blue-600",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:"Loading analytics..."})]})]}),h&&s.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4 rounded",role:"alert",children:[s.jsx("p",{className:"font-bold",children:"Error"}),s.jsx("p",{children:h})]}),d&&e.length===0?s.jsx("div",{className:"flex justify-center items-center p-16",children:s.jsxs("svg",{className:"animate-spin h-12 w-12 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 shadow-sm border border-blue-100 transition-all hover:shadow-md",children:[s.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-1",children:"Total Transactions"}),s.jsx("p",{className:"text-2xl font-bold text-blue-900",children:g}),s.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Last 7 days"})]}),s.jsxs("div",{className:"bg-green-50 rounded-lg p-4 shadow-sm border border-green-100 transition-all hover:shadow-md",children:[s.jsx("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Total Volume"}),s.jsxs("p",{className:"text-2xl font-bold text-green-900",children:["$",x.toLocaleString()]}),s.jsx("p",{className:"text-xs text-green-700 mt-1",children:"Last 7 days"})]}),s.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 shadow-sm border border-purple-100 transition-all hover:shadow-md",children:[s.jsx("h3",{className:"text-sm font-medium text-purple-800 mb-1",children:"Total Profit"}),s.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:["$",w.toLocaleString()]}),s.jsx("p",{className:"text-xs text-purple-700 mt-1",children:"Last 7 days"})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Currency Performance"}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.length===0?s.jsx("div",{className:"text-center p-8 text-gray-500",children:"No currency performance data available"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Currency"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transactions"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Volume"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Profit"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"% of Total"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(S=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:S.currency}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.transactions}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["$",S.volume.toLocaleString()]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-green-600 font-medium",children:["$",S.profit.toLocaleString()]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:s.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${x?S.volume/x*100:0}%`}})}),s.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:[x?(S.volume/x*100).toFixed(1):"0.0","%"]})]})})]},S.currency))})]})})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Insights & Recommendations"}),n.length===0?s.jsx("div",{className:"text-center p-8 text-gray-500 bg-gray-50 rounded-lg",children:"No insights available at this time"}):s.jsx("div",{className:"space-y-4",children:n.map((S,C)=>{let N="bg-blue-50",A="border-blue-400",j="text-blue-800",E="text-blue-700",_=s.jsx("svg",{className:"h-5 w-5 text-blue-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2h-1V9a1 1 0 00-1-1z",clipRule:"evenodd"})});return S.type==="warning"?(N="bg-yellow-50",A="border-yellow-400",j="text-yellow-800",E="text-yellow-700",_=s.jsx("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})):S.type==="opportunity"&&(N="bg-green-50",A="border-green-400",j="text-green-800",E="text-green-700",_=s.jsx("svg",{className:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})),s.jsx("div",{className:`${N} border-l-4 ${A} p-4 rounded shadow-sm transition-all hover:shadow-md`,children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:_}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:`text-sm font-medium ${j}`,children:S.title}),s.jsx("div",{className:`mt-2 text-sm ${E}`,children:s.jsx("p",{children:S.description})})]})]})},C)})})]}),l&&s.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Profit Analysis"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Total Profit"}),s.jsxs("p",{className:"text-xl font-bold text-gray-800 mt-1",children:["$",l.totalProfit.toFixed(2)]})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Avg. Profit/Transaction"}),s.jsxs("p",{className:"text-xl font-bold text-gray-800 mt-1",children:["$",l.averageProfitPerTransaction.toFixed(2)]})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Profit Trend"}),s.jsxs("p",{className:"text-xl font-bold text-green-600 mt-1",children:["+",l.profitTrend,"%"]})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Top Profit Currency"}),s.jsx("p",{className:"text-xl font-bold text-gray-800 mt-1",children:l.topProfitCurrency})]})]})]})]})]})},mB=()=>{var F;const[t,e]=b.useState([]),[r,n]=b.useState([]),[i,l]=b.useState(""),[u,d]=b.useState(!0),[f,h]=b.useState(!1),[p,g]=b.useState(!1),[x,w]=b.useState(!1),[S,C]=b.useState(!1),[N,A]=b.useState(null),[j,E]=b.useState(null),[_,R]=b.useState({view:"detailed",sortBy:"lastUpdated",sortOrder:"desc",filters:{}}),[k,D]=b.useState({total:0,compliant:0,pending:0,requiresReview:0,highRisk:0}),[I,z]=b.useState({}),[V,P]=b.useState({type:"success",message:"",visible:!1}),$=L=>{var Y,le;const X=L==null?void 0:L.address,O=typeof X=="string"?X:X?[X.street,X.city,X.province,X.postalCode,X.country].filter(Boolean).join(", "):"",q=typeof(L==null?void 0:L.riskRating)=="string"?L.riskRating.toLowerCase():"low";return{id:L.id,firstName:L.firstName||"",lastName:L.lastName||"",email:L.email||"",phone:L.phone||"",dateOfBirth:L.dateOfBirth||"",occupation:L.occupation||"",address:O,city:L.city||(X==null?void 0:X.city)||"",postalCode:L.postalCode||(X==null?void 0:X.postalCode)||"",country:L.country||(X==null?void 0:X.country)||"",idType:L.idType||((Y=L.identification)==null?void 0:Y.type),idNumber:L.idNumber||((le=L.identification)==null?void 0:le.number),photoId:L.photoId,createdAt:L.createdAt||new Date().toISOString(),lastUpdated:L.lastUpdated||L.createdAt||new Date().toISOString(),riskRating:["low","medium","high"].includes(q)?q:"low",kycStatus:L.kycStatus||"pending",complianceStatus:L.complianceStatus,documentsVerified:L.documentsVerified,totalTransactionVolume:L.totalTransactionVolume,lastTransactionDate:L.lastTransactionDate,lastComplianceCheck:L.lastComplianceCheck,totalTransactions:Array.isArray(L.transactions)?L.transactions.length:L.totalTransactions,isActive:typeof L.isActive=="boolean"?L.isActive:!0}},Q=(L,X)=>{P({type:L,message:X,visible:!0})},re=()=>{P(L=>({...L,visible:!1}))},ee=async()=>{try{d(!0);const L=await Nt.getCustomersAdvanced(_.filters,_.sortBy,_.sortOrder);e(L.map($));const X={};let O={total:L.length,compliant:0,pending:0,requiresReview:0,highRisk:0};for(const q of L)try{const Y=await ua.getCustomerTransactionSummary(q.id),le=await ei.getCustomerDocuments(q.id),ye=await M0.validateCustomerDueDiligence(q.id),B=ye.isCompliant?100:Math.max(0,100-ye.missingRequirements.length*20);X[q.id]={transactionSummary:Y,documentCount:le.length,lastActivity:Y.latestTransactionDate||q.createdAt,complianceScore:B},q.complianceStatus==="compliant"?O.compliant++:q.complianceStatus==="pending"&&O.pending++,q.riskRating==="high"&&O.highRisk++,(!q.documentsVerified||q.kycStatus==="pending")&&O.requiresReview++}catch(Y){console.warn(`Failed to load profile for client ${q.id}:`,Y),X[q.id]={transactionSummary:{totalTransactions:0,totalVolume:0,latestTransactionDate:null,complianceTransactions:0,riskRating:"low"},documentCount:0,lastActivity:q.createdAt,complianceScore:0}}z(X),D(O)}catch(L){console.error("Error loading clients:",L),Q("error","Failed to load client data")}finally{d(!1)}};b.useEffect(()=>{let L=[...t];if(i.trim()!==""){const X=i.toLowerCase();L=L.filter(O=>{const q=`${O.firstName} ${O.lastName}`.toLowerCase(),Y=(O.email||"").toLowerCase(),le=(O.phone||"").toLowerCase(),ye=(O.occupation||"").toLowerCase();return q.includes(X)||Y.includes(X)||le.includes(X)||ye.includes(X)||O.id.toLowerCase().includes(X)})}n(L)},[t,i,_]),b.useEffect(()=>{const L=O=>{(O.type==="customer_created"||O.type==="customer_updated"||O.type==="customer_compliance_updated"||O.type==="transaction_updated"||O.type==="document_verified")&&ee()},X=_e.subscribe(L);return()=>X()},[_]),b.useEffect(()=>{ee()},[_.filters,_.sortBy,_.sortOrder]);const U=async L=>{try{A(L);const X=await Nt.getCustomerProfile(L.id);E(X),g(!0)}catch(X){console.error("Error loading client profile:",X),Q("error","Failed to load client profile")}},J=L=>{R(X=>({...X,sortBy:L,sortOrder:X.sortBy===L&&X.sortOrder==="desc"?"asc":"desc"}))},pe=async L=>{try{await Nt.updateCustomerCompliance(L),Q("success","Compliance status updated"),await ee()}catch(X){console.error("Error updating compliance:",X),Q("error","Failed to update compliance status")}},ce=({rating:L})=>{const X={low:"bg-green-100 text-green-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-red-100 text-red-800"};return s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${X[L]||X.medium}`,children:L.toUpperCase()})},oe=({status:L,score:X})=>L==="compliant"||X>=90?s.jsx(ft,{className:"h-4 w-4 text-green-600"}):L==="pending"||X>=70?s.jsx(is,{className:"h-4 w-4 text-yellow-600"}):s.jsx(cr,{className:"h-4 w-4 text-red-600"});return s.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center",children:[s.jsx(BC,{className:"h-6 w-6 mr-2"}),"Client Management"]}),s.jsxs("div",{className:"flex space-x-4 text-sm",children:[s.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:["Total: ",k.total]}),s.jsxs("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded",children:["Compliant: ",k.compliant]}),s.jsxs("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded",children:["Pending: ",k.pending]}),s.jsxs("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded",children:["High Risk: ",k.highRisk]})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:()=>w(!0),className:"flex items-center px-3 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:[s.jsx(cy,{className:"h-4 w-4 mr-1"}),"Filters"]}),s.jsxs("button",{onClick:()=>C(!0),className:"flex items-center px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:[s.jsx(Il,{className:"h-4 w-4 mr-1"}),"Import CSV"]}),s.jsxs("button",{onClick:()=>h(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:[s.jsx(dy,{className:"h-4 w-4 mr-1"}),"Add Client"]})]})]}),s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(my,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"text",placeholder:"Search clients...",value:i,onChange:L=>l(L.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-80"})]})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Sort by:"}),s.jsxs("select",{value:_.sortBy,onChange:L=>J(L.target.value),className:"border border-gray-300 rounded px-3 py-1 text-sm",children:[s.jsx("option",{value:"lastUpdated",children:"Last Updated"}),s.jsx("option",{value:"name",children:"Name"}),s.jsx("option",{value:"createdAt",children:"Created Date"}),s.jsx("option",{value:"lastTransactionDate",children:"Last Transaction"}),s.jsx("option",{value:"totalTransactionVolume",children:"Transaction Volume"}),s.jsx("option",{value:"riskRating",children:"Risk Rating"})]}),s.jsx("button",{onClick:()=>J(_.sortBy),className:"p-1 border border-gray-300 rounded",children:_.sortOrder==="desc"?s.jsx(o5,{className:"h-4 w-4"}):s.jsx(m5,{className:"h-4 w-4"})})]})]}),u?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Compliance"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transactions"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Risk"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(L=>{var O,q,Y;const X=I[L.id];return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:s.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:s.jsx(Ku,{className:"h-5 w-5 text-blue-600"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[L.firstName," ",L.lastName]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",L.id.slice(-8)]}),s.jsx("div",{className:"text-xs text-gray-400",children:L.occupation||"Not specified"})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm text-gray-900",children:[L.email&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(Xl,{className:"h-3 w-3 mr-1 text-gray-400"}),L.email]}),L.phone&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(uy,{className:"h-3 w-3 mr-1 text-gray-400"}),L.phone]}),L.city&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(PC,{className:"h-3 w-3 mr-1 text-gray-400"}),L.city]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(oe,{status:L.complianceStatus,score:(X==null?void 0:X.complianceScore)||0}),s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{children:(O=L.kycStatus)==null?void 0:O.toUpperCase()}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Docs: ",(X==null?void 0:X.documentCount)||0]})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"font-medium",children:[((q=X==null?void 0:X.transactionSummary)==null?void 0:q.totalTransactions)||0," txns"]}),s.jsxs("div",{className:"text-gray-500",children:["$",(((Y=X==null?void 0:X.transactionSummary)==null?void 0:Y.totalVolume)||0).toLocaleString()]}),s.jsx("div",{className:"text-xs text-gray-400",children:X!=null&&X.lastActivity?new Date(X.lastActivity).toLocaleDateString():"No activity"})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(ce,{rating:L.riskRating})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>U(L),className:"text-blue-600 hover:text-blue-900",title:"View Profile",children:s.jsx(Md,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>pe(L.id),className:"text-green-600 hover:text-green-900",title:"Update Compliance",children:s.jsx(rn,{className:"h-4 w-4"})}),s.jsx("button",{className:"text-gray-600 hover:text-gray-900",title:"Edit Client",children:s.jsx(FC,{className:"h-4 w-4"})})]})})]},L.id)})})]})}),s.jsx(yt,{isOpen:p,onClose:()=>g(!1),title:"Complete Client Profile",size:"xl",children:j&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Personal Information"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Name:"})," ",j.customer.firstName," ",j.customer.lastName]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Email:"})," ",j.customer.email]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Phone:"})," ",j.customer.phone]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Date of Birth:"})," ",j.customer.dateOfBirth]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Occupation:"})," ",j.customer.occupation]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Compliance Status"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"KYC Status:"}),s.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs ${j.customer.kycStatus==="verified"?"bg-green-100 text-green-800":j.customer.kycStatus==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:(F=j.customer.kycStatus)==null?void 0:F.toUpperCase()})]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Risk Rating:"}),s.jsx(ce,{rating:j.customer.riskRating})]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Documents:"})," ",j.documents.length," uploaded"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Compliance Score:"})," ",j.riskAssessment.score,"/100"]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Transaction Summary"}),s.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[s.jsx("div",{className:"font-medium",children:"Total Transactions"}),s.jsx("div",{className:"text-xl font-bold text-blue-600",children:j.transactionSummary.totalTransactions})]}),s.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[s.jsx("div",{className:"font-medium",children:"Total Volume"}),s.jsxs("div",{className:"text-xl font-bold text-green-600",children:["$",j.transactionSummary.totalVolume.toLocaleString()]})]}),s.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[s.jsx("div",{className:"font-medium",children:"FINTRAC Reports"}),s.jsx("div",{className:"text-xl font-bold text-purple-600",children:j.transactionSummary.complianceTransactions})]}),s.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[s.jsx("div",{className:"font-medium",children:"Last Transaction"}),s.jsx("div",{className:"text-sm text-gray-600",children:j.transactionSummary.latestTransactionDate?new Date(j.transactionSummary.latestTransactionDate).toLocaleDateString():"No transactions"})]})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold mb-3",children:["Documents (",j.documents.length,")"]}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:j.documents.map(L=>s.jsxs("div",{className:"border rounded p-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm font-medium",children:L.documentType.replace("_"," ").toUpperCase()}),s.jsx("div",{className:"text-xs",children:L.metadata.documentVerified?s.jsx(ft,{className:"h-4 w-4 text-green-600"}):s.jsx(is,{className:"h-4 w-4 text-yellow-600"})})]}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Uploaded: ",new Date(L.metadata.uploadDate).toLocaleDateString()]})]},L.id))})]})]})}),s.jsx(yt,{isOpen:f,onClose:()=>h(!1),title:"Add New Client",size:"lg",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-gray-600",children:"Create a new client profile with KYC and compliance information."}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),s.jsx("input",{type:"text",placeholder:"Enter first name",className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),s.jsx("input",{type:"text",placeholder:"Enter last name",className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",placeholder:"client@example.com",className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),s.jsx("input",{type:"tel",placeholder:"+1 (555) 123-4567",className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-700",children:[s.jsx("strong",{children:"Note:"})," For full FINTRAC compliance, clients should complete the detailed customer form with ID verification and document uploads."]})}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:()=>{h(!1),Q("info","Client creation feature coming soon! Use Import CSV or Forms tab for now.")},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Create Client"})]})]})}),s.jsx(yt,{isOpen:S,onClose:()=>C(!1),title:"Import Clients from CSV",size:"lg",children:s.jsx("div",{className:"space-y-4",children:s.jsx(aT,{onImportComplete:L=>{C(!1),Q("success",`Successfully imported ${L} clients`),ee()},onError:L=>{Q("error",`Import failed: ${L}`)}})})}),s.jsx(Ao,{type:V.type,message:V.message,isVisible:V.visible,onClose:re})]})};class fB{constructor(){te(this,"notifications",[]);te(this,"settings",{emailNotifications:!0,browserNotifications:!0,smsNotifications:!1,notificationHours:{start:9,end:18},severityThreshold:"medium"});this.initializeService()}async initializeService(){try{await this.loadNotifications(),await this.loadSettings(),this.startPeriodicChecks()}catch(e){console.error("Error initializing compliance notification service:",e)}}async loadNotifications(){try{const e=localStorage.getItem("compliance_notifications");e&&(this.notifications=JSON.parse(e))}catch(e){console.error("Error loading notifications:",e)}}async saveNotifications(){try{localStorage.setItem("compliance_notifications",JSON.stringify(this.notifications))}catch(e){console.error("Error saving notifications:",e)}}async loadSettings(){try{const e=localStorage.getItem("notification_settings");e&&(this.settings={...this.settings,...JSON.parse(e)})}catch(e){console.error("Error loading notification settings:",e)}}async saveSettings(){try{localStorage.setItem("notification_settings",JSON.stringify(this.settings))}catch(e){console.error("Error saving notification settings:",e)}}startPeriodicChecks(){setInterval(async()=>{await this.checkComplianceDeadlines(),await this.checkSuspiciousActivity()},3600*1e3),setTimeout(async()=>{await this.checkComplianceDeadlines(),await this.checkSuspiciousActivity()},5e3)}async checkComplianceDeadlines(){try{const e=await Me.getTransactions(),r=new Date;e.forEach(n=>{if(n.lctrDeadline&&n.complianceStatus!=="completed"){const i=new Date(n.lctrDeadline),l=Math.ceil((i.getTime()-r.getTime())/(1e3*60*60*24));l<=3&&l>=0&&this.createNotification({type:"deadline_warning",title:"LCTR Deadline Approaching",message:`Transaction ${n.id} LCTR report is due in ${l} days.`,severity:l===0?"critical":l===1?"high":"medium",transactionId:n.id,dueDate:n.lctrDeadline,actionRequired:!0,metadata:{daysUntilDeadline:l}}),l<0&&this.createNotification({type:"lctr_due",title:"LCTR Report Overdue",message:`Transaction ${n.id} LCTR report is ${Math.abs(l)} days overdue!`,severity:"critical",transactionId:n.id,dueDate:n.lctrDeadline,actionRequired:!0,metadata:{overdueDays:Math.abs(l)}})}})}catch(e){console.error("Error checking compliance deadlines:",e)}}async checkSuspiciousActivity(){try{const e=await Me.getTransactions(),r=new Date(Date.now()-1440*60*1e3),n=e.filter(u=>new Date(u.date)>r&&u.fromAmount>=1e4);n.length>5&&this.createNotification({type:"suspicious_activity",title:"High-Value Transaction Pattern",message:`${n.length} high-value transactions (≥$10,000) in the last 24 hours.`,severity:"high",actionRequired:!0,metadata:{transactionCount:n.length,timeFrame:"24h"}});const i=e.filter(u=>new Date(u.date)>r).sort((u,d)=>new Date(u.date).getTime()-new Date(d.date).getTime());let l=0;for(let u=1;u<i.length;u++)new Date(i[u].date).getTime()-new Date(i[u-1].date).getTime()<300*1e3&&l++;l>3&&this.createNotification({type:"suspicious_activity",title:"Rapid Transaction Pattern",message:`${l} transactions completed within 5 minutes of each other.`,severity:"medium",actionRequired:!0,metadata:{rapidTransactions:l}})}catch(e){console.error("Error checking suspicious activity:",e)}}async createNotification(e){const r=this.notifications.find(i=>i.type===e.type&&i.transactionId===e.transactionId&&i.status!=="resolved"&&i.dismissedAt===void 0);if(r)return r.message=e.message,r.severity=e.severity,r.metadata=e.metadata,await this.saveNotifications(),r;const n={id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:new Date().toISOString(),status:"unread",...e};return this.notifications.unshift(n),await this.saveNotifications(),await this.sendRealtimeNotification(n),this.settings.browserNotifications&&this.shouldNotifyNow(n.severity)&&this.sendBrowserNotification(n),n}async sendRealtimeNotification(e){try{_e.send({type:"compliance_required",data:{notification:e,timestamp:new Date().toISOString()}})}catch(r){console.error("Error sending real-time notification:",r)}}sendBrowserNotification(e){"Notification"in window&&Notification.permission==="granted"&&new Notification(e.title,{body:e.message,icon:"/favicon.ico",tag:e.id})}shouldNotifyNow(e){const n=new Date().getHours();if(e==="critical")return!0;if(n<this.settings.notificationHours.start||n>this.settings.notificationHours.end)return!1;const i={low:1,medium:2,high:3,critical:4},l=i[e]||1,u=i[this.settings.severityThreshold];return l>=u}async getNotifications(e){const r=[...this.notifications].sort((n,i)=>new Date(i.createdAt).getTime()-new Date(n.createdAt).getTime());return e?r.slice(0,e):r}async getUnreadNotifications(){return this.notifications.filter(e=>e.status==="unread")}async markAsRead(e){const r=this.notifications.find(n=>n.id===e);r&&r.status==="unread"&&(r.status="read",r.readAt=new Date().toISOString(),await this.saveNotifications())}async dismissNotification(e){const r=this.notifications.find(n=>n.id===e);r&&(r.status="dismissed",r.dismissedAt=new Date().toISOString(),await this.saveNotifications())}async resolveNotification(e){const r=this.notifications.find(n=>n.id===e);r&&(r.status="resolved",await this.saveNotifications())}getSettings(){return{...this.settings}}async updateSettings(e){this.settings={...this.settings,...e},await this.saveSettings()}async requestNotificationPermission(){return"Notification"in window?await Notification.requestPermission()==="granted":!1}async getNotificationStats(){const e=await this.getNotifications(),r={total:e.length,unread:e.filter(n=>n.status==="unread").length,critical:e.filter(n=>n.severity==="critical").length,actionRequired:e.filter(n=>n.actionRequired).length,byType:{}};return e.forEach(n=>{r.byType[n.type]=(r.byType[n.type]||0)+1}),r}async cleanupOldNotifications(e=30){const r=new Date(Date.now()-e*24*60*60*1e3),n=this.notifications.length;return this.notifications=this.notifications.filter(i=>new Date(i.createdAt)>r||i.status==="unread"||i.actionRequired),await this.saveNotifications(),n-this.notifications.length}}const hB=new fB,pB=()=>{var X;const[t,e]=b.useState([]),[r,n]=b.useState([]),[i,l]=b.useState(null),[u,d]=b.useState(!1),[f,h]=b.useState(!1),[p,g]=b.useState(!1),[x,w]=b.useState([]),[S,C]=b.useState(""),[N,A]=b.useState({customerInfo:!1,lctrSubmission:!1,customerAssignment:!1,lctrExport:!1,auditExport:!1,xmlExport:!1}),[j,E]=b.useState([]),[_,R]=b.useState(null),[k,D]=b.useState("");b.useEffect(()=>{if(!u)return;const O=_,q=(Y,le)=>{try{const ye=document.getElementById(Y);ye&&(ye.value=(le??"").toString())}catch{}};O&&(q("firstName",O.firstName),q("lastName",O.lastName),q("dateOfBirth",O.dateOfBirth||""),q("occupation",O.occupation||""),q("streetAddress",O.address||""),q("city",O.city||""),q("province",O.province||""),q("postalCode",O.postalCode||""),q("idType",O.idType||""),q("idNumber",O.idNumber||""),q("photoId",O.photoId||""),q("idExpiry",O.idExpiry||""),q("sourceOfFunds",O.sourceOfFunds||""))},[u,_]);const I=(O,q)=>{let Y=0,le=[];try{const ye=O&&typeof O=="object"?O:{},B=q&&typeof q=="object"?q:{toAmount:0};(!O||typeof O!="object")&&console.warn("Invalid customerData provided to calculateRiskScore"),(!q||typeof q!="object")&&console.warn("Invalid transactionData provided to calculateRiskScore");const ae=typeof B.toAmount=="number"?B.toAmount:0;ae>=5e4?(Y+=3,le.push("Very high transaction amount (≥$50k)")):ae>=25e3?(Y+=2,le.push("High transaction amount (≥$25k)")):ae>=1e4&&(Y+=1,le.push("Large transaction amount (≥$10k)"));const de=["cash intensive business","money services","precious metals dealer","art dealer","casino","real estate","lawyer","accountant"],Z=["business owner","self-employed","consultant"];if(ye.occupation&&typeof ye.occupation=="string")try{const Ie=ye.occupation.toLowerCase();de.some(ct=>Ie.includes(ct))?(Y+=3,le.push(`High-risk occupation: ${ye.occupation}`)):Z.some(ct=>Ie.includes(ct))&&(Y+=1,le.push(`Medium-risk occupation: ${ye.occupation}`))}catch(Ie){console.warn("Error processing occupation risk:",Ie)}const ve=["afghanistan","iran","north korea","syria"],xe=["russia","china","pakistan"];if(ye.country&&typeof ye.country=="string")try{const Ie=ye.country.toLowerCase();ve.includes(Ie)?(Y+=2,le.push(`High-risk country: ${ye.country}`)):xe.includes(Ie)&&(Y+=1,le.push(`Medium-risk country: ${ye.country}`))}catch(Ie){console.warn("Error processing geographic risk:",Ie)}ye.actingForThirdParty==="yes"&&(Y+=2,le.push("Acting on behalf of third party"));const be=["gift","other","business income"];if(ye.sourceOfFunds&&typeof ye.sourceOfFunds=="string")try{const Ie=ye.sourceOfFunds.toLowerCase();be.includes(Ie)&&(Y+=1,le.push(`Medium-risk source: ${ye.sourceOfFunds}`))}catch(Ie){console.warn("Error processing source of funds risk:",Ie)}let Ae;return Y>=8?Ae="HIGH":Y>=4?Ae="MEDIUM":Ae="LOW",{score:Y,rating:Ae,factors:le,requiresEnhancedDueDiligence:Y>=6,requiresOngoingMonitoring:Y>=4}}catch(ye){return console.error("Critical error in calculateRiskScore:",ye),{score:0,rating:"LOW",factors:["Error in risk calculation - manual review required"],requiresEnhancedDueDiligence:!0,requiresOngoingMonitoring:!0}}},[z,V]=b.useState({type:"success",message:"",visible:!1}),P=(O,q)=>{V({type:O,message:q,visible:!0})},$=()=>{V(O=>({...O,visible:!1}))};b.useEffect(()=>{(async()=>{try{const q=await ua.getComplianceTransactions(),Y=await hB.getNotifications(10),le=await Nt.getAllCustomers(),ye=await qs.getAllSubmissionRecords();e(q),n(Y),w(le),E(ye)}catch(q){console.error("Error loading FINTRAC compliance data:",q),e([]),n([]),w([]),E([]),P("error","Failed to load compliance data. Please refresh the page.")}})()},[]),b.useEffect(()=>{const O=()=>{const Y=t.filter(be=>be.status==="locked"&&be.requiresLCTR),le=r.filter(be=>be.type==="deadline_warning"),ye=new Date,ae=Y.filter(be=>{const Ae=new Date(be.lctrDeadline),Ie=Math.ceil((Ae.getTime()-ye.getTime())/(1e3*60*60*24)),ct=le.some(kt=>kt.transactionId===be.id);return Ie<=3&&!ct}).map(be=>{const Ae=new Date(be.lctrDeadline),Ie=Math.ceil((Ae.getTime()-ye.getTime())/(1e3*60*60*24));return{id:`notif-deadline-${be.id}-${Date.now()}`,type:"deadline_warning",priority:Ie<=1?"urgent":"high",title:"LCTR Deadline Approaching",message:`Transaction ${be.id} LCTR report due in ${Ie} days`,transactionId:be.id,triggerDate:ye.toISOString(),dueDate:be.lctrDeadline,status:"active"}});ae.length>0&&n(be=>[...be,...ae]);const de=Y.filter(be=>new Date(be.lctrDeadline)<ye),Z=r.filter(be=>be.type==="overdue_report"),xe=de.filter(be=>!Z.some(Ae=>Ae.transactionId===be.id)).map(be=>({id:`notif-overdue-${be.id}-${Date.now()}`,type:"overdue_report",priority:"urgent",title:"LCTR Report Overdue",message:`Transaction ${be.id} LCTR report is overdue. Immediate action required.`,transactionId:be.id,triggerDate:ye.toISOString(),dueDate:be.lctrDeadline,status:"active"}));xe.length>0&&n(be=>[...be,...xe])};O();const q=setInterval(O,6e4*60);return()=>clearInterval(q)},[t,r]);const Q=async O=>{l(O),d(!0);try{if(O!=null&&O.customerId){const q=await Nt.getCustomerById(O.customerId);R(q)}else R(null)}catch(q){console.warn("Failed to prefill customer info:",q),R(null)}},re=O=>{l(O),C(""),h(!0)},ee=async()=>{if(!i||!S){P("error","Please select a customer");return}try{A(q=>({...q,customerAssignment:!0}));const O=await ua.linkCustomerToTransaction(i.id,S);if(O){e(Y=>Y.map(le=>le.id===i.id?{...O,customerId:S}:le));try{const{default:Y}=await He(async()=>{const{default:le}=await Promise.resolve().then(()=>Rd);return{default:le}},void 0);Y.send({type:"transaction_updated",data:{transactionId:i.id,customerId:S,updateType:"customer_assigned"}})}catch(Y){console.warn("Failed to send WebSocket notification:",Y)}const q=x.find(Y=>Y.id===S);q?P("success",`Customer ${q.firstName} ${q.lastName} assigned to transaction`):P("success","Customer assigned to transaction successfully"),h(!1),l(null),C("")}else throw new Error("Failed to assign customer to transaction")}catch(O){console.error("Error assigning customer:",O),P("error",O instanceof Error?O.message:"Failed to assign customer")}finally{A(O=>({...O,customerAssignment:!1}))}},U=async()=>{try{if(!k){P("error","Please select a customer to load");return}const O=await Nt.getCustomerById(k);O?(R(O),l(q=>q&&{...q,customerId:k}),P("info","Existing customer loaded into the form")):P("error","Selected customer not found")}catch(O){console.warn("Failed to load existing customer:",O)}},J=async()=>{if(!i){P("error","No transaction selected");return}try{A(ve=>({...ve,customerInfo:!0}));const O=ve=>{try{const xe=document.getElementById(ve);return(xe==null?void 0:xe.value)||""}catch(xe){return console.warn(`Failed to get value for element ${ve}:`,xe),""}},q=ve=>{try{const xe=document.querySelector(`input[name="${ve}"]:checked`);return(xe==null?void 0:xe.value)||"no"}catch(xe){return console.warn(`Failed to get radio value for ${ve}:`,xe),"no"}},Y={firstName:O("firstName"),lastName:O("lastName"),dateOfBirth:O("dateOfBirth"),occupation:O("occupation"),streetAddress:O("streetAddress"),city:O("city"),province:O("province"),postalCode:O("postalCode"),country:"Canada",idType:O("idType"),idNumber:O("idNumber"),photoId:O("photoId"),idExpiry:O("idExpiry"),thirdPartyName:O("thirdPartyName"),relationshipToThirdParty:O("relationshipToThirdParty"),actingForThirdParty:q("actingForThirdParty"),sourceOfFunds:O("sourceOfFunds")};if(!Y.firstName||!Y.lastName||!Y.dateOfBirth)throw new Error("Please fill in all required fields");if(!i||typeof i!="object")throw new Error("Invalid transaction data for risk assessment");if(typeof i.toAmount!="number"||i.toAmount<=0)throw new Error("Invalid transaction amount for risk assessment");const le=I(Y,i),{default:ye}=await He(async()=>{const{default:ve}=await Promise.resolve().then(()=>da);return{default:ve}},void 0);let B=i.customerId||null;const ae={firstName:Y.firstName,lastName:Y.lastName,dateOfBirth:Y.dateOfBirth,occupation:Y.occupation,address:Y.streetAddress,city:Y.city,province:Y.province,postalCode:Y.postalCode,country:"Canada",idType:Y.idType,idNumber:Y.idNumber,photoId:Y.photoId,idExpiry:Y.idExpiry,sourceOfFunds:Y.sourceOfFunds};if(B)try{await Nt.updateCustomer(B,ae)}catch(ve){console.warn("Failed to update existing customer, proceeding:",ve)}else{const ve=await Nt.createCustomer({...ae});B=(ve==null?void 0:ve.id)||null}try{const ve=await Nt.getAllCustomers();w(ve||[])}catch(ve){console.warn("Failed to refresh customers after save:",ve)}const de=i.requiresLCTR?"lctr_required":"completed",Z=await ye.updateTransaction(i.id,{status:"completed",customerId:B||void 0,customerData:Y,riskScore:le.score,riskRating:le.rating,riskFactors:le.factors,requiresEnhancedDueDiligence:le.requiresEnhancedDueDiligence,requiresOngoingMonitoring:le.requiresOngoingMonitoring,complianceStatus:de,completedAt:new Date});if(!Z)throw new Error("Failed to update transaction");e(ve=>ve.map(xe=>xe.id===i.id?Z:xe));try{const{default:ve}=await He(async()=>{const{default:xe}=await Promise.resolve().then(()=>Rd);return{default:xe}},void 0);ve.send({type:"transaction_updated",data:{transactionId:i.id,customerId:Z.customerId,updateType:"customer_assigned"}})}catch(ve){console.warn("Failed to send WebSocket notification:",ve)}if(le.rating==="HIGH"){const ve={id:`notif-risk-${Date.now()}`,type:"risk_alert",priority:"urgent",title:"High Risk Transaction",message:`Transaction ${i.id} has been flagged as high risk (Score: ${le.score})`,transactionId:i.id,triggerDate:new Date().toISOString(),status:"active"};n(xe=>[...xe,ve])}d(!1),g(!0),P("success","Customer information added successfully")}catch(O){console.error("Error submitting customer information:",O),P("error",O instanceof Error?O.message:"Failed to submit customer information")}finally{A(O=>({...O,customerInfo:!1}))}},pe=async()=>{try{A(Z=>({...Z,lctrSubmission:!0}));const O=t.filter(Z=>Z.status==="completed"&&Z.requiresLCTR&&!Z.reportSubmitted);if(O.length===0){P("warning","No completed transactions to report"),A(Z=>({...Z,lctrSubmission:!1}));return}const q=await Nt.getAllCustomers(),Y=O.filter(Z=>{if(!Z.customerId)return!0;const ve=q.find(xe=>xe.id===Z.customerId);return!ve||!ve.idType||!ve.idNumber||!Z.customerData});if(Y.length>0){P("error",`Cannot submit LCTR: ${Y.length} transaction(s) missing required customer data.`),A(Z=>({...Z,lctrSubmission:!1}));return}const le=await qs.submitLCTRReport(O,"FWR"),{default:ye}=await He(async()=>{const{default:Z}=await Promise.resolve().then(()=>da);return{default:Z}},void 0),B=O.map(Z=>ye.updateTransaction(Z.id,{status:"submitted",reportSubmitted:!0,reportSubmissionDate:le.submissionDate,reportId:le.reportReference}));await Promise.all(B);const ae=await ye.getComplianceTransactions(),de=await qs.getAllSubmissionRecords();e(ae),E(de),n(Z=>Z.filter(ve=>!O.some(xe=>xe.id===ve.transactionId&&(ve.type==="deadline_warning"||ve.type==="overdue_report")))),P("success",`LCTR submitted to FINTRAC: ${le.reportReference} (${O.length} transactions)`)}catch(O){console.error("Error submitting LCTR reports:",O),P("error",O instanceof Error?O.message:"Failed to submit LCTR reports")}finally{A(O=>({...O,lctrSubmission:!1}))}},ce=async()=>{try{A(be=>({...be,xmlExport:!0}));const O=t.filter(be=>be.status==="completed"&&be.requiresLCTR&&!be.reportSubmitted);if(O.length===0){P("warning","No completed LCTR transactions to export"),A(be=>({...be,xmlExport:!1}));return}const{xml:q,json:Y,csv:le,reportReference:ye}=await qs.generateLCTRReport(O),B=new Blob([q],{type:"application/xml;charset=utf-8;"}),ae=URL.createObjectURL(B),de=document.createElement("a");de.href=ae,de.download=`FINTRAC_LCTR_${ye}.xml`,document.body.appendChild(de),de.click(),document.body.removeChild(de),URL.revokeObjectURL(ae);const Z=new Blob([Y],{type:"application/json;charset=utf-8;"}),ve=URL.createObjectURL(Z),xe=document.createElement("a");xe.href=ve,xe.download=`FINTRAC_LCTR_${ye}.json`,document.body.appendChild(xe),xe.click(),document.body.removeChild(xe),URL.revokeObjectURL(ve),P("success",`Exported FINTRAC XML/JSON: ${ye}`)}catch(O){console.error("FINTRAC XML export failed",O),P("error","Failed to export FINTRAC XML report")}finally{A(O=>({...O,xmlExport:!1}))}},oe=async()=>{try{A(ae=>({...ae,lctrExport:!0}));const O=t.filter(ae=>ae.status==="completed"&&ae.requiresLCTR&&!ae.reportSubmitted);if(O.length===0){P("warning","No completed LCTR transactions to export"),A(ae=>({...ae,lctrExport:!1}));return}const{csv:q,reportReference:Y}=await qs.generateLCTRReport(O),le=new Blob([q],{type:"text/csv;charset=utf-8;"}),ye=URL.createObjectURL(le),B=document.createElement("a");B.href=ye,B.download=`LCTR_Internal_${Y}.csv`,document.body.appendChild(B),B.click(),document.body.removeChild(B),URL.revokeObjectURL(ye),P("success",`Exported CSV: ${Y}`)}catch(O){console.error("LCTR CSV export failed",O),P("error","Failed to export LCTR CSV")}finally{A(O=>({...O,lctrExport:!1}))}},F=async()=>{try{A(de=>({...de,auditExport:!0}));const O=await qs.exportAuditRecords(),q=await ei.exportDocumentAuditLogs(),Y=`# FINTRAC SUBMISSION RECORDS
${O}

# DOCUMENT AUDIT LOGS
${q}`,le=new Blob([Y],{type:"text/csv;charset=utf-8;"}),ye=URL.createObjectURL(le),B=document.createElement("a"),ae=new Date().toISOString().split("T")[0];B.href=ye,B.download=`FINTRAC_Audit_Records_${ae}.csv`,document.body.appendChild(B),B.click(),document.body.removeChild(B),URL.revokeObjectURL(ye),P("success","Audit records exported for government inspection")}catch(O){console.error("Audit export failed",O),P("error","Failed to export audit records")}finally{A(O=>({...O,auditExport:!1}))}},L=O=>{n(q=>q.filter(Y=>Y.id!==O))};return s.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"FINTRAC Compliance System"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[r.length>0&&s.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[s.jsx(Xs,{className:"h-5 w-5 text-red-600 animate-pulse"}),s.jsxs("span",{className:"text-red-800 font-medium",children:[r.length," notification",r.length>1?"s":""]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(rn,{className:"h-5 w-5 text-green-600"}),s.jsx("span",{className:"text-sm font-medium text-green-600",children:"FINTRAC Compliant"})]})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-blue-800 mb-2 flex items-center",children:[s.jsx(rn,{className:"h-5 w-5 mr-2"}),"FINTRAC Compliance Guide"]}),s.jsxs("div",{className:"text-sm text-blue-700 space-y-2",children:[s.jsx("p",{children:"This system helps you comply with FINTRAC regulations for currency exchange transactions:"}),s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Large transactions (≥$10,000 CAD)"})," require LCTR reporting within 15 days"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Transactions ≥$3,000 CAD"})," require enhanced record keeping"]}),s.jsxs("li",{children:["Complete the ",s.jsx("strong",{children:"Transaction Queue"})," by collecting required customer information"]}),s.jsxs("li",{children:["Submit ",s.jsx("strong",{children:"LCTR Reports"})," to FINTRAC before deadlines"]})]}),s.jsx("p",{className:"mt-2",children:"The calculator will automatically flag transactions that require compliance and direct you to this tab."})]})]}),r.length>0&&s.jsx("div",{className:"mt-4 space-y-2 mb-6",children:r.map(O=>s.jsx("div",{className:`p-3 rounded border-l-4 ${O.priority==="urgent"?"bg-red-50 border-red-500 text-red-800":"bg-yellow-50 border-yellow-500 text-yellow-800"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:O.title}),s.jsx("p",{className:"text-sm",children:O.message})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{className:"text-xs px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",children:"View Details"}),s.jsx("button",{onClick:()=>L(O.id),className:"text-xs px-2 py-1 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Dismiss"})]})]})},O.id))}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ks,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),s.jsx("h3",{className:"font-semibold",children:"FINTRAC Reports"}),s.jsxs("div",{className:"mt-2 space-y-2",children:[s.jsx("button",{onClick:ce,disabled:N.xmlExport,className:`w-full flex items-center justify-center p-2 ${N.xmlExport?"bg-red-400":"bg-red-600 hover:bg-red-700"} text-white rounded text-sm`,children:N.xmlExport?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Exporting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ks,{className:"h-4 w-4 mr-1"}),"Export XML/JSON"]})}),s.jsx("button",{onClick:oe,disabled:N.lctrExport,className:`w-full flex items-center justify-center p-2 ${N.lctrExport?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"} text-white rounded text-sm`,children:N.lctrExport?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Exporting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ks,{className:"h-4 w-4 mr-1"}),"Export CSV"]})}),s.jsx("button",{onClick:pe,disabled:N.lctrSubmission,className:`w-full flex items-center justify-center p-2 ${N.lctrSubmission?"bg-purple-400":"bg-purple-600 hover:bg-purple-700"} text-white rounded text-sm`,children:N.lctrSubmission?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(p4,{className:"h-4 w-4 mr-1"}),"Submit to FINTRAC"]})})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx(rn,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),s.jsx("h3",{className:"font-semibold",children:"Audit & Compliance"}),s.jsxs("div",{className:"mt-2 space-y-2",children:[s.jsx("button",{onClick:F,disabled:N.auditExport,className:`w-full flex items-center justify-center p-2 ${N.auditExport?"bg-green-400":"bg-green-600 hover:bg-green-700"} text-white rounded text-sm`,children:N.auditExport?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Exporting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Xw,{className:"h-4 w-4 mr-1"}),"Export Audit Records"]})}),s.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Submissions: ",j.length,s.jsx("br",{}),"Last: ",((X=j[0])==null?void 0:X.submissionDate)||"None"]})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Xw,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),s.jsx("h3",{className:"font-semibold",children:"Document Security"}),s.jsx("p",{className:"text-sm text-gray-600",children:"AES-256 Encrypted Storage"}),s.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["5+ Year Retention",s.jsx("br",{}),"FINTRAC Compliant"]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Transaction Queue"}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx(io,{className:"h-4 w-4"}),s.jsxs("span",{children:[t.filter(O=>O.status==="locked").length," locked transactions"]})]})]}),s.jsx("div",{className:"space-y-4",children:t.map(O=>s.jsxs("div",{className:`p-4 border rounded-lg ${O.status==="locked"?"border-red-300 bg-red-50":O.status==="submitted"?"border-green-300 bg-green-50":"border-yellow-300 bg-yellow-50"}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center",children:[O.status==="locked"?s.jsx(io,{className:"h-5 w-5 text-red-600 mr-2"}):O.status==="submitted"?s.jsx(ft,{className:"h-5 w-5 text-green-600 mr-2"}):s.jsx(is,{className:"h-5 w-5 text-yellow-600 mr-2"}),s.jsxs("span",{className:"font-semibold",children:["TXN-",O.id]})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[O.fromAmount," ",O.fromCurrency," → ",O.toAmount," ",O.toCurrency]}),O.requiresLCTR&&s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(cr,{className:"h-4 w-4 text-orange-500 mr-1"}),s.jsx("span",{className:"text-orange-700",children:"LCTR Required"})]}),O.riskRating&&s.jsxs("div",{className:`px-2 py-1 rounded text-xs font-medium ${O.riskRating==="HIGH"?"bg-red-100 text-red-800":O.riskRating==="MEDIUM"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:["Risk: ",O.riskRating," (",O.riskScore,")"]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[O.status==="locked"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-600",children:["Due in ",O.daysUntilDeadline," days"]}),s.jsx("div",{className:"text-xs text-gray-500",children:O.lctrDeadline})]}),s.jsxs("div",{className:"flex space-x-2",children:[O.customerId?s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs text-green-600",children:"Customer Assigned"}),s.jsx("div",{className:"text-xs text-gray-500",children:O.customerId})]}):s.jsxs("button",{onClick:()=>re(O),className:"px-3 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 text-sm",title:"Assign existing customer",children:[s.jsx(Ku,{className:"h-4 w-4 mr-1 inline"}),"Assign Customer"]}),s.jsxs("button",{onClick:()=>Q(O),className:"px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm",children:[s.jsx(q5,{className:"h-4 w-4 mr-1 inline"}),"Enter Info"]})]})]}),O.complianceStatus==="enhanced_records"&&s.jsxs("div",{className:"flex space-x-2",children:[O.customerId?s.jsx("button",{onClick:()=>re(O),className:"px-3 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 text-sm",children:"Change Customer"}):s.jsxs("button",{onClick:()=>re(O),className:"px-3 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 text-sm",children:[s.jsx(Ku,{className:"h-4 w-4 mr-1 inline"})," Assign Customer"]}),s.jsx("button",{onClick:()=>Q(O),className:"px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm",children:"Complete Info"})]}),O.status==="completed"&&s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm font-medium text-yellow-600",children:"Ready for LCTR"}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Customer ID: ",O.customerId]})]}),O.status==="submitted"&&s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm font-medium text-green-600",children:"Submitted"}),s.jsx("div",{className:"text-xs text-green-500",children:O.reportSubmissionDate}),s.jsx("div",{className:"text-xs text-gray-500",children:O.reportId})]})]})]}),O.riskFactors&&O.riskFactors.length>0&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Risk Factors:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:O.riskFactors.map((q,Y)=>s.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:q},Y))})]})]},O.id))})]}),s.jsx(yt,{isOpen:u,onClose:()=>d(!1),title:"Enter Customer Information",size:"lg",children:s.jsxs("div",{className:"py-4",children:[s.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg mb-4",children:[s.jsx("h3",{className:"font-medium text-blue-800 mb-1",children:"Transaction Details"}),i&&s.jsxs("div",{className:"text-sm text-blue-700",children:[s.jsxs("p",{children:["ID: TXN-",i.id]}),s.jsxs("p",{children:["Amount: ",i.fromAmount," ",i.fromCurrency," → ",i.toAmount," ",i.toCurrency]}),s.jsxs("p",{children:["Date: ",i.date]})]})]}),s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 mb-4",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Load Existing Customer"}),s.jsxs("select",{value:k,onChange:O=>D(O.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Select from database..."}),x.map(O=>s.jsxs("option",{value:O.id,children:[O.firstName," ",O.lastName," ",O.email?`(${O.email})`:""]},O.id))]})]}),s.jsx("div",{children:s.jsx("button",{type:"button",onClick:U,className:"px-3 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Use This Customer"})})]}),_&&s.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Loaded: ",_.firstName," ",_.lastName," • ID: ",_.id]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Personal Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),s.jsx("input",{id:"firstName",type:"text",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter first name",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),s.jsx("input",{id:"lastName",type:"text",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter last name",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),s.jsx("input",{id:"dateOfBirth",type:"date",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Occupation"}),s.jsx("input",{id:"occupation",type:"text",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter occupation"})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Address Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address"}),s.jsx("input",{id:"streetAddress",type:"text",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter street address",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),s.jsx("input",{id:"city",type:"text",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter city",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Province"}),s.jsxs("select",{id:"province",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Select Province"}),s.jsx("option",{value:"AB",children:"Alberta"}),s.jsx("option",{value:"BC",children:"British Columbia"}),s.jsx("option",{value:"MB",children:"Manitoba"}),s.jsx("option",{value:"NB",children:"New Brunswick"}),s.jsx("option",{value:"NL",children:"Newfoundland and Labrador"}),s.jsx("option",{value:"NS",children:"Nova Scotia"}),s.jsx("option",{value:"ON",children:"Ontario"}),s.jsx("option",{value:"PE",children:"Prince Edward Island"}),s.jsx("option",{value:"QC",children:"Quebec"}),s.jsx("option",{value:"SK",children:"Saskatchewan"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code"}),s.jsx("input",{id:"postalCode",type:"text",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter postal code",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),s.jsx("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded-lg",value:"Canada",readOnly:!0})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Identification"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID Type"}),s.jsxs("select",{id:"idType",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Select ID Type"}),s.jsx("option",{value:"drivers_license",children:"Driver's License"}),s.jsx("option",{value:"passport",children:"Passport"}),s.jsx("option",{value:"provincial_id",children:"Provincial ID Card"}),s.jsx("option",{value:"other_government",children:"Other Government ID"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID Number"}),s.jsx("input",{id:"idNumber",type:"text",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter ID number",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Photo ID"}),s.jsx("input",{id:"photoId",type:"text",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Photo ID reference"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID Expiry Date"}),s.jsx("input",{id:"idExpiry",type:"date",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]})]}),i&&i.toAmount>=1e4&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Transaction Details"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Is this transaction being conducted on behalf of someone else?"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"actingForThirdParty",value:"no",className:"mr-2",defaultChecked:!0}),s.jsx("span",{children:"No, this is for myself"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"actingForThirdParty",value:"yes",className:"mr-2"}),s.jsx("span",{children:"Yes, for someone else"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Third Party Name"}),s.jsx("input",{id:"thirdPartyName",type:"text",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Full name or organization (if acting for third party)"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Relationship to Third Party"}),s.jsx("input",{id:"relationshipToThirdParty",type:"text",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Employee, Family member, Agent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Source of Funds"}),s.jsxs("select",{id:"sourceOfFunds",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Select source"}),s.jsx("option",{value:"employment",children:"Employment Income"}),s.jsx("option",{value:"business",children:"Business Income"}),s.jsx("option",{value:"investment",children:"Investment Income"}),s.jsx("option",{value:"sale_of_asset",children:"Sale of Asset"}),s.jsx("option",{value:"gift",children:"Gift"}),s.jsx("option",{value:"other",children:"Other"})]})]})]})]})]}),s.jsxs("div",{className:"mt-6 flex justify-end space-x-4",children:[s.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300",children:"Cancel"}),s.jsx("button",{onClick:J,disabled:N.customerInfo,className:`px-4 py-2 ${N.customerInfo?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"} text-white rounded flex items-center justify-center`,children:N.customerInfo?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):"Submit Information"})]})]})}),s.jsx(yt,{isOpen:f,onClose:()=>h(!1),title:"Assign Customer to Transaction",size:"md",children:s.jsxs("div",{className:"py-4",children:[s.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg mb-4",children:[s.jsx("h3",{className:"font-medium text-blue-800 mb-1",children:"Transaction Details"}),i&&s.jsxs("div",{className:"text-sm text-blue-700",children:[s.jsxs("p",{children:["ID: TXN-",i.id]}),s.jsxs("p",{children:["Amount: ",i.fromAmount," ",i.fromCurrency," → ",i.toAmount," ",i.toCurrency]}),s.jsxs("p",{children:["Date: ",i.date]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Customer"}),s.jsxs("select",{value:S,onChange:O=>C(O.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"-- Select Customer --"}),x.map(O=>s.jsxs("option",{value:O.id,children:[O.firstName," ",O.lastName," ",O.email?`(${O.email})`:""]},O.id))]}),x.length===0&&s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"No customers available. Please add customers in the Client Management section first."})]}),S&&s.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Selected Customer Preview:"}),(()=>{const O=x.find(q=>q.id===S);return O?s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Name:"})," ",O.firstName," ",O.lastName]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Email:"})," ",O.email||"Not provided"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Phone:"})," ",O.phone||"Not provided"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"City:"})," ",O.city||"Not provided"]}),O.riskRating&&s.jsxs("p",{children:[s.jsx("strong",{children:"Risk Rating:"}),s.jsx("span",{className:`ml-1 px-2 py-1 rounded text-xs ${O.riskRating==="HIGH"?"bg-red-100 text-red-800":O.riskRating==="MEDIUM"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:O.riskRating})]})]}):null})()]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[s.jsx("button",{onClick:()=>{h(!1),C("")},className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors",disabled:N.customerAssignment,children:"Cancel"}),s.jsx("button",{onClick:ee,disabled:!S||N.customerAssignment,className:`px-4 py-2 rounded-lg text-white transition-colors ${!S||N.customerAssignment?"bg-gray-400 cursor-not-allowed":"bg-orange-600 hover:bg-orange-700"}`,children:N.customerAssignment?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2 inline-block"}),"Assigning..."]}):"Assign Customer"})]})]})}),s.jsx(yt,{isOpen:p,onClose:()=>g(!1),title:"Customer Information Added",size:"sm",children:s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:s.jsx(ft,{className:"h-6 w-6 text-green-600"})}),s.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Customer information has been successfully added and risk assessment completed."}),s.jsx("button",{onClick:()=>g(!1),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Continue"})]})}),s.jsx(Ao,{type:z.type,message:z.message,isVisible:z.visible,onClose:$})]})},gB=({onViewRateLock:t,onViewRateAlert:e})=>{const[r,n]=b.useState("locks"),[i,l]=b.useState([]),[u,d]=b.useState([]),[f,h]=b.useState([]),[p,g]=b.useState(null),[x,w]=b.useState(!0),[S,C]=b.useState(null);b.useEffect(()=>{(async()=>{w(!0),C(null);try{switch(r){case"locks":const I=await Sr.getRateLocks();l(I);break;case"alerts":const z=await Sr.getRateAlerts();d(z);break;case"orders":const V=await Sr.getWebsiteOrders();h(V);break;case"metrics":const P=await Sr.getWebsiteMetrics();g(P);break}}catch(I){console.error(`Error loading ${r} data:`,I),C(`Failed to load ${r} data. Please try again.`)}finally{w(!1)}})()},[r]);const N=D=>new Date(D).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),A=D=>{const I=new Date,V=new Date(D).getTime()-I.getTime();if(V<=0)return"Expired";const P=Math.floor(V/(1e3*60*60*24)),$=Math.floor(V%(1e3*60*60*24)/(1e3*60*60));if(P>0)return`${P}d ${$}h`;{const Q=Math.floor(V%36e5/6e4);return`${$}h ${Q}m`}},j=D=>{switch(D){case"active":return"text-green-600 bg-green-100";case"completed":return"text-blue-600 bg-blue-100";case"expired":return"text-gray-600 bg-gray-100";case"cancelled":return"text-red-600 bg-red-100";case"triggered":return"text-yellow-600 bg-yellow-100";case"pending":return"text-purple-600 bg-purple-100";default:return"text-gray-600 bg-gray-100"}},E=()=>x?s.jsx("div",{className:"flex justify-center items-center p-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):S?s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(cr,{className:"h-5 w-5 text-red-500"})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-red-700",children:S})})]})}):i.length===0?s.jsxs("div",{className:"text-center p-12 text-gray-500",children:[s.jsx(gg,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),s.jsx("p",{className:"text-lg font-medium",children:"No rate locks found"}),s.jsx("p",{className:"mt-2",children:"Rate locks from the website will appear here."})]}):s.jsx("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Exchange"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rate"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expires"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(D=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:D.id}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-gray-900",children:D.customerEmail}),D.customerPhone&&s.jsx("div",{className:"text-xs text-gray-500",children:D.customerPhone})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"text-sm text-gray-900",children:[D.amount," ",D.fromCurrency]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["to ",D.toCurrency]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D.rate}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:N(D.createdAt)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:D.status==="active"?s.jsx("div",{className:"text-sm text-gray-900",children:A(D.expiresAt)}):s.jsx("div",{className:"text-sm text-gray-500",children:"-"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${j(D.status)}`,children:D.status.charAt(0).toUpperCase()+D.status.slice(1)})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[s.jsx("button",{onClick:()=>t&&t(D.id),className:"text-blue-600 hover:text-blue-900 mr-3",children:"View"}),D.status==="active"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>Sr.completeRateLock(D.id),className:"text-green-600 hover:text-green-900 mr-3",children:"Complete"}),s.jsx("button",{onClick:()=>Sr.cancelRateLock(D.id),className:"text-red-600 hover:text-red-900",children:"Cancel"})]})]})]},D.id))})]})}),_=()=>x?s.jsx("div",{className:"flex justify-center items-center p-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):S?s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(cr,{className:"h-5 w-5 text-red-500"})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-red-700",children:S})})]})}):u.length===0?s.jsxs("div",{className:"text-center p-12 text-gray-500",children:[s.jsx(Xs,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),s.jsx("p",{className:"text-lg font-medium",children:"No rate alerts found"}),s.jsx("p",{className:"mt-2",children:"Rate alerts from the website will appear here."})]}):s.jsx("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Exchange"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Target Rate"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(D=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:D.id}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-gray-900",children:D.customerEmail}),D.customerPhone&&s.jsx("div",{className:"text-xs text-gray-500",children:D.customerPhone})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"text-sm text-gray-900",children:[D.fromCurrency," → ",D.toCurrency]}),D.amount&&s.jsxs("div",{className:"text-xs text-gray-500",children:["Amount: ",D.amount]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D.targetRate}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:N(D.createdAt)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${j(D.status)}`,children:D.status.charAt(0).toUpperCase()+D.status.slice(1)})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[s.jsx("button",{onClick:()=>e&&e(D.id),className:"text-blue-600 hover:text-blue-900 mr-3",children:"View"}),D.status==="active"&&s.jsx("button",{onClick:()=>Sr.triggerRateAlert(D.id),className:"text-yellow-600 hover:text-yellow-900",children:"Trigger"})]})]},D.id))})]})}),R=()=>x?s.jsx("div",{className:"flex justify-center items-center p-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):S?s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(cr,{className:"h-5 w-5 text-red-500"})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-red-700",children:S})})]})}):f.length===0?s.jsxs("div",{className:"text-center p-12 text-gray-500",children:[s.jsx(ia,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),s.jsx("p",{className:"text-lg font-medium",children:"No website orders found"}),s.jsx("p",{className:"mt-2",children:"Orders from the website will appear here."})]}):s.jsx("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Related ID"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(D=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:D.id}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${D.type==="rate_lock"?"bg-blue-100 text-blue-800":D.type==="rate_alert"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:D.type==="rate_lock"?"Rate Lock":D.type==="rate_alert"?"Rate Alert":"Direct Exchange"})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-gray-900",children:D.customerEmail}),D.customerPhone&&s.jsx("div",{className:"text-xs text-gray-500",children:D.customerPhone})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:N(D.createdAt)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${j(D.status)}`,children:D.status.charAt(0).toUpperCase()+D.status.slice(1)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:D.rateLockId||D.rateAlertId||D.transactionId||"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsx("button",{onClick:()=>{D.type==="rate_lock"&&D.rateLockId&&t?t(D.rateLockId):D.type==="rate_alert"&&D.rateAlertId&&e&&e(D.rateAlertId)},className:"text-blue-600 hover:text-blue-900",children:"View Details"})})]},D.id))})]})}),k=()=>x?s.jsx("div",{className:"flex justify-center items-center p-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):S?s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(cr,{className:"h-5 w-5 text-red-500"})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-red-700",children:S})})]})}):p?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Visitors"}),s.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:s.jsx(gg,{className:"h-5 w-5 text-blue-600"})})]}),s.jsx("div",{className:"text-3xl font-bold text-gray-900",children:p.visitors.toLocaleString()}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Total website visitors"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Page Views"}),s.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:s.jsx(pg,{className:"h-5 w-5 text-green-600"})})]}),s.jsx("div",{className:"text-3xl font-bold text-gray-900",children:p.pageViews.toLocaleString()}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Total page views"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Calculator Uses"}),s.jsx("div",{className:"p-2 bg-purple-100 rounded-full",children:s.jsx(Calculator,{className:"h-5 w-5 text-purple-600"})})]}),s.jsx("div",{className:"text-3xl font-bold text-gray-900",children:p.calculatorUses.toLocaleString()}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Total calculator uses"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Conversion Rate"}),s.jsx("div",{className:"p-2 bg-yellow-100 rounded-full",children:s.jsx(ia,{className:"h-5 w-5 text-yellow-600"})})]}),s.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[p.conversionRate.toFixed(1),"%"]}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Visitor to order conversion"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Rate Locks"}),s.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:s.jsx(io,{className:"h-5 w-5 text-blue-600"})})]}),s.jsx("div",{className:"text-3xl font-bold text-gray-900",children:p.rateLocks.toLocaleString()}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Total rate locks created"}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Conversion from Calculator:"}),s.jsxs("span",{className:"font-medium text-gray-900",children:[p.calculatorUses>0?(p.rateLocks/p.calculatorUses*100).toFixed(1):"0.0","%"]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Rate Alerts"}),s.jsx("div",{className:"p-2 bg-yellow-100 rounded-full",children:s.jsx(Xs,{className:"h-5 w-5 text-yellow-600"})})]}),s.jsx("div",{className:"text-3xl font-bold text-gray-900",children:p.rateAlerts.toLocaleString()}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Total rate alerts created"}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Conversion from Calculator:"}),s.jsxs("span",{className:"font-medium text-gray-900",children:[p.calculatorUses>0?(p.rateAlerts/p.calculatorUses*100).toFixed(1):"0.0","%"]})]})})]})]})]}):s.jsxs("div",{className:"text-center p-12 text-gray-500",children:[s.jsx(hg,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),s.jsx("p",{className:"text-lg font-medium",children:"No website metrics available"}),s.jsx("p",{className:"mt-2",children:"Website metrics will appear here once available."})]});return s.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Website Activities"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx(my,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]}),s.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-900 border border-gray-300 rounded-lg",children:s.jsx(cy,{className:"h-5 w-5"})})]})]}),s.jsx("div",{className:"mb-6 border-b border-gray-200",children:s.jsxs("nav",{className:"flex -mb-px",children:[s.jsxs("button",{onClick:()=>n("locks"),className:`mr-8 py-4 px-1 border-b-2 font-medium text-sm ${r==="locks"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(io,{className:"h-5 w-5 inline-block mr-2"}),"Rate Locks"]}),s.jsxs("button",{onClick:()=>n("alerts"),className:`mr-8 py-4 px-1 border-b-2 font-medium text-sm ${r==="alerts"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(Xs,{className:"h-5 w-5 inline-block mr-2"}),"Rate Alerts"]}),s.jsxs("button",{onClick:()=>n("orders"),className:`mr-8 py-4 px-1 border-b-2 font-medium text-sm ${r==="orders"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(ia,{className:"h-5 w-5 inline-block mr-2"}),"Website Orders"]}),s.jsxs("button",{onClick:()=>n("metrics"),className:`mr-8 py-4 px-1 border-b-2 font-medium text-sm ${r==="metrics"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(hg,{className:"h-5 w-5 inline-block mr-2"}),"Website Metrics"]})]})}),s.jsxs("div",{children:[r==="locks"&&E(),r==="alerts"&&_(),r==="orders"&&R(),r==="metrics"&&k()]})]})},yB=({onViewRateLock:t,onViewRateAlert:e})=>s.jsx(gB,{onViewRateLock:t,onViewRateAlert:e});class xB{constructor(){te(this,"STORAGE_KEY","form_submissions");te(this,"QR_SESSIONS_KEY","qr_sessions")}async createFormSession(e){try{console.log("Creating form session...");const r=Xt(),n=(e==null?void 0:e.expiresIn)||1800*1e3,i=new Date(Date.now()+n).toISOString(),l=Xt(),d={id:r,qrCodeUrl:`${window.location.origin}/LeaperFX/#/form/${r}?token=${l}`,sessionToken:l,expiresAt:i,isActive:!0,createdAt:new Date().toISOString()};console.log("Generated session:",d);const f=await this.getQRSessions();f.push(d),await Me.setItem(this.QR_SESSIONS_KEY,f),console.log("Stored session successfully");try{_e.send({type:"form_session_created",data:d})}catch(h){console.warn("WebSocket notification failed:",h)}return{sessionId:r,sessionUrl:d.qrCodeUrl,expiresAt:i}}catch(r){throw console.error("Error creating form session:",r),new Error(`Failed to create form session: ${r.message}`)}}async generateFormQR(e){const r=Xt(),n=Xt(),i=e.expiresIn||1800*1e3,u={id:r,qrCodeUrl:`${window.location.origin}/LeaperFX/#/customer-form/${r}?token=${n}`,sessionToken:n,expiresAt:new Date(Date.now()+i).toISOString(),isActive:!0,createdAt:new Date().toISOString()},d=await this.getQRSessions();return d.push(u),await Me.setItem(this.QR_SESSIONS_KEY,d),_e.send({type:"qr_code_generated",data:u}),u}async validateQRSession(e,r){const n=await this.getQRSessions(),i=n.find(l=>l.id===e&&l.sessionToken===r);return!i||!i.isActive?!1:new Date(i.expiresAt)<new Date?(i.isActive=!1,await Me.setItem(this.QR_SESSIONS_KEY,n),!1):!0}async submitCustomerForm(e){const r=Xt(),n=[];for(const d of e.documents){const f=await this.processDocument(d);n.push(f)}const i=Nt.validateCustomerDataSimplified(e.customerData),l={id:r,qrCodeId:e.sessionId,customerData:e.customerData,documents:n,status:"pending",submissionDate:new Date().toISOString(),verificationStatus:"pending",complianceFlags:i.warnings||[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),source:"qr_scan"},u=await this.getAllFormSubmissions();return u.unshift(l),await Me.setItem(this.STORAGE_KEY,u),await this.markQRSessionAsScanned(e.sessionId),_e.send({type:"form_submission_received",data:l}),this.logAuditAction(r,"submitted",{source:e.submissionSource}),l}async getAllFormSubmissions(){try{const e=await Me.getItem(this.STORAGE_KEY);return Array.isArray(e)?e:[]}catch(e){return console.error("Error getting form submissions:",e),[]}}async getFormSubmissionById(e){return(await this.getAllFormSubmissions()).find(n=>n.id===e)||null}async processFormSubmission(e){const r=await this.getAllFormSubmissions(),n=r.findIndex(l=>l.id===e);if(n===-1)throw new Error("Form submission not found");r[n].status="processing",r[n].updatedAt=new Date().toISOString();const i=await this.performComplianceValidation(r[n]);return r[n].complianceFlags=i.flags,await Me.setItem(this.STORAGE_KEY,r),_e.send({type:"form_status_updated",data:r[n]}),this.logAuditAction(e,"processed",{complianceFlags:i.flags}),r[n]}async updateFormStatus(e,r){const n=await this.getAllFormSubmissions(),i=n.findIndex(l=>l.id===e);if(i===-1)throw new Error("Form submission not found");n[i].status=r,n[i].updatedAt=new Date().toISOString(),await Me.setItem(this.STORAGE_KEY,n),_e.send({type:"form_status_updated",data:n[i]}),this.logAuditAction(e,"status_updated",{newStatus:r})}async createCustomerFromForm(e){const r=await this.getFormSubmissionById(e);if(!r)throw new Error("Form not found");try{const n=await Nt.createCustomer({...r.customerData,source:"forms_tab",formId:e,documents:r.documents.map(u=>({type:u.type,fileName:u.fileName,verified:u.verificationStatus==="verified"}))}),i=await this.getAllFormSubmissions(),l=i.findIndex(u=>u.id===e);return l!==-1&&(i[l].customerData={...i[l].customerData||{},id:n.id},i[l].documents.length>0&&i[l].documents.every(d=>d.verificationStatus==="verified")&&(i[l].verificationStatus="verified"),i[l].updatedAt=new Date().toISOString(),await Me.setItem(this.STORAGE_KEY,i)),await this.updateFormStatus(e,"completed"),this.logAuditAction(e,"customer_created",{customerId:n.id}),n}catch(n){throw await this.updateFormStatus(e,"rejected"),n}}async assignTransactionToForm(e,r){var d,f,h;const n=await this.getAllFormSubmissions(),i=n.findIndex(p=>p.id===e);if(i===-1)throw new Error("Form submission not found");const l=n[i];try{if((!l.customerData||!l.customerData.id)&&((d=l.customerData)!=null&&d.email)){const p=await Nt.getCustomerByEmail(l.customerData.email);p&&(n[i].customerData={...l.customerData||{},id:p.id})}}catch(p){console.warn("Customer lookup during assignment failed:",p)}n[i].assignedTransactionId=r,n[i].updatedAt=new Date().toISOString(),await Me.setItem(this.STORAGE_KEY,n);const u=n[i].createdCustomerId||((f=n[i].customerData)==null?void 0:f.id);if(u)try{await ua.linkCustomerToTransaction(r,u),await Nt.updateCustomerCompliance(u)}catch(p){console.error("Error linking transaction:",p)}_e.send({type:"form_transaction_assigned",data:{formId:e,transactionId:r,customerId:u,complianceValidated:!!n[i].fintracValidation,form:n[i]}}),this.logAuditAction(e,"transaction_assigned",{transactionId:r,customerId:u,complianceStatus:transaction.complianceStatus,validationResult:(h=n[i].fintracValidation)==null?void 0:h.isCompliant})}async uploadDocumentForForm(e,r,n){if(!await this.getFormSubmissionById(e))throw new Error("Form not found");const l=await this.processDocument(r,n),u=await this.getAllFormSubmissions(),d=u.findIndex(f=>f.id===e);return d!==-1&&(u[d].documents.push(l),u[d].updatedAt=new Date().toISOString(),await Me.setItem(this.STORAGE_KEY,u),_e.send({type:"form_document_uploaded",data:{formId:e,document:l}})),this.logAuditAction(e,"document_uploaded",{documentId:l.id,type:n}),l}async approveDocument(e,r){var d;const n=await this.getAllFormSubmissions(),i=n.findIndex(f=>f.id===e);if(i===-1)throw new Error("Form not found");const l=n[i];let u=!1;if(l.documents=l.documents.map(f=>f.id===r&&f.verificationStatus!=="verified"?(u=!0,{...f,verificationStatus:"verified",rejectionReason:void 0}):f),!!u){if(l.updatedAt=new Date().toISOString(),l.documents.length>0&&l.documents.every(f=>f.verificationStatus==="verified")&&(l.verificationStatus="verified",l.status="verified"),n[i]=l,await Me.setItem(this.STORAGE_KEY,n),_e.send({type:"form_document_approved",data:{formId:e,documentId:r,form:l}}),l.status==="verified"&&(_e.send({type:"form_status_updated",data:l}),(d=l.customerData)!=null&&d.id))try{await Nt.verifyCustomerKYC(l.customerData.id,!0,"Documents verified via Forms"),_e.send({type:"customer_updated",data:{id:l.customerData.id,kycStatus:"verified"}})}catch(f){console.warn("Failed to update customer KYC to verified:",f)}this.logAuditAction(e,"document_approved",{documentId:r})}}async rejectDocument(e,r,n){var f;const i=await this.getAllFormSubmissions(),l=i.findIndex(h=>h.id===e);if(l===-1)throw new Error("Form not found");const u=i[l];let d=!1;if(u.documents=u.documents.map(h=>h.id===r&&(h.verificationStatus!=="rejected"||h.rejectionReason!==n)?(d=!0,{...h,verificationStatus:"rejected",rejectionReason:n}):h),!!d){if(u.verificationStatus="rejected",u.status="rejected",u.updatedAt=new Date().toISOString(),i[l]=u,await Me.setItem(this.STORAGE_KEY,i),_e.send({type:"form_document_rejected",data:{formId:e,documentId:r,reason:n,form:u}}),_e.send({type:"form_status_updated",data:u}),(f=u.customerData)!=null&&f.id)try{await Nt.verifyCustomerKYC(u.customerData.id,!1,n||"Documents rejected via Forms"),_e.send({type:"customer_updated",data:{id:u.customerData.id,kycStatus:"rejected"}})}catch(h){console.warn("Failed to update customer KYC to rejected:",h)}this.logAuditAction(e,"document_rejected",{documentId:r,reason:n})}}async processDocument(e,r){const n=Xt();let i;try{e&&e.type&&e.type.startsWith("image/")&&(i=await new Promise((u,d)=>{const f=new FileReader;f.onload=()=>u(f.result),f.onerror=h=>d(h),f.readAsDataURL(e)}))}catch(u){console.warn("Failed to generate document preview:",u)}return{id:n,type:r||this.inferDocumentType(e.name),fileName:e.name,fileSize:e.size,mimeType:e.type,encryptedData:i,metadata:{originalFileName:e.name},verificationStatus:"pending",uploadedAt:new Date().toISOString()}}inferDocumentType(e){const r=e.toLowerCase();return r.includes("id")||r.includes("license")||r.includes("passport")?"photo_id":r.includes("selfie")||r.includes("photo")?"selfie":r.includes("address")||r.includes("bill")||r.includes("statement")?"proof_of_address":"additional"}async performComplianceValidation(e){var l,u;const r=[];(u=(l=e.customerData)==null?void 0:l.occupation)!=null&&u.toLowerCase().includes("cash")&&r.push("HIGH_RISK_OCCUPATION");const n=e.documents.some(d=>d.type==="photo_id"),i=e.documents.some(d=>d.type==="selfie");if(n||r.push("MISSING_PHOTO_ID"),i||r.push("MISSING_SELFIE"),e.assignedTransactionId)try{const d=await ua.getTransactionById(e.assignedTransactionId);d&&d.amount>=1e4&&r.push("LARGE_TRANSACTION")}catch(d){console.error("Error checking transaction amount:",d)}return{flags:r}}async getQRSessions(){try{const e=await Me.getItem(this.QR_SESSIONS_KEY);return Array.isArray(e)?e:[]}catch(e){return console.error("Error getting QR sessions:",e),[]}}async markQRSessionAsScanned(e){const r=await this.getQRSessions(),n=r.findIndex(i=>i.id===e);n!==-1&&(r[n].scannedAt=new Date().toISOString(),await Me.setItem(this.QR_SESSIONS_KEY,r))}logAuditAction(e,r,n={}){const i={formId:e,action:r,timestamp:new Date().toISOString(),details:n,userAgent:navigator.userAgent};console.log("[FORM AUDIT]",i),_e.send({type:"form_audit_log",data:i})}async cleanupExpiredSessions(){const e=await this.getQRSessions(),r=new Date,n=e.filter(i=>new Date(i.expiresAt)>r);n.length!==e.length&&(await Me.setItem(this.QR_SESSIONS_KEY,n),console.log(`Cleaned up ${e.length-n.length} expired QR sessions`))}async getFormStatistics(){const e=await this.getAllFormSubmissions(),r=new Date().toDateString();return{totalSubmissions:e.length,pendingForms:e.filter(n=>n.status==="pending").length,completedForms:e.filter(n=>n.status==="completed").length,rejectedForms:e.filter(n=>n.status==="rejected").length,todaySubmissions:e.filter(n=>new Date(n.submissionDate).toDateString()===r).length}}async getEnhancedFormStatistics(){const e=await this.getAllFormSubmissions(),r=new Date().toISOString().split("T")[0],n=e.filter(h=>h.createdAt.startsWith(r)),i=e.filter(h=>!!h.assignedTransactionId).length,l=e.filter(h=>!!h.fintracValidation).length,u=e.filter(h=>h.status==="pending"||h.fintracValidation&&!h.fintracValidation.isCompliant).length,d=e.reduce((h,p)=>h+(p.complianceScore||0),0),f=e.length>0?d/e.length:0;return{total:e.length,today:n.length,pending:e.filter(h=>h.status==="pending").length,verified:e.filter(h=>h.status==="verified").length,completed:e.filter(h=>h.status==="completed").length,rejected:e.filter(h=>h.status==="rejected").length,todayPending:n.filter(h=>h.status==="pending").length,todayCompleted:n.filter(h=>h.status==="completed").length,withTransactions:i,complianceValidated:l,requiresReview:u,averageComplianceScore:f}}async getFormsByComplianceStatus(e){return(await this.getAllFormSubmissions()).filter(n=>n.fintracValidation?e==="compliant"?n.fintracValidation.isCompliant&&(n.complianceScore||0)>=90:e==="non_compliant"?!n.fintracValidation.isCompliant||(n.complianceScore||0)<70:!n.fintracValidation.isCompliant&&(n.complianceScore||0)>=70:e==="pending")}async getFormsRequiringComplianceReview(){return(await this.getAllFormSubmissions()).filter(r=>r.status!=="rejected"&&(!r.fintracValidation||!r.fintracValidation.isCompliant||(r.complianceScore||0)<80||r.complianceFlags&&r.complianceFlags.length>0))}async getFormsNeedingTransactionAssignment(){return(await this.getAllFormSubmissions()).filter(r=>r.status==="completed"&&!r.assignedTransactionId&&r.createdCustomerId)}async createTransactionFromForm(e,r){try{const n=await this.getFormSubmissionById(e);if(!n)throw new Error("Form not found");if(!n.createdCustomerId)throw new Error("Form must have an associated customer before creating transaction");const i=await ua.createTransaction({...r,customerId:n.createdCustomerId});return await this.assignTransactionToForm(e,i.id),i}catch(n){throw console.error("Error creating transaction from form:",n),n}}}const dn=new xB,vB=({storeUrl:t,size:e=200})=>{const r=b.useRef(null),[n,i]=b.useState(!1),[l,u]=b.useState(!0),[d,f]=b.useState(""),[h,p]=b.useState(!1),g=async()=>{p(!0);try{console.log("Attempting to create form session...");const C=await dn.createFormSession();console.log("Form session created:",C),f(C.sessionUrl),await x(C.sessionUrl),console.log("QR code generated successfully")}catch(C){console.error("Error creating form session:",C),alert(`Failed to create new form session: ${C.message}`)}finally{p(!1)}},x=async C=>{if(r.current){u(!0);try{await(await He(()=>import("./browser.BlLJqD5j.js").then(A=>A.b),[])).toCanvas(r.current,C,{width:e,margin:2,errorCorrectionLevel:"M",color:{dark:"#000000",light:"#ffffff"}})}catch(N){console.error("Error generating QR code:",N);const A=r.current.getContext("2d");A&&(A.fillStyle="#ffffff",A.fillRect(0,0,e,e),A.fillStyle="#000000",A.font="16px Arial",A.textAlign="center",A.fillText("QR Code Error",e/2,e/2),A.fillText("Please try again",e/2,e/2+20))}finally{u(!1)}}};b.useEffect(()=>{t?(f(t),x(t)):g()},[t,e]);const w=()=>{if(r.current)try{r.current.toBlob(C=>{if(!C)return;const N=URL.createObjectURL(C),A=document.createElement("a");A.href=N,A.download="store-qr-code.png",document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(N)},"image/png")}catch(C){console.error("Error downloading QR code:",C)}},S=async()=>{try{await navigator.clipboard.writeText(d),i(!0),setTimeout(()=>i(!1),2e3)}catch(C){console.error("Failed to copy URL:",C)}};return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[s.jsx(yg,{className:"h-5 w-5 mr-2"}),"Customer Form QR Code"]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:g,disabled:h,className:"flex items-center gap-1 px-3 py-1.5 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",title:"Generate New Session",children:h?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}),"Generating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(dy,{className:"h-3 w-3"}),"New QR"]})}),s.jsx("button",{onClick:S,disabled:!d,className:"p-2 text-gray-500 hover:text-gray-700 transition-colors disabled:opacity-50",title:"Copy URL",children:n?s.jsx(kC,{className:"h-4 w-4 text-green-500"}):s.jsx(D5,{className:"h-4 w-4"})}),s.jsx("button",{onClick:w,disabled:!d,className:"p-2 text-gray-500 hover:text-gray-700 transition-colors disabled:opacity-50",title:"Download QR Code",children:s.jsx(OC,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-block p-4 bg-white border-2 border-gray-200 rounded-lg",children:l?s.jsx("div",{className:"flex items-center justify-center",style:{width:e,height:e},children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s.jsx("canvas",{ref:r,width:e,height:e,className:"block"})}),s.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[s.jsx("p",{className:"font-medium",children:"Customer Form URL:"}),s.jsx("p",{className:"break-all bg-gray-50 px-3 py-2 rounded mt-1",children:d||"Generating..."})]}),s.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:[s.jsx("p",{children:"Customers scan this QR code to access the secure ID verification form"}),s.jsx("p",{children:"Each QR code creates a unique session for FINTRAC compliance"})]})]})]})},bB=({form:t,onApprove:e,onReject:r,onClose:n})=>{var pe,ce,oe,F,L,X;const[i,l]=b.useState(((pe=t.documents)==null?void 0:pe[0])||null),[u,d]=b.useState(100),[f,h]=b.useState(0),[p,g]=b.useState(null),[x,w]=b.useState(!1),[S,C]=b.useState(""),[N,A]=b.useState(!1),[j,E]=b.useState(null),_=b.useRef(null),R=async O=>{w(!0),await new Promise(Y=>setTimeout(Y,2e3));const q={extractedText:k(O.type),confidence:.85+Math.random()*.1,authenticity:Math.random()>.2?"verified":"suspicious",qualityScore:.75+Math.random()*.2,flags:D(O.type),...O.type==="selfie"&&{biometricMatch:.88+Math.random()*.1}};g(q),w(!1)},k=O=>{var q,Y,le,ye,B,ae,de,Z,ve,xe,be,Ae,Ie,ct;switch(O){case"photo_id":return`DOCUMENT TYPE: Driver's License
PROVINCE: Ontario, Canada
NAME: ${(q=t.customerData)==null?void 0:q.firstName} ${(Y=t.customerData)==null?void 0:Y.lastName}
DATE OF BIRTH: ${(le=t.customerData)==null?void 0:le.dateOfBirth}
LICENSE NUMBER: ${(ye=t.customerData)==null?void 0:ye.idNumber}
EXPIRY DATE: ${(B=t.customerData)==null?void 0:B.idExpiryDate}
CLASS: G
ADDRESS: ${(ae=t.customerData)==null?void 0:ae.address}
CITY: ${(de=t.customerData)==null?void 0:de.city}
POSTAL CODE: ${(Z=t.customerData)==null?void 0:Z.postalCode}

SECURITY FEATURES DETECTED:
✓ Holographic overlay present
✓ UV reactive ink detected  
✓ Microprinting verified
✓ RFID chip readable
✓ Barcode scannable

DATA VALIDATION:
✓ Checksum validation passed
✓ Format compliance verified
✓ Cross-reference match confirmed`;case"proof_of_address":return`DOCUMENT TYPE: Utility Bill
PROVIDER: Hydro One
ACCOUNT HOLDER: ${(ve=t.customerData)==null?void 0:ve.firstName} ${(xe=t.customerData)==null?void 0:xe.lastName}
SERVICE ADDRESS: ${(be=t.customerData)==null?void 0:be.address}
${(Ae=t.customerData)==null?void 0:Ae.city}, ${(Ie=t.customerData)==null?void 0:Ie.province} ${(ct=t.customerData)==null?void 0:ct.postalCode}
BILLING PERIOD: November 2024
ISSUE DATE: December 1, 2024
AMOUNT: $127.45

VERIFICATION CHECKS:
✓ Address matches customer data
✓ Name matches provided information  
✓ Document date within 90 days
✓ Format matches known templates
✓ No tampering detected`;case"selfie":return`BIOMETRIC ANALYSIS RESULTS:
Face Detection: SUCCESSFUL
Quality Score: 94/100
Lighting: Adequate
Resolution: 1920x1080 (HD)
Face Coverage: 87% visible
Eye Detection: Both eyes clearly visible
Expression: Neutral
Head Position: Frontal (±5°)

LIVENESS DETECTION:
✓ Real person detected
✓ No screen reflection
✓ Natural skin texture
✓ Micro-expressions detected
✓ Anti-spoofing passed

COMPARISON METRICS:
Facial geometry match: 92%
Eye pattern similarity: 89%  
Nose structure: 95%
Mouth region: 88%
Overall confidence: 91%`;default:return"Document processing completed with advanced OCR analysis"}},D=O=>{const q=[];return Math.random()>.7&&q.push("Low image quality detected"),Math.random()>.8&&q.push("Potential tampering detected"),O==="photo_id"&&Math.random()>.9&&q.push("Expiry date approaching"),O==="selfie"&&Math.random()>.8&&q.push("Face partially obscured"),q};cs.useEffect(()=>{i&&R(i)},[i]);const I=()=>d(O=>Math.min(O+25,300)),z=()=>d(O=>Math.max(O-25,50)),V=()=>h(O=>(O+90)%360),P=O=>{e(t.id,O)},$=O=>{E(O),A(!0)},Q=()=>{j&&S.trim()&&(r(t.id,j,S),A(!1),C(""),E(null))},re=O=>{switch(O){case"photo_id":return"🆔 Photo ID";case"proof_of_address":return"🏠 Proof of Address";case"selfie":return"🤳 Selfie";default:return"📄 Document"}},ee=O=>{switch(O){case"verified":return"text-green-600 bg-green-100";case"rejected":return"text-red-600 bg-red-100";case"pending":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}},U=O=>{switch(O){case"verified":return"text-green-600";case"suspicious":return"text-red-600";default:return"text-gray-600"}},J=()=>p?Math.round((p.confidence+p.qualityScore+(p.biometricMatch||1))/3*100):0;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-7xl h-full max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b bg-gray-50",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Document Review"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Customer: ",(ce=t.customerData)==null?void 0:ce.firstName," ",(oe=t.customerData)==null?void 0:oe.lastName]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[p&&s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("div",{className:`text-sm font-medium px-3 py-1 rounded ${J()>=80?"bg-green-100 text-green-800":J()>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:["Overall Score: ",J(),"%"]})}),s.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:s.jsx(Ir,{className:"h-5 w-5"})})]})]}),s.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[s.jsx("div",{className:"w-64 border-r bg-gray-50 overflow-y-auto",children:s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Documents"}),s.jsx("div",{className:"space-y-2",children:(F=t.documents)==null?void 0:F.map(O=>s.jsxs("button",{onClick:()=>l(O),className:`w-full p-3 rounded-lg border text-left transition-colors ${(i==null?void 0:i.id)===O.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:bg-gray-100"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium",children:re(O.type)}),s.jsx("span",{className:`text-xs px-2 py-1 rounded ${ee(O.verificationStatus)}`,children:O.verificationStatus.toUpperCase()})]}),s.jsx("div",{className:"text-xs text-gray-500",children:O.fileName}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[(O.fileSize/1024/1024).toFixed(1)," MB"]})]},O.id))})]})}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-white",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium",children:i?re(i.type):"No Document Selected"}),i&&s.jsx("span",{className:`text-xs px-2 py-1 rounded ${ee(i.verificationStatus)}`,children:i.verificationStatus.toUpperCase()})]}),i&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1 mr-4",children:[s.jsx("span",{className:"text-xs text-gray-600",children:"Zoom:"}),s.jsxs("span",{className:"text-xs font-mono",children:[u,"%"]})]}),s.jsx("button",{onClick:z,className:"p-2 hover:bg-gray-100 rounded",children:s.jsx($4,{className:"h-4 w-4"})}),s.jsx("button",{onClick:I,className:"p-2 hover:bg-gray-100 rounded",children:s.jsx(F4,{className:"h-4 w-4"})}),s.jsx("button",{onClick:V,className:"p-2 hover:bg-gray-100 rounded",children:s.jsx(c4,{className:"h-4 w-4"})}),s.jsx("button",{className:"p-2 hover:bg-gray-100 rounded",children:s.jsx(OC,{className:"h-4 w-4"})})]})]}),s.jsx("div",{className:"flex-1 relative overflow-auto bg-gray-100",children:i?s.jsx("div",{className:"flex items-center justify-center h-full p-4",children:s.jsxs("div",{className:"bg-white border shadow-lg relative",style:{transform:`scale(${u/100}) rotate(${f}deg)`,transformOrigin:"center"},children:[i.encryptedData&&((L=i.mimeType)!=null&&L.startsWith("image/"))?s.jsx("img",{ref:_,src:i.encryptedData,alt:i.fileName,style:{maxWidth:"80vw",maxHeight:"65vh",display:"block"}}):s.jsxs("div",{className:"w-96 h-64 flex items-center justify-center text-6xl",children:[i.type==="photo_id"&&"🆔",i.type==="selfie"&&"🤳",i.type==="proof_of_address"&&"📄"]}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-10 transition-opacity flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-white opacity-0 hover:opacity-100 transition-opacity",children:[s.jsx("p",{className:"text-sm font-medium mb-2",children:i.fileName}),s.jsx("p",{className:"text-xs",children:"Click to enhance"})]})})]})}):s.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Md,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Select a document to review"})]})})})]}),s.jsx("div",{className:"w-80 border-l bg-white overflow-y-auto",children:s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Analysis Results"}),i&&s.jsxs("button",{onClick:()=>R(i),disabled:x,className:"text-xs text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[s.jsx(oo,{className:`h-3 w-3 ${x?"animate-spin":""}`}),"Re-analyze"]})]}),x?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-3"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Analyzing document..."})]}):p&&i?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Authenticity"}),s.jsx("span",{className:`text-xs font-medium ${U(p.authenticity)}`,children:p.authenticity.toUpperCase()})]}),s.jsxs("div",{className:"space-y-2 text-xs text-gray-600",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Confidence:"}),s.jsxs("span",{children:[Math.round(p.confidence*100),"%"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Quality:"}),s.jsxs("span",{children:[Math.round(p.qualityScore*100),"%"]})]}),p.biometricMatch&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Face Match:"}),s.jsxs("span",{children:[Math.round(p.biometricMatch*100),"%"]})]})]})]}),p.extractedText&&s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("h4",{className:"text-xs font-medium text-gray-700 mb-2",children:"Extracted Data"}),s.jsx("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap font-mono bg-white p-2 rounded border",children:p.extractedText})]}),p.flags.length>0&&s.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:[s.jsxs("h4",{className:"text-xs font-medium text-amber-800 mb-2 flex items-center gap-1",children:[s.jsx(cr,{className:"h-3 w-3"}),"Issues Detected"]}),s.jsx("ul",{className:"text-xs text-amber-700 space-y-1",children:p.flags.map((O,q)=>s.jsxs("li",{children:["• ",O]},q))})]}),i.type==="selfie"&&((X=t.documents)==null?void 0:X.find(O=>O.type==="photo_id"))&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[s.jsx("h4",{className:"text-xs font-medium text-blue-800 mb-2",children:"Biometric Comparison"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-full h-16 bg-gray-200 rounded mb-1 flex items-center justify-center text-lg",children:"🆔"}),s.jsx("p",{className:"text-xs text-gray-600",children:"ID Photo"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-full h-16 bg-gray-200 rounded mb-1 flex items-center justify-center text-lg",children:"🤳"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Selfie"})]})]}),s.jsx("div",{className:"mt-2 text-center",children:s.jsxs("span",{className:`text-sm font-medium ${(p.biometricMatch||0)>.8?"text-green-600":(p.biometricMatch||0)>.6?"text-yellow-600":"text-red-600"}`,children:[Math.round((p.biometricMatch||0)*100),"% Match"]})})]}),s.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[s.jsxs("button",{onClick:()=>i&&P(i.id),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:[s.jsx(kC,{className:"h-4 w-4"}),"Approve Document"]}),s.jsxs("button",{onClick:()=>i&&$(i.id),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:[s.jsx(Ir,{className:"h-4 w-4"}),"Reject Document"]}),s.jsx("button",{className:"w-full px-4 py-2 border border-gray-300 rounded hover:bg-gray-50 transition-colors",children:"Request Better Image"})]})]}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(cr,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{className:"text-sm",children:"Select a document to view analysis"})]})]})})]}),N&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Reject Document"}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for rejection:"}),s.jsx("textarea",{value:S,onChange:O=>C(O.target.value),rows:4,className:"w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Please provide a detailed reason for rejecting this document..."})]}),s.jsxs("div",{className:"flex gap-3 justify-end",children:[s.jsx("button",{onClick:()=>{A(!1),C(""),E(null)},className:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:Q,disabled:!S.trim(),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50",children:"Reject Document"})]})]})})]})})},wB=({onUploadComplete:t,onClose:e})=>{const[r,n]=b.useState([]),[i,l]=b.useState([]),[u,d]=b.useState(!1),[f,h]=b.useState(!1),[p,g]=b.useState("upload"),[x,w]=b.useState([]),[S,C]=b.useState("airdrop"),N=b.useRef(null),A=b.useRef(null);cs.useEffect(()=>{j(),E()},[]);const j=async()=>{try{const J=(await dn.getAllFormSubmissions()).filter(pe=>pe.status==="pending"&&(!pe.documents||pe.documents.length===0));w(J)}catch(U){console.error("Error loading pending forms:",U)}},E=()=>{const U=localStorage.getItem("pending_scanner_uploads");if(U)try{n(JSON.parse(U))}catch(J){console.error("Error loading pending uploads:",J)}},_=U=>{localStorage.setItem("pending_scanner_uploads",JSON.stringify(U)),n(U)},R=U=>{U.preventDefault(),U.stopPropagation(),U.type==="dragenter"||U.type==="dragover"?h(!0):U.type==="dragleave"&&h(!1)},k=U=>{U.preventDefault(),U.stopPropagation(),h(!1);const J=Array.from(U.dataTransfer.files).filter(pe=>pe.type.startsWith("image/")||pe.type==="application/pdf");I(J)},D=U=>{const J=U.target.files?Array.from(U.target.files):[];I(J)},I=U=>{const J=U.filter(pe=>!(!["image/jpeg","image/png","image/jpg","application/pdf"].includes(pe.type)||pe.size>10485760));J.length!==U.length&&alert(`${U.length-J.length} file(s) were rejected. Please ensure files are images (JPG, PNG) or PDF under 10MB.`),l(pe=>[...pe,...J])},z=U=>{l(J=>J.filter((pe,ce)=>ce!==U))},V=async()=>{if(i.length!==0){d(!0);try{const U=i.map(pe=>({id:`upload-${Date.now()}-${Math.random()}`,file:pe,status:"pending",timestamp:new Date().toISOString()})),J=[...r,...U];_(J),l([]),g("pending"),t&&t(i)}catch(U){console.error("Error processing uploads:",U),alert("Error processing uploads. Please try again.")}finally{d(!1)}}},P=async(U,J)=>{const pe=r.find(oe=>oe.id===U),ce=x.find(oe=>oe.id===J);if(!(!pe||!ce))try{const oe=r.map(L=>{var X,O;return L.id===U?{...L,status:"processing",formId:J,customerName:`${(X=ce.customerData)==null?void 0:X.firstName} ${(O=ce.customerData)==null?void 0:O.lastName}`}:L});_(oe),await dn.uploadDocumentForForm(J,pe.file,"additional");const F=oe.map(L=>L.id===U?{...L,status:"linked"}:L);_(F),await j()}catch(oe){console.error("Error linking document to customer:",oe);const F=r.map(L=>L.id===U?{...L,status:"error"}:L);_(F)}},$=U=>{const J=r.filter(pe=>pe.id!==U);_(J)},Q=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{ref:A,onDragEnter:R,onDragLeave:R,onDragOver:R,onDrop:k,className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${f?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"text-4xl",children:"📄"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Customer Documents"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Drag & drop customer ID documents here, or click to browse"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[s.jsxs("button",{onClick:()=>{var U;return(U=N.current)==null?void 0:U.click()},className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:[s.jsx(Il,{className:"h-4 w-4"}),"Choose Files"]}),s.jsxs("button",{className:"flex items-center justify-center gap-2 px-4 py-2 border border-gray-300 rounded hover:bg-gray-50",children:[s.jsx(m4,{className:"h-4 w-4"}),"Scan Document"]})]}),s.jsx("input",{ref:N,type:"file",multiple:!0,accept:"image/*,application/pdf",onChange:D,className:"hidden"})]})}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Accepted File Types"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 text-xs text-blue-800",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded"}),"Photo ID (JPG, PNG)"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded"}),"Proof of Address (PDF, JPG)"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded"}),"Supporting Documents"]})]})]}),i.length>0&&s.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h4",{className:"text-sm font-medium text-gray-900",children:["Selected Files (",i.length,")"]}),s.jsx("button",{onClick:()=>l([]),className:"text-sm text-red-600 hover:text-red-700",children:"Clear All"})]}),s.jsx("div",{className:"space-y-2",children:i.map((U,J)=>s.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"text-lg",children:U.type.startsWith("image/")?"🖼️":"📄"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:U.name}),s.jsxs("div",{className:"text-xs text-gray-500",children:[(U.size/1024/1024).toFixed(1)," MB"]})]})]}),s.jsx("button",{onClick:()=>z(J),className:"text-red-600 hover:text-red-700",children:s.jsx(Ir,{className:"h-4 w-4"})})]},J))}),s.jsx("div",{className:"mt-4 flex justify-end",children:s.jsx("button",{onClick:V,disabled:u,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:u?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Processing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ft,{className:"h-4 w-4"}),"Process Uploads"]})})})]})]}),re=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Pending Document Links"}),s.jsx("button",{onClick:E,className:"text-sm text-blue-600 hover:text-blue-700",children:"Refresh"})]}),r.length===0?s.jsxs("div",{className:"text-center py-12 text-gray-500",children:[s.jsx(is,{className:"h-16 w-16 mx-auto mb-4 opacity-30"}),s.jsx("h4",{className:"text-lg font-medium mb-2",children:"No Pending Uploads"}),s.jsx("p",{className:"text-sm",children:"Upload documents to link them to customer forms"})]}):s.jsx("div",{className:"space-y-4",children:r.map(U=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"text-2xl",children:U.file.type.startsWith("image/")?"🖼️":"📄"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:U.file.name}),s.jsxs("div",{className:"text-sm text-gray-600",children:[(U.file.size/1024/1024).toFixed(1)," MB • Uploaded ",new Date(U.timestamp).toLocaleString()]}),U.customerName&&s.jsxs("div",{className:"text-sm text-blue-600 mt-1",children:["Linked to: ",U.customerName]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-xs px-2 py-1 rounded ${U.status==="linked"?"bg-green-100 text-green-800":U.status==="processing"?"bg-blue-100 text-blue-800":U.status==="error"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:U.status.toUpperCase()}),U.status==="pending"&&s.jsx("button",{onClick:()=>$(U.id),className:"text-red-600 hover:text-red-700",children:s.jsx(Ir,{className:"h-4 w-4"})})]})]}),U.status==="pending"&&x.length>0&&s.jsxs("div",{className:"border-t pt-3",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 mb-2",children:"Link to Customer:"}),s.jsxs("div",{className:"grid gap-2",children:[x.slice(0,3).map(J=>{var pe,ce,oe;return s.jsxs("button",{onClick:()=>P(U.id,J.id),className:"flex items-center justify-between p-2 border rounded hover:bg-gray-50 text-left",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium",children:[(pe=J.customerData)==null?void 0:pe.firstName," ",(ce=J.customerData)==null?void 0:ce.lastName]}),s.jsxs("div",{className:"text-xs text-gray-500",children:[(oe=J.customerData)==null?void 0:oe.email," • Form #",J.id.slice(-8)]})]}),s.jsx("div",{className:"text-blue-600",children:"Link →"})]},J.id)}),x.length>3&&s.jsxs("div",{className:"text-xs text-gray-500 text-center py-2",children:["+",x.length-3," more customers available"]})]})]}),U.status==="error"&&s.jsx("div",{className:"border-t pt-3",children:s.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[s.jsx(rr,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:"Failed to link document. Please try again."})]})})]},U.id))})]}),ee=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Alternative Sharing Methods"}),s.jsx("p",{className:"text-sm text-gray-600",children:"For customers who can't use their camera, help them share documents using these methods:"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:`border-2 rounded-lg p-6 cursor-pointer transition-colors ${S==="airdrop"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>C("airdrop"),children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"text-2xl",children:"📡"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"AirDrop (iOS/Mac)"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Direct device-to-device sharing"})]})]}),S==="airdrop"&&s.jsxs("div",{className:"mt-4 p-3 bg-white border rounded text-sm",children:[s.jsx("p",{className:"font-medium mb-2",children:"Instructions for customer:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-gray-600",children:[s.jsx("li",{children:"Take photos of documents on iPhone/iPad"}),s.jsx("li",{children:"Select photos in Photos app"}),s.jsx("li",{children:"Tap Share button"}),s.jsx("li",{children:"Select AirDrop and choose store device"}),s.jsx("li",{children:"Accept transfer on store device"})]})]})]}),s.jsxs("div",{className:`border-2 rounded-lg p-6 cursor-pointer transition-colors ${S==="bluetooth"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>C("bluetooth"),children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx(p5,{className:"h-6 w-6 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Bluetooth Transfer"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Cross-platform sharing"})]})]}),S==="bluetooth"&&s.jsxs("div",{className:"mt-4 p-3 bg-white border rounded text-sm",children:[s.jsx("p",{className:"font-medium mb-2",children:"Instructions for customer:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-gray-600",children:[s.jsx("li",{children:"Enable Bluetooth on both devices"}),s.jsx("li",{children:"Pair customer device with store device"}),s.jsx("li",{children:'Select photos and choose "Send via Bluetooth"'}),s.jsx("li",{children:"Accept transfer on store device"})]})]})]}),s.jsxs("div",{className:`border-2 rounded-lg p-6 cursor-pointer transition-colors ${S==="email"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>C("email"),children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx(Xl,{className:"h-6 w-6 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Email Transfer"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Send documents via email"})]})]}),S==="email"&&s.jsxs("div",{className:"mt-4 p-3 bg-white border rounded text-sm",children:[s.jsx("p",{className:"font-medium mb-2",children:"Store email for documents:"}),s.jsx("div",{className:"bg-gray-50 p-2 rounded font-mono text-sm",children:"documents@store-domain.com"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Customer can email documents directly to this address"})]})]}),s.jsxs("div",{className:`border-2 rounded-lg p-6 cursor-pointer transition-colors ${S==="qr"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>C("qr"),children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"text-2xl",children:"📱"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"QR Upload Link"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Generate upload link"})]})]}),S==="qr"&&s.jsxs("div",{className:"mt-4 p-3 bg-white border rounded text-sm",children:[s.jsx("button",{className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 mb-3",children:"Generate Upload QR Code"}),s.jsx("p",{className:"text-gray-600",children:"Customer scans QR code to access secure upload form"})]})]})]}),s.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(rr,{className:"h-5 w-5 text-amber-600"}),s.jsx("span",{className:"font-medium text-amber-800",children:"Security Reminder"})]}),s.jsx("p",{className:"text-sm text-amber-700",children:"Always verify customer identity before accepting documents through alternative methods. Ensure all shared documents are encrypted and handled according to FINTRAC compliance requirements."})]})]});return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[s.jsxs("div",{className:"border-b",children:[s.jsxs("div",{className:"flex items-center justify-between p-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Scanner Fallback System"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Alternative document collection for customers with camera issues"})]}),e&&s.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full",children:s.jsx(Ir,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"px-6",children:s.jsxs("div",{className:"flex space-x-6",children:[s.jsx("button",{onClick:()=>g("upload"),className:`pb-4 px-1 border-b-2 text-sm font-medium ${p==="upload"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Upload Documents"}),s.jsxs("button",{onClick:()=>g("pending"),className:`pb-4 px-1 border-b-2 text-sm font-medium ${p==="pending"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Pending Links (",r.filter(U=>U.status==="pending").length,")"]}),s.jsx("button",{onClick:()=>g("sharing"),className:`pb-4 px-1 border-b-2 text-sm font-medium ${p==="sharing"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Sharing Methods"})]})})]}),s.jsxs("div",{className:"p-6",children:[p==="upload"&&Q(),p==="pending"&&re(),p==="sharing"&&ee()]})]})},SB=()=>{const[t,e]=b.useState("qr-management"),[r,n]=b.useState([]),[i,l]=b.useState([]),[u,d]=b.useState([]),[f,h]=b.useState([]),[p,g]=b.useState(!1),[x,w]=b.useState(!1),[S,C]=b.useState(!1),[N,A]=b.useState(null);b.useEffect(()=>{let P=null;return j(),(async()=>{try{await _e.connect(),P=_e.subscribe($=>{if(!(!$||!$.type))if($.type==="form_submission_received"){const Q=$.data;n(re=>[Q,...re]),Q.status==="pending"&&l(re=>[Q,...re])}else if($.type==="form_status_updated"){const Q=$.data;n(re=>re.map(ee=>ee.id===Q.id?Q:ee)),j()}else($.type==="form_document_approved"||$.type==="form_document_rejected")&&j()})}catch{}})(),()=>{try{P&&P(),_e.disconnect()}catch{}}},[]);const j=async()=>{g(!0);try{const P=await dn.getAllFormSubmissions();n(P),l(P.filter($=>$.status==="pending")),d(P.filter($=>$.status==="processing"||$.status==="verified")),h(P.filter($=>$.status==="completed"))}catch(P){console.error("Error loading form submissions:",P)}finally{g(!1)}},E=async P=>{try{g(!0),await dn.processFormSubmission(P),await j()}catch($){console.error("Error processing form:",$)}finally{g(!1)}},_=async P=>{try{if(g(!0),!r.find(re=>re.id===P))throw new Error("Form not found");const Q=await dn.createCustomerFromForm(P);await j(),console.log("Client created successfully:",Q)}catch($){console.error("Error creating client from form:",$)}finally{g(!1)}},R=async(P,$)=>{try{g(!0),await _(P),r.find(re=>re.id===P)&&(await dn.assignTransactionToForm(P,$),await j())}catch(Q){console.error("Error assigning transaction:",Q)}finally{g(!1)}},k=async(P,$)=>{try{g(!0),await dn.approveDocument(P,$),await j()}catch(Q){console.error("Error approving document:",Q)}finally{g(!1)}},D=async(P,$,Q)=>{try{g(!0),await dn.rejectDocument(P,$,Q),await j()}catch(re){console.error("Error rejecting document:",re)}finally{g(!1)}},I=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[s.jsx(yg,{className:"h-5 w-5"}),"Store QR Code Management"]}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Generate QR codes for customers to access secure forms for ID verification and registration. Perfect for in-store customer onboarding with FINTRAC compliance."}),s.jsx(vB,{})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"QR Code Analytics"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Scans"})]}),s.jsxs("div",{className:"text-center p-4 bg-green-50 rounded",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:f.length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Completed Forms"})]}),s.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:i.length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Pending Review"})]})]})]})]}),z=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx(Ks,{className:"h-5 w-5"}),"Form Submissions Dashboard"]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("select",{className:"text-sm border border-gray-300 rounded px-3 py-1",defaultValue:"all",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"processing",children:"Processing"}),s.jsx("option",{value:"completed",children:"Completed"})]}),s.jsx("input",{type:"search",placeholder:"Search customers...",className:"text-sm border border-gray-300 rounded px-3 py-1 w-48"}),s.jsx("button",{className:"text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded flex items-center gap-1",children:"📊 Analytics"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-yellow-50 p-4 rounded border",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:i.length}),s.jsx("div",{className:"text-sm text-yellow-600",children:"Pending Review"})]}),s.jsxs("div",{className:"bg-blue-50 p-4 rounded border",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-700",children:u.length}),s.jsx("div",{className:"text-sm text-blue-600",children:"In Process"})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded border",children:[s.jsx("div",{className:"text-2xl font-bold text-green-700",children:f.length}),s.jsx("div",{className:"text-sm text-green-600",children:"Completed"})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded border",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-700",children:r.length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Forms"})]})]}),i.length===0?s.jsxs("div",{className:"text-center py-12 text-gray-500",children:[s.jsx(Ks,{className:"h-16 w-16 mx-auto mb-4 opacity-30"}),s.jsx("h4",{className:"text-lg font-medium mb-2",children:"No Pending Forms"}),s.jsx("p",{className:"text-sm",children:"All form submissions have been processed"})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between border-b pb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",className:"rounded"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Select All"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{className:"text-xs bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700",children:"Bulk Process"}),s.jsx("button",{className:"text-xs bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"Bulk Approve"})]})]}),i.map(P=>{var $,Q,re,ee;return s.jsxs("div",{className:"border rounded-lg p-5 hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",className:"rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(is,{className:"h-4 w-4 text-yellow-500"}),s.jsxs("span",{className:"font-semibold text-gray-900",children:[($=P.customerData)==null?void 0:$.firstName," ",(Q=P.customerData)==null?void 0:Q.lastName]}),s.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded",children:"PENDING"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm text-gray-600",children:[s.jsxs("div",{children:["📧 ",(re=P.customerData)==null?void 0:re.email]}),s.jsxs("div",{children:["📱 ",(ee=P.customerData)==null?void 0:ee.phone]}),s.jsxs("div",{children:["📅 ",new Date(P.submissionDate).toLocaleDateString()]})]}),P.complianceFlags&&P.complianceFlags.length>0&&s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx(rr,{className:"h-4 w-4 text-amber-500"}),s.jsxs("span",{className:"text-xs text-amber-700",children:["Compliance flags: ",P.complianceFlags.join(", ")]})]})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>E(P.id),disabled:p,className:"px-3 py-1.5 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:"📋 Review Details"}),s.jsx("button",{onClick:()=>_(P.id),disabled:p,className:"px-3 py-1.5 text-xs bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:"✅ Create Client"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>R(P.id,""),disabled:p,className:"px-3 py-1.5 text-xs bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50",children:"🔗 Link Transaction"}),s.jsx("button",{className:"px-3 py-1.5 text-xs bg-gray-600 text-white rounded hover:bg-gray-700",children:"📋 View Documents"})]})]})]}),P.documents&&P.documents.length>0&&s.jsxs("div",{className:"border-t pt-3 mt-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Documents:"}),P.documents.map((U,J)=>s.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:U.type.replace("_"," ").toUpperCase()},J))]}),s.jsxs("div",{className:"flex gap-2",children:[P.documents.slice(0,3).map((U,J)=>s.jsx("div",{className:"w-16 h-12 bg-gray-100 rounded border flex items-center justify-center text-xs text-gray-500",children:U&&(U.type==="photo_id"?"🆔":U.type==="selfie"?"🤳":U.type==="proof_of_address"?"📄":"📎")},J)),P.documents.length>3&&s.jsxs("div",{className:"w-16 h-12 bg-gray-100 rounded border flex items-center justify-center text-xs text-gray-500",children:["+",P.documents.length-3]})]})]}),s.jsx("div",{className:"border-t pt-3 mt-3",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"text-xs text-gray-500",children:["Form ID: ",P.id," • Submitted: ",new Date(P.submissionDate).toLocaleString()]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{className:"text-xs text-blue-600 hover:text-blue-700",children:"Contact Customer"}),s.jsx("span",{className:"text-gray-300",children:"•"}),s.jsx("button",{className:"text-xs text-red-600 hover:text-red-700",children:"Flag for Review"}),s.jsx("span",{className:"text-gray-300",children:"•"}),s.jsx("button",{className:"text-xs text-green-600 hover:text-green-700",children:"Quick Approve"})]})]})})]},P.id)})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Processing Queue"}),u.length===0?s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No forms currently being processed"}):s.jsx("div",{className:"space-y-3",children:u.map(P=>{var $,Q;return s.jsx("div",{className:"border rounded p-4 bg-yellow-50",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(rr,{className:"h-4 w-4 text-yellow-600"}),s.jsx("span",{className:"font-medium",children:"Processing"})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["Customer: ",($=P.customerData)==null?void 0:$.firstName," ",(Q=P.customerData)==null?void 0:Q.lastName]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Status: ",P.status]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsx("button",{onClick:()=>R(P.id,""),disabled:p,className:"px-3 py-1 text-xs bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50",children:"Assign Transaction"})})]})},P.id)})})]})]}),V=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx(Kw,{className:"h-5 w-5"}),"ID Document Validation & Review"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>w(!x),className:"text-sm bg-blue-600 text-white px-3 py-2 rounded hover:bg-blue-700",children:"📋 Review Documents"}),s.jsx("button",{onClick:()=>C(!S),className:"text-sm bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",children:"📱 Scanner Fallback"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2",children:[s.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Forms Awaiting Document Review"}),r.filter(P=>P.documents&&P.documents.length>0&&P.status!=="completed").length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-200 rounded-lg",children:[s.jsx(ft,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"No documents pending review"})]}):s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:r.filter(P=>P.documents&&P.documents.length>0&&P.status!=="completed").map(P=>{var $,Q;return s.jsxs("div",{className:"border rounded-lg p-4 hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"font-medium",children:[($=P.customerData)==null?void 0:$.firstName," ",(Q=P.customerData)==null?void 0:Q.lastName]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:[P.documents.length," docs"]}),s.jsx("button",{onClick:()=>{A(P),w(!0)},className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",children:"Review"})]})]}),s.jsx("div",{className:"flex gap-1 mb-2",children:P.documents.map((re,ee)=>s.jsx("span",{className:`text-xs px-2 py-1 rounded ${re.verificationStatus==="verified"?"bg-green-100 text-green-800":re.verificationStatus==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:re.type.replace("_"," ")},ee))}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Submitted: ",new Date(P.submissionDate).toLocaleDateString()]})]},P.id)})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded border",children:[s.jsx("div",{className:"text-lg font-bold text-blue-700",children:r.filter(P=>P.documents&&P.documents.some($=>$.verificationStatus==="pending")).length}),s.jsx("div",{className:"text-sm text-blue-600",children:"Pending Review"})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded border",children:[s.jsx("div",{className:"text-lg font-bold text-green-700",children:r.filter(P=>P.documents&&P.documents.every($=>$.verificationStatus==="verified")).length}),s.jsx("div",{className:"text-sm text-green-600",children:"All Verified"})]}),s.jsxs("div",{className:"bg-red-50 p-4 rounded border",children:[s.jsx("div",{className:"text-lg font-bold text-red-700",children:r.filter(P=>P.documents&&P.documents.some($=>$.verificationStatus==="rejected")).length}),s.jsx("div",{className:"text-sm text-red-600",children:"Has Rejections"})]}),s.jsxs("div",{className:"bg-amber-50 p-4 rounded border",children:[s.jsx("div",{className:"text-lg font-bold text-amber-700",children:r.filter(P=>P.complianceFlags&&P.complianceFlags.length>0).length}),s.jsx("div",{className:"text-sm text-amber-600",children:"Compliance Flags"})]})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Document Processing Workflow"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsx("div",{className:"text-2xl mb-2",children:"📷"}),s.jsx("div",{className:"text-sm font-medium",children:"1. Customer Capture"}),s.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Via mobile form or in-store"})]}),s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsx("div",{className:"text-2xl mb-2",children:"🔍"}),s.jsx("div",{className:"text-sm font-medium",children:"2. AI Analysis"}),s.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"OCR, authenticity check"})]}),s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsx("div",{className:"text-2xl mb-2",children:"👤"}),s.jsx("div",{className:"text-sm font-medium",children:"3. Human Review"}),s.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Store owner validation"})]}),s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsx("div",{className:"text-2xl mb-2",children:"✅"}),s.jsx("div",{className:"text-sm font-medium",children:"4. Client Creation"}),s.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"FINTRAC compliant record"})]})]})]})]});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Forms Management"}),s.jsx("p",{className:"text-gray-600",children:"Manage customer forms, QR codes, and ID verification for FINTRAC compliance"})]}),s.jsx("div",{className:"flex items-center gap-2",children:i.length>0&&s.jsxs("span",{className:"bg-red-100 text-red-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:[i.length," pending"]})})]}),s.jsx("div",{className:"border-b border-gray-200",children:s.jsxs("nav",{className:"-mb-px flex space-x-8",children:[s.jsxs("button",{onClick:()=>e("qr-management"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="qr-management"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(yg,{className:"inline h-4 w-4 mr-2"}),"QR Management"]}),s.jsxs("button",{onClick:()=>e("submissions"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="submissions"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(Ks,{className:"inline h-4 w-4 mr-2"}),"Form Submissions",i.length>0&&s.jsx("span",{className:"ml-2 bg-red-100 text-red-800 text-xs font-medium px-1.5 py-0.5 rounded-full",children:i.length})]}),s.jsxs("button",{onClick:()=>e("id-validation"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="id-validation"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(Kw,{className:"inline h-4 w-4 mr-2"}),"ID Validation"]})]})}),p&&s.jsx("div",{className:"text-center py-4",children:s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"})}),t==="qr-management"&&I(),t==="submissions"&&z(),t==="id-validation"&&V(),x&&N&&s.jsx(bB,{form:N,onApprove:k,onReject:D,onClose:()=>{w(!1),A(null)}}),S&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-40 flex items-center justify-center p-4",children:s.jsx("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-auto",children:s.jsx(wB,{onUploadComplete:P=>{console.log("Files uploaded:",P),j()},onClose:()=>C(!1)})})})]})},NB="/LeaperFX/assets/logo_black.MZOsihZ8.PNG",CB="/LeaperFX/assets/saadat_black.DnABSGob.PNG",Ja=({icon:t,text:e,active:r,onClick:n})=>s.jsxs("button",{onClick:n,className:`flex items-center w-full p-3 rounded-lg transition-all duration-200 ease-in-out ${r?"bg-blue-100 text-blue-700 shadow-md scale-105":"text-gray-600 hover:bg-gray-100 hover:scale-102 hover:shadow-sm"}`,children:[s.jsx("div",{className:`mr-3 transition-transform duration-200 ${r?"scale-110":""}`,children:t}),s.jsx("span",{className:"font-medium",children:e})]}),jB=()=>{const[t,e]=b.useState(new Date);return cs.useEffect(()=>{const r=setInterval(()=>e(new Date),1e3);return()=>clearInterval(r)},[]),s.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[s.jsx(is,{className:"h-4 w-4 mr-2"}),t.toLocaleString("en-US",{dateStyle:"full",timeStyle:"short"})]})};function AB(){const[t,e]=b.useState("inventory"),[r,n]=b.useState(!1),[i,l]=b.useState(!1),[u,d]=b.useState({visible:!1,message:""}),[f,h]=b.useState(!1),[p,g]=b.useState(!1),[x,w]=b.useState(null),[S,C]=b.useState(null),[N,A]=b.useState(!1),{logout:j}=hm(),E=li(),_=P=>{P!==t&&(n(!0),setTimeout(()=>{e(P),setTimeout(()=>{n(!1)},150)},150))};b.useEffect(()=>{const P=Q=>{const{transactionId:re,requiresLCTR:ee}=Q.detail||{transactionId:"",requiresLCTR:!1};e("compliance");const U=ee?`Transaction ${re} requires LCTR reporting. Please collect customer information.`:`Transaction ${re} requires enhanced record keeping. Please collect customer information.`;d({visible:!0,message:U}),setTimeout(()=>{d({visible:!1,message:""})},1e4)};window.addEventListener("fintracComplianceRequired",P);const $=localStorage.getItem("pendingComplianceTransaction");if($)try{const Q=JSON.parse($),re=new Date(Q.timestamp);(new Date().getTime()-re.getTime())/(1e3*60)<5?(e("compliance"),d({visible:!0,message:`Transaction ${Q.id} requires compliance. Please collect customer information.`}),setTimeout(()=>{d({visible:!1,message:""})},1e4)):localStorage.removeItem("pendingComplianceTransaction")}catch(Q){console.error("Error parsing pending transaction:",Q),localStorage.removeItem("pendingComplianceTransaction")}return()=>{window.removeEventListener("fintracComplianceRequired",P)}},[]);const R=async P=>{try{const $=await Sr.getRateLockById(P);$&&(w($),h(!0))}catch($){console.error("Error fetching rate lock:",$)}},k=async P=>{try{const $=await Sr.getRateAlertById(P);$&&(C($),g(!0))}catch($){console.error("Error fetching rate alert:",$)}},D=async()=>{if(x)try{await Sr.completeRateLock(x.id),h(!1)}catch(P){console.error("Error completing rate lock:",P)}},I=async()=>{if(x)try{await Sr.cancelRateLock(x.id),h(!1)}catch(P){console.error("Error cancelling rate lock:",P)}},z=()=>{j(),E("/")},V=()=>{switch(t){case"inventory":return s.jsx(cC,{});case"transactions":return s.jsx(uB,{});case"clients":return s.jsx(mB,{});case"forms":return s.jsx(SB,{});case"analytics":return s.jsx(dB,{});case"compliance":return s.jsx(pB,{});case"website":return s.jsx(yB,{onViewRateLock:R,onViewRateAlert:k});case"payments":return s.jsx(q9,{});default:return s.jsx(cC,{})}};return s.jsxs("div",{className:"min-h-screen bg-gray-100 text-gray-800 font-sans flex",children:[i&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 z-40 lg:hidden",onClick:()=>l(!1),"aria-hidden":"true"}),s.jsx("div",{className:"lg:hidden fixed top-4 left-4 z-50",children:s.jsx("button",{onClick:()=>l(!i),className:"p-2 rounded-md bg-white shadow-md text-gray-600 hover:text-gray-900 focus:outline-none","aria-label":i?"Close menu":"Open menu",children:i?s.jsx(Ir,{className:"h-6 w-6"}):s.jsx(Q5,{className:"h-6 w-6"})})}),s.jsx(X9,{}),s.jsx("div",{className:`fixed inset-y-0 left-0 z-40 w-64 bg-white shadow-lg transform ${i?"translate-x-0":"-translate-x-full lg:translate-x-0"} transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0 flex-shrink-0`,children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"p-4 border-b",children:[s.jsx("div",{className:"flex justify-center mb-2",children:s.jsx("img",{src:NB,alt:"Company Logo",className:"h-16 w-auto rounded-xl"})}),s.jsx("div",{className:"flex justify-center",children:s.jsx("img",{src:CB,alt:"Saadat Name",className:"h-10 w-auto"})}),s.jsxs("div",{className:"mt-4 text-center",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Owner Dashboard"}),s.jsx(jB,{})]})]}),s.jsxs("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:[s.jsx(Ja,{icon:s.jsx(LC,{className:"h-5 w-5"}),text:"Inventory Management",active:t==="inventory",onClick:()=>_("inventory")}),s.jsx(Ja,{icon:s.jsx(ia,{className:"h-5 w-5"}),text:"Transaction History",active:t==="transactions",onClick:()=>_("transactions")}),s.jsx(Ja,{icon:s.jsx(BC,{className:"h-5 w-5"}),text:"Client Registry",active:t==="clients",onClick:()=>_("clients")}),s.jsx(Ja,{icon:s.jsx(Ks,{className:"h-5 w-5"}),text:"Forms Management",active:t==="forms",onClick:()=>_("forms")}),s.jsx(Ja,{icon:s.jsx(hg,{className:"h-5 w-5"}),text:"Analytics",active:t==="analytics",onClick:()=>_("analytics")}),s.jsx(Ja,{icon:s.jsx(rn,{className:"h-5 w-5"}),text:"FINTRAC Compliance",active:t==="compliance",onClick:()=>_("compliance")}),s.jsx(Ja,{icon:s.jsx(gg,{className:"h-5 w-5"}),text:"Website Activities",active:t==="website",onClick:()=>_("website")}),s.jsx(Ja,{icon:s.jsx(pn,{className:"h-5 w-5"}),text:"Payment Settings",active:t==="payments",onClick:()=>_("payments")})]}),s.jsx("div",{className:"p-4 border-t",children:s.jsxs("button",{onClick:z,className:"flex items-center w-full p-3 rounded-lg text-red-600 hover:bg-red-50 transition-colors",children:[s.jsx(IC,{className:"h-5 w-5 mr-3"}),s.jsx("span",{className:"font-medium",children:"Logout"})]})})]})}),s.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:s.jsx("div",{className:"flex-1 p-4 lg:p-6 overflow-y-auto",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("header",{className:"mb-4 lg:mb-6",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-start gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl lg:text-2xl font-bold text-gray-900",children:t==="inventory"?"Inventory Management":t==="transactions"?"Transaction History":t==="clients"?"Client Registry":t==="forms"?"Forms Management":t==="compliance"?"FINTRAC Compliance":t==="website"?"Website Activities":t==="payments"?"Payment Settings":"Business Analytics"}),s.jsx("p",{className:"text-sm lg:text-base text-gray-600 mt-1",children:t==="inventory"?"Manage your currency inventory and exchange rates":t==="transactions"?"View and manage transaction history":t==="forms"?"Manage customer forms, QR codes, and ID verification for FINTRAC compliance":t==="compliance"?"Manage FINTRAC compliance requirements":t==="website"?"Monitor website orders and activities":t==="payments"?"Configure payment methods and terminal settings":"View business performance metrics and analytics"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>A(!0),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors rounded-lg hover:bg-gray-100",title:"Owner Settings",children:s.jsx(UC,{className:"h-5 w-5"})}),s.jsx(nB,{onViewRateLock:R,onViewRateAlert:k})]})]})}),u.visible&&s.jsx("div",{className:"mb-6 p-4 border-l-4 border-yellow-500 bg-yellow-50 rounded-md shadow-sm",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(rn,{className:"h-5 w-5 text-yellow-600"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"FINTRAC Compliance Required"}),s.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:s.jsx("p",{children:u.message})}),s.jsx("div",{className:"mt-4",children:s.jsx("div",{className:"-mx-2 -my-1.5 flex",children:s.jsx("button",{type:"button",onClick:()=>d({visible:!1,message:""}),className:"bg-yellow-50 px-2 py-1.5 rounded-md text-sm font-medium text-yellow-800 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-yellow-50 focus:ring-yellow-600",children:"Dismiss"})})})]})]})}),s.jsx("main",{className:`transition-all duration-300 ease-in-out ${r?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:V()})]})})}),s.jsx(aB,{isOpen:f,onClose:()=>h(!1),rateLock:x,onComplete:D,onCancel:I}),s.jsx(sB,{isOpen:p,onClose:()=>g(!1),rateAlert:S,onTrigger:P=>Sr.triggerRateAlert(P)}),s.jsx(iB,{isOpen:N,onClose:()=>A(!1)})]})}function DB(){const[t,e]=b.useState("inventory"),{logout:r}=hm(),n=li(),i=()=>{r(),n("/")};return s.jsx("div",{className:"min-h-screen bg-gray-100 text-gray-800 font-sans",children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsx("header",{className:"mb-6",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Store Owner Dashboard"}),s.jsx("p",{className:"text-gray-600",children:"Simplified version for testing"})]}),s.jsxs("button",{onClick:i,className:"flex items-center p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[s.jsx(IC,{className:"h-5 w-5 mr-2"}),"Logout"]})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[s.jsxs("div",{className:"flex space-x-4 mb-6",children:[s.jsxs("button",{onClick:()=>e("inventory"),className:`flex items-center px-4 py-2 rounded-lg transition-colors ${t==="inventory"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[s.jsx(LC,{className:"h-5 w-5 mr-2"}),"Inventory"]}),s.jsxs("button",{onClick:()=>e("analytics"),className:`flex items-center px-4 py-2 rounded-lg transition-colors ${t==="analytics"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[s.jsx(EC,{className:"h-5 w-5 mr-2"}),"Analytics"]})]}),s.jsxs("div",{className:"space-y-4",children:[t==="inventory"&&s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("h2",{className:"text-lg font-semibold text-blue-900",children:"✓ Inventory Tab Active"}),s.jsx("p",{className:"text-blue-700",children:"Basic inventory management would be here."})]}),t==="analytics"&&s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsx("h2",{className:"text-lg font-semibold text-green-900",children:"✓ Analytics Tab Active"}),s.jsx("p",{className:"text-green-700",children:"Analytics and reporting would be here."})]}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:()=>window.location.href="/owner-full",className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Try Full Dashboard (May Show Error)"})})]})]})]})})})}const uC=()=>{const{transactionId:t}=vC(),[e,r]=b.useState(0),[n,i]=b.useState({}),[l,u]=b.useState(!1),[d,f]=b.useState({}),[h,p]=b.useState(null),[g,x]=b.useState(!0);b.useEffect(()=>{(async()=>{x(!0);try{const{default:D}=await He(async()=>{const{default:V}=await Promise.resolve().then(()=>da);return{default:V}},void 0);if(!t)throw new Error("Transaction ID is required");const I=await D.getTransactionById(t);if(!I)throw new Error("Transaction not found");const z={...I,storeName:"Saadat Currency Exchange"};p(z)}catch(D){console.error("Error fetching transaction:",D),p(null)}finally{x(!1)}})()},[t]);const S=[{title:"Personal Information",subtitle:"Basic details required by law",icon:s.jsx(Ku,{className:"h-6 w-6"}),fields:[{key:"firstName",label:"First Name",type:"text",required:!0,placeholder:"Enter your first name"},{key:"lastName",label:"Last Name",type:"text",required:!0,placeholder:"Enter your last name"},{key:"dateOfBirth",label:"Date of Birth",type:"date",required:!0},{key:"occupation",label:"Occupation",type:"text",required:!0,placeholder:"e.g., Teacher, Engineer, Student"}]},{title:"Address Information",subtitle:"Your current residential address",icon:s.jsx(PC,{className:"h-6 w-6"}),fields:[{key:"streetAddress",label:"Street Address",type:"text",required:!0,placeholder:"123 Main Street"},{key:"city",label:"City",type:"text",required:!0,placeholder:"Montreal"},{key:"province",label:"Province",type:"select",required:!0,options:[{value:"",label:"Select Province"},{value:"AB",label:"Alberta"},{value:"BC",label:"British Columbia"},{value:"MB",label:"Manitoba"},{value:"NB",label:"New Brunswick"},{value:"NL",label:"Newfoundland and Labrador"},{value:"NS",label:"Nova Scotia"},{value:"NT",label:"Northwest Territories"},{value:"NU",label:"Nunavut"},{value:"ON",label:"Ontario"},{value:"PE",label:"Prince Edward Island"},{value:"QC",label:"Quebec"},{value:"SK",label:"Saskatchewan"},{value:"YT",label:"Yukon"}]},{key:"postalCode",label:"Postal Code",type:"text",required:!0,placeholder:"H1A 0A1",pattern:"[A-Za-z]\\d[A-Za-z] \\d[A-Za-z]\\d"}]},{title:"Identification",subtitle:"Valid government-issued ID",icon:s.jsx(pn,{className:"h-6 w-6"}),fields:[{key:"idType",label:"ID Type",type:"select",required:!0,options:[{value:"",label:"Select ID Type"},{value:"drivers_license",label:"Driver's License"},{value:"passport",label:"Passport"},{value:"provincial_id",label:"Provincial ID Card"},{value:"other_government",label:"Other Government ID"}]},{key:"idNumber",label:"ID Number",type:"text",required:!0,placeholder:"Enter your ID number"},{key:"photoId",label:"Photo ID",type:"text",required:!!(h&&(h.requiresLCTR||h.requiresEnhancedRecords)),placeholder:"Photo ID reference or number"},{key:"idExpiry",label:"ID Expiry Date",type:"date",required:!0}]},{title:"Transaction Details",subtitle:"Additional information for large transactions",icon:s.jsx(rn,{className:"h-6 w-6"}),condition:()=>h&&h.toAmount>=1e4,fields:[{key:"actingForThirdParty",label:"Are you conducting this transaction on behalf of someone else?",type:"radio",required:!0,options:[{value:"no",label:"No, this is for myself"},{value:"yes",label:"Yes, for someone else"}]},{key:"thirdPartyName",label:"Name of person/organization",type:"text",required:!1,dependsOn:"actingForThirdParty",dependsValue:"yes",placeholder:"Full name or company name"},{key:"relationshipToThirdParty",label:"Your relationship to them",type:"text",required:!1,dependsOn:"actingForThirdParty",dependsValue:"yes",placeholder:"e.g., Employee, Family member, Agent"},{key:"sourceOfFunds",label:"Source of these funds",type:"select",required:!0,options:[{value:"",label:"Select source"},{value:"employment",label:"Employment Income"},{value:"business",label:"Business Income"},{value:"investment",label:"Investment Income"},{value:"sale_of_asset",label:"Sale of Asset"},{value:"gift",label:"Gift"},{value:"other",label:"Other"}]},{key:"sourceDescription",label:"Please describe (if Other selected)",type:"textarea",required:!1,dependsOn:"sourceOfFunds",dependsValue:"other",placeholder:"Briefly describe the source of funds"}]}].filter(k=>!k.condition||k.condition()),C=S.length,N=k=>{const D=S[k],I={};return D.fields.forEach(z=>{if(z.required){if(z.dependsOn&&n[z.dependsOn]!==z.dependsValue)return;(!n[z.key]||n[z.key]==="")&&(I[z.key]=`${z.label} is required`)}z.key==="postalCode"&&n[z.key]&&z.pattern&&(new RegExp(z.pattern).test(n[z.key])||(I[z.key]="Please enter a valid Canadian postal code (A1A 1A1)"))}),f(I),Object.keys(I).length===0},A=()=>{typeof e=="number"&&N(e)&&(e<C-1?r(e+1):E())},j=()=>{typeof e=="number"&&e>0&&(r(e-1),f({}))},E=async()=>{u(!0);try{const{default:k}=await He(async()=>{const{default:z}=await Promise.resolve().then(()=>ii);return{default:z}},void 0);if(!(h!=null&&h.id))throw new Error("Transaction ID is required");const D=await k.createCustomer({...n,transactions:[h.id]}),{default:I}=await He(async()=>{const{default:z}=await Promise.resolve().then(()=>da);return{default:z}},void 0);await I.linkCustomerToTransaction(h.id,D.id),r("success")}catch(k){console.error("Submission error:",k),alert("There was an error submitting your information. Please try again.")}finally{u(!1)}},_=(k,D)=>{i(I=>({...I,[k]:D})),d[k]&&f(I=>({...I,[k]:""}))};if(g)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading transaction information..."})]})});if(!h)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-100 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(rr,{className:"h-8 w-8 text-red-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Transaction Not Found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"We couldn't find the transaction you're looking for. Please check the QR code and try again."}),s.jsx("button",{onClick:()=>{window.location.hash="#/"},className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Return to Home"})]})});if(e==="success")return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md text-center",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(ft,{className:"h-8 w-8 text-green-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Information Submitted!"}),s.jsx("p",{className:"text-gray-600",children:"Thank you for providing your information."})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Your Transaction"}),s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[s.jsxs("div",{children:["ID: ",h.id]}),s.jsxs("div",{children:[h.fromAmount," ",h.fromCurrency," → ",h.toAmount," ",h.toCurrency]}),s.jsxs("div",{children:["Commission: $",h.commission]})]})]}),s.jsxs("div",{className:"text-sm text-gray-500 mb-6",children:[s.jsx("p",{children:"Your transaction is now ready to be completed by the store staff."}),s.jsx("p",{className:"mt-2",children:"Please return to the counter."})]}),s.jsx("button",{onClick:()=>window.close(),className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Close"})]})});if(typeof e!="number")return null;const R=S[e];return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[s.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:s.jsx("div",{className:"max-w-md mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[e>0&&s.jsx("button",{onClick:j,className:"mr-3 p-1 text-gray-600 hover:text-gray-900",children:s.jsx(_C,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:h.storeName}),s.jsx("p",{className:"text-sm text-gray-600",children:"Customer Information Form"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-xs text-gray-500",children:["Step ",e+1," of ",C]}),s.jsx("div",{className:"flex mt-1",children:S.map((k,D)=>s.jsx("div",{className:`w-2 h-2 rounded-full mr-1 ${D<=e?"bg-blue-600":"bg-gray-300"}`},D))})]})]})})}),s.jsxs("div",{className:"max-w-md mx-auto p-4",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:[s.jsxs("h2",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[s.jsx(rn,{className:"h-4 w-4 mr-2"}),"Your Transaction"]}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Exchange:"}),s.jsxs("span",{className:"font-medium",children:[h.fromAmount," ",h.fromCurrency," → ",h.toAmount," ",h.toCurrency]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Commission:"}),s.jsxs("span",{className:"font-medium",children:["$",h.commission]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Transaction ID:"}),s.jsx("span",{className:"font-medium",children:h.id})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center",children:[s.jsx(rr,{className:"h-4 w-4 mr-2"}),"Why do we need this information?"]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Canadian law requires us to collect customer information for currency exchanges. This helps prevent money laundering and keeps our financial system safe."}),s.jsxs("div",{className:"mt-3 text-xs text-gray-500 flex items-center",children:[s.jsx(rn,{className:"h-3 w-3 mr-1"}),"Your information is protected and only shared as required by law"]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg mr-3",children:R.icon}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:R.title}),s.jsx("p",{className:"text-sm text-gray-600",children:R.subtitle})]})]})}),s.jsx("div",{className:"space-y-4",children:R.fields.map(k=>{var D,I;return k.dependsOn&&n[k.dependsOn]!==k.dependsValue?null:s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[k.label,k.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),k.type==="select"?s.jsx("select",{value:n[k.key]||"",onChange:z=>_(k.key,z.target.value),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${d[k.key]?"border-red-500":"border-gray-300"}`,children:(D=k.options)==null?void 0:D.map(z=>s.jsx("option",{value:z.value,children:z.label},z.value))}):k.type==="radio"?s.jsx("div",{className:"space-y-2",children:(I=k.options)==null?void 0:I.map(z=>s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:k.key,value:z.value,checked:n[k.key]===z.value,onChange:V=>_(k.key,V.target.value),className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:z.label})]},z.value))}):k.type==="textarea"?s.jsx("textarea",{value:n[k.key]||"",onChange:z=>_(k.key,z.target.value),placeholder:k.placeholder,rows:3,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none ${d[k.key]?"border-red-500":"border-gray-300"}`}):s.jsx("input",{type:k.type,value:n[k.key]||"",onChange:z=>_(k.key,z.target.value),placeholder:k.placeholder,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${d[k.key]?"border-red-500":"border-gray-300"}`}),d[k.key]&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:d[k.key]})]},k.key)})})]}),s.jsxs("div",{className:"mt-6 flex justify-between",children:[s.jsx("button",{onClick:j,disabled:e===0,className:`px-6 py-3 rounded-lg font-medium ${e===0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Back"}),s.jsx("button",{onClick:A,disabled:l,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:bg-blue-400 flex items-center",children:l?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):e===C-1?"Submit Information":"Next Step"})]}),s.jsxs("div",{className:"mt-8 text-center text-xs text-gray-500",children:[s.jsx("p",{children:"This information is collected in compliance with Canadian anti-money laundering laws."}),s.jsx("p",{className:"mt-1",children:"All data is encrypted and securely stored."})]})]})]})},TB=()=>{const{sessionId:t}=vC(),[e]=XR(),r=li(),n=e.get("token"),[i,l]=b.useState(1),[u,d]=b.useState({firstName:"",lastName:"",dateOfBirth:"",occupation:"",email:"",phone:"",address:"",city:"",province:"ON",postalCode:"",country:"Canada",idType:"drivers_license",idNumber:"",idExpiryDate:"",idIssuingCountry:"Canada",purposeOfTransaction:"",sourceOfFunds:"",thirdPartyInfo:{isThirdParty:!1}}),[f,h]=b.useState([]),[p,g]=b.useState(null),[x,w]=b.useState(!1),[S,C]=b.useState({}),[N,A]=b.useState(null),[j,E]=b.useState([]),_=b.useRef(null),R=b.useRef(null),[k,D]=b.useState(!1),[I,z]=b.useState(!0),V=[{number:1,title:"Personal Information",icon:"👤"},{number:2,title:"Contact Details",icon:"📍"},{number:3,title:"ID Documents",icon:"📄"},{number:4,title:"Transaction Info",icon:"💰"},{number:5,title:"Review & Submit",icon:"✓"}];b.useEffect(()=>{(async()=>{if(!t||!n){A(!1);return}try{const Y=await dn.validateQRSession(t,n);A(Y)}catch(Y){console.error("Session validation error:",Y),A(!1)}})()},[t,n]);const P=async()=>{try{if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const q=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}}});_.current&&(_.current.srcObject=q),D(!0)}else z(!1)}catch(q){console.error("Camera access error:",q),z(!1)}},$=()=>{_.current&&_.current.srcObject&&(_.current.srcObject.getTracks().forEach(Y=>Y.stop()),_.current.srcObject=null),D(!1)},Q=()=>{if(!_.current||!R.current||!p)return;const q=R.current,Y=_.current;q.width=Y.videoWidth,q.height=Y.videoHeight;const le=q.getContext("2d");le&&(le.drawImage(Y,0,0),q.toBlob(ye=>{if(ye){const B=new File([ye],`${p}-${Date.now()}.jpg`,{type:"image/jpeg"}),ae=URL.createObjectURL(ye),de={id:`${p}-${Date.now()}`,type:p,file:B,preview:ae};h(Z=>[...Z.filter(ve=>ve.type!==p),de]),$(),g(null)}},"image/jpeg",.8))},re=q=>{var ae;const Y=(ae=q.target.files)==null?void 0:ae[0];if(!Y||!p)return;if(!["image/jpeg","image/png","image/jpg"].includes(Y.type)){C(de=>({...de,file:"Please upload a JPEG or PNG image"}));return}if(Y.size>5*1024*1024){C(de=>({...de,file:"File size must be less than 5MB"}));return}const ye=URL.createObjectURL(Y),B={id:`${p}-${Date.now()}`,type:p,file:Y,preview:ye};h(de=>[...de.filter(Z=>Z.type!==p),B]),g(null)},ee=q=>{var le,ye,B;const Y={};switch(q){case 1:u.firstName.trim()||(Y.firstName="First name is required"),u.lastName.trim()||(Y.lastName="Last name is required"),u.dateOfBirth||(Y.dateOfBirth="Date of birth is required"),u.occupation.trim()||(Y.occupation="Occupation is required");break;case 2:I9(u.email)||(Y.email="Valid email is required"),M9(u.phone)||(Y.phone="Valid Canadian phone number is required"),u.address.trim()||(Y.address="Address is required"),u.city.trim()||(Y.city="City is required"),O9(u.postalCode)||(Y.postalCode="Valid Canadian postal code is required (A1A 1A1)");break;case 3:u.idNumber.trim()||(Y.idNumber="ID number is required"),u.idExpiryDate||(Y.idExpiryDate="ID expiry date is required");const ae=f.some(Z=>Z.type==="photo_id"),de=f.some(Z=>Z.type==="selfie");ae||(Y.photoId="Photo ID is required"),de||(Y.selfie="Selfie is required for verification");break;case 4:u.purposeOfTransaction.trim()||(Y.purposeOfTransaction="Purpose of transaction is required"),u.sourceOfFunds.trim()||(Y.sourceOfFunds="Source of funds is required"),(le=u.thirdPartyInfo)!=null&&le.isThirdParty&&((ye=u.thirdPartyInfo.name)!=null&&ye.trim()||(Y.thirdPartyName="Third party name is required"),(B=u.thirdPartyInfo.relationship)!=null&&B.trim()||(Y.thirdPartyRelationship="Relationship is required"));break}return C(Y),Object.keys(Y).length===0},U=()=>{if(ee(i)){const q=[];ug.isHighRiskOccupation(u.occupation)&&q.push("HIGH_RISK_OCCUPATION"),u.country!=="Canada"&&ug.isHighRiskCountry(u.country)&&q.push("HIGH_RISK_COUNTRY"),E(q),l(Y=>Math.min(Y+1,5))}},J=()=>{l(q=>Math.max(q-1,1))},pe=async()=>{if(!(!ee(i)||!t)){w(!0);try{const q={...u,firstName:Fs(u.firstName),lastName:Fs(u.lastName),email:Fs(u.email),phone:Fs(u.phone),address:Fs(u.address),city:Fs(u.city),occupation:Fs(u.occupation)};await dn.submitCustomerForm({sessionId:t,customerData:q,documents:f.map(Y=>Y.file),submissionSource:"mobile_self_service"}),alert("Form submitted successfully! Please wait for the store owner to process your information."),r("/form-submitted")}catch(q){console.error("Form submission error:",q),alert("Error submitting form. Please try again.")}finally{w(!1)}}},ce=()=>s.jsx("div",{className:"flex items-center justify-center mb-8 px-4",children:V.map((q,Y)=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full text-sm font-medium ${i>=q.number?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:i>q.number?"✓":q.number}),Y<V.length-1&&s.jsx("div",{className:`hidden sm:block w-12 h-0.5 mx-2 ${i>q.number?"bg-blue-600":"bg-gray-200"}`})]},q.number))}),oe=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Personal Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),s.jsx("input",{type:"text",value:u.firstName,onChange:q=>d(Y=>({...Y,firstName:q.target.value})),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.firstName?"border-red-500":"border-gray-300"}`,placeholder:"Enter your first name"}),S.firstName&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.firstName})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),s.jsx("input",{type:"text",value:u.lastName,onChange:q=>d(Y=>({...Y,lastName:q.target.value})),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.lastName?"border-red-500":"border-gray-300"}`,placeholder:"Enter your last name"}),S.lastName&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.lastName})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth *"}),s.jsx("input",{type:"date",value:u.dateOfBirth,onChange:q=>d(Y=>({...Y,dateOfBirth:q.target.value})),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.dateOfBirth?"border-red-500":"border-gray-300"}`}),S.dateOfBirth&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.dateOfBirth})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Occupation *"}),s.jsx("input",{type:"text",value:u.occupation,onChange:q=>d(Y=>({...Y,occupation:q.target.value})),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.occupation?"border-red-500":"border-gray-300"}`,placeholder:"Enter your occupation"}),S.occupation&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.occupation}),ug.isHighRiskOccupation(u.occupation)&&s.jsxs("div",{className:"flex items-center mt-1 text-amber-600 text-xs",children:[s.jsx(rr,{className:"h-3 w-3 mr-1"}),"This occupation may require additional verification"]})]})]}),F=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Contact Information"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),s.jsx("input",{type:"email",value:u.email,onChange:q=>d(Y=>({...Y,email:q.target.value})),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.email?"border-red-500":"border-gray-300"}`,placeholder:"Enter your email address"}),S.email&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),s.jsx("input",{type:"tel",value:u.phone,onChange:q=>d(Y=>({...Y,phone:q.target.value})),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.phone?"border-red-500":"border-gray-300"}`,placeholder:"(123) 456-7890"}),S.phone&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.phone})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address *"}),s.jsx("input",{type:"text",value:u.address,onChange:q=>d(Y=>({...Y,address:q.target.value})),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.address?"border-red-500":"border-gray-300"}`,placeholder:"Enter your street address"}),S.address&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.address})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),s.jsx("input",{type:"text",value:u.city,onChange:q=>d(Y=>({...Y,city:q.target.value})),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.city?"border-red-500":"border-gray-300"}`,placeholder:"City"}),S.city&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.city})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Province *"}),s.jsxs("select",{value:u.province,onChange:q=>d(Y=>({...Y,province:q.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"AB",children:"Alberta"}),s.jsx("option",{value:"BC",children:"British Columbia"}),s.jsx("option",{value:"MB",children:"Manitoba"}),s.jsx("option",{value:"NB",children:"New Brunswick"}),s.jsx("option",{value:"NL",children:"Newfoundland and Labrador"}),s.jsx("option",{value:"NS",children:"Nova Scotia"}),s.jsx("option",{value:"ON",children:"Ontario"}),s.jsx("option",{value:"PE",children:"Prince Edward Island"}),s.jsx("option",{value:"QC",children:"Quebec"}),s.jsx("option",{value:"SK",children:"Saskatchewan"}),s.jsx("option",{value:"NT",children:"Northwest Territories"}),s.jsx("option",{value:"NU",children:"Nunavut"}),s.jsx("option",{value:"YT",children:"Yukon"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code *"}),s.jsx("input",{type:"text",value:u.postalCode,onChange:q=>d(Y=>({...Y,postalCode:q.target.value.toUpperCase()})),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.postalCode?"border-red-500":"border-gray-300"}`,placeholder:"A1A 1A1",maxLength:7}),S.postalCode&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.postalCode})]})]})]}),L=()=>{var q,Y;return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"ID Documents"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID Type *"}),s.jsxs("select",{value:u.idType,onChange:le=>d(ye=>({...ye,idType:le.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"drivers_license",children:"Driver's License"}),s.jsx("option",{value:"passport",children:"Passport"}),s.jsx("option",{value:"provincial_id",children:"Provincial ID"}),s.jsx("option",{value:"health_card",children:"Health Card"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID Number *"}),s.jsx("input",{type:"text",value:u.idNumber,onChange:le=>d(ye=>({...ye,idNumber:le.target.value})),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.idNumber?"border-red-500":"border-gray-300"}`,placeholder:"Enter ID number"}),S.idNumber&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.idNumber})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID Expiry Date *"}),s.jsx("input",{type:"date",value:u.idExpiryDate,onChange:le=>d(ye=>({...ye,idExpiryDate:le.target.value})),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.idExpiryDate?"border-red-500":"border-gray-300"}`}),S.idExpiryDate&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.idExpiryDate})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl mb-2",children:"📄"}),s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Photo ID *"}),f.find(le=>le.type==="photo_id")?s.jsxs("div",{className:"space-y-2",children:[s.jsx("img",{src:(q=f.find(le=>le.type==="photo_id"))==null?void 0:q.preview,alt:"Photo ID",className:"w-full h-32 object-cover rounded"}),s.jsx("button",{onClick:()=>g("photo_id"),className:"text-sm text-blue-600 hover:text-blue-700",children:"Retake Photo"})]}):s.jsxs("div",{className:"space-y-2",children:[I?s.jsxs("button",{onClick:()=>{g("photo_id"),P()},className:"flex items-center justify-center w-full px-3 py-2 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:[s.jsx(Gw,{className:"h-4 w-4 mr-2"}),"Take Photo"]}):null,s.jsxs("label",{className:"flex items-center justify-center w-full px-3 py-2 text-sm bg-gray-600 text-white rounded hover:bg-gray-700 cursor-pointer",children:[s.jsx(Il,{className:"h-4 w-4 mr-2"}),"Upload Image",s.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:le=>{g("photo_id"),re(le)}})]}),S.photoId&&s.jsx("p",{className:"text-red-500 text-xs",children:S.photoId})]})]})}),s.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl mb-2",children:"🤳"}),s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Selfie *"}),f.find(le=>le.type==="selfie")?s.jsxs("div",{className:"space-y-2",children:[s.jsx("img",{src:(Y=f.find(le=>le.type==="selfie"))==null?void 0:Y.preview,alt:"Selfie",className:"w-full h-32 object-cover rounded"}),s.jsx("button",{onClick:()=>g("selfie"),className:"text-sm text-blue-600 hover:text-blue-700",children:"Retake Selfie"})]}):s.jsxs("div",{className:"space-y-2",children:[I?s.jsxs("button",{onClick:()=>{g("selfie"),P()},className:"flex items-center justify-center w-full px-3 py-2 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:[s.jsx(Gw,{className:"h-4 w-4 mr-2"}),"Take Selfie"]}):null,s.jsxs("label",{className:"flex items-center justify-center w-full px-3 py-2 text-sm bg-gray-600 text-white rounded hover:bg-gray-700 cursor-pointer",children:[s.jsx(Il,{className:"h-4 w-4 mr-2"}),"Upload Image",s.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:le=>{g("selfie"),re(le)}})]}),S.selfie&&s.jsx("p",{className:"text-red-500 text-xs",children:S.selfie})]})]})})]})})]})},X=()=>{var q,Y,le,ye;return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Transaction Information"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purpose of Transaction *"}),s.jsxs("select",{value:u.purposeOfTransaction,onChange:B=>d(ae=>({...ae,purposeOfTransaction:B.target.value})),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.purposeOfTransaction?"border-red-500":"border-gray-300"}`,children:[s.jsx("option",{value:"",children:"Select purpose"}),s.jsx("option",{value:"personal",children:"Personal Use"}),s.jsx("option",{value:"business",children:"Business"}),s.jsx("option",{value:"investment",children:"Investment"}),s.jsx("option",{value:"family_support",children:"Family Support"}),s.jsx("option",{value:"travel",children:"Travel"}),s.jsx("option",{value:"other",children:"Other"})]}),S.purposeOfTransaction&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.purposeOfTransaction})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Source of Funds *"}),s.jsxs("select",{value:u.sourceOfFunds,onChange:B=>d(ae=>({...ae,sourceOfFunds:B.target.value})),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.sourceOfFunds?"border-red-500":"border-gray-300"}`,children:[s.jsx("option",{value:"",children:"Select source"}),s.jsx("option",{value:"employment",children:"Employment Income"}),s.jsx("option",{value:"business",children:"Business Income"}),s.jsx("option",{value:"investment",children:"Investment"}),s.jsx("option",{value:"savings",children:"Savings"}),s.jsx("option",{value:"sale_of_assets",children:"Sale of Assets"}),s.jsx("option",{value:"loan",children:"Loan"}),s.jsx("option",{value:"gift",children:"Gift"}),s.jsx("option",{value:"other",children:"Other"})]}),S.sourceOfFunds&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.sourceOfFunds})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:((q=u.thirdPartyInfo)==null?void 0:q.isThirdParty)||!1,onChange:B=>d(ae=>({...ae,thirdPartyInfo:{...ae.thirdPartyInfo,isThirdParty:B.target.checked}})),className:"mr-2"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"This transaction is on behalf of a third party"})]}),((Y=u.thirdPartyInfo)==null?void 0:Y.isThirdParty)&&s.jsxs("div",{className:"pl-6 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Third Party Name *"}),s.jsx("input",{type:"text",value:((le=u.thirdPartyInfo)==null?void 0:le.name)||"",onChange:B=>d(ae=>({...ae,thirdPartyInfo:{...ae.thirdPartyInfo??{isThirdParty:!1},name:B.target.value}})),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.thirdPartyName?"border-red-500":"border-gray-300"}`,placeholder:"Enter third party name"}),S.thirdPartyName&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.thirdPartyName})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Relationship *"}),s.jsx("input",{type:"text",value:((ye=u.thirdPartyInfo)==null?void 0:ye.relationship)||"",onChange:B=>d(ae=>({...ae,thirdPartyInfo:{...ae.thirdPartyInfo??{isThirdParty:!1},relationship:B.target.value}})),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${S.thirdPartyRelationship?"border-red-500":"border-gray-300"}`,placeholder:"e.g., Family member, Business partner"}),S.thirdPartyRelationship&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.thirdPartyRelationship})]})]})]}),j.length>0&&s.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx(rr,{className:"h-5 w-5 text-amber-600 mr-2"}),s.jsx("span",{className:"text-sm font-medium text-amber-800",children:"Compliance Notice"})]}),s.jsx("p",{className:"text-sm text-amber-700",children:"Your transaction may require additional verification due to regulatory requirements."})]})]})},O=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Review Your Information"}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Personal Information"}),s.jsxs("p",{className:"text-sm text-gray-600",children:[u.firstName," ",u.lastName,s.jsx("br",{}),"Born: ",u.dateOfBirth,s.jsx("br",{}),"Occupation: ",u.occupation]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Contact Information"}),s.jsxs("p",{className:"text-sm text-gray-600",children:[u.email,s.jsx("br",{}),u.phone,s.jsx("br",{}),u.address,", ",u.city,", ",u.province," ",u.postalCode]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Documents"}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:f.map(q=>s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:q.preview,alt:q.type,className:"w-full h-24 object-cover rounded mb-1"}),s.jsx("p",{className:"text-xs text-gray-600 capitalize",children:q.type.replace("_"," ")})]},q.id))})]}),j.length>0&&s.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded p-3",children:s.jsx("p",{className:"text-sm text-amber-800",children:"⚠️ This form has been flagged for additional compliance review"})})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsx("p",{className:"text-sm text-blue-800",children:"By submitting this form, you confirm that all information provided is accurate and complete. This information will be used for FINTRAC compliance purposes."})})]});return p&&k?s.jsx("div",{className:"fixed inset-0 bg-black z-50 flex flex-col",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("video",{ref:_,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),s.jsx("canvas",{ref:R,className:"hidden"}),s.jsxs("div",{className:"absolute bottom-6 left-0 right-0 flex justify-center space-x-4",children:[s.jsx("button",{onClick:$,className:"px-6 py-3 bg-gray-600 text-white rounded-full hover:bg-gray-700",children:"Cancel"}),s.jsx("button",{onClick:Q,className:"px-8 py-3 bg-blue-600 text-white rounded-full hover:bg-blue-700 text-lg",children:"📸 Capture"})]})]})}):N===!1?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center max-w-md w-full",children:[s.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),s.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Invalid Session"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"This form link has expired or is invalid. Please scan the QR code again or contact the store."})]})}):N===null?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-4 px-4",children:s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Customer Information Form"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Please provide your information for FINTRAC compliance verification"})]}),ce(),s.jsxs("div",{className:"mb-8",children:[i===1&&oe(),i===2&&F(),i===3&&L(),i===4&&X(),i===5&&O()]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("button",{onClick:J,disabled:i===1,className:"flex items-center px-4 py-2 text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(_C,{className:"h-4 w-4 mr-2"}),"Previous"]}),i<5?s.jsxs("button",{onClick:U,className:"flex items-center px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:["Next",s.jsx(u5,{className:"h-4 w-4 ml-2"})]}):s.jsx("button",{onClick:pe,disabled:x,className:"flex items-center px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:x?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ft,{className:"h-4 w-4 mr-2"}),"Submit Form"]})})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[s.jsxs("div",{className:"flex items-center justify-center mb-2",children:[s.jsx(Id,{className:"h-5 w-5 text-blue-600 mr-2"}),s.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Secure & Private"})]}),s.jsx("p",{className:"text-xs text-blue-700",children:"Your information is encrypted and handled in accordance with FINTRAC regulations and privacy laws."})]})]})})};class EB extends cs.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("ErrorBoundary caught an error:",e,r),this.setState({error:e,errorInfo:r})}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen bg-red-50 flex items-center justify-center p-6",children:s.jsx("div",{className:"max-w-2xl w-full",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"bg-red-100 rounded-full p-2 mr-3",children:s.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Dashboard Error"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-gray-700 mb-2",children:"The store owner dashboard encountered an error and cannot display properly."}),this.state.error&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-4",children:s.jsx("div",{className:"flex",children:s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error Details:"}),s.jsx("div",{className:"mt-2 text-sm text-red-700",children:s.jsx("p",{className:"font-mono text-xs break-all",children:this.state.error.message})})]})})}),this.state.errorInfo&&s.jsxs("details",{className:"bg-gray-50 p-4 rounded",children:[s.jsx("summary",{className:"cursor-pointer text-sm font-medium text-gray-600 mb-2",children:"Component Stack Trace"}),s.jsx("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap font-mono",children:this.state.errorInfo.componentStack})]})]}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors",children:"Reload Page"}),s.jsx("button",{onClick:()=>{window.location.hash="#/"},className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition-colors",children:"Return to Public Dashboard"})]})]})})}):this.props.children}}const _B=()=>{var w,S;const[t,e]=b.useState(""),[r,n]=b.useState(""),[i,l]=b.useState(""),[u,d]=b.useState(!1),{login:f}=hm(),h=li(),g=((S=(w=vn().state)==null?void 0:w.from)==null?void 0:S.pathname)||"/owner",x=async C=>{C.preventDefault(),l(""),d(!0);try{await f(t,r)?h(g,{replace:!0}):l("Invalid credentials")}catch{l("An error occurred during login")}finally{d(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:s.jsxs("div",{className:"max-w-md w-full space-y-8 p-10 bg-white rounded-xl shadow-lg",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Owner Dashboard Login"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Enter your credentials to access the store owner dashboard"})]}),i&&s.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded",role:"alert",children:s.jsx("p",{children:i})}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:x,children:[s.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"username",className:"sr-only",children:"Username"}),s.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:t,onChange:C=>e(C.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Username"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),s.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:r,onChange:C=>n(C.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Password"})]})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:u,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white ${u?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`,children:u?"Logging in...":"Sign in"})}),s.jsx("div",{className:"text-center",children:s.jsx(ly,{to:"/",className:"font-medium text-blue-600 hover:text-blue-500",children:"Return to Public Dashboard"})})]})]})})},dC=({children:t})=>{const{isAuthenticated:e}=hm(),r=vn();return e?s.jsx(s.Fragment,{children:t}):s.jsx(SC,{to:"/login",state:{from:r},replace:!0})};function RB(){const[t,e]=b.useState(!1);return b.useEffect(()=>{(async()=>{try{await Me.init(),await Me.initializeDefaultData(),e(!0)}catch(n){console.error("Failed to initialize database:",n),e(!0)}})()},[]),t?s.jsx(g9,{children:s.jsx(qR,{children:s.jsxs(vR,{children:[s.jsx(Tn,{path:"/",element:s.jsx(f9,{})}),s.jsx(Tn,{path:"/login",element:s.jsx(_B,{})}),s.jsx(Tn,{path:"/owner",element:s.jsx(dC,{children:s.jsx(EB,{children:s.jsx(AB,{})})})}),s.jsx(Tn,{path:"/owner-simple",element:s.jsx(dC,{children:s.jsx(DB,{})})}),s.jsx(Tn,{path:"/customer-form",element:s.jsx(uC,{})}),s.jsx(Tn,{path:"/customer-form/:transactionId",element:s.jsx(uC,{})}),s.jsx(Tn,{path:"/form/:sessionId",element:s.jsx(TB,{})}),s.jsx(Tn,{path:"/form-submitted",element:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center max-w-md w-full",children:[s.jsx("div",{className:"text-6xl mb-4",children:"✅"}),s.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Form Submitted Successfully"}),s.jsx("p",{className:"text-gray-600",children:"Thank you for submitting your information. The store owner will review your documents and process your registration."})]})})}),s.jsx(Tn,{path:"*",element:s.jsx(SC,{to:"/",replace:!0})})]})})}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Initializing application..."})]})})}E_.createRoot(document.getElementById("root")).render(s.jsx(cs.StrictMode,{children:s.jsx(RB,{})}));const kB=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{os as g,Rl as i,ua as t,Sr as w};
